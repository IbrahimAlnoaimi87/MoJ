/*!
 SourceCode.Forms.Controls.Web.ControlPack.Resources.Script.ImageAnnotationType.js (Embedded resource)
*/
(function(n){(typeof SourceCode=="undefined"||SourceCode===null)&&(SourceCode={});(typeof SourceCode.Forms=="undefined"||SourceCode.Forms===null)&&(SourceCode.Forms={});(typeof SourceCode.Forms.Controls=="undefined"||SourceCode.Forms.Controls===null)&&(SourceCode.Forms.Controls={});(typeof SourceCode.Forms.Controls.Web=="undefined"||SourceCode.Forms.Controls.Web===null)&&(SourceCode.Forms.Controls.Web={});(typeof SourceCode.Forms.Controls.Web.ControlPack=="undefined"||SourceCode.Forms.Controls.Web.ControlPack===null)&&(SourceCode.Forms.Controls.Web.ControlPack={});var t;SourceCode.Forms.Controls.Web.ControlPack.ImageAnnotation=t=n.extend({},SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase,{_config:{properties:[{name:"value",isDisplay:!1},{name:"isSupported",isDisplay:!1},{name:"imageName",isDisplay:!1},{name:"imagePath",isDisplay:!1},{name:"size",isDisplay:!1},{name:"imageData",isDisplay:!1}],methods:["initialized","changed","annotating","annotated","error","notSupported","takePicture","handleData"]},_utility:{getMappedProperty:function(n){var q=t._config.properties,r=q.map(function(n){return n.name.toUpperCase()}),u=r.indexOf(n.toUpperCase());return q[u]},getMappedMethod:function(n){var r=n.toUpperCase(),q=t._config.methods,u=q.map(function(n){return n.toUpperCase()}),f=u.indexOf(r);return q[f]}},execute:function(n){var q=t._utility.getMappedMethod(n.methodName);typeof q!="undefined"&&t._getInstance(n.CurrentControlId).SFCImageAnnotation(q,n)},getProperty:function(n){var q=t._getInstance(n.CurrentControlId),r=t._utility.getMappedProperty(n.property);if(typeof r!="undefined"){var u=q.SFCImageAnnotation("option",r.name),f=u===q?!1:!0;if(f)return u}},setProperty:function(n){var r=t._getInstance(n.CurrentControlId),q=t._utility.getMappedProperty(n.property),u=n.Value;typeof q!="undefined"&&r.SFCImageAnnotation("option",q,u)},displayPropertyMethod:function(n){var q=t._utility.getMappedProperty(n.propertyId);return typeof q!="undefined"?q.isDisplay:!0}})})(jQuery);
/*!
 SourceCode.Forms.Controls.Web.ControlPack.Resources.Script.ImageAnnotationWidget.js (Embedded resource)
*/
(function(n){n.widget("sfc.SFCImageAnnotation",n.sfc.baseWidget,{options:{width:"auto",isSupported:!1,imageName:"",imagePath:"",size:"",imageData:""},_config:{mobileMethod:"annotateImage",state:""},_supportedPromise:null,_create:function(){this._init();switch(this._config.state){case"runtime":var t=this,q=n(t.element).attr("id");this._supportedPromise=SourceCode.Forms.Runtime.MobileBridge.isSupported({methodName:t._config.mobileMethod}).done(function(n){t.options.isSupported=n;t.options.isSupported?t._bindEventListner():t.notSupported();t.initialized()})}},_init:function(){this._config.state=this.element.attr("data-state")},_bindEventListner:function(){var t=this,q=n(t.element).attr("id")},_setOption:function(n,t){switch(n.toUpperCase()){case"IMAGENAME":this.options.imageName=t;break;case"IMAGEPATH":this.options.imagePath=t;break;case"SIZE":this.options.size=t;break;case"IMAGEDATA":this.options.imageData=t}this._super(n,t)},_getOption:function(n){switch(n.toUpperCase()){case"IMAGENAME":return this.options.imageName;case"IMAGEPATH":return this.options.imagePath;case"SIZE":return this.options.size;case"IMAGEDATA":return this.options.imageData}return this._super(n)},_destroy:function(){this.element.removeClass(".SFC.SourceCode-Forms-Controls-Web-ContolPack-ImageAnnotation").html("")},_isValidImageAnnotation:function(n){return typeof n=="object"?typeof n.FileName!="undefined"&&typeof n.Size!="undefined"&&typeof n.Path!="undefined"&&typeof n.FileData!="undefined":!1},initialized:function(){raiseEvent(n(this.element).attr("id"),"Control","Initialized")},changed:function(){raiseEvent(this.element.attr("id"),"Control","Changed")},annotating:function(){raiseEvent(this.element.attr("id"),"Control","Annotating")},annotated:function(){raiseEvent(this.element.attr("id"),"Control","Annotated")},error:function(){raiseEvent(this.element.attr("id"),"Control","Error")},notSupported:function(){this.error();raiseEvent(this.element.attr("id"),"Control","Not Supported")},takePicture:function(){this._supportedPromise.done(this._takePicture.bind(this))},_takePicture:function(){var n=this;if(n.options.isSupported)try{n.annotating();var t=n.element.attr("id");SourceCode.Forms.Runtime.MobileBridge.sendToMobileDevice({methodName:n._config.mobileMethod}).done(function(t){n.handleData(t)});raiseEvent(t,"Control","Take Picture")}catch(q){n.annotated();n.error()}else n.notSupported()},handleData:function(n){var t=this,q=n.data;t._isValidImageAnnotation(q)?(t._setOption("imageName",q.FileName),t._setOption("size",q.Size),t._setOption("imagePath",q.Path),t._setOption("imageData",q.FileData),t.annotated(),t.changed()):(t.annotated(),t.error())}});n(document).ready(function(){n("[data-state='runtime'].SFC.SourceCode-Forms-Controls-Web-ControlPack-ImageAnnotation").each(function(){var t=this;n(t).SFCImageAnnotation()})})})(jQuery);
