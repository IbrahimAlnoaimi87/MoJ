/*!
 SourceCode.Forms.Controls.Web.ControlPack.Reporting.Chart.Resources.JS.Chart.js (Embedded resource)
*/
(function(n){var t;SourceCode.Forms.Controls.Web.ControlPack.Chart=t=n.extend({},SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase,{getDefaultValue:function(n){t.getValue(n)},getDisplay:function(n,t){var q={display:t,icon:"FullProcNameDisp"};switch(n){case"FullProcNameDisp":t===""?(q.display="(None)",q.icon=""):t!=="(All)"&&(q.display="(Custom)");break;case"Users":q.icon="Users";t===""?(q.display="(None)",q.icon=""):t!=="(All)"&&(q.display="(Custom)");break;case"ActivityName":if(q.icon="ActivityName",checkExists(t))try{var u=JSON.parse(t);strInputCode=u.DisplayName.replace(/&(lt|gt);/g,function(n,t){return t=="lt"?"<":">"});var f=strInputCode.replace(/<\/?[^>]+(>|$)/g,"");q.display=f}catch(e){var r=t.split("\\");q.display=r.length>1?r[r.length-1]:t}break;case"RangeTokenDisplay":case"RangeToken":q.icon="RangeTokenDisplay";t.indexOf(":")!=-1||t.indexOf("StartDate")!=-1||t.indexOf("_")!=-1?q.display=SourceCode.Forms.Controls.Common.DateRange.ParseToken(t).Pretty:(t==="today"||t==="yesterday")&&(q.display=SourceCode.Forms.Controls.Common.DateRange.ParseToken(t).Pretty);break;case"Status":q.icon="Status";t===""?(q.display="(None)",q.icon=""):t!=="(All)"&&(q.display="(Custom)");break;case"VisibleColumns":q.icon="VisibleColumns";t!=="(All)"&&(q.display="(Custom)");(t==="User;Action;Duration;Date Assigned;Date Completed"||t==="Folio;Start Date;Status;Duration;Priority;View Flow"||t==="Activity Name;Duration;Date Assigned;Date Completed;Priority;Status")&&(q.display="(Default)")}return q},PreviewLoad:function(q){var q=n(q).parent().parent().parent();t.loadDesignerformObject(q,!1,!1,!1,"column","ExpodeAndFade","","")},setRuleForOnSet:function(n){var q="Run";switch(n.controlType.toLowerCase()){case"workflowinstances":q="RunWorkflowInstances";break;case"activityinstances":q="Run";break;case"workflowtime":q="RunWorkflowTime";break;case"userperformance":q="RunUserPerformance"}var u=n.designerDefinition.selectSingleNode("//Views/View");if(checkExists(u)||(u=n.designerDefinition.selectSingleNode("//Forms/Form")),t.buildLoadRule(q,n,u),EventUtil.manageControlEvent(n),n.eventType==="changecontrol"){var f=n.designerDefinition.selectSingleNode("//Views/View/Controls/Control[@ID='"+n.controlId+"']/Properties"),e=f.selectSingleNode("Property[Name='Text']");checkExists(e)&&f.removeChild(e);var r=n.designerDefinition.createElement("Property"),o=n.designerDefinition.createElement("Name"),s=n.designerDefinition.createElement("Value"),h=n.designerDefinition.createElement("DisplayValue"),c=n.designerDefinition.createCDATASection(""),l=n.designerDefinition.createCDATASection("Text");s.appendChild(c);h.appendChild(c);o.appendChild(l);r.appendChild(h);r.appendChild(s);r.appendChild(o);f.appendChild(r)}},buildLoadRule:function(q,r,u){var s=SourceCode.Forms.Designers.View.ViewDesigner,f=r.designerType==="form";checkExists(f)||(f=!1);var e=n(u.selectSingleNode("//Controls/Control[@ID='"+r.controlId+"']/Properties/Property[(Name/text()='ControlName')]/Value")).text();if(f){if(typeof e=="undefined")return;try{var o={refMethod:q,controlid:r.controlId,controlname:e,parentcontrol:"",prevparentcontrol:"",context:r};t.createDefaultFormInitRule(o)}catch(h){return}}else try{var o={refMethod:q,controlid:r.controlId,controlname:e,parentcontrol:"",prevparentcontrol:"",context:r};t.createDefaultViewInitRule(o)}catch(h){return}},seriesClicked:function(t,q){var r=t.get_id(),u=r.replace("_k2HtmlChartPanel",""),f=n("#"+u);f.SFCReportingChart("seriesClicked",t,q)},seriesHover:function(t,q){var r=t.get_id(),u=r.replace("_k2HtmlChartPanel",""),f=n("#"+u);f.SFCReportingChart("seriesHover",t,q)},loadDesignerform:function(q){var r=n("#"+q),u={};u.CurrentControlId=r.attr("id");t.LoadWidget(u);r.SFCReportingChart("createTelerikChart");parent.parent().hasClass("form-control")||parent.overlay()},loadDesignerformObject:function(q){var r=q;r.attr("id",Math.random()*16);r.addClass("viewOnForm");({}).CurrentControlId=r.attr("id");t.LoadWidget(r);r.SFCReportingChart("createTelerikChartDesigner");r.SFCReportingChart("reRenderChart");n("#FormDesignerLayoutPaneContainer").on("panecontainerresize",function(){for(var q=n(".k-chart"),t=0;t<q.length;t++){var r=n(q[t]).parent().parent(),f=n(q[t]).parent().width();if(n("#"+r.attr("id")+"_ChartDiv").length>0){var u=n("#"+r.attr("id")+"_ChartDiv").data().kendoChart;u!=null&&(u.options.chartArea.width=f,r.SFCReportingChart("reRenderChart"))}}})},setWidth:function(q,r){typeof r=="undefined"&&(r="100%");r=r.trim();var o=r.length>0&&r.charAt(r.length-1)==="%",h=o?"%":"px",l=q.is(".form-control"),f=q.data().type;if(checkExists(f)||(f=q.attr("controltype")),!checkExists(f))return null;f=f.toLowerCase();var a=q.find(".resizewrapper :not(.controloverlay):not(.ui-resizable-handle)").first(),e=q.find(".resizewrapper"),u=q.find(".SFC.StandardChart");if(r){var v=n(u).SFCReportingChart("option");if(r=parseFloat(r)+h,q.length>0&&(q[0].style.width=r),o){e.each(function(){this.style.width="100%"});u[0].style.width="100%";var p=u.outerWidth(!0),c=u.find(".stylewrapper").width(),y=u.find(".stylewrapper").height(),s=n("#"+u.attr("id")+"_ChartDiv").data().kendoChart;u.attr("data-width",r);s!=null&&(s.options.chartArea.width=c);t.LoadWidget(u);u.SFCReportingChart("option","width",r);u.SFCReportingChart("reRenderChart")}else{t.ResizeWrappersToWidth(q,e,u,r);var c=u.find(".stylewrapper").width(),y=u.find(".stylewrapper").height(),s=n("#"+u.attr("id")+"_ChartDiv").data().kendoChart;u.attr("data-width",r);t.LoadWidget(u);u.SFCReportingChart("option","Width",r);u.SFCReportingChart("reRenderChart")}}else t.ResizeWrappersToWidth(q,e,u,"auto");return t.setElementFlexBasisAsWidthForIE11(q),r},setHeight:function(q,r){typeof r=="undefined"&&(r="275px");r||(r="275px");r=r.trim();var s="px",l=q.is(".form-control"),f=q.data().type;if(checkExists(f)||(f=q.attr("controltype")),!checkExists(f))return null;f=f.toLowerCase();var a=q.find(".resizewrapper :not(.controloverlay):not(.ui-resizable-handle)").first(),e=q.find(".resizewrapper"),v=q.find(".stylewrapper"),u=q.find(".SFC.StandardChart");if(r){r=parseFloat(r);e.each(function(){this.style.height="100%"});n(u[0]).height(r);var c=u.outerHeight(!0);t.ResizeWrappersToHeight(q,e,u,c);var y=u.find(".stylewrapper").width(),h=u.find(".stylewrapper").height(),o=n("#"+(u.attr("id")+"_ChartDiv")).data().kendoChart;o!=null&&(o.options.chartArea.height=h);t.LoadWidget(u);u.SFCReportingChart("option","height",r+s);u.SFCReportingChart("reRenderChart")}else{r=parseFloat(r);e.each(function(){this.style.height="100%"});n(u[0]).height(r);var c=u.outerHeight(!0);t.ResizeWrappersToHeight(q,e,u,"auto");var y=u.find(".stylewrapper").width(),h=u.find(".stylewrapper").height(),o=n("#"+u.attr("id")+"_ChartDiv").data().kendoChart;o!=null&&(o.options.chartArea.height=h);t.LoadWidget(u);u.SFCReportingChart("option","height",r+s);u.SFCReportingChart("reRenderChart")}return u.outerHeight(!0)+s},execute:function(t){var u=t.methodName,q=n("#"+t.CurrentControlID),r=$find(t.CurrentControlID+"_k2HtmlChartPanel");switch(u){case"Run":case"RunWorkflowInstances":case"RunUserPerformance":case"RunWorkflowTime":q.SFCReportingChart("loadData",r,q,null);break;case"Clear":case"ClearWorkflowInstances":case"ClearUserPerformance":case"ClearWorkflowTime":q.SFCReportingChart("option","isEnabled")&&q.SFCReportingChart("clear",r,q)}},setValue:function(t){var q=n("#"+t.CurrentControlId);q.SFCReportingChart("SetControlFilter",t.Value)},ResizeWrappersToWidth:function(n,t,q,r){q[0].style.width=r;var u=q.outerWidth(!0)+"px";return t.each(function(){this.style.width=u}),n.length>0&&(n[0].style.width=n.is(":visible")?u:r),n[0].style.width},ResizeWrappersToHeight:function(n,t,q,r){q[0].style.height=r;var u=q.outerHeight(!0)+"px";t.each(function(){this.style.height=u})},LoadWidget:function(t){var q=n(t);if(q.SFCReportingChart().SFCReportingChart("option")==q){var r=q.attr("data-options"),u=JSON.parse(r);q.SFCReportingChart(u)}},getTimeStampBar:function(n,t){var e=new Date(n),q=e.getUTCHours(),r=Math.floor(n/864e5),u=e.getMinutes(),f=e.getSeconds();q<10&&(q="0"+q);r<10&&(r="0"+r);u<10&&(u="0"+u);f<10&&(f="0"+f);var n=r+":"+q+":"+u+":"+f,o=!1,s=n,h=0;return n.length>0&&(n=n.substring(0,n.length-t),o=!0,h++),o?SourceCode.Forms.Browser.msie&&document.documentMode<9?"<div title='"+s.trim()+"'>"+n.trim()+"...<\/div>":n.trim()+"...":SourceCode.Forms.Browser.msie&&document.documentMode<9?"<div title='"+s.trim()+"'>"+n.trim()+"<\/div>":n.trim()},getTimeStamp:function(t,q){var s=new Date(t),r=s.getUTCHours(),u=Math.floor(t/864e5),f=s.getMinutes(),e=s.getSeconds();if(r<10&&(r="0"+r),u<10&&(u="0"+u),f<10&&(f="0"+f),e<10&&(e="0"+e),typeof q!="undefined"){var t=u+":"+r+":"+f+":"+e,o=document.createElement("span");n(o).html(t);n(document.body).prepend(o);for(var h=!1,c=t,l=0;n(o)[0].offsetWidth>q&&t.length>0;)t=t.substring(0,t.length-1),n(o).html(t),h=!0,l++;return n(o).remove(),h?SourceCode.Forms.Browser.msie&&document.documentMode<9?"<div title='"+c.trim()+"'>"+t.trim()+"...<\/div>":t.trim()+"...":SourceCode.Forms.Browser.msie&&document.documentMode<9?"<div title='"+c.trim()+"'>"+t.trim()+"<\/div>":t.trim()}return u+":"+r+":"+f+":"+e},trimLabel:function(t,q){var r=n(document.createElement("span"));r.html(t);var e=n(document.body);e.prepend(r);for(var u=!1,f=t,o=0,s=q-33;r[0].offsetWidth>s&&t.length>0;)t=t.substring(0,t.length-1),r.html(t),u=!0,o++;return r.remove(),u?SourceCode.Forms.Browser.msie&&document.documentMode<9?"<div title='"+f.trim()+"'>"+t.trim()+"...<\/div>":t.trim()+"...":SourceCode.Forms.Browser.msie&&document.documentMode<9?"<div title='"+f.trim()+"'>"+t.trim()+"<\/div>":t.trim()},trimLabelBar:function(t,q){var u=t,e=0,r=n(document.createElement("span")),u=t,f=!1;r.html(t);var o=n(document.body);for(o.prepend(r);r[0].offsetWidth>q&&t.length>0;)t=t.substring(0,t.length-1),r.html(t),f=!0,e++;return r.remove(),f?SourceCode.Forms.Browser.msie&&document.documentMode<9?"<span title='"+u.trim()+"'>"+t.trim()+"...<\/span>":t.trim()+"...":SourceCode.Forms.Browser.msie&&document.documentMode<9?"<span title='"+u.trim()+"'>"+t.trim()+"<\/span>":t.trim()},setGroupBy:function(n,q){var r=n.find(".SFC");t._setProperty(r,"rangeGroup",q)},setRange:function(n,q){var r=n.find(".SFC");t._setProperty(r,"rangeToken",q)},setShowDateRange:function(n,q){var r=n.find(".SFC");t._setProperty(r,"showDateRange",q)},setTitle:function(n,q){var r=n.find(".SFC");t._setProperty(r,"text",q)},setEffect:function(n,q){var r=n.find(".SFC");t._setProperty(r,"selectEffect",q)},designTimeRender:function(q,r){var f=q.find(".SFC");t.LoadWidget(f);n(f[0]).SFCReportingChart("option","ChartType",r);var u=n(f[0]).SFCReportingChart("option","chart");u.data().kendoChart.options.chartArea.width=f.find(".stylewrapper").width();u.data().kendoChart.options.chartArea.height=f.find(".stylewrapper").height();u.data().kendoChart.options.categoryAxis.categories=["W1","W2","W3"];u.data().kendoChart.options.series=[{explodeField:"explode",categoryField:"category",name:"series_1",type:r.toLowerCase(),data:[{category:"W1",value:60,explode:!1},{category:"W2",value:40,explode:!0},{category:"W3",value:20,explode:!1}]}];u.data().kendoChart.options.series[0].labels={};u.data().kendoChart.options.series[0].highlight={};u.data().kendoChart.options.series[0].highlight.visible=!1;u.data().kendoChart.options.series[0].labels.template="#= category #";n(f[0]).SFCReportingChart("reRenderChart");n(f[0]).find(".radhtmlchartsubtitle").eq(0).text("Last 90 Days")},setChartType:function(n,q){var r=n.find(".SFC");t._setProperty(r,"chartType",q)},setAngle:function(n,q){var r=n.find(".SFC");t._setProperty(r,"labelsOrientation",q)},setIsVisible:function(n,t){var r=n.find(".SFC"),q=["true","yes","1"].contains(t);SourceCode.Forms.Controls.Base.ControlType.setVisible(n,q)},setIsEnabled:function(n,q){var r=n.find(".SFC");t._setProperty(r,"isEnabled",q)},setIsReadOnly:function(n,q){var r=n.find(".SFC");t._setProperty(r,"isReadOnly",q)},setYValue:function(n,q){var r=n.find(".SFC");t._setProperty(r,"yValue",q)},setMajorGridLines:function(n,q){var r=n.find(".SFC");t._setProperty(r,"gridLines",q)},setAltLines:function(n,q){var r=n.find(".SFC");t._setProperty(r,"altLines",q)},setStyles:function(q,r){var s=q.find(".controlwrapper").first();s!=null&&(s.attr("id",q.attr("id")),s.attr("style","display:none;"));var f=q.find(".stylewrapper"),a=q.find(".resizewrapper");a.each(function(){this.style.width="100%"});var e=f,v={border:e,background:e,margin:e,padding:e};StyleHelper.setStyles(v,r);var u=q.find(".SFC.StandardChart");if(q.attr("id")=="StyleBuilderPreviewPanelContent"){var h=SourceCode.Forms.Designers[SourceCode.Forms.Designers.Common.getDefinitionNode().tagName].Styles._getSelectedControl(),c=h.find(".SFC").SFCReportingChart("option");q.width(f.outerWidth(!0));q.height("230px");var o=q.parent();o.width("350px");o.height("230px");u.height("230px");f[0].style.width="auto";f[0].style.height="auto";t._setProperty(u,"style",r);t._setProperty(u,"height","230px");t._setProperty(u,"width",f.width());t.designTimeRender(q,c.chartType);n(q).find(".radhtmlchartsubtitle").eq(0).text("Last 90 Days")}else if(q.hasClass("condtional-format-preview")){var h=SourceCode.Forms.Designers[SourceCode.Forms.Designers.Common.getDefinitionNode().tagName].Styles._getSelectedControl(),c=h.find(".SFC").SFCReportingChart("option");f[0].style.width="auto";f[0].style.height="auto";t._setProperty(u,"style",r);t.designTimeRender(q,c.chartType);q.width(f.outerWidth(!0));q.height(f.outerHeight(!0));var o=q.parent();o.width(f.outerWidth(!0));o.height(f.outerHeight(!0))}else{var v=n(u).SFCReportingChart("option");f[0].style.width="auto";f[0].style.height="auto";var y=u.find(".stylewrapper").width(),p=u.find(".stylewrapper").height(),l=n("#"+u.attr("id")+"_ChartDiv").data().kendoChart;if(t._setProperty(u,"style",r),l.options.chartArea.height=p,l.options.chartArea.width=y,u.SFCReportingChart("reRenderChart"),n(u).parent().hasClass("form-control"))n("#FormDesignerLayoutPaneContainer").on("panecontainerresize",function(){for(var q=n(".k-chart"),t=0;t<q.length;t++){u=n(q[t]).parent().parent();var f=n(q[t]).parent().width();if(n("#"+u.attr("id")+"_ChartDiv").length>0){var r=n("#"+u.attr("id")+"_ChartDiv").data().kendoChart;r!=null&&(r.options.chartArea.width=f,u.SFCReportingChart("reRenderChart"))}}})}},shouldRenderProperty:function(n){return n.subDesignerType==="propertygrid"?!1:!0}});n.widget("sfc.SFCReportingChart",n.sfc.baseWidget,{options:{selectEffect:"explodeandfade",gridLines:!1,selectedRange:"",cleared:!1,labelsOrientation:0,isvisible:!0,isparentvisible:!0,yValue:"instancecount",showSystemValues:!1,text:"",showDateRange:!0,status:"(All)",startedOnly:"participated",participation:"all",chartControl:"ActivityInstances",selectedVersion:"-1",activityName:"",activityNameShort:"",activityDisplay:"",usersFQN:"(All)",dataField:"ActName",controltype:"workflowinstances",chartType:"column",dateText:"",height:"275px",width:"100%",workflowDisplay:"combined",fullSpread:!1,fullProcName:"(All)",fullProcNameAct:"",fullClock:!1,previous:{},rangeToken:"last_90_days",rangeGroup:"week",text:"",transitions:!0,dimCheck:"",showTitle:!0,emptySet:!0,altLines:!1,selectedProc:-1,versionNumber:-1,chartControlTypeOverRide:"",waterMark:"Default",resizeTimeout:null,style:SourceCode.Forms.Controls.Base.emptyStylesNode,value:"",valueProperty:"",running:!1,runtime:!1},methodQueue:[],requesting:!1,_create:function(){var t=this;if(this.options.designtime=this.element.hasClass("designtime"),this.options.preview=this.element.hasClass("preview"),this.options.runtime=!this.options.designtime&&!this.options.preview,this.base._create.apply(this,arguments),this.computedWidth=0,this.specialCharsRegex=/[\ \\\\\:\!\@\#\$\%\^\&\*\@\)\(+=\._-]/g,this.options.controlname=this.element.attr("name"),this.options.controltype=this.element.attr("data-controltype").toLowerCase(),this.element.find(".loadSVG").remove(),this.options.tabTimeout=null,this.methodQueue=[],this.options.waterMark==="Default"&&(this.options.waterMark=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.NoData),this.options.designtime||this.options.preview){this.createTelerikChart();this.options.controltype.toLowerCase()=="workflowtime"&&this.setGroupBy();n(window).on("resize",function(){if(t.element.find(".stylewrapper").length>0){var n=t.options.chart;checkExists(n.data().kendoChart)&&(n.data().kendoChart.options.chartArea.width=t.element.find(".stylewrapper").width(),t.reRenderChart())}});this.BindThemeChange();this.resizeChartDesigner()}else{var q=$find(this.element.attr("id")+"_k2HtmlChartPanel");this.options.chart=q;this.initializeRuntimeChart(q);var f=this.element.width()*.2;q._chartObject.options.valueAxis.title.text="";q._chartObject.options.valueAxis.labels.visible=!1;t.addWaterMark();this.options.chartType==="column"&&(q._chartObject.options.chartArea.margin={},q._chartObject.options.chartArea.margin.left=-5);this.options.yValue.toLowerCase()=="duration"&&(this.options.chart._chartObject.options.valueAxis.labels.template=this.options.chartType==="column"&&this.options.isVisible&&this.options.isParentVisible&&f>0?kendo.template("#= SourceCode.Forms.Controls.Web.ControlPack.Chart.getTimeStamp(value,"+f+")  # "):kendo.template("#= SourceCode.Forms.Controls.Web.ControlPack.Chart.getTimeStamp(value)  # "));this.options.fullprocnamedisp=this.options.fullProcName;this.options.users=this.options.usersFQN;this.options.activityNameShort=this.options.activityName;this.options.activityName=this.options.fullProcName+"\\"+this.options.activityName;this.options.rangetokendisplay=this.options.rangeToken;var r=n(window).width(),u=n(window).height(),e="";n(window).on("resize",function(){var e=function(){t.resize()},q=n(window).width(),f=n(window).height();(r!=q||u!=f)&&(window.clearTimeout(t.options.resizeTimeout),t.options.resizeTimeout=window.setTimeout(e,10));r=q;u=f});n(document).on("panelexpand",".panel",function(){var o=function(){t.resize()},q=n(window).width(),f=n(window).height();(r!=q||u!=f)&&(window.clearTimeout(e),e=window.setTimeout(o,10));r=q;u=f;t.setStyles();t.resize()});n(document).on("click","ul.tab-box-tabs .tab",function(){t.setupColumns();clearTimeout(t.options.tabTimeout);t.options.tabTimeout=setTimeout(function(){t.resize()},0)});this.resizeChart();var o=n(q._chartObject.element.children()[0]);t.SetUpTitle(o,this.element);q._chartObject.options.categoryAxis.field=this.options.dataField;q._chartObject.dataSource.data([{}]);t.setStyles();t.addWaterMark()}this.options.previous=n.extend({},this.options)},buildLoadRule:function(q){var o=SourceCode.Forms.Designers.View.ViewDesigner,r=0,f=n("#FormDesigner").is(":visible");if(checkExists(f)||(f=!1),!this.element.hasClass("viewOnForm")){var e=this.element.attr("Name"),u="";if(f){if(typeof e=="undefined")return;try{var s=parseXML(SourceCode.Forms.Designers.Form._getControls()).selectSingleNode("Items/Item[@Name='"+e+"']");r=s.getAttribute("Guid");u=s.getAttribute("SubType");var h={refMethod:q,controlid:r,controlname:u,parentcontrol:"",prevparentcontrol:""};t.createDefaultFormInitRule(h)}catch(c){return}}else try{r=o.View.viewDefinitionXML.selectSingleNode("//Controls/Control[Name/text()='"+e+"']").getAttribute("ID");u=o._getControlProperty(r,"ControlName");var h={refMethod:q,controlid:r,controlname:u,parentcontrol:"",prevparentcontrol:""};t.createDefaultViewInitRule(h)}catch(c){return}}},resizeChart:function(){var t=this,e=this.element[0],r=this.element.parents().closest(".formcontrol")[0],q=this.element.parents().closest(".formpanel")[0];if(typeof WebKitMutationObserver!="undefined"){var u=new WebKitMutationObserver(function(){setTimeout(function(){t.refreshChart()},0)}),f={attributes:!0,childList:!0};typeof q!="undefined"&&u.observe(q,f);typeof r!="undefined"&&u.observe(r,f)}else if(SourceCode.Forms.Browser.msie){if(typeof r!="undefined")if(SourceCode.Forms.Browser.version!=="11.0")r.attachEvent("onpropertychange",function(){setTimeout(function(){t.refreshChart()},0)});else{var u=new MutationObserver(function(){setTimeout(function(){t.refreshChart()},0)}),f={attributes:!0,childList:!0};u.observe(r,f)}if(typeof q!="undefined")if(SourceCode.Forms.Browser.version!=="11.0")q.attachEvent("onpropertychange",function(){setTimeout(function(){t.refreshChart()},0)});else{var u=new MutationObserver(function(){setTimeout(function(){t.refreshChart()},0)}),f={attributes:!0,childList:!0};typeof q!="undefined"&&u.observe(q,f)}}else if(SourceCode.Forms.Browser.webkit){n(document).on("click",".tab",function(){setTimeout(function(){t.refreshChart()},0)});n(this.element.find(".stylewrapper")).on("resize",function(){var n=t.options.chart;t.element.find(".stylewrapper")[0].height="auto";t.element.find(".stylewrapper")[0].width="auto";n.set_width(t.element.find(".stylewrapper").width());n.set_height(t.element.find(".stylewrapper").height());setTimeout(function(){t.refreshChart()},0)})}else if(typeof MutationObserver!="undefined"){var u=new MutationObserver(function(){setTimeout(function(){t.refreshChart()},0)}),f={attributes:!0,childList:!0};typeof q!="undefined"&&u.observe(q,f);typeof r!="undefined"&&u.observe(r,f)}},computedWidth:0,refreshChart:function(){var r=this.element.find(".stylewrapper").innerWidth(),u=this.element.closest(".formpanel");if((!(u.length>0)||u[0].style.display!=="none")&&r!==this.computedWidth&&r!==0){var n=this,t=n.options.chart;t.set_height(n.element.find(".stylewrapper").height()-30);this.setStyles();t._chartObject.options.transitions=!1;n.setupColumns();var e=n.options.emptySet,q=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon;if(n.options.controltype==="activityinstances"&&(t._chartObject.options.series[0].tooltip.template=q.Instances+": #=dataItem.FormattedInstances#<br />"+q.DurationToolTip+": #=dataItem.FormattedDuration#<br />"+q.Workflow+": #=dataItem.FullProcName#"),e||n.options.cleared){t._chartObject.dataSource.data([{}]);var f=this.element.width()*.2;this.options.yValue.toLowerCase()=="duration"&&(this.options.chart._chartObject.options.valueAxis.labels.template=this.options.chartType==="column"&&this.options.isVisible&&this.options.isParentVisible&&f>0?kendo.template("#= SourceCode.Forms.Controls.Web.ControlPack.Chart.getTimeStamp(value,"+f+")  # "):kendo.template("#= SourceCode.Forms.Controls.Web.ControlPack.Chart.getTimeStamp(value)  # "));t._chartObject.redraw();n.addWaterMark();t._chartObject.options.transitions=this.options.transitions}}},refreshChartDesigner:function(){var n=this,t=n.options.chart;t.options.chartArea.height=n.element.find(".stylewrapper").width();n.reRenderChart()},resizeChartDesigner:function(){var t=this,f=n(".pane")[0],e=this.element.parent().parent().parent()[0],o=n("#toolMergeCellRight")[0],s=n("#vdeditorToolboxPane")[0],h=n("#pgToolBox")[0],c=n(".tab-content-wrapper")[0],l={target:f,chartMain:e,table:o,toolbox:s,formToolbox:h,testBox:c};n(document).on("click","ul.tab-box-tabs .tab",function(){var n=t.element.find(".stylewrapper"),q=t.options.chart;n.length>0&&(n[0].style.height="auto",n[0].style.width="auto",checkExists(q.data().kendoChart)||(t.createTelerikChart(),q=t.options.chart),q.data().kendoChart.options.chartArea.width=n.width(),q.data().kendoChart.options.chartArea.height=n.height(),t.reRenderChart())});if(typeof WebKitMutationObserver!="undefined"){var r=new WebKitMutationObserver(function(){var n=t.options.chart;(t.element.find(".stylewrapper")[0].height="auto",t.element.find(".stylewrapper")[0].width="auto",checkExists(n.data().kendoChart))&&(n.data().kendoChart.options.chartArea.width=t.element.find(".stylewrapper").width(),n.data().kendoChart.options.chartArea.height=t.element.find(".stylewrapper").height(),t.reRenderChart())}),u={attributes:!0,childList:!0,characterData:!0},a={attributes:!0,attributeOldValue:!0,childList:!1};typeof f!="undefined"&&r.observe(f,u);typeof o!="undefined"&&r.observe(o,u);typeof s!="undefined"&&r.observe(s,u);typeof h!="undefined"&&r.observe(h,u);typeof e!="undefined"&&r.observe(e,a);typeof c!="undefined"&&r.observe(c,a)}else if(SourceCode.Forms.Browser.msie)if(SourceCode.Forms.Browser.version==="9.0"||SourceCode.Forms.Browser.version==="10.0"){var q=this.element.find(".stylewrapper");q.length>0&&(q[0].onresize=function(){var n=t.options.chart;(q[0].height="auto",q[0].width="auto",checkExists(n.data().kendoChart))&&(n.data().kendoChart.options.chartArea.width=q.width(),n.data().kendoChart.options.chartArea.height=q.height(),t.reRenderChart())})}else this.handleResizeMutationDesigner(l);else if(SourceCode.Forms.Browser.mozilla||SourceCode.Forms.Browser.edge)this.handleResizeMutationDesigner(l);else{var q=this.element.find(".stylewrapper");if(q.length>0)q.on("resize",function(){var n=t.options.chart;(q[0].height="auto",q[0].width="auto",checkExists(n.data().kendoChart))&&(n.data().kendoChart.options.chartArea.width=q.width(),n.data().kendoChart.options.chartArea.height=q.height(),t.reRenderChart())})}},handleResizeMutationDesigner:function(n){var r=this;if(typeof MutationObserver!="undefined"){var t=new MutationObserver(function(){var t=r.options.chart,n=r.element.find(".stylewrapper");(n.length>0&&(n[0].height="auto",n[0].width="auto"),checkExists(t.data().kendoChart))&&(t.data().kendoChart.options.chartArea.width=n.width(),t.data().kendoChart.options.chartArea.height=n.height(),r.reRenderChart())}),q={attributes:!0,childList:!0,characterData:!0},u={attributes:!0,attributeOldValue:!0,childList:!1};typeof n.target!="undefined"&&t.observe(n.target,q);typeof n.table!="undefined"&&t.observe(n.table,q);typeof n.toolbox!="undefined"&&t.observe(n.toolbox,q);typeof n.formToolbox!="undefined"&&t.observe(n.formToolbox,q);typeof n.chartMain!="undefined"&&t.observe(n.chartMain,u);typeof n.testBox!="undefined"&&t.observe(n.testBox,u)}},addWaterMark:function(){if(!this.requesting){var u=this.element.find(".stylewrapper")[0].offsetWidth;this.options.chart._chartObject.dataSource.data([]);this.options.chart._chartObject.options.tooltip.visible=!1;this.options.chart.set_width(u+"px");this.options.chart._chartObject.refresh();var f=this.element.find("text"),e=this.element.find(".watermarkText");if(e.remove(),f.remove(),SourceCode.Forms.Browser.msie&&document.documentMode<9){var q=n(n(this.options.chart._chartObject.element).children()[0]),t=document.createElement("div");t.style.position="absolute";n(t).css("-ms-filter",'"progid:DXImageTransform.Microsoft.Alpha(Opacity=50)"');n(t).css("filter","alpha(opacity=50)");n(t).addClass("watermarkText");t.style.top=q.height()/2;t.innerHTML=this.options.waterMark;q.append(t);t.style.left=q.width()/2-n(t).width()/2}else{var r=n("#"+n(this.options.chart._chartObject.element).attr("id")+" > svg"),t=document.createElementNS("http://www.w3.org/2000/svg","text");t.setAttributeNS(null,"x",r.width()/2);t.setAttributeNS(null,"y",r.height()/2);t.setAttributeNS(null,"style","font: 12px");t.setAttributeNS(null,"style","font: 12px; text-anchor:middle;");t.setAttributeNS(null,"fill-opacity",.5);t.setAttributeNS(null,"class","watermarkText");var o=document.createTextNode(this.options.waterMark);t.appendChild(o);r.append(t)}}},SetControlFilter:function(n){if(!this.options.isReadOnly)switch(this.options.controltype.toLowerCase()){case"workflowinstances":case"activityinstances":case"workflowtime":this.options.fullProcName=n;break;case"userperformance":var t=n.split("\\");if(t.length>0){var q=t[0]+"\\"+t[1],r=t[t.length-1];this.options.activityName=r;this.options.fullProcName=q}}},_optionNameTransformer:function(n){n=n.toLowerCase();switch(n){case"selecteffect":n="selectEffect";break;case"selectedrange":n="selectedRange";break;case"gridlines":n="gridLines";break;case"labelsorientation":n="labelsOrientation";break;case"yvalue":n="yValue";break;case"showsystemvalues":n="showSystemValues";break;case"text":n="text";break;case"showdaterange":n="showDateRange";break;case"altlines":n="altLines";break;case"watermark":n="waterMark";break;case"status":n="status";break;case"startedonly":n="startedOnly";break;case"selectedversion":n="selectedVersion";break;case"selectedproc":n="selectedProc";break;case"participation":n="participation";break;case"versionnumber":n="versionNumber";break;case"activityname":n="activityName";break;case"activitydisplayname":n="activityDisplayName";break;case"activitynameshort":n="activityNameShort";break;case"activitydisplay":n="activityDisplay";break;case"usersfqn":n="usersFQN";break;case"charttype":n="chartType";break;case"workflowdisplay":n="workflowDisplay";break;case"fullspread":n="fullSpread";break;case"fullprocname":n="fullProcName";break;case"fullclock":n="fullClock";break;case"rangetoken":n="rangeToken";break;case"rangegroup":n="rangeGroup";break;case"transitions":n="transitions";break;case"showtitle":n="showTitle";break;case"valueproperty":n="valueProperty";break;case"activitysystemname":n="ActivitySystemName";break;default:n=this.base._optionNameTransformer(n)}return n},_optionValueConverter:function(n,t){n=n.toLowerCase();switch(n){case"altlines":case"gridlines":case"showtitle":case"showsystemvalues":case"showdaterange":case"isenabled":case"isvisible":case"isreadonly":case"transitions":t=this.base._booleanConverter(t);break;case"workflowdisplay":t=t.toLowerCase();switch(t){case"combined":case"stacked":case"seperate":break;default:t="combined"}break;case"rangegroup":t=t.toLowerCase();switch(t){case"this_month":t="month";break;case"this_week":t="week";break;case"this_quarter":t="quarter";break;case"this_year":t="year"}break;case"labelsorientation":switch(t){case"zero":t=0;break;case"ninty":t=90;break;case"twoseventy":t=270;break;case"0":t=0;break;case"90":t=90;break;case"-90":t=270;break;case"270":t=270;break;default:t=0}break;case"charttype":t=t.toLowerCase();switch(t){case"pie":case"column":case"bar":break;default:t="column"}break;case"startedonly":t=t.toLowerCase();switch(t){case"true":t="started";break;case"false":t="participated";break;case"started":case"participated":case"all":break;default:t="all"}break;case"versionnumber":t=isNaN(parseInt(t))?-1:parseInt(t);break;default:t=this.base._optionValueConverter(n,t)}return t},initializeRuntimeChart:function(n){n._chartObject.options.valueAxis.max=2;n._chartObject.options.valueAxis.majorUnit=1;n._chartObject.options.categoryAxis.line={};n._chartObject.options.categoryAxis.line.visible=!1;n._chartObject.options.categoryAxis.title.font="";n._chartObject.options.categoryAxis.labels.font="";n._chartObject.options.valueAxis.title.font="";n._chartObject.options.valueAxis.labels.font="";n._chartObject.options.valueAxis.line.visible=!1;n._chartObject.options.legend.labels.font="";n._chartObject.options.chartArea.background="rgba(0,0,0,0)";n._legendItemClick=function(n){n.preventDefault()};n._chartObject._legendItemClick=function(){};n._chartObject.redraw()},ApplyChartCss:function(){if(typeof window.ActivityInstancesChartCSS=="undefined"){var t=document.createElement("div");n(t).addClass("ActivityInstancesChart");window.ActivityInstancesChartCSS=t;document.body.appendChild(t)}},applyChanges:function(){var t=!1,u=!1;if(this.options.designtime||(this.options.controltype!="userperformance"&&(this.options.fullProcName=this.options.fullprocnamedisp),this.options.usersFQN=this.options.users,this.options.rangeToken=this.options.rangetokendisplay),this.options.activityName!==this.options.previous.activityName){var r=this.options.activityName.split("\\");try{var f={};f=JSON.parse(this.options.activityName);r=f.SystemPath.split("\\");this.options.activityName=f.SystemPath}catch(c){}if(r.length>1){for(var e="",q=0;q<r.length-1;q++)q!=0&&(e+="\\"),e+=r[q];var o=r[r.length-1];this.options.fullProcName=e;this.options.controltype!="userperformance"&&(this.options.activityName=o);this.options.ActivitySystemName=o;this.options.activityNameShort=o}else this.options.activityNameShort=this.options.activityName}if(this.options.chartType!==this.options.previous.chartType&&this.options.designtime&&(t=!0),this.options.chartType!==this.options.previous.chartType&&(this.chartTypeChanged=!0),this.options.altLines!==this.options.previous.altLines&&this.options.designtime&&(t=!0,this.options.chart.data().kendoChart.options.transitions=!1),this.options.gridLines!==this.options.previous.gridLines&&this.options.designtime&&(t=!0,this.options.chart.data().kendoChart.options.transitions=!1),this.options.rangeGroup!==this.options.previous.rangeGroup&&this.options.designtime&&(t=!0,this.options.chart.data().kendoChart.options.transitions=!1),this.options.yValue!==this.options.previous.yValue&&this.options.designtime&&(t=!0,this.options.chart.data().kendoChart.options.transitions=!1),this.options.selectEffect!==this.options.previous.selectEffect&&this.options.designtime&&(t=!0,this.options.chart.data().kendoChart.options.transitions=!1),this.options.style.xml!==this.options.previous.style.xml&&(t=!0,this.options.designtime&&(this.options.chart.data().kendoChart.options.transitions=!1),this.options.designtime||raiseEvent(this.element.attr("id"),"Control","OnChange")),this.options.labelsOrientation!==this.options.previous.labelsOrientation&&this.options.designtime&&(t=!0,this.options.chart.data().kendoChart.options.transitions=!1),this.options.usersFQN!==this.options.previous.usersFQN)try{var s=JSON.parse(this.options.usersFQN);this.options.usersFQN="";for(var q=0;q<s.length;q++)this.options.usersFQN+=q!=0?";"+s[q].fqn:s[q].fqn,q++}catch(c){}if(this.options.rangeGroup!==this.options.previous.rangeGroup&&this.options.designtime&&(this.setGroupBy(),t=!0,this.options.chart.data().kendoChart.options.transitions=!1),this.options.text!==this.options.previous.text&&this.options.designtime&&(u=!0,this.options.chart.data().kendoChart.options.transitions=!1),this.options.showDateRange!==this.options.previous.showDateRange&&this.options.designtime&&(u=!0,this.options.chart.data().kendoChart.options.transitions=!1),this.options.rangeToken!==this.options.previous.rangeToken&&this.options.designtime&&(u=!0,this.options.chart.data().kendoChart.options.transitions=!1),this.options.altLines!==this.options.previous.altLines&&this.options.designtime&&(t=!0,this.options.chart.data().kendoChart.options.transitions=!1),this.options.width===this.options.previous.width||this.options.designtime||(this.element.width(this.options.width),this.options.runtime&&this.setStyles()),this.options.height===this.options.previous.height||this.options.designtime||(this.element.height(this.options.height),this.options.runtime&&this.setStyles()),u&&this.CustomizeTitle(),t&&!u&&this.reRenderChart(),this.options.text!==this.options.previous.text&&!this.options.designtime){var h=n(this.options.chart._chartObject.element.children()[0]);this.SetUpTitle(h,this.element)}if((this.options.isVisible!==this.options.previous.isVisible||this.options.isParentVisible!==this.options.previous.isParentVisible)&&this.setVisible(),this.setEnabled(),this.setReadOnly(),this.options.style!==this.options.previous.style&&!this.options.designtime){this.setStyles();var l=this.options.chart._chartObject.dataSource.data();checkExists(this.options.started)||this.addWaterMark()}this.base.applyChanges.apply(this,arguments)},createTelerikChart:function(){var f=this,e=this.options.chartType.toLowerCase(),o=this.options.selectEffect,s=this.options.yValue,h=this.options.gridLines.toString(),c=this.element.find(".stylewrapper").width(),u=this.element.find(".stylewrapper").height(),t,r=Math.floor((1+Math.random())*65536).toString(16).substring(1),q=n("#"+this.element.attr("id")+"_ChartDiv");q.length===0&&(q=n(document.createElement("div")),this.element.find(".stylewrapper").append(q),u=this.options.height);this.element.attr("id",r);q.attr("id",r+"_ChartDiv");q.addClass("hidden");switch(this.options.controltype.toLowerCase()){case"activityinstances":t=q.kendoChart();t.data().kendoChart.options.categoryAxis.categories=["Activity 1","Activity 2","Activity 3"];t.data().kendoChart.options.series=[{explodeField:"explode",categoryField:"category",name:"series_1",type:"pie",data:[{category:"Activity 1",value:60,explode:!1},{category:"Activity 2",value:40,explode:!0},{category:"Activity 3",value:20,explode:!1}]}];t.data().kendoChart.options.series[0].labels={};t.data().kendoChart.options.series[0].highlight={};t.data().kendoChart.options.series[0].highlight.visible=!1;t.data().kendoChart.options.series[0].labels.template="#= category #";t.data().kendoChart.options.legend.visible=!1;t.data().kendoChart.redraw();break;case"workflowinstances":t=q.kendoChart();t.data().kendoChart.options.categoryAxis.categories=["Workflow 1","Workflow 2","Workflow 3"];t.data().kendoChart.options.series=[{explodeField:"explode",categoryField:"category",name:"series_1",type:"pie",data:[{category:"Workflow 1",value:60,explode:!1},{category:"Workflow 2",value:40,explode:!0},{category:"Workflow 3",value:20,explode:!1}]}];t.data().kendoChart.options.series[0].labels={};t.data().kendoChart.options.series[0].highlight={};t.data().kendoChart.options.series[0].highlight.visible=!1;t.data().kendoChart.options.series[0].labels.template="#= category #";t.data().kendoChart.options.legend.visible=!1;t.data().kendoChart.redraw();break;case"workflowtime":t=q.kendoChart();t.data().kendoChart.options.categoryAxis.categories=["Week 1","Week 2","Week 3"];t.data().kendoChart.options.series=[{explodeField:"explode",categoryField:"category",name:"series_1",type:"pie",data:[{category:"Week 1",value:60,explode:!1},{category:"Week 2",value:40,explode:!0},{category:"Week 3",value:20,explode:!1}]}];t.data().kendoChart.options.series[0].labels={};t.data().kendoChart.options.series[0].highlight={};t.data().kendoChart.options.series[0].highlight.visible=!1;t.data().kendoChart.options.series[0].labels.template="#= category #";t.data().kendoChart.options.legend.visible=!1;t.data().kendoChart.redraw();break;case"userperformance":t=q.kendoChart();t.data().kendoChart.options.categoryAxis.categories=["User 1","User 2","User 3"];t.data().kendoChart.options.series=[{explodeField:"explode",categoryField:"category",name:"series_1",type:"pie",data:[{category:"User 1",value:60,explode:!1},{category:"User 2",value:40,explode:!0},{category:"User 3",value:20,explode:!1}]}];t.data().kendoChart.options.series[0].labels={};t.data().kendoChart.options.series[0].highlight={};t.data().kendoChart.options.series[0].highlight.visible=!1;t.data().kendoChart.options.series[0].labels.template="#= category #";t.data().kendoChart.options.legend.visible=!1;t.data().kendoChart.redraw()}this.options.designtime&&(t.data().kendoChart.options.title.text=" ",t.data().kendoChart.options.title.margin={},t.data().kendoChart.options.title.margin.bottom=35);this.options.chartType==="column"?(t.data().kendoChart.options.chartArea.margin={},t.data().kendoChart.options.chartArea.margin.left=-10):delete t.data().kendoChart.options.chartArea.margin;t.data().kendoChart.options.chartArea.background="rgba(0,0,0,0)";t.data().kendoChart.options.transitions=!1;t.data().kendoChart.options.series[0].gap=parseFloat("0.2",10);t.data().kendoChart.options.categoryAxis.line={};t.data().kendoChart.options.categoryAxis.line.visible=!1;t.data().kendoChart.options.valueAxis.line.visible=!1;t.data().kendoChart.redraw();this.options.chart=t;this.reRenderChart()},SetUpTitle:function(t,q){var o=q.find(".header-wrapper"),v=this.options.fullProcName.toString().split("\\");n(o).each(function(){n(this).remove()});var s=q.find(".chartsubtitle");n(s).each(function(){n(this).remove()});var f=this.options.rangeToken,r=SourceCode.Forms.Controls.Common.DateRange.ParseToken(f);this.element.find(".stylewrapper").prepend("<div class='header-wrapper'><\/div>");var u=this.element.find(".header-wrapper"),e=n("<div class='radhtmlcharttitle charttitle'><\/div>");if(this.options.showTitle&&e.text(this.options.text),u.append(e),this.options.showDateRange)if(f.toLowerCase()!="all"){var h={formatXmlString:"<Format Type='Date'>d<\/Format>",value:SCCultureHelper.Current()._convertDateObjToUTCString(r.StartDate),formattingError:!1},c=SCCultureHelper.Current().applyFormatToControlValue(h),l={formatXmlString:"<Format Type='Date'>d<\/Format>",value:SCCultureHelper.Current()._convertDateObjToUTCString(r.EndDate),formattingError:!1},a=SCCultureHelper.Current().applyFormatToControlValue(l);u.append("<div class='radhtmlchartsubtitle chartsubtitle'>{0}({1}-{2})<\/div>".format(r.Pretty,c,a))}else u.append("<div class='radhtmlchartsubtitle chartsubtitle'>{0}<\/div>".format(r.Pretty))},mobilecheck:function(){var n=!1;return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)&&(n=!0),n},addLabelClassNameDesigner:function(){var q=this.options.chart._chartObject._plotArea.axisX.labels,r=this.options.chart._chartObject._plotArea.axisY.labels,t=n(this.options.chart._chartObject._plotArea.axisY.title.visual.observers()[0].element).find("text");t.length>0&&t[0].setAttributeNS(null,"class","radchartlabel")},addTitletoLabels:function(){if(this.options.chartType==="pie"){for(var c=this.options.chart._chartObject._plotArea.charts[0].points,t=0;t<c.length;t++)if(checkExists(c[t].label)){var v=n(c[t].label.visual._observers[0].element).find("text");v.length>0&&v[0].setAttributeNS(null,"class","radchartlabel")}return}try{var r=this.options.chart._chartObject._plotArea.axisX.labels,l=this.options.chart._chartObject._plotArea.axisY.labels;if(checkExists(this.options.chart._chartObject._plotArea.axisY.title)){var y=n(this.options.chart._chartObject._plotArea.axisY.title.visual.observers()[0].element).find("text");y.length>0&&y[0].setAttributeNS(null,"class","radchartlabel")}if(checkExists(this.options.chart._chartObject._plotArea.axisX.title)){var p=n(this.options.chart._chartObject._plotArea.axisX.title.visual.observers()[0].element).find("text");p.length>0&&p[0].setAttributeNS(null,"class","radchartlabel")}for(var t=0;t<r.length;t++){var u=r[t].visual._observers[0].element,q=r[t].value,w=r[t].text,f=document.createElementNS("http://www.w3.org/2000/svg","title");n(f).append(q);n(u).append(f);n(u).find("text")[0].setAttributeNS(null,"class","radchartlabel")}for(var t=0;t<l.length;t++){var u=l[t].visual._observers[0].element;if(n(u).find("text")[0].setAttributeNS(null,"class","radchartlabel"),this.options.yValue.toLowerCase()=="duration"||this.options.chartType==="bar"){var q=l[t].value,f=document.createElementNS("http://www.w3.org/2000/svg","title"),a=new Date(q),e=a.getUTCHours(),o=Math.floor(q/864e5),s=a.getMinutes(),h=a.getSeconds();e<10&&(e="0"+e);o<10&&(o="0"+o);s<10&&(s="0"+s);h<10&&(h="0"+h);this.options.chartType!=="bar"&&(q=o+":"+e+":"+s+":"+h);n(f).append(q);n(u).append(f)}}}catch(b){}},setChartWidth:function(t,q){if(this.options.controltype.toLowerCase()=="workflowtime"&&this.options.workflowDisplay!=="combined"&&this.options.yValue.toLowerCase()==="duration"){for(var s=100,h=t._chartObject.options.series[0].data[0].WFNames.split(";"),e=0,o=0;o<h.length;o++){var u=document.createElement("span");n(u).html(h[o]);n(document.body).prepend(u);n(u).width()>e&&(e=n(u).width());n(u).remove();s=e+35}var r=130*q.length+s+50,f=this.element.find(".stylewrapper").width();r>f&&(r=f);t.set_width(r)}else if(this.options.controltype.toLowerCase()=="workflowtime"&&this.options.workflowDisplay!=="combined"&&this.options.yValue.toLowerCase()!=="duration"){for(var s=100,h=t._chartObject.options.series[0].data[0].WFNames.split(";"),e=0,o=0;o<h.length;o++){var u=document.createElement("span");n(u).html(h[o]);n(document.body).prepend(u);n(u).width()>e&&(e=n(u).width());n(u).remove();s=e+35}var r=130*q.length+s,f=this.element.find(".stylewrapper").width();r>f&&(r=f);t.set_width(r)}else if(this.options.yValue.toLowerCase()=="duration"){var r=130*q.length+50,f=this.element.find(".stylewrapper").width();r>f&&(r=f);t.set_width(r)}else{var r=130*q.length,f=this.element.find(".stylewrapper").width();r>f&&(r=f);t.set_width(r)}},resize:function(t){var a=this.element.find(".stylewrapper").innerWidth(),g=this.element.closest(".formpanel");if((!(g.length>0)||g[0].style.display!=="none")&&a!==this.computedWidth&&a!==0){this.computedWidth=a;this.setStyles();var q=this,t=this.options.chart;t._chartObject.options.transitions=!1;var h=this.element.width()*.2;this.options.yValue.toLowerCase()=="duration"&&(this.options.chart._chartObject.options.valueAxis.labels.template=this.options.chartType==="column"&&this.options.isVisible&&this.options.isParentVisible&&h>0?kendo.template("#= SourceCode.Forms.Controls.Web.ControlPack.Chart.getTimeStamp(value,"+h+")  # "):kendo.template("#= SourceCode.Forms.Controls.Web.ControlPack.Chart.getTimeStamp(value)  # "));var ct=q.element.attr("id")+"_Series",e=0;if(q.options.width.indexOf("%")!=-1){n(q.element).css("width",q.options.width);e=n(q.element).find(".stylewrapper").width();var v=n("#"+n(t._chartObject.element).attr("id")+" > svg");!0&&(t._chartObject.options.transitions=!1,t.set_width(e),n(".k-chart").addClass("preventOverFlow"),t._chartObject.options.transitions=q.options.transitions)}q.setupColumns();var u=t._chartObject.dataSource.data();if(u.length=="1"&&q.options.started==!0&&(u[0].FormattedInstances==0||u[0]==" ")){q.addWaterMark();return}if(!q.mobilecheck()){if(n(".k-chart").removeClass("preventOverFlow"),typeof t._chartObject._plotArea.axisX!="undefined"&&q.options.chartType==="column"&&this.options.isVisible&&this.options.isParentVisible&&typeof this.options.loadedData!="undefined"){for(var u=this.options.loadedData,y=[],r=0;r<u.length;r++)y.push(u[r]);q.options.loadedData=y;t._chartObject.dataSource.data(u);t._chartObject.options.series[0].gap=0;this.setSeriesType();var ut=t._chartObject._plotArea.axisX.getSlot(0,1).width();if(ut>=120){var ft=130*u.length;ft>e?t.set_width(e):q.setChartWidth(t,u)}q.options.controltype.toLowerCase()=="workflowtime"&&q.SetupWorkflowTimeChart(y)}var v=n(t._chartObject.element.children()[0]),lt=n(window.ActivityInstancesChartCSS),et=jQuery(t._chartObject.element).children().children("g").children();this.options.chartType!=="pie"&&(et=jQuery(t._chartObject.element).children().children("g").children("g").children("g").children("g").children());var ot=jQuery(t._chartObject.element).children().find("text");jQuery(t._chartObject.element).children().children("path").attr("transform","translate(-1,1)");q.options.started==!0&&this.SetUpTitle(v,q.element);n.each(ot,function(){var t=n(this).text().split("\\");t.length>=3&&n(this).text(t[2])});var at=t._chartObject.options.series;bars2=jQuery(t._chartObject.element).children().children("g").children("g").children("g").children("g").children();bars2=bars2.length/2;SourceCode.Forms.Browser.msie&&document.documentMode<9&&(bars2=jQuery(t._chartObject.element).find("kvml\\:fill"),bars2=bars2.length/2);this.options.chartType!=="pie"&&this.setGap();var p=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon;if(this.options.controltype==="activityinstances"&&(t._chartObject.options.series[0].tooltip.template=p.Instances+": #=dataItem.FormattedInstances#<br />"+p.DurationToolTip+": #=dataItem.FormattedDuration#<br />"+p.Workflow+": #=dataItem.FullProcName#"),this.options.chartType=="column"&&(t._chartObject.options.categoryAxis.labels.rotation=this.options.labelsOrientation),t._chartObject.options.transitions=!1,q.options.chart._chartObject.redraw(),q.fixOrientation(),t._chartObject.options.transitions=q.options.transitions,v=n("#"+n(t._chartObject.element).attr("id")+" > svg"),n(v).addClass("ActivityInstancesChart"),q.setupColumns(),this.element.parent().width()===0){var e=this.element.parent().parent().parent().parent().parent().parent().innerWidth()-50;t.set_width(e)}var c=q.options.dimCheck;if(SourceCode.Forms.Browser.msie&&document.documentMode<9){if(c){var o=q.options.chart._chartObject._model.modelMap;for(var s in o){for(var l=q.element.find("[data-model-id='"+s+"']"),nt=l.find("kvml\\:fill"),tt=l.find("kvml\\:stroke"),r=0;r<nt.length;r++)nt[r].opacity="0.3";for(var w=0;w<tt.length;w++)tt[w].opacity="0.3";if(o[s].dataItem!==null&&typeof o[s].dataItem!="undefined"&&typeof o[s].dataItem.clicked!="undefined"&&o[s].dataItem.clicked){for(var qt=l.find("kvml\\:fill"),rt=l.find("kvml\\:stroke"),f=0;f<qt.length;f++)qt[f].opacity="1";for(var b=0;b<rt.length;b++)rt[b].opacity="1"}}}}else if(c.length!=0){var k=q.options.selectEffect,st=q.element.find("."+c);if(series1=jQuery(t._chartObject.element).children().children("g").children("g").children("g").children("g").children(),(k=="fade"||k=="explodeandfade"||k=="expodeandfade")&&n.each(series1,function(){q.options.chartType!=="pie"?n(this).find("path").css("opacity",".3"):n(this).css("opacity",".3")}),st.css("opacity",1),q.options.chartType=="pie"&&q.options.controltype=="workflowtime")for(var d=c.split(" "),r=0;r<series1.length;r++)if(d.length===1)n(series1[r]).find("path").eq(0).attr("data-clickid")==d[0]&&n(series1[r]).find("path").css("opacity",1);else for(var f=0;f<n(series1[r]).find("path").length;f++)n(series1[r]).find("path").eq(f).attr("data-clickid")==d[1]&&n(series1[r]).find("path").eq(f).css("opacity",1)}}var ht=q.options.emptySet;if(ht||q.options.cleared){t._chartObject.dataSource.data([{}]);var h=this.element.width()*.2;this.options.yValue.toLowerCase()=="duration"&&(this.options.chart._chartObject.options.valueAxis.labels.template=this.options.chartType==="column"&&this.options.isVisible&&this.options.isParentVisible&&h>0?kendo.template("#= SourceCode.Forms.Controls.Web.ControlPack.Chart.getTimeStamp(value,"+h+")  # "):kendo.template("#= SourceCode.Forms.Controls.Web.ControlPack.Chart.getTimeStamp(value)  # "));t._chartObject.redraw();q.addWaterMark()}t._chartObject.options.transitions=this.options.transitions}},reRenderChart:function(){var n=this.options.chart;typeof this.options.chart=="undefined"&&this.createTelerikChart();var u=this.element.find(".stylewrapper").width(),f=this.element.find(".stylewrapper").height(),e=this.options.gridLines;n.data().kendoChart.options.valueAxis.majorGridLines.visible=e;n.data().kendoChart.options.categoryAxis.majorGridLines.visible=!1;this.options.yValue=this.options.yValue.toLowerCase();n.data().kendoChart.options.valueAxis.title.font="12px Arial,Helvetica,sans-serif";n.data().kendoChart.options.valueAxis.title.margin.left=4;this.options.yValue=="instancecount"?n.data().kendoChart.options.valueAxis.title.text=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.InstanceCount:this.options.yValue=="duration"&&(n.data().kendoChart.options.valueAxis.title.text=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.DurationDays);n.data().kendoChart.options.series[0].type=this.options.chartType.toLowerCase();n.data().kendoChart.options.categoryAxis.line={};n.data().kendoChart.options.categoryAxis.line.visible=!1;n.data().kendoChart.options.valueAxis.line.visible=!1;n.data().kendoChart.options.categoryAxis.labels.visible=!0;n.data().kendoChart.options.valueAxis.labels.visible=!0;n.data().kendoChart.options.valueAxis.labels.rotation=0;n.data().kendoChart.options.categoryAxis.labels.rotation=0;this.options.chartType==="column"?(n.data().kendoChart.options.chartArea.margin={},n.data().kendoChart.options.chartArea.margin.left=0):delete n.data().kendoChart.options.chartArea.margin;this.options.chartType=="column"?n.data().kendoChart.options.categoryAxis.labels.rotation=this.options.labelsOrientation:this.options.chartType=="bar"&&(n.data().kendoChart.options.valueAxis.labels.rotation=this.options.labelsOrientation);n.data().kendoChart.options.series[0].gap=parseFloat("0.2",10);n.data().kendoChart.options.series[0].labels.visible=this.options.chartType=="pie"?!0:!1;var t=this.options.selectEffect,q=n.data().kendoChart.options.series[0].data;if(t=="explodeandfade"||t=="expodeandfade"||t=="explode")q[1].explode=!0;else for(var r=0;r<q.length;r++)q[r].explode=!1;n.data().kendoChart.options.chartArea.background="transparent";var u=isNaN(parseInt(n.data().kendoChart.options.chartArea.width))?0:parseInt(n.data().kendoChart.options.chartArea.width),f=isNaN(parseInt(n.data().kendoChart.options.chartArea.height))?0:parseInt(n.data().kendoChart.options.chartArea.height);u>0&&f>0&&n.data().kendoChart.redraw();this.CustomizeColumns()},BindThemeChange:function(){var t=this;n("body").on("SF-theme-changed",function(){t.CustomizeTitle()})},CustomizeColumns:function(){var e=this.element.attr("id"),r=this.options.selectEffect,a=this,o=this.options.chart,v=this.options.rangeToken,y=this.options.showDateRange,s=this.options.text,p=this.element.find(".stylewrapper").width(),w=this.options.height;if(typeof s=="undefined"&&(s=""),o!=null)for(var h=n("#"+e+"_ChartDiv > svg"),b=n("#"+e+"_ChartDiv > .radchartlabel"),q=n(o.data().kendoChart.element).children().children("g").children("g").children("g").children("g").children(),f=0,u=0,t=0;t<q.length;t++){if(f==1&&this.options.chartType==="pie"){f=0;continue}this.options.chartType!=="pie"?(n(q[t]).find("path").attr("class","series"+u+"ActivityInstances"),this.options.chartType==="bar"?n(q[t]).find("path").attr("transform","translate(3,-3)"):n(q[t]).find("path").attr("transform","translate(0,-3)"),n(q[t]).find("path").attr("stroke-width",4),n(q[t]).find("path").attr("stroke-linecap","square"),n(q[t]).find("path").attr("stroke-linejoin","round"),(r=="fade"||r=="explodeandfade"||r=="expodeandfade")&&t!=1&&q.length>2&&n(q[t]).find("path").attr("opacity",".3")):(n(q[t]).attr("class","series"+u+"ActivityInstances"),n(q[t+1]).attr("class","series"+u+"ActivityInstances"),n(q[t]).attr("stroke-width",1),n(q[t+1]).attr("stroke-width",1),n(q[t]).attr("style","stroke:#FFFFFF !important;"),n(q[t+1]).attr("style","stroke:#FFFFFF !important;"),(r=="fade"||r=="explodeandfade"||r=="expodeandfade")&&t!=2&&q.length>2&&(n(q[t+1]).attr("opacity",".3"),n(q[t]).attr("opacity",".3")));u+=1;f+=1}this.CustomizeTitle(h);var c=n(h),l=c.parent();l.length>0&&(l[0].style.width="100%",c.attr("width","100%"));this.element.find(".k-chart").removeClass("hidden")},CustomizeTitle:function(t){if(typeof this.options.chart=="undefined"&&this.createTelerikChart(),!t)if(checkExists(this.options.chart.data().kendoChart))var t=this.options.chart.data().kendoChart.element.find("svg");else return;var t=this.element.find("svg");this.SetUpTitle(t,this.element);var h=this.element.find(".header-wrapper"),c=h.detach();if(t.before(c),checkExists(this.options.chart.data().kendoChart)){if(checkExists(this.options.chart.data().kendoChart._model._plotArea.charts[0].points))for(var u=this.options.chart.data().kendoChart._model._plotArea.charts[0].points,q=0;q<u.length;q++)if(checkExists(u[q].label)){var r=n(u[q].label.visual._observers[0].element).find("text");n(r).length>0&&n(r)[0].setAttributeNS(null,"class","radchartlabel")}if(checkExists(this.options.chart.data().kendoChart._model._plotArea.axisY)&&checkExists(this.options.chart.data().kendoChart._model._plotArea.axisX)){var f=this.options.chart.data().kendoChart._model._plotArea.axisY.labels,e=this.options.chart.data().kendoChart._model._plotArea.axisX.labels;if(checkExists(this.options.chart.data().kendoChart._model._plotArea.axisY)&&checkExists(this.options.chart.data().kendoChart._model._plotArea.axisY.title)){var o=n(this.options.chart.data().kendoChart._model._plotArea.axisY.title.visual.observers()[0].element).find("text");o.length>0&&o[0].setAttributeNS(null,"class","radchartlabel")}if(checkExists(this.options.chart.data().kendoChart._model._plotArea.axisX)&&checkExists(this.options.chart.data().kendoChart._model._plotArea.axisX.title)){var s=n(this.options.chart.data().kendoChart._model._plotArea.axisX.title.visual.observers()[0].element).find("text");s.length>0&&s[0].setAttributeNS(null,"class","radchartlabel")}for(var q=0;q<f.length;q++){var r=f[q].visual._observers[0].element;n(r).length>0&&n(r).find("text")[0].setAttributeNS(null,"class","radchartlabel")}for(var q=0;q<e.length;q++){var r=e[q].visual._observers[0].element;n(r).length>0&&n(r).find("text")[0].setAttributeNS(null,"class","radchartlabel")}}}},destroy:function(){n(this.element).off(".SFCReportingChart");n.Widget.prototype.destroy.call(this)},seriesClicked:function(t,q){var o=this,a=this.options.workflowDisplay;if(o.options.chartType.toLowerCase()=="pie"&&(a="combined"),this.options.action.toLowerCase()==="workflowtime")if(a==="combined")this.options.selectedItem=q._dataItem[this.options.valueProperty];else{var p=this.options.valueProperty+q._dataItem.Item;this.options.selectedItem=q._dataItem[p]}else this.options.selectedItem=q._dataItem[this.options.valueProperty],this.options.activityDisplayName=q._dataItem.ActDisplayName;var v=this.element.attr("id"),s=q._dataItem.ActName,r="",e=q._dataItem[this.options.valueProperty],h=jQuery(t._chartObject.element).children().children("g").children("g").children("g").children("g").children(),u=n(q.element);if(this.options.selectedVersion=q.SelectedVersion,SourceCode.Forms.Browser.msie&&document.documentMode<9){h=jQuery(t._chartObject.element).find("kvml\\:fill");u=n(h.parent().parent()[0]).find("[data-model-id='"+n(q.element).attr("data-model-id")+"']");var f=o.options.chart._chartObject._model.modelMap;for(element in f)f[element].dataItem!==null&&typeof f[element].dataItem!="undefined"&&typeof f[element].dataItem.clicked!="undefined"&&delete f[element].dataItem.clicked;o.options.dimCheck=!0}if(q._dataItem.clicked=!0,!this.options.isReadOnly){if(s==""){var c=this.options.selectedItem.split("\\");c.length>1&&(s=c[c.length-1])}this.options.selectedRange=q.Range;this.options.controltype!="workflowtime"?r=this.options.selectedItem.replace(this.specialCharsRegex,"_")+v:this.options.controltype=="workflowtime"&&this.options.workflowDisplay=="combined"?(r=u.find("path").eq(0).attr("data-clickid"),e=q.uniqueKey,this.options.selectedRange=q.Range):(r=u.find("path").eq(0).attr("class"),e=q.uniqueKey);var l=this.options.selectEffect;(l=="fade"||l=="explodeandfade"||l=="expodeandfade")&&n.each(h,function(){SourceCode.Forms.Browser.msie&&document.documentMode<9?(this.opacity="0.3",n(this).parent().find("kvml\\:stroke").length>0&&(n(this).parent().find("kvml\\:stroke")[0].opacity=.3)):n(this).find("path").css("opacity",".3")});SourceCode.Forms.Browser.msie&&document.documentMode<9?(u.find("kvml\\:fill")[0].opacity=1,u.find("kvml\\:stroke")[0].opacity=1):u.find("path").css("opacity","1");var w=this.option.FullProcName;if(this.options.activityDisplay=s,this.options.dimCheck=r,this.options.value=this.options.selectedItem,this.options.controltype=="userperformance"){var y=q._dataItem[this.options.valueProperty].split("\\");this.options.userDisplay=y.length>0?y[1]:""}raiseEvent(v,"Control","OnClick");this.options.value!==this.options.previous.value&&(this.options.designtime||(this.options.previous.value=this.options.value,raiseEvent(this.element.attr("id"),"Control","OnChange")));this.options.controltype!="workflowtime"&&(r=e);q._seriesType=="pie"&&this.reLoad(t._chartObject,e,r)}},seriesHover:function(t,q){var f=this.options.chart,e=this,r=[];this.options.chartType==="pie"?r=f._chartObject._plotArea.charts[0].points:setTimeout(function(){r=f._chartObject._plotArea.charts[0].points;for(var t=0;t<r.length;t++)if(checkExists(r[t].visual._observers[0]))for(var u=n(r[t].visual._observers[0].element).find("path"),q=0;q<u.length;q++)n(u[q]).attr("transform","translate(0,-3)"),e.options.chartType==="bar"&&n(u[q]).attr("transform","translate(3,-3)")},0);for(var u=0;u<r.length;u++)if(r[u].options.modelId===q.element.data().modelId){var o=e.element.find(".k-tooltip");o.css("left",r[u].box.x1);break}},reLoad:function(t,q,r){for(var tt=this.element.attr("id")+"_Series",o=t.options.series[0].data,qt=n("#"+n(t.element).attr("id")+" > svg"),a=0;a<o.length;a++)o[a].ExplodeField=!1;for(var u=0;u<o.length;u++)if(o[u][this.options.clickidentifier]==q){o[u].ExplodeField=!0;break}t.redraw();var e=jQuery(t.element).children().children("g").children();SourceCode.Forms.Browser.msie&&document.documentMode<9&&(e=jQuery(t.element).find("kvml\\:fill"));var o=t.options.series;if(jQuery(t.element).children().children("path").attr("transform","translate(-1,1)"),this.setupColumns(),SourceCode.Forms.Browser.msie&&document.documentMode<9){var s=this.options.chart._chartObject._model.modelMap;for(var h in s){for(var l=this.element.find("[data-model-id='"+h+"']"),b=l.find("kvml\\:fill"),k=l.find("kvml\\:stroke"),u=0;u<b.length;u++)b[u].opacity="0.3";for(var v=0;v<k.length;v++)k[v].opacity="0.3";if(s[h].dataItem!==null&&typeof s[h].dataItem!="undefined"&&typeof s[h].dataItem.clicked!="undefined"&&s[h].dataItem.clicked){for(var d=l.find("kvml\\:fill"),g=l.find("kvml\\:stroke"),f=0;f<d.length;f++)d[f].opacity="1";for(var y=0;y<g.length;y++)g[y].opacity="1"}}}else{var nt="none";checkExists(r)&&(nt=r.replace(this.specialCharsRegex,"_")+this.element.attr("id"));var p=this.options.selectEffect;(p=="fade"||p=="explodeandfade"||p=="expodeandfade")&&n.each(e,function(){SourceCode.Forms.Browser.msie&&document.documentMode<9?(this.opacity="0.3",n(this).parent().find("kvml\\:stroke").length>0&&(n(this).parent().find("kvml\\:stroke")[0].opacity=.3)):n(this).find("path").css("opacity",".3")});var w=n("."+nt);if(this.options.controltype=="workflowtime")for(var c=r.split(" "),u=0;u<e.length;u++)if(c.length==1)for(var f=0;f<n(e[u]).find("path").length;f++)n(e[u]).find("path").eq(f).attr("data-clickid")==c[0]&&(w=n(e[u]).find("path").eq(f),this.options.dimCheck=c[0]);else for(var f=0;f<n(e[u]).find("path").length;f++)n(e[u]).find("path").eq(f).attr("data-clickid")==c[1]&&(w=n(e[u]).find("path").eq(f),this.options.dimCheck=c[1]);w.css("opacity","1");var rt=parseInt(this.element.find(".stylewrapper").width())}},clear:function(n,t,q){if(this.options.running){this.methodQueue.push({method:"clear",parameters:[n,t,q]});return}n._chartObject.dataSource.data([]);n._chartObject.options.categoryAxis.categories=[];this.loadMajorGridLines(n);n._chartObject.redraw();this.addWaterMark();this.options.cleared=!0;this.options.value=""},loadColumnBar:function(n,t,q){n._chartObject.options.series[0].type=t;n._chartObject.options.series[0].labels.visible=!1;delete n._chartObject.options.series[0].categoryField;n._chartObject.options.valueAxis.minorGridLines.visible=!1;n._chartObject.options.valueAxis.labels.visible=!0;n._chartObject.options.categoryAxis.field=this.options.dataField;n._chartObject.options.series[0].field=="InstanceCount"||n._chartObject.options.series[0].field=="Instances"?(n._chartObject.options.valueAxis.title.text=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.InstanceCount,n._chartObject.options.valueAxis.max=q+1,q<9?n._chartObject.options.valueAxis.majorUnit=1:delete n._chartObject.options.valueAxis.majorUnit):n._chartObject.options.series[0].field=="Duration"&&(n._chartObject.options.valueAxis.title.text=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Duration,delete n._chartObject.options.valueAxis.majorUnit,delete n._chartObject.options.valueAxis.max);n._chartObject.options.valueAxis.visible=!0},loadYValue:function(n){this.options.yValue.toLowerCase()=="instancecount"||this.options.yValue.toLowerCase()=="instance"?(n._chartObject.options.series[0].field="InstanceCount",n._chartObject.options.valueAxis.title.text=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.InstanceCount):this.options.yValue.toLowerCase()=="duration"&&(n._chartObject.options.series[0].field="Duration",n._chartObject.options.valueAxis.title.text=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Duration,n._chartObject.options.valueAxis.title.margin={},n._chartObject.options.valueAxis.title.margin.bottom=15,n._chartObject.options.valueAxis.title.margin.top=5,n._chartObject.options.valueAxis.title.margin.left=5,n._chartObject.options.valueAxis.title.margin.right=5)},loadMajorGridLines:function(n){n._chartObject.options.valueAxis.majorGridLines.visible=this.options.gridLines;n._chartObject.options.categoryAxis.majorGridLines.visible=!1},loadTransitions:function(n){n._chartObject.options.transitions=this.options.transitions==!0||this.options.transitions=="true"?!0:!1},loadLabelOrientation:function(n){n._chartObject.options.categoryAxis.labels.rotation=0;n._chartObject.options.valueAxis.labels.rotation=0;this.options.chartType=="column"?n._chartObject.options.categoryAxis.labels.rotation=this.options.labelsOrientation:this.options.chartType=="bar"&&(n._chartObject.options.valueAxis.labels.rotation=this.options.labelsOrientation)},loadEffect:function(n){this.options.selectEffect=="explodeandfade"||this.options.selectEffect=="explode"?(n._chartObject.options.transitions=this.options.transitions==!0||this.options.transitions=="true"?!0:!1,n._chartObject.options.series[0].explodeField="ExplodeField"):delete n._chartObject.options.series[0].explodeField},loadPie:function(n){n._chartObject.options.seriesDefaults.type="pie";n._chartObject.options.seriesDefaults.padding=55;n._chartObject.options.series[0].categoryField=this.options.dataField;n._chartObject.options.series[0].type="pie";n._chartObject.options.series[0].startAngle=45;n._chartObject.options.series[0].labels.template="#= dataItem."+this.options.dataField+" #";n._chartObject.options.series[0].labels.visible=!0;n._chartObject.options.series[0].labels.distance=25;n._chartObject.options.series[0].explodeField="ExplodeField"},loadStripesDesigner:function(){var r=n(this.options.chart.get_element()).find("svg"),f=r.find("text"),u=0,e=10,t=0,q=0,o=this.options.chart,s=this;n(f).each(function(){this.text().indexOf("Average")!=-1&&(e=parseInt(this.getAttribute("x"))+20);(this.text().indexOf("xT")!=-1||this.text().indexOf("vvvvvy")!=-1)&&(t==0?(q=parseInt(this.getAttribute("y")),t++):t==1&&(q-=parseInt(this.getAttribute("y")),t++))});n(f).each(function(){if(this.text().indexOf("xT")!=-1||this.text().indexOf("vvvvvy")!=-1){var n=document.createElementNS("http://www.w3.org/2000/svg","line");n.setAttributeNS(null,"x1",parseInt(this.getAttribute("x"))+this.getBBox().width);n.setAttributeNS(null,"y1",parseInt(this.getAttribute("y"))+7);n.setAttributeNS(null,"x2",r.width());n.setAttributeNS(null,"y2",parseInt(this.getAttribute("y"))+7);u==1?(n.setAttributeNS(null,"style","stroke:#F2F2F4;stroke-width:"+q+""),u=0):(n.setAttributeNS(null,"style","stroke:rgb(255,255,255);opacity:0;stroke-width:"+q+""),u++);r.prepend(n);(o._chartObject.options.series[0].field.indexOf("Instance")!=-1||s.options.designtime)&&this.text(this.text().replace(/xT/gi,""))}})},fixOrientation:function(){var n=this.options.chart;if(this.options.chartType!="pie"){if(typeof n._chartObject._plotArea.axisX!="undefined"&&n._chartObject._plotArea.axisX.labels.length>0){var u=n._chartObject._plotArea.axisX.getSlot(0,1).width();if(this.options.isVisible&&this.options.isParentVisible)if(this.options.chartType=="bar"&&(u=this.element.width()*.2,n._chartObject.options.categoryAxis.labels.template=kendo.template("#= SourceCode.Forms.Controls.Web.ControlPack.Chart.trimLabelBar(value,"+u+")  # ")),this.options.chartType=="column")n._chartObject.options.categoryAxis.labels.template=kendo.template("#= SourceCode.Forms.Controls.Web.ControlPack.Chart.trimLabel(value,"+u+")  # "),n._chartObject.options.categoryAxis.labels.align="center";else if(n._chartObject._plotArea.axisX.labels.length>1){var q="",r="";if(this.options.chartType==="bar"){if(n._chartObject._plotArea.axisX.labels.length>1)for(var t=0;t<n._chartObject._plotArea.axisX.labels.length;t++)if(n._chartObject.options.valueAxis.labels.rotation=this.options.labelsOrientation,n._chartObject.redraw(),q=n._chartObject._plotArea.axisX.labels[t].box.x2,typeof n._chartObject._plotArea.axisX.labels[t+1]!="undefined")if(r=n._chartObject._plotArea.axisX.labels[t+1].box.x1,r<=q){if(this.options.yValue.toLowerCase()=="duration")for(var f=1,e=n._chartObject._plotArea.axisX.labels[1].text;r<=q;){if(e.length<f)break;n._chartObject.options.valueAxis.labels.template=kendo.template("#= SourceCode.Forms.Controls.Web.ControlPack.Chart.getTimeStampBar(value, "+f+")  # ");n._chartObject.redraw();r=n._chartObject._plotArea.axisX.labels[1].box.x1;q=n._chartObject._plotArea.axisX.labels[0].box.x2;f++}break}else n._chartObject.options.valueAxis.labels.rotation=this.options.labelsOrientation}else if(n._chartObject._plotArea.axisX.labels.length>1)for(var t=0;t<n._chartObject._plotArea.axisX.labels.length;t++)if(n._chartObject.options.categoryAxis.labels.rotation=this.options.labelsOrientation,n._chartObject.redraw(),q=n._chartObject._plotArea.axisX.labels[t].box.x2,typeof n._chartObject._plotArea.axisX.labels[t+1]!="undefined")if(r=n._chartObject._plotArea.axisX.labels[t+1].box.x1,r<=q){n._chartObject.options.categoryAxis.labels.rotation=-90;break}else n._chartObject.options.categoryAxis.labels.rotation=this.options.labelsOrientation}}n._chartObject.redraw();this.setupColumns()}},setVisible:function(){if(this.options.isVisible&&this.options.isParentVisible){this.element.removeClass("hidden");this.element.height(this.options.height);this.element.find(".stylewrapper").height(this.options.height);this.setStyles();var n=this;this.options.designtime||setTimeout(function(){n.setStyles();n.resize()},0)}else this.options.designtime||this.element.addClass("hidden")},setEnabled:function(){this.options.isEnabled&&this.options.isParentEnabled?this.element.removeClass("disabled"):this.element.addClass("disabled")},setReadOnly:function(){this.options.isreadonly?this.element.addClass("readonly"):this.element.removeClass("readonly")},setGap:function(){var n=this.options.chart;if(typeof n._chartObject._plotArea.axisX!="undefined"&&n._chartObject._plotArea.axisX.labels.length>0){var q=n._chartObject._plotArea.axisX.getSlot(0,1).width(),r=n._chartObject._plotArea.axisY.getSlot(0,1).height();if(this.options.chartType==="column")n._chartObject.options.series[0].gap=parseFloat(parseFloat(15/q).toFixed(2)),this.options.workflowDisplay==="seperate"&&(n._chartObject.options.series[0].gap=parseFloat(parseFloat(25*this.options.workflowCount/q).toFixed(2)));else if(n._chartObject.options.series[0].gap=parseFloat(parseFloat(25/r).toFixed(2)),this.options.workflowDisplay==="seperate"||this.options.workflowDisplay==="stacked")for(var t=0;t<this.options.workflowCount;t++)checkExists(n._chartObject.options.series[t])&&(n._chartObject.options.series[t].gap=parseFloat(parseFloat(25*this.options.workflowCount/r).toFixed(2)))}},createTelerikChartDesigner:function(){var o=this,r=this.element.find(".stylewrapper"),s=this.options.chartType.toLowerCase(),h=this.options.selectEffect,c=this.options.yValue,l=this.options.gridLines.toString(),e=r.width(),u=r.height(),t,f=Math.floor((1+Math.random())*65536).toString(16).substring(1),q=n("#"+this.element.attr("id")+"_ChartDiv");q.length===0&&(q=n(document.createElement("div")),r.append(q),u=this.options.height);this.element.attr("id",f);q.attr("id",f+"_ChartDiv");switch(this.options.controltype.toLowerCase()){case"activityinstances":t=q.kendoChart();t.data().kendoChart.options.categoryAxis.categories=["Activity 1","Activity 2","Activity 3"];t.data().kendoChart.options.series=[{explodeField:"explode",categoryField:"category",name:"series_1",type:"pie",data:[{category:"Activity 1",value:60,explode:!1},{category:"Activity 2",value:40,explode:!0},{category:"Activity 3",value:20,explode:!1}]}];t.data().kendoChart.options.series[0].highlight={};t.data().kendoChart.options.series[0].highlight.visible=!1;t.data().kendoChart.options.series[0].labels={};t.data().kendoChart.options.series[0].labels.template="#= category #";t.data().kendoChart.options.legend.visible=!1;t.data().kendoChart.redraw();break;case"workflowinstances":t=q.kendoChart();t.data().kendoChart.options.categoryAxis.categories=["Workflow 1","Workflow 2","Workflow 3"];t.data().kendoChart.options.series=[{explodeField:"explode",categoryField:"category",name:"series_1",type:"pie",data:[{category:"Workflow 1",value:60,explode:!1},{category:"Workflow 2",value:40,explode:!0},{category:"Workflow 3",value:20,explode:!1}]}];t.data().kendoChart.options.series[0].highlight={};t.data().kendoChart.options.series[0].highlight.visible=!1;t.data().kendoChart.options.series[0].labels={};t.data().kendoChart.options.series[0].labels.template="#= category #";t.data().kendoChart.options.legend.visible=!1;t.data().kendoChart.redraw();break;case"workflowtime":t=q.kendoChart();t.data().kendoChart.options.categoryAxis.categories=["Week 1","Week 2","Week 3"];t.data().kendoChart.options.series=[{explodeField:"explode",categoryField:"category",name:"series_1",type:"pie",data:[{category:"Week 1",value:60,explode:!1},{category:"Week 2",value:40,explode:!0},{category:"Week 3",value:20,explode:!1}]}];t.data().kendoChart.options.series[0].highlight={};t.data().kendoChart.options.series[0].highlight.visible=!1;t.data().kendoChart.options.series[0].labels={};t.data().kendoChart.options.series[0].labels.template="#= category #";t.data().kendoChart.options.legend.visible=!1;t.data().kendoChart.redraw();break;case"userperformance":t=q.kendoChart();t.data().kendoChart.options.categoryAxis.categories=["User 1","User 2","User 3"];t.data().kendoChart.options.series=[{explodeField:"explode",categoryField:"category",name:"series_1",type:"pie",data:[{category:"User 1",value:60,explode:!1},{category:"User 2",value:40,explode:!0},{category:"User 3",value:20,explode:!1}]}];t.data().kendoChart.options.series[0].highlight={};t.data().kendoChart.options.series[0].highlight.visible=!1;t.data().kendoChart.options.series[0].labels={};t.data().kendoChart.options.series[0].labels.template="#= category #";t.data().kendoChart.options.legend.visible=!1;t.data().kendoChart.redraw()}t.data().kendoChart.options.chartArea.background="rgba(0,0,0,0)";t.data().kendoChart.options.title.text=" ";t.data().kendoChart.options.title.margin={};t.data().kendoChart.options.title.margin.bottom=35;t.data().kendoChart.options.transitions=!1;t.data().kendoChart.options.series[0].gap=parseFloat("0.2",10);t.data().kendoChart.options.categoryAxis.line={};t.data().kendoChart.options.categoryAxis.line.visible=!1;t.data().kendoChart.options.valueAxis.line.visible=!1;t.data().kendoChart.options.chartArea.height=parseInt(u);t.data().kendoChart.options.chartArea.width=parseInt(e);this.options.chart=t;this.reRenderChart()},addCurrentUser:function(){var n=SourceCode.Forms.Settings.User.FQN;this.options.usersFQN=n},loadData:function(t,q,r){var u=this,s=!0;this.options.dimCheck="";this.options.cleared=!1;this.requesting=!0;this.options.running=!0;switch(this.options.controltype.toLowerCase()){case"workflowinstances":this.options.action="WorkflowInstances";this.options.dataField="ProcName";this.options.clickidentifier="FullProcName";break;case"userperformance":this.options.action="UserPerformance";this.options.dataField="Destination_User";this.options.clickidentifier="Full_User";break;case"workflowtime":this.options.action="WorkflowTime";this.options.dataField="Measure";this.options.clickidentifier="uniqueKey";break;default:this.options.action="ActivityInstances";this.options.dataField="ActDisplayName";this.options.clickidentifier="FullProcActName"}var f=t;this.setupColumns(f);delete f._chartObject.options.valueAxis.majorUnit;f._chartObject.options.valueAxis.labels.visible=!0;this.options.started=!0;(this.options.startedOnly==="true"||this.options.startedOnly==="started")&&this.addCurrentUser();var e={Process:this.options.fullProcName,ActName:this.options.activityName,ActNameShort:this.options.activityNameShort,ActivitySystemName:this.options.ActivitySystemName,RangeToken:this.options.rangeToken,ShowComplete:this.options.showCompleted,ShowSystemValues:this.options.showSystemValues,CurrentSelection:"",SelectEffect:this.options.selectEffect,Users:this.options.usersFQN,Status:this.options.status,Participation:this.options.participation,StartedOnly:this.options.startedOnly,Action:this.options.action,DateGroup:this.options.rangeGroup,combined:this.options.workflowDisplay.toLowerCase()=="combined"?!0:!1,charttype:this.options.chartType,fullspread:this.options.fullSpread,fullclock:this.options.fullClock,versionnumber:this.options.versionNumber,workflowinstanceid:this.options.selectedProc};r!=null&&(e=r,e.Users=this.options.usersFQN,e.Status=this.options.status);var o="ActivityInstancesHandle.sdk";switch(this.options.controltype){case"workflowinstances":o="WorkflowInstancesHandle.sdk";break;case"userperformance":o="UserPerformanceHandler.sdk";break;case"workflowtime":o="WorkflowTimeHandle.sdk"}var h=u.element.find(".watermarkText");h.remove();u.element.append('<div class="ajaxLoader"><\/div>');q.addClass("opacity");f._chartObject.options.valueAxis.labels.visible=!1;setTimeout(function(){n.ajax({url:applicationRoot+o,dataType:"json",type:"POST",data:e,beforeSend:function(n){var t=u.element.find(".k-chart");if(u.element.find(".svgclone").length===0){var q=t.clone();q.addClass("svgclone");t.parent().append(q);t[0].style.display="none"}else{var q=u.element.find(".svgclone");q[0].style.display="";t[0].style.display="none"}SourceCode.Forms.XSRFHelper.setAntiXSRFHeader(n)},success:function(t){u.options.chart._chartObject.options.visible=!0;var r=function(){u.element.find(".k-chart")[0].style.display="";u.requesting=!1;u.element.find(".ajaxLoader").remove();q.removeClass("opacity");var p=!0;switch(u.options.chartType.toLowerCase()){case"bar":u.loadColumnBar(f,"bar",t[0]!=null?t[0].MaxInstanceCount:0,t[0]!=null?t[0].MaxDuration:0);break;case"column":u.loadColumnBar(f,"column",t[0]!=null?t[0].MaxInstanceCount:0,t[0]!=null?t[0].MaxDuration:0);break;case"pie":u.loadPie(f)}var o=!1;if(t.length>0&&typeof t[0].NoRecords!="undefined"&&(o=t[0].NoRecords=="True"?!0:!1),u.loadYValue(f),u.loadMajorGridLines(f),u.loadTransitions(f),u.loadLabelOrientation(f),u.loadEffect(f),u.fixDisplay(),t.length=="0"||o){u.options.emptySet=!0;var h=[" "],h=[],r={};r.Duration=0;r.ActName="";r.FullProcActName="No Activities";r.ExplodeField=!1;r.FormattedDuration="00:00:00:00";r.FormattedInstances=0;r.FullProcName="None";r.InstanceCount=0;r.MaxDuration=1e6;r.MaxInstanceCount=0;u.options.chartType.toLowerCase()=="pie"?h.push(r):h.push([" "]);f._chartObject.dataSource.data(h);p=!1;s=!1}else{for(var c=[],e=0;e<t.length;e++)c.push(t[e]);if(u.options.loadedData=c,f._chartObject.dataSource.data(t),u.setSeriesType(),u.loadEffect(f),f._chartObject.redraw(),f.set_width(u.element.find(".stylewrapper").width()),u.options.chartType==="column"&&u.options.isVisible&&u.options.isParentVisible&&typeof f._chartObject._plotArea.axisX!="undefined"){f._chartObject.options.series[0].gap=0;f._chartObject.redraw();var v=f._chartObject._plotArea.axisX.getSlot(0,1).width();v>=120&&u.setChartWidth(f,t)}u.options.emptySet=!1}u.loadYValue(f);switch(u.options.chartType.toLowerCase()){case"bar":u.loadColumnBar(f,"bar",t[0]!=null?t[0].MaxInstanceCount:0,t[0]!=null?t[0].MaxDuration:0);break;case"column":u.loadColumnBar(f,"column",t[0]!=null?t[0].MaxInstanceCount:0,t[0]!=null?t[0].MaxDuration:0);break;case"pie":u.loadPie(f)}if(u.loadMajorGridLines(f),u.loadTransitions(f),u.loadLabelOrientation(f),u.loadEffect(f),u.fixDisplay(),u.options.controltype.toLowerCase()=="workflowtime"&&!o){u.SetupWorkflowTimeChart(t);for(var c=[],e=0;e<t.length;e++)c.push(t[e]);u.options.loadedData=c}var l=jQuery(f._chartObject.element).children().children("g").children();if(l=jQuery(f._chartObject.element).children().children("g").children("g").children("g").children("g").children(),l=l.length/2,SourceCode.Forms.Browser.msie&&document.documentMode<9&&(l=jQuery(f._chartObject.element).find("kvml\\:fill"),l=l.length/2),f._chartObject.options.categoryAxis.line={},f._chartObject.options.categoryAxis.line.visible=!1,f._chartObject.options.valueAxis.line.visible=!1,t.length===0||o){u.options.emptySet=!0;var h=[],r={};r.Duration=0;r.ActName="";r.FullProcActName="No Activities";r.ExplodeField=!1;r.FormattedDuration="00:00:00:00";r.FormattedInstances=0;r.FullProcName="None";r.InstanceCount=0;r.MaxDuration=1e6;r.MaxInstanceCount=0;u.options.chartType.toLowerCase()=="pie"?h.push(r):h.push([" "]);f._chartObject.dataSource.data(h);p=!1;s=!1}else{if(f._chartObject.dataSource.data(t),u.loadYValue(f),u.setSeriesType(),u.options.chartType==="column"&&u.options.isVisible&&u.options.isParentVisible&&typeof f._chartObject._plotArea.axisX!="undefined"){f._chartObject.options.series[0].gap=0;var v=f._chartObject._plotArea.axisX.getSlot(0,1).width();v>120&&u.options.chartType==="column"&&u.resize()}f._chartObject.redraw();u.options.emptySet=!1}if(u.options.controltype.toLowerCase()=="workflowtime"&&!o){u.SetupWorkflowTimeChart(t);for(var c=[],e=0;e<t.length;e++)c.push(t[e]);u.options.loadedData=c}u.options.chartType==="column"?(f._chartObject.options.chartArea.margin={},f._chartObject.options.chartArea.margin.left=0):typeof f._chartObject.options.chartArea.margin!="undefined"&&delete f._chartObject.options.chartArea.margin;var y=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon;u.options.controltype=="activityinstances"&&(f._chartObject.options.series[0].tooltip.template=y.Instances+": #=dataItem.FormattedInstances#<br />"+y.DurationToolTip+": #=dataItem.FormattedDuration#<br />"+y.Workflow+": #=dataItem.FullProcName#");u.options.chartType!=="pie"&&u.setGap();u.options.chartType==="bar"&&(u.setGap(),f._chartObject.redraw());var a=n(f._chartObject.element.children()[0]),w=n(window.ActivityInstancesChartCSS);n(a).css("border",w.css("border"));n(a).css("margin-right",w.css("margin-right"));n(a).css("background-color","rgb(0,0,0,0)");(t.length==0||o)&&(u.options.emptySet=!0,u.addWaterMark());u.SetUpTitle(a,q);t.length>0&&u.options.chartType!="pie"&&u.fixOrientation();u.setupColumns(f);t.length>0&&u.options.chartType!="pie"&&u.fixOrientation();v<0&&(u.options.chartType!=="pie"||u.options.chartType==="bar")&&(u.setGap(),f._chartObject.redraw(),u.setupColumns(f));var b=o;if(b){var h=[{}];f._chartObject.dataSource.data(h);f._chartObject.redraw();a=n("#"+n(f._chartObject.element).attr("id")+" > svg");u.addWaterMark()}var a=n("#"+n(f._chartObject.element).attr("id")+" > svg"),k=u.element.find(".stylewrapper")};u.chartTypeChanged?(u.element.find(".svgclone").fadeOut("slow",function(){n(this).remove();r();u.setStyles();u.computedWidth=0}),u.chartTypeChanged=!1):(u.element.find(".svgclone").remove(),r());u.options.running=!1;u.runClearMethodQueue();raiseEvent(u.element.attr("id"),"Control","Populated")},error:function(n,t){popupManager.showError(t)}})},0)},chartTypeChanged:!1,runClearMethodQueue:function(){while(this.methodQueue.length>0){var n=this.methodQueue.shift();this[n.method].apply(this,n.parameters)}},setSeriesType:function(){for(var u=this,f=this.options.chart,q=f._chartObject.options.series,r=this.options.chartType.toLowerCase(),t=0;t<q.length;t++)q[t].type=r,r==="pie"?(q[t].labels.template="#= dataItem."+this.options.dataField+" #",q[t].labels.visible=!0,q[t].labels.distance=25):(q[t].labels.visible=!1,q[t].highlight.toggle=function(t){setTimeout(function(){if(checkExists(t.visual._observers[0]))for(var r=n(t.visual._observers[0].element).parent().find("path"),q=0;q<r.length;q++)n(r[q]).attr("transform","translate(0,-3)"),u.options.chartType==="bar"&&n(r[q]).attr("transform","translate(3,-3)")},0)},delete q[t].categoryField)},SetupWorkflowTimeChart:function(t){var o=this,e=this.options.chart,s=o.options.workflowDisplay,c=!0;if(e._chartObject.options.categoryAxis.categories=[],o.options.chartType.toLowerCase()=="pie"&&(s="combined"),o.options.rangeGroup.toLowerCase()==="today"&&t.length>0){for(var q=0;q<t.length;q++)if(typeof t[q].DayWeek!="undefined"){var y={formatXmlString:"<Format Type='Date'>DDDD<\/Format>",value:t[q]["Date"+t[q].Item],formattingError:!1},p=SCCultureHelper.Current().applyFormatToControlValue(y);if(checkExistsNotEmpty(p)||(y={formatXmlString:"<Format Type='Date'>DDDD<\/Format>",value:t[q].Date,formattingError:!1},p=SCCultureHelper.Current().applyFormatToControlValue(y)),e._chartObject.options.categoryAxis.categories.push(p),s.toLowerCase()!="combined")for(var u=t[0].WFItems.split(";"),r=0;r<u.length;r++)typeof t[q]["Duration"+u[r]]=="undefined"?(t[q]["Duration"+u[r]]=1e3,t[q]["InstanceCount"+u[r]]=.1,t[q]["FormattedDuration"+u[r]]="00:00:00:00",t[q]["FormattedInstances"+u[r]]=0,t[q]["Date"+u[r]]=t[q].Date):c=!1}}else if(o.options.rangeGroup.toLowerCase()==="hour"&&t.length>0){for(var q=0;q<t.length;q++)if(typeof t[q].Hour!="undefined"&&(e._chartObject.options.categoryAxis.categories.push(t[q].Hour),s.toLowerCase()!="combined"))for(var u=t[0].WFItems.split(";"),r=0;r<u.length;r++)typeof t[q]["Duration"+u[r]]=="undefined"?(t[q]["Duration"+u[r]]=1e3,t[q]["InstanceCount"+u[r]]=.1,t[q]["FormattedDuration"+u[r]]="00:00:00:00",t[q]["FormattedInstances"+u[r]]=0,t[q]["Date"+u[r]]=t[q].Date):c=!1}else if(o.options.rangeGroup==="week"&&t.length>0){for(var q=0;q<t.length;q++)if(typeof t[q].Week!="undefined"&&(e._chartObject.options.categoryAxis.categories.push(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Week+" "+t[q].Week),s.toLowerCase()!="combined"))for(var u=t[0].WFItems.split(";"),r=0;r<u.length;r++)typeof t[q]["Duration"+u[r]]=="undefined"?(t[q]["Duration"+u[r]]=1e3,t[q]["InstanceCount"+u[r]]=.1,t[q]["FormattedDuration"+u[r]]="00:00:00:00",t[q]["FormattedInstances"+u[r]]=0,t[q]["Date"+u[r]]=t[q].Date):c=!1}else if(o.options.rangeGroup.toLowerCase()==="month"&&t.length>0){for(var q=0;q<t.length;q++)if(typeof t[q].Month!="undefined"&&(e._chartObject.options.categoryAxis.categories.push(t[q].Month),s.toLowerCase()!="combined"))for(var u=t[0].WFItems.split(";"),r=0;r<u.length;r++)typeof t[q]["Duration"+u[r]]=="undefined"?(t[q]["Duration"+u[r]]=1e3,t[q]["InstanceCount"+u[r]]=.1,t[q]["FormattedDuration"+u[r]]="00:00:00:00",t[q]["FormattedInstances"+u[r]]=0,t[q]["Date"+u[r]]=t[q].Date):c=!1}else if(o.options.rangeGroup.toLowerCase()==="quarter"&&t.length>0){for(var q=0;q<t.length;q++)if(typeof t[q].Quarter!="undefined"&&(e._chartObject.options.categoryAxis.categories.push(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.QuarterInitial+t[q].Quarter+"("+t[q].Year+")"),s.toLowerCase()!="combined"))for(var u=t[0].WFItems.split(";"),r=0;r<u.length;r++)typeof t[q]["Duration"+u[r]]=="undefined"?(t[q]["Duration"+u[r]]=1e3,t[q]["InstanceCount"+u[r]]=.1,t[q]["FormattedDuration"+u[r]]="00:00:00:00",t[q]["FormattedInstances"+u[r]]=0,t[q]["Date"+u[r]]=t[q].Date):c=!1}else if(o.options.rangeGroup.toLowerCase()==="year"&&t.length>0)for(var q=0;q<t.length;q++)if(typeof t[q].Year!="undefined"&&(e._chartObject.options.categoryAxis.categories.push(t[q].Year),s.toLowerCase()!="combined"))for(var u=t[0].WFItems.split(";"),r=0;r<u.length;r++)typeof t[q]["Duration"+u[r]]=="undefined"?(t[q]["Duration"+u[r]]=1e3,t[q]["InstanceCount"+u[r]]=.1,t[q]["FormattedDuration"+u[r]]="00:00:00:00",t[q]["FormattedInstances"+u[r]]=0,t[q]["Date"+u[r]]=t[q].Date):c=!1;if(s.toLowerCase()!="combined"&&t.length>0){e._chartObject.options.series=[];var l=t[0].WFItems.split(";"),u=t[0].WFNames.split(";"),a=0;this.options.workflowCount=u.length;for(var w=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon,q=0;q<l.length;q++){var d=o.options.yValue,g=d=="instancecount"?"InstanceCount":"Duration";a>11&&(a=0);var b=document.createElement("div"),k=document.createElement("div");b.className="series"+a+"ActivityInstances";k.className="StandardChart";k.appendChild(b);document.body.appendChild(k);a++;var nt=n(b).css("stroke"),f=Object();f.field=g+l[q];f.data=t;f.name=u[q];o.options.workflowDisplay.toLowerCase()=="stacked"&&(f.stack=!0);f.type=o.options.chartType.toLowerCase();f.Exfield="FullProcName"+l[q];f.explodeField="ExplodeField"+l[q];f.color=nt;f.gap=parseFloat("0.05",10);f.groupNameTemplate="#= group.value + (kendo.dataviz.defined(series.name) ? ': ' + series.name : '') #";f.spacing=.4;f.tooltip={};f.overlay={};f.overlay.gradient="none";f.tooltip.background="#fff";f.tooltip.color="#000";f.tooltip.font="12px";f.spacing=parseFloat("0.05",10);f.tooltip.template=w.Instances+": #=dataItem.FormattedInstances"+l[q]+"#<br />"+w.DurationToolTip+": #=dataItem.FormattedDuration"+l[q]+"#<br />"+w.Date+": #=dataItem.Date"+l[q]+"#";f.tooltip.visible=!0;f.labels={};f.labels.font="12px Verdana, Arial, Helvetica, sans-serif";f.labels.position="outsideEnd";f.labels.visible=!1;e._chartObject.options.series.push(f)}var tt=e._chartObject.options.series.length,h=jQuery(e._chartObject.element).children().children("g").children();h=jQuery(e._chartObject.element).children().children("g").children("g").children("g").children("g").children();h=h.length/2;SourceCode.Forms.Browser.msie&&document.documentMode<9&&(h=jQuery(e._chartObject.element).find("kvml\\:fill"),h=h.length/2);for(var v=0;v<tt;v++)e._chartObject.options.series[v].gap=h*.05,e._chartObject.options.series[v].spacing=.3}if(e._chartObject.options.legend.visible=!0,s=="combined"){var h=e._chartObject.options.series[0].data.length;SourceCode.Forms.Browser.msie&&document.documentMode<9&&(h=jQuery(e._chartObject.element).find("kvml\\:fill"));e._chartObject.options.series[0].gap=h*.05;e._chartObject.options.legend.visible=!1;c=!1}return c},setGroupBy:function(){var t=this.options.rangeGroup.toLowerCase(),n=new Date,e=this.options.chart,q="Week 1",r="Week 2",u="Week 3";this.options.rangeGroup="week";t==="this_month"||t==="month"?(n.setMonth(n.getMonth()-1),q=n.toLocaleString(SourceCode.Forms.Settings.Culture,{month:"long"}),n.setMonth(n.getMonth()+1),r=n.toLocaleString(SourceCode.Forms.Settings.Culture,{month:"long"}),n.setMonth(n.getMonth()+1),u=n.toLocaleString(SourceCode.Forms.Settings.Culture,{month:"long"}),this.options.rangeGroup="month"):t==="this_year"||t==="year"?(n.setYear(n.getUTCFullYear()-1),q=n.toLocaleString(SourceCode.Forms.Settings.Culture,{year:"numeric"}),n.setYear(n.getUTCFullYear()+1),r=n.toLocaleString(SourceCode.Forms.Settings.Culture,{year:"numeric"}),n.setYear(n.getUTCFullYear()+1),u=n.toLocaleString(SourceCode.Forms.Settings.Culture,{year:"numeric"}),this.options.rangeGroup="year"):t==="today"||t==="day"?(q="Tuesday",r="Wednesday",u="Thursday",this.options.rangeGroup="day"):t==="hour"||t==="this_hour"?(q="01:00",r="02:00",u="03:00",this.options.rangeGroup="hour"):(t==="this_quarter"||t==="quarter"||t==="q")&&(q="Q1",r="Q2",u="Q3",this.options.rangeGroup="q");e.data().kendoChart.options.categoryAxis.categories=[q,r,u];var f=e.data().kendoChart.options.series[0].data;f[0].category=q;f[1].category=r;f[2].category=u},setupColumnHelper:function(t,q){var r=document.createElement("div");r.className="series"+t+"ActivityInstances";this.element.append(r);q.colors.value="transparent";q.color=n(r).css("stroke");q.type="solid";var u=n(q).parent()[0];u.StrokeColor=n(r).css("stroke");n(r).remove()},fixDisplay:function(){var n=this.options.chart;if(n._chartObject.options.series[0].field.indexOf("Instance")!=-1||this.options.designtime)n._chartObject.options.valueAxis.labels.format="{0}",delete n._chartObject.options.valueAxis.labels.template;else{var t=this.element.width()*.2;this.options.chartType==="column"&&this.options.isVisible&&this.options.isParentVisible&&t>0?(this.options.chart._chartObject.options.valueAxis.labels.template=kendo.template("#= SourceCode.Forms.Controls.Web.ControlPack.Chart.getTimeStamp(value,"+t+")  # "),this.options.chart._chartObject.options.categoryAxis.labels.align="center"):n._chartObject.options.valueAxis.labels.template=kendo.template("#= SourceCode.Forms.Controls.Web.ControlPack.Chart.getTimeStamp(value)  # ")}},specialCharsRegex:null,setupColumns:function(){var s=this.options.chart,v=s._chartObject.options.series,t=jQuery(s._chartObject.element).children().children("g").children("g").children("g").children("g").children();SourceCode.Forms.Browser.msie&&document.documentMode<9&&(t=jQuery(s._chartObject.element).find("kvml\\:fill"));var h=0,r=0,a=0,o="",p=this.element.attr("id")+"_Series",w=n(s.get_element()).find("svg"),y=this.options.workflowDisplay.toLowerCase();if(this.options.chartType.toLowerCase()==="pie"&&(y="combined"),jQuery(s._chartObject.element).children().children("path").attr("transform","translate(-1,1)"),SourceCode.Forms.Browser.msie&&document.documentMode<9)for(var f=0;f<t.length;){try{o=v[0].data[f][this.options.clickidentifier].replace(this.specialCharsRegex,"_")+this.element.attr("id")}catch(b){}t[f]!=null&&t[f].colors!=null&&t[f].colors.value!=""&&(r>11&&(r=0),this.setupColumnHelper(r,t[f],o),r++);f++}else if(y=="combined")for(var q=0;q<t.length;q++){if(this.options.chartType!=="pie")n(t[q]).find("path").attr("stroke-width",4);else{if(h==1){h=0;continue}n(t[q]).attr("stroke-width",2);var c="",l=n(t[q]).attr("style");typeof l!="undefined"&&(c=l);n(t[q]).attr("style",c+" stroke:#FFFFFF !important;")}try{o=v[0].data[a][this.options.clickidentifier].replace(this.specialCharsRegex,"_")+this.element.attr("id")}catch(b){}r>11&&(r=0);this.options.chartType!=="pie"?(n(t[q]).find("path").eq(0).removeAttr("stroke-opacity"),n(t[q]).find("path").attr("class",(this.options.controltype!="workflowtime"?o:"")+" _"+this.element.attr("id")+"_"+r+" series"+r+"ActivityInstances"),n(t[q]).find("path").addClass("series"+r+"ActivityInstances"),n(t[q]).find("path").attr("data-clickid",this.options.controltype=="workflowtime"?"_"+this.element.attr("id")+"_"+r:""),n(t[q]).find("path").attr("stroke-linecap","square"),n(t[q]).find("path").attr("stroke-linejoin","round"),n(t[q]).find("path").attr("transform","translate(0,-3)"),this.options.chartType==="bar"&&n(t[q]).find("path").attr("transform","translate(3,-3)")):(n(t[q]).removeAttr("stroke-opacity"),n(t[q+1]).removeAttr("stroke-opacity"),n(t[q]).attr("class",(this.options.controltype!="workflowtime"?o:"")+" _"+this.element.attr("id")+"_"+r+" series"+r+"ActivityInstances"),n(t[q+1]).attr("class",(this.options.controltype!="workflowtime"?o:"")+" _"+this.element.attr("id")+"_"+r+" series"+r+"ActivityInstances"),n(t[q]).addClass("series"+r+"ActivityInstances"),n(t[q+1]).addClass("series"+r+"ActivityInstances"),n(t[q]).attr("data-clickid",this.options.controltype=="workflowtime"?"_"+this.element.attr("id")+"_"+r:""),n(t[q+1]).attr("data-clickid",this.options.controltype=="workflowtime"?"_"+this.element.attr("id")+"_"+r:""));h+=1;r+=1;a++}else for(var q=0;q<t.length;q++){var e=n(t[q]),u=e.find("path");if(u.attr("stroke")===""){u.attr("class","");break}if(this.options.chartType!=="pie"){u.attr("stroke-width",4);for(var f=0;f<u.length;f++)u.eq(f).attr("stroke",u.eq(f).attr("fill"))}else{e.attr("stroke-width",2);var c="",l=e.attr("style");typeof l!="undefined"&&(c=l);u.attr("style",c+" stroke:#FFFFFF !important;")}r>11&&(r=0);u.attr("class","_"+this.element.attr("id")+"_"+r+" barInstance");h+=1;r+=1;a++;u.attr("stroke-linecap","square");u.attr("stroke-linejoin","round");u.attr("transform","translate(0,-3)");this.options.chartType==="bar"&&u.attr("transform","translate(3,-3)");e.prop("tagName")==="path"&&e.attr("class",function(){checkExists(e.attr("class"))?e.attr("class").contains("barIndicator")||e.attr("class",e.attr("class")+" barIndicator"):e.attr("class","barIndicator")})}this.addTitletoLabels()},clearValue:function(){},setStyles:function(){var f=this.options.style;if(f){if(this.options.designtime)return;var e=this.element,q=e.find(".stylewrapper"),w={border:q,background:q,margin:q,padding:q,font:q,horizontalAlign:q};StyleHelper.setStyles(w,f);q[0].style.width="auto";q[0].style.height="auto";var qt=n("#"+n(e).parent().attr("id")).innerWidth(),r=$find(this.element.attr("id")+"_k2HtmlChartPanel");if(r!=null){var t=window.getComputedStyle(q[0]),rt=parseInt(t.marginLeft),ut=parseInt(t.marginRight),o=parseInt(t.marginTop),s=parseInt(t.marginBottom),h=parseInt(t.borderTopWidth),c=parseInt(t.borderBottomWidth),b=parseInt(t.borderLeftWidth),k=parseInt(t.borderRightWidth),d=parseInt(t.paddingLeft),g=parseInt(t.paddingRight),l=parseInt(t.paddingTop),a=parseInt(t.paddingBottom),nt=parseInt(this.element.find(".charttitle").height(),10)||0,tt=parseInt(this.element.find(".chartsubtitle").height(),10)||0,v=q.height()-(nt+(tt+4)),y=this.element.find(".k-chart");if(this.element.find(".svgclone").length===0){var u=y.clone();u.addClass("svgclone");y.parent().append(u);u[0].style.display="none";u.removeClass("k-chart")}if(this.options.chartType.toLowerCase()==="pie")r.set_height(parseInt(this.options.height)-(c+h+o+s+l+a)+9),this.element.find(".k-chart").css("margin-top",v-parseInt(this.options.height)+9+(c+h+o+s+l+a)+"px");else{this.element.find(".k-chart").css("margin-top","0");r.set_height(v);var p;p=SourceCode.Forms.Browser.msie?parseInt(t.width):parseInt(t.width)-(b+k+d+g);this.options.width.indexOf("%")!==-1?this.resize():r.set_width(p)}this.options.isVisible&&this.options.isParentVisible;this.setupColumns(r)}}}});n.sfc.SFCReportingChart.prototype.base=n.sfc.baseWidget.prototype;n(document).ready(function(){try{checkExists(Telerik)}catch(t){return}checkExists(Telerik.Web.UI.RadHtmlChart)&&(Telerik.Web.UI.RadHtmlChart.prototype._seriesClick=function(t){var q=new Telerik.Web.UI.HtmlChartSeriesEventArgs(t);q.element=t.point.visual._observers[0].element;q.uniqueKey=t.dataItem.uniqueKey;var e=n(this._element).closest(".SFC").data().options.valueProperty;q.Range=typeof t.dataItem.Item!="undefined"?t.dataItem["Range"+t.dataItem.Item]:t.dataItem.Range;var r=[];if(typeof t.dataItem.WFItems!="undefined"&&(r=t.dataItem.WFItems.split(";")),typeof t.dataItem.ProcessVersion!="undefined")q.SelectedVersion=t.dataItem.ProcessVersion;else{for(var f="",u=0;u<r.length;u++)if(typeof t.dataItem["FullProcName"+r[u]]!="undefined"&&t.dataItem["FullProcName"+r[u]]===t.dataItem[e]){f=r[u];break}q.SelectedVersion=typeof t.dataItem["ProcessVersion"+f]!="undefined"?t.dataItem["ProcessVersion"+f]:"-1"}this.raiseEvent("seriesClicked",q)},Telerik.Web.UI.RadHtmlChart.prototype._seriesHover=function(n){var t=new Telerik.Web.UI.HtmlChartSeriesEventArgs(n);t.element=n.element;this.raiseEvent("seriesHovered",t)})});SourceCode.Forms.Controls.Web.ControlPack.Utils.MSAjaxReady(function(){n(".SFC.StandardChart").each(function(n,t){jQuery(t).SFCReportingChart()});typeof ControlResources.SourceCode.Forms.Controls.Web.ControlPack!="undefined"&&typeof Resources.ControlProperties!="undefined"&&(Resources.ControlProperties.InvalidLabel=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.InvalidLabel)})})(jQuery);
/*!
 SourceCode.Forms.Controls.Web.ControlPack.Reporting.Grid.JS.Grid.js (Embedded resource)
*/
(function(n,t){var q;SourceCode.Forms.Controls.Web.ControlPack.Grid=q=n.extend({},SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase,{getDefaultValue:function(n){q.getValue(n)},ExpandHierarchy:function(t,q){var r=n(t.get_element()).attr("parentid"),u=n("#"+r);u.SFCReportingGrid("ExpandHierarchy",t,q)},onRowDataBound:function(t,q){var r=n("#"+t.ClientID).attr("parentid");n("#"+r).SFCReportingGrid("boundData",t,q)},columnClick:function(t,q){var u=n("#"+n(t.get_element()).attr("parentid")),r=q.get_gridColumn(),f=r.get_dataField(),e=r.get_element();u.SFCReportingGrid("customSort",f,n(e))},changePage:function(t,q){var r=n("#"+n(t.get_element()).attr("parentid"));r.SFCReportingGrid("changePage",t,q)},cursorResize:function(t,q){var r=n("#"+n(t.get_element()).attr("parentid"));r.hasClass("SourceCode-Forms-Controls-Web-ControlPack-Reporting-WorkflowReferences-WorkflowReferences")||(q._gridColumn._element.style.cursor="col-resize")},rowClick:function(t,q){for(var u=n(t._element).find(".radgrid-selectedItem"),r=0;r<u.length;r++)n(u[r]).removeClass("radgrid-selectedItem");setTimeout(function(){var r=n(t.get_element()).parent().parent();if(r.SFCReportingGrid("option","isReadOnly")===!1&&r.SFCReportingGrid("option","firstLoadClick")===!1&&r.SFCReportingGrid("option","doubleclick")===!1)r.SFCReportingGrid("rowClick",q),raiseEvent(r.attr("id"),"Control","OnClick");else{r.SFCReportingGrid("rowClick",q);var u=r.SFCReportingGrid("option","doubleclickcounter");u++;r.SFCReportingGrid("option","doubleclickcounter",u);r.SFCReportingGrid("option","firstLoadClick",!1);u>1&&(r.SFCReportingGrid("option","doubleclick",!1),r.SFCReportingGrid("option","doubleclickcounter",0))}},200)},dblRowClick:function(t,q){var r=n(t.get_element()).parent().parent();r.SFCReportingGrid("option","isReadOnly")===!1&&(r.SFCReportingGrid("rowClick",q),r.SFCReportingGrid("option","doubleclick",!0),raiseEvent(r.attr("id"),"Control","Double-Clicked"),raiseEvent(r.attr("id"),"Control","OnDoubleClick"))},setIsVisible:function(n,t){var q=["true","yes","1"].contains(t);SourceCode.Forms.Controls.Base.ControlType.setVisible(n,q);var r=n.find(".SFC")},setIsEnabled:function(n,t){var r=["true","yes","1"].contains(t),q=n.find(".SFC");r?q.removeClass("disabled"):q.addClass("disabled")},setPageCount:function(n,t){var r=n.find(".SFC");q._setProperty(r,"pagingNumber",t)},getProperty:function(r){return r.property.toLowerCase().indexOf("visiblecolumns")!==-1?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","VisibleColumns"):r.property.toLowerCase().indexOf("column")!==-1?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("getColumn",r.property.toLowerCase()):r.property.toLowerCase()==="rangetokendisplay"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","RangeToken"):r.property.toLowerCase()==="isvisible"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","isVisible"):r.property.toLowerCase()==="isenabled"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","isEnabled"):r.property.toLowerCase()==="isreadonly"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","isReadOnly"):r.property.toLowerCase()==="styles"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","style"):r.property.toLowerCase()==="fullactivityname"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","fullactivityname"):r.property.toLowerCase()==="activityname"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","controltype")==="userperformancegrid"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","FullProcName")+"\\"+n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","ActivityName"):n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","ActivityName"):r.property.toLowerCase()==="activitydisplayname"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","activityDisplayName"):r.property.toLowerCase()==="showtitle"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","ShowTitle"):r.property.toLowerCase()==="showrange"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","ShowRange"):r.property.toLowerCase()==="procinstid"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","ProcInstID"):r.property.toLowerCase()==="selectedproc"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","WorkflowInstID"):r.property.toLowerCase()==="sortdefault"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","sortDefault"):r.property.toLowerCase()==="usepaging"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","usePaging"):r.property.toLowerCase()==="pagingnumber"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","pagingNumber"):r.property.toLowerCase()==="activityinstanceid"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","ActivityInstanceID"):r.property.toLowerCase()==="activityinstancedestinationid"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","ActivityInstanceDestinationID"):r.property.toLowerCase()==="initialvalue"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","InitialValue"):r.property.toLowerCase()==="expandsmo"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","ExpandSMO"):r.property.toLowerCase()==="users"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","UsersFQN"):r.property.toLowerCase()==="activitynames"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","ActivityNames"):r.property.toLowerCase()=="status"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","Status"):r.property.toLowerCase()==="fullprocnamedisp"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","FullProcName"):r.property.toLowerCase()==="versionnumber"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","versionNumber"):r.property.toLowerCase()==="showsystemvalues"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","showSystemValues"):r.property.toLowerCase()==="controlname"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","ControlName"):r.property.toLowerCase()==="width"?n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option","width"):r.property.toLowerCase()==="conditionalstyles"?t:n(q._getInstance(r.CurrentControlId)).SFCReportingGrid("option",r.property)},setProperty:function(t){if(t.property=="isreadonly"&&n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","isreadonly",t.Value),t.property=="Style")n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","style",t.Value);else switch(t.property){case"initialvalue":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","InitialValue",t.Value);break;case"fullprocnamedisp":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","FullProcName",t.Value);break;case"users":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","UsersFQN",t.Value);break;case"status":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","Status",t.Value);break;case"rangetoken":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","RangeToken",t.Value);break;case"rangetokendisplay":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","RangeToken",t.Value);break;case"showdaterange":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","showDateRange",t.Value);break;case"versionnumber":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","versionNumber",t.Value);break;case"showsystemvalues":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","showSystemValues",t.Value);break;case"activitynames":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","ActivityNames",t.Value);break;case"startedonly":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","StartedOnly",t.Value);break;case"expandsmo":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","ExpandSMO",t.Value);break;case"showtitle":var o=t.Value=="true"?!0:!1;n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","ShowTitle",o);break;case"showrange":var s=t.Value=="true"?!0:!1;n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","ShowRange",s);break;case"processinstanceid":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","ProcessInstanceID",t.Value);break;case"pagingnumber":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","pagingNumber",t.Value);n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("setPagingNumber");break;case"activityname":var r=t.Value.split("\\");try{var e={};e=JSON.parse(t.Value);r=e.SystemPath.split("\\")}catch(h){}if(r.length>1){for(var f="",u=0;u<r.length-1;u++)u!=0&&(f+="\\"),f+=r[u];n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","FullProcName",f);n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","ActivitySystemName",r[r.length-1]);n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","ActivityName",r[r.length-1])}else n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","ActivityName","");break;case"isvisible":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","isvisible",t.Value);break;case"isenabled":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","isenabled",t.Value);break;case"isparentvisible":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","isparentvisible",t.Value);break;case"isparentenabled":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","isparentenabled",t.Value);break;case"procinstid":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","ProcInstID",t.Value);break;case"selectedproc":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","WorkflowInstID",t.Value);break;case"width":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","Width",t.Value);n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("setStyles");break;case"height":n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option","Height",t.Value);n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("setStyles");break;default:n(q._getInstance(t.CurrentControlId)).SFCReportingGrid("option",t.property,t.Value)}},setRuleForOnSet:function(n){var t="Run";switch(n.controlType.toLowerCase()){case"activityinstancesgrid":t="RefreshActivityInstancesGrid";break;case"workflowinstancesgrid":t="RefreshWorkflowInstancesGrid";break;case"userperformancegrid":t="RefreshUserPerformanceGrid";break;case"workflowdatagrid":t="RefreshProcessDataGrid";break;case"workflowreferences":t="RefreshWorkflowReferences"}var u=n.designerDefinition.selectSingleNode("//Views/View");if(checkExists(u)||(u=n.designerDefinition.selectSingleNode("//Forms/Form")),q.buildLoadRule(t,n,u),EventUtil.manageControlEvent(n),n.eventType==="changecontrol"){var f=n.designerDefinition.selectSingleNode("//Views/View/Controls/Control[@ID='"+n.controlId+"']/Properties"),e=f.selectSingleNode("Property[Name='Text']");checkExists(e)&&f.removeChild(e);var r=n.designerDefinition.createElement("Property"),o=n.designerDefinition.createElement("Name"),s=n.designerDefinition.createElement("Value"),h=n.designerDefinition.createElement("DisplayValue"),c=n.designerDefinition.createCDATASection(""),l=n.designerDefinition.createCDATASection("Text");s.appendChild(c);h.appendChild(c);o.appendChild(l);r.appendChild(h);r.appendChild(s);r.appendChild(o);f.appendChild(r)}},buildLoadRule:function(t,r,u){var s=SourceCode.Forms.Designers.View.ViewDesigner,f=r.designerType==="form";checkExists(f)||(f=!1);var e=n(u.selectSingleNode("//Controls/Control[@ID='"+r.controlId+"']/Properties/Property[(Name/text()='ControlName')]/Value")).text();if(f){if(typeof e=="undefined")return;try{var o={refMethod:t,controlid:r.controlId,controlname:e,parentcontrol:"",prevparentcontrol:"",context:r};q.createDefaultFormInitRule(o)}catch(h){return}}else try{var o={refMethod:t,controlid:r.controlId,controlname:e,parentcontrol:"",prevparentcontrol:"",context:r};q.createDefaultViewInitRule(o)}catch(h){return}},execute:function(t){var r=t.methodName,q=n("#"+t.CurrentControlID);switch(r){case"RefreshActivityInstancesGrid":case"RefreshWorkflowInstancesGrid":case"RefreshWorkflowReferences":case"RefreshUserPerformanceGrid":case"RefreshProcessDataGrid":q.SFCReportingGrid("loadData");break;case"ClearWorkflowInstancesGrid":case"ClearUserPerformanceGrid":case"ClearProcessDataGrid":case"ClearWorkflowReferences":case"ClearActivityInstancesGrid":q.SFCReportingGrid("option","isEnabled")&&q.SFCReportingGrid("clear")}},ResizeWrappersToWidth:function(n,t,q,r){q[0].style.width=r;var u=q.outerWidth(!0)+"px";return t.each(function(){this.style.width=u}),n.length>0&&(n[0].style.width=n.is(":visible")?u:r),n[0].style.width},ResizeWrappersToHeight:function(n,t,q,r){q[0].style.height=r;var u=q.outerHeight(!0)+"px";t.each(function(){this.style.height=u});n.length>0&&(n[0].style.height=n.is(":visible")?u:r)},setWidth:function(t,r,u){typeof r=="undefined"&&(r="100%");r=r.trim();var c=r.length>0&&r.charAt(r.length-1)==="%",a=c?"%":"px",v=t.is(".form-control"),e=t.data().type;if(checkExists(e)||(e=t.attr("controltype")),!checkExists(e))return null;e=e.toLowerCase();var p=t.find(".resizewrapper :not(.controloverlay):not(.ui-resizable-handle)").first(),o=t.find(".resizewrapper"),w=n(t.find("iframe")),s="100%",y="";if(u){var l=parseXML(u);s=l.selectSingleNode('//Properties/Property[Name/text()="Width"]/Value');y=n(l.selectNodes('//Properties/Property[Name = "pagingNumber"]/Value')).text()}var f=t.find(".SFC.StandardGrid");if(r)if(r=parseFloat(r)+a,t.length>0&&(t[0].style.width=r),c){o.each(function(){this.style.width="100%"});f[0].style.width="100%";var d=f.outerWidth(!0),b=f.find(".stylewrapper").innerWidth(),k=f.find(".stylewrapper").innerHeight();if((!checkExists(s)||s.text=="")&&t.is(":visible")&&v){var h=t.data("panel");checkExists(h)&&(h.equalizeWidths(),h.equalizeHeights())}}else{q.ResizeWrappersToWidth(t,o,f,r);var b=f.find(".stylewrapper").innerWidth(),k=f.find(".stylewrapper").innerHeight()}else q.ResizeWrappersToWidth(t,o,f,"auto");return q.setElementFlexBasisAsWidthForIE11(t),f.outerWidth(!0)},setHeight:function(t,r,u){typeof r=="undefined"&&(r="375px");r=r.trim();var p=t.is(".form-control"),e=t.data().type;if(checkExists(e)||(e=t.attr("controltype")),!checkExists(e))return null;e=e.toLowerCase();var b=t.find(".resizewrapper :not(.controloverlay):not(.ui-resizable-handle)").first(),s=t.find(".resizewrapper"),k=t.find(".stylewrapper"),o=n(t.find("iframe")),h="100px",v="";if(u){var y=parseXML(u);h=y.selectSingleNode('//Properties/Property[Name/text()="Height"]/Value');v=n(y.selectNodes('//Properties/Property[Name = "pagingNumber"]/Value')).text()}var f=t.find(".SFC.StandardGrid");if(r){r=parseFloat(r);s.each(function(){this.style.height="100%"});n(f[0]).height(r);var w=f.outerHeight(!0);q.ResizeWrappersToHeight(t,s,f,w);n(t.find(".SFC.StandardGrid")).find(".stylewrapper").outerHeight(f.height(),!0);var c=f.find(".stylewrapper").innerWidth(),l=f.find(".stylewrapper").innerHeight();if(o.css("width",c),o.css("height",l),(!checkExists(h)||h.text=="")&&t.is(":visible")&&p){var a=t.data("panel");checkExists(a)&&(a.equalizeWidths(),a.equalizeHeights())}}else{q.ResizeWrappersToHeight(t,s,f,"auto");var c=f.find(".stylewrapper").innerWidth(),l=f.find(".stylewrapper").innerHeight();o.attr("src","Runtime/Runtime/GridHandler.sdk?w="+c+"&h="+l+"px&pagenum="+v+"&type=Activity");o.css("width",c);o.css("height",l)}return f.SFCReportingGrid(""),f.SFCReportingGrid("removeLastBorder"),f.outerHeight(!0)},shouldRenderProperty:function(n){return n.subDesignerType==="propertygrid"?!1:!0},setStyles:function(t,q){var o=t.find(".controlwrapper").first();o!=null&&(o.attr("id",t.attr("id")),o.attr("style","display:none;"));var f=t.find(".stylewrapper"),y=t.find(".resizewrapper"),e=f;t[0].style.height="auto";var c={border:e,background:e,margin:e,padding:e};StyleHelper.setStyles(c,q);var r=t.find(".SFC");if(t.attr("id")=="StyleBuilderPreviewPanelContent"){t.height("100%");for(var s=r.find(".rgRow"),u=0;u<3;u++)n(s[u]).remove();r.find(".UserPerfHeader")[0].innerHTML="AaYy";var h=n(document.createElement("div")),p=t.parent(),l=r.find(".RadGrid");r.height("100%");f[0].style.width="auto";f[0].style.height="auto";var a=r.find(".radgrid1-footer"),v=r.find(".UserPerfHeader").parent();h.height(f.height()-v.height()-parseInt(l.css("margin-top"))-a.height());r.find(".rgMasterTable").wrap(h)}else if(t.hasClass("condtional-format-preview")){r.find(".UserPerfHeader")[0].innerHTML="AaYy";for(var s=r.find(".rgRow"),u=0;u<5;u++)n(s[u]).remove();t.find(".SFC").SFCReportingGrid().SFCReportingGrid("computeAdjustedWidth",300)}else r.height()!=0&&n(t).find(".stylewrapper").outerHeight(r.height(),!0),f[0].style.height="100%",t.find(".SFC").SFCReportingGrid().SFCReportingGrid("computeAdjustedWidth");r.SFCReportingGrid()}});n.widget("sfc.SFCReportingGrid",n.sfc.baseWidget,{options:{FullProcName:"(All)",curPageIndex:0,newPageIndex:10,isVisible:!0,isParentVisible:!0,ProcInstID:-1,ActivityNames:"(All)",ActivitySystemName:"(None)",activityDisplayName:"",text:"",ShowTitle:!0,ShowRange:!0,RangeToken:"last_90_days",previous:{},VisibleColumns:"(All)",width:"100%",Height:"275px",pagingNumber:10,ProcCount:1,value1:"",value2:"",value3:"",ExpandSMO:!1,versionNumber:-1,showSystemValues:!1,StartedOnly:"participated",sortDefault:!0,usePaging:!0,ActivityName:"(All)",UsersFQN:"(All)",InitialValue:"nonevalue",style:"",SelectedProc:-1,firstFetch:!0,Status:"(All)",itemSize:-1,pageCount:-1,expandedPageCount:-1,actInstID:0,WorkflowInstID:-1,fullactivityname:"",style:SourceCode.Forms.Controls.Base.emptyStylesNode,firstLoadClick:!1,data:[],doubleclick:!1,doubleclickcounter:0,value:"",running:!1},methodQueue:[],_create:function(){this.options.designtime=this.element.hasClass("designtime");this.options.ControlName=this.element.attr("name");this.base._create.apply(this,arguments);var r=this.element.find(".rgExpandCol");if(n(r[0]).addClass("radgrid-gridheader radgrid-grid-column-header-cell radgrid-grid-column-headers-wrapper radgrid-grid-column-header-cell-wrapper theme-entry radgrid-grid radgrid-grid-column-header-text"),this.methodQueue=[],SourceCode.Forms.Browser.msie&&(this.element.find(".radgrid-gridheader").css("position","relative"),this.element.find(".radgrid-gridheader").css("cursor","default"),this.element.find(".rgExpandCol").css("width","35px"),this.element.find("th").find("a").css("width","100%"),this.element.find("th").find("a").css("height","100%"),this.element.find("th").find("a").css("top","5px"),this.element.find("th").find("a").css("left","0px")),!this.element.hasClass("designtime")){var t=$find(this.element.attr("id")+"_ReportingGrid");this.options.grid=t;this.updateGrid([],t);this.bindButtons();var q=this.element.find(".pagerPage"),u=t.MasterTableView;q.off("click");q.off("keydown").on("keydown",function(t){t.keyCode===13&&u.fireCommand("Page",n(this).html())});this.bindArrows();this.element.find(".TempTable").remove();t.set_visible(!0)}this.changeInputType();this.SetControlType();this.mapDisplaytoValue();var f=this.options.VisibleColumns;f=="(All)"||this.options.controltype=="workflowdatagrid"||this.options.controltype=="workflowreferencesgrid"||this.options.designtime||(this.loadVisibleColumns(t),this.element.wrap('<div class="loadFirst" style="width:100%;"><\/div>'),this.element.unwrap("div.loadFirst"));this.removeLastBorder();this.wrapHeaderText();SourceCode.Forms.Browser.msie&&document.documentMode<9&&(this.addDivSpliter(),document.body.className=document.body.className);this.UpdateColumns()},removeLastBorder:function(){for(var t=this.element.find(".radgrid-grid-column-header-text"),n=t.length-1;n>=0;n--)if(t[n].style.display!=="none"){t[n].style.borderRightWidth=0;break}},wrapHeaderText:function(){for(var q=this.element.find(".radgrid-grid-column-header-text"),t=q.length-1;t>=0;t--)n(q[t]).wrapInner("<div style='position:relative;'><\/div>")},addDivSpliter:function(){for(var r=this.element.find(".radgrid-grid-column-header-text"),q=r.length-1;q>=0;q--)if(r[q].style.display!=="none"){var t=document.createElement("div");n(t).css("position","absolute");n(t).css("top","0px");n(t).css("left","100%");n(t).html("|");n(r[q]).append(t)}},bindArrows:function(){var t=this.options.grid,n=t.MasterTableView,q=this.element.find(".rgMasterTable").parent();q.off("keydown").on("keydown",function(t){t.keyCode===39&&n.fireCommand("Page","NextArrow");t.keyCode===37&&n.fireCommand("Page","PrevArrow")})},mapDisplaytoValue:function(){this.options.FullProcNameDisp=this.options.FullProcName;this.options.Users=this.options.UsersFQN;this.options.RangeTokenDisplay=this.options.RangeToken;this.options.WorkflowNameColumn=this.options.workflowNameColumn},unbindLeft:function(){var n=this.options.grid,t=n.MasterTableView,q=this.element.find(".rgMasterTable").parent();q.off("keydown").on("keydown",function(n){n.keyCode===39&&t.fireCommand("Page","NextArrow")})},unbindRight:function(){var n=this.options.grid,t=n.MasterTableView,q=this.element.find(".rgMasterTable").parent();q.off("keydown").on("keydown",function(n){n.keyCode===37&&t.fireCommand("Page","PrevArrow")})},unbindAllArrows:function(){var n=this.element.find(".rgMasterTable").parent();n.off("keydown")},customSort:function(t,q){this.element.find(".rgSortAsc").hide();this.element.find(".rgSortDesc").hide();var r=this.options.grid.get_masterTableView();if(t!="")if(r.get_dataItems().length>0&&r.sort(t),r._sortExpressions.toList().length>0){var u=r._sortExpressions.toList();u[0].SortOrder==1?(n(q).find(".rgSortAsc").show(),n(q).find(".rgSortDesc").hide()):(n(q).find(".rgSortAsc").hide(),n(q).find(".rgSortDesc").show())}else n(q).find(".rgSortAsc").hide(),n(q).find(".rgSortDesc").hide()},changeInputType:function(){this.element.find("th").css("cursor","default");this.element.find("th").find("a").attr("onclick","");this.element.find("th").find("a").attr("title","");this.element.find("th").find("a").attr("href","javascript:void(0)");this.element.find("th").find("input").remove();this.element.find("th").each(function(){var t=document.createElement("input");n(t).attr("type","button");n(t).attr("class","rgSortAsc");n(t).css("cursor","default");n(t).css("display","none");n(this).append(t);var q=document.createElement("input");n(q).attr("type","button");n(q).attr("class","rgSortDesc");n(q).css("cursor","default");n(q).css("display","none");n(this).append(q);var r=n(this).find("a").text(),u=document.createElement("span")})},applyChanges:function(){if(this.options.style!==this.options.previous.style&&this.setStyles(),this.options.UsersFQN!==this.options.previous.UsersFQN)try{var t=JSON.parse(this.options.UsersFQN);this.options.UsersFQN="";for(var n=0;n<t.length;n++)this.options.UsersFQN+=n!=0?";"+t[n].fqn:t[n].fqn,n++}catch(q){}this.options.pagingNumber!==this.options.previous.pagingNumber&&this.options.designtime&&this.updatePageCount();(this.options.isVisible!==this.options.previous.isVisible||this.options.isParentVisible!==this.options.previous.isParentVisible)&&this.setVisible();this.setEnabled();this.setReadOnly();this.mapDisplaytoValue()},updateRowClass:function(){for(var q=this.element.find(".rgRow,.rgAltRow"),f=0,t=0;t<q.length;t++)if(q[t].style.display!=="none"&&q[t].style.visibility!=="hidden"&&(f==0?(n(q[t]).addClass("radgrid-rowLayout radgrid-rowlayout"),f++):(n(q[t]).addClass("radgrid-altrowLayout radgrid-altrowlayout"),f=0),this.options.controltype==="workflowreferencesgrid")){var e=this.createtablerowDetail(q[t].id);n("#"+q[t].id+"_detailtableRow").length>0&&n("#"+q[t].id+"_detailtableRow").remove();n(q[t]).after(e);var u=document.createElement("td"),r=document.createElement("input"),o=this.options.grid.get_masterTableView().get_element().id;n(r).attr("type","submit");n(r).attr("onclick",'$find("'+o+'")._toggleExpand(this, event); return false;');n(r).attr("title",ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.GridRowExpand);n(r).attr("value"," ");n(r).addClass("rgExpand");n(r).on("click",function(t){var q=n(t.target);q.hasClass("rgCollapse")?q[0].setAttribute("title",ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.GridRowCollapse):q[0].setAttribute("title",ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.GridRowExpand)});n(u).addClass("rgExpandCol");n(u).append(r);n(u).css("width","2%");n(q[t]).find(".rgExpandCol").length!=0||!this._booleanConverter(this.options.ExpandSMO)||n(q[t]).hasClass("detailRow")||n(q[t]).hasClass("innerRow")||(n(q[t]).hasClass("radgrid-rowLayout")||n(q[t]).hasClass("radgrid-altrowLayout"))&&n(q[t]).prepend(u)}},updatePageCount:function(){var q=this.element.find(".rgRow");q.length>0&&(q=n(q[0]).clone());var r=0,u=this.element.find("rgMasterTable").find("tbody");u.children().remove();for(var f=0;f<this.options.pagingNumber;f++){var t=q.clone();t.attr("id","");r==0?(t.addClass("radgrid-rowlayout"),u.append(t),r++):(t.addClass("radgrid-altrowlayout"),u.append(t),r=0)}},SetControlType:function(){this.element.hasClass("SourceCode-Forms-Controls-Web-ControlPack-Reporting-ActivityInstancesGrid-ActivityInstancesGrid")&&(this.options.controltype="activityinstancesgrid");this.element.hasClass("SourceCode-Forms-Controls-Web-ControlPack-Reporting-WorkflowInstancesGrid-WorkflowInstancesGrid")&&(this.options.controltype="workflowinstancesgrid");this.element.hasClass("SourceCode-Forms-Controls-Web-ControlPack-Reporting-UserPerformanceGrid-UserPerformanceGrid")&&(this.options.controltype="userperformancegrid");this.element.hasClass("SourceCode-Forms-Controls-Web-ControlPack-Reporting-ProcessDataGrid-ProcessDataGrid")&&(this.options.controltype="workflowdatagrid");this.element.hasClass("SourceCode-Forms-Controls-Web-ControlPack-Reporting-WorkflowReferences-WorkflowReferences")&&(this.options.controltype="workflowreferencesgrid")},checkDetailTablePagination:function(n,t,q){t.length>0?n.CurrentPageIndex===0&&t[0].hasNextPage.toLowerCase()==="false"?this.disableDetailTablePagination(q):this.enableDetailTablePagination(q):this.disableDetailTablePagination(q)},enableDetailTablePagination:function(n){n.closest(".rgDetailTable").removeClass("disable-pagination");this.element.find(".report-grid-detail-navigation-page-input")[0].setAttribute("contenteditable","true")},disableDetailTablePagination:function(n){n.closest(".rgDetailTable").addClass("disable-pagination");this.element.find(".report-grid-detail-navigation-page-input")[0].setAttribute("contenteditable","false")},updateDetailTable:function(t,q,r){for(var u=0;u<t.length;u++)for(var f in t[u])t[u][f]=(""+t[u][f]).htmlEncode();var e=n("#"+r+"_detailtable_pageCount"),o=n("#"+r+"_detailtable_pageInput"),s=this.element.find(".pageValue").html()==="True"?!0:!1;if(s)try{var h=t[0].pagecount;e.html("of "+parseInt(h))}catch(c){e.html("of "+mastertable.PageCount)}o.html(q.CurrentPageIndex+1);q.set_dataSource(t);q.dataBind();typeof t[0].NoRecords!="undefined"?(q.set_virtualItemCount(0),n("#"+q.get_element().id).find(".rgRow").parent().find(".rgNoRecords").remove(),n("#"+q.get_element().id).find(".rgRow").parent().append('<tr class="rgNoRecords"><td>No records to display.<\/td><\/tr>'),n("#"+q.get_element().id).find(".rgRow").css("display","none")):(this.options.expandedPageCount=t[0].pagecount,n("#"+q.get_element().id).find(".rgPager").attr("style",""),n("#"+q.get_element().id).find(".rgPager").css("width","100%"));this.checkDetailTablePagination(q,t,o)},setVisible:function(){if(this.options.isVisible&&this.options.isParentVisible){this.element.removeClass("hidden");for(var q=this.element.find(".rgRow,.rgAltRow"),r=0,t=0;t<q.length;t++)q[t].style.display!=="none"&&q[t].style.visibility!=="hidden"&&(r==0?(n(q[t]).addClass("radgrid-rowLayout radgrid-rowlayout"),r++):(n(q[t]).addClass("radgrid-altrowLayout radgrid-altrowlayout"),r=0))}else this.element.addClass("hidden")},setEnabled:function(){this.options.isEnabled&&this.options.isParentEnabled?this.element.removeClass("disabled"):this.element.addClass("disabled")},setReadOnly:function(){this.options.isReadOnly?this.element.addClass("readonly"):this.element.removeClass("readonly")},CreateDetailTable:function(t,q,r,u){var c=q.substring(q.lastIndexOf("__")+2),f=q.split("__")[0];f=f+"_Hierarchy_Nest_"+c;var tt=f,s=document.createElement("td");n(s).addClass("report-grid-detail-table-wrapper");n(s).attr("valign","top");n(s).attr("colspan","1");n(s).css("border-left-width:0;");var o=document.createElement("table");n(o).addClass("rgDetailTable");n(o).attr("id",f);for(var w=document.createElement("thead"),k=document.createElement("tfoot"),d=document.createElement("tbody"),l=0,v=0;v<1;v++){var h=document.createElement("tr");l==0?(n(h).addClass("rgRow radgrid-rowLayout detailRow innerRow"),l=1):(n(h).addClass("rgAltRow radgrid-altrowLayout detailRow innerRow"),l=0);c=q.substring(q.lastIndexOf("__")+2);f=q.split("__")[0];f=f+"_Hierarchy_Nest_"+c+"__"+v;n(h).attr("id",f);n(t).each(function(){var t=document.createElement("td");n(t).html(" ");n(h).append(t)});n(d).append(h)}q=tt;var qt=t.length+1,rt=" \t\t\t\t<tr class='rgPager radgrid-footer'> \t\t\t\t\t<td class='report-grid-footer-row' colspan='{0}'> \t\t\t\t\t\t<div class='radgrid-footer report-grid-detail-footer-container'> \t\t\t\t\t\t\t<div class='report-grid-detail-footer-navigation-wrapper'> \t\t\t\t\t\t\t\t<div class='toolbar-wrapper report-grid-detail-footer-navigation-inner-wrapper'> \t\t\t\t\t\t\t\t\t<div class='report-grid-detail-navigation-wrapper-first'> \t\t\t\t\t\t\t\t\t\t<a title='{2}' id='{1}_detailtable_firstbutton' href='javascript:void(0);'> \t\t\t\t\t\t\t\t\t\t\t<div class='pager-buttongeneric buttonFirstPage'><\/div> \t\t\t\t\t\t\t\t\t\t<\/a> \t\t\t\t\t\t\t\t\t<\/div> \t\t\t\t\t\t\t\t\t<div class='report-grid-detail-navigation-wrapper-prev'> \t\t\t\t\t\t\t\t\t\t<a title='{3}' id='{1}_detailtable_prevbutton' href='javascript:void(0)';> \t\t\t\t\t\t\t\t\t\t\t<div class='pager-buttongeneric buttonPrev'><\/div> \t\t\t\t\t\t\t\t\t\t<\/a> \t\t\t\t\t\t\t\t\t<\/div> \t\t\t\t\t\t\t\t\t<div class='report-grid-detail-navigation-wrapper-page-label'> \t\t\t\t\t\t\t\t\t\t<div class='report-grid-detail-navigation-page-label radgrid-divPage'>{6}<\/div> \t\t\t\t\t\t\t\t\t<\/div> \t\t\t\t\t\t\t\t\t<div class='report-grid-detail-navigation-wrapper-page-input'> \t\t\t\t\t\t\t\t\t\t<div class='report-grid-detail-navigation-page-input' contenteditable='true' id='{1}_detailtable_pageInput'><\/div> \t\t\t\t\t\t\t\t\t\t<div id='{1}_detailtable_pageCount' class='radgrid-divPage report-grid-detail-navigation-page-count'><\/div> \t\t\t\t\t\t\t\t\t<\/div> \t\t\t\t\t\t\t\t\t<div class='report-grid-detail-navigation-wrapper-next'> \t\t\t\t\t\t\t\t\t\t<a title='{4}' id='{1}_detailtable_nextbutton' href='javascript:void(0);'> \t\t\t\t\t\t\t\t\t\t\t<div class='pager-buttongeneric buttonNext'><\/div> \t\t\t\t\t\t\t\t\t\t<\/a> \t\t\t\t\t\t\t\t\t<\/div> \t\t\t\t\t\t\t\t\t<div class='report-grid-detail-navigation-wrapper-last'> \t\t\t\t\t\t\t\t\t\t<a title='{5}' id='{1}_detailtable_lastbutton' href='javascript:void(0);'> \t\t\t\t\t\t\t\t\t\t\t<div class='pager-buttongeneric buttonLastPage'><\/div> \t\t\t\t\t\t\t\t\t\t<\/a> \t\t\t\t\t\t\t\t\t<\/div> \t\t\t\t\t\t\t\t<\/div> \t\t\t\t\t\t\t<\/div> \t\t\t\t\t\t<\/div> \t\t\t\t\t<\/td> \t\t\t\t<\/tr>".format(qt,q,ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.GoToFirstPage,ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.GoToPreviousPage,ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.GoToNextPage,ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.GoToLastPage,ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Page);n(k).html(rt);n(o).append(w);n(o).append(d);n(o).append(k);n(s).append(o);var e=new Telerik.Web.UI.GridTableView(o);e._owner=u.get_masterTableView()._owner;e._data=u.get_masterTableView()._data;e._data._columnsData=[];var y=document.createElement("th");n(y).attr("scope","col");n(y).addClass("rgHeader rgExpandCol radgrid-gridheader radgrid-grid-column-header-cell radgrid-grid-column-headers-wrapper radgrid-grid-column-header-cell-wrapper theme-entry radgrid-grid radgrid-grid-column-header-text");n(y).html("&nbsp;");var g=n(t).length,nt=100;g>0&&(nt=100/g);n(t).each(function(){var q=document.createElement("th");n(q).attr("scope","col");n(q).addClass("rgHeader rgExpandCol radgrid-gridheader radgrid-grid-column-header-cell radgrid-grid-column-headers-wrapper radgrid-grid-column-header-cell-wrapper theme-entry radgrid-grid radgrid-grid-column-header-text");n(q).attr("title",this.toString());n(q).css("width",nt+"%");n(q).html(this.toString());n(w).append(q);var t=new Telerik.Web.UI.GridColumn(q);t._data.ColumnGroupName="";t._data.ColumnType="GridBoundColumn";t._data.DataField=this.toString();t._data.DataTypeName="System.String";t._data.Display=!0;t._data.Groupable=!0;t._data.Reorderable=!0;t._data.Resizable=!0;t._data.Selectable=!0;t._data.UniqueName=this.toString();t._onLocalMouseMoveDelegate=function(){return b.apply(a,arguments)};t._onMouseDownDelegate=function(){return b.apply(a,arguments)};t._owner=u.get_masterTableView()._columnsInternal[0]._owner;t._owner._data={};t._owner._data.EditMode="None";t.initialize();e._columnsInternal.push(t)});e.initialize();u._detailTables.push(e);u.get_masterTableView()._hasDetailTables=!0;Sys.Application.addComponent(e);var p={};return p.elem=s,p.detailtable=e,p},ExpandHierarchy:function(t,q){var f=this,k=this.element.attr("id"),r,a=q._id.substring(q._id.lastIndexOf("__")+2),u=q._id.split("__")[0];u=u+"_Hierarchy_Nest_"+a;this.options.curexpandrow=$find(q._id);for(var v=$find(q._id)._dataItem.Properties,y=$find(q._id)._dataItem.Parameters,p=$find(q._id)._dataItem.SMOMethodType,s=v.split(";"),l=y.split(";"),w=s[0].split(":")[1],b=$find(q._id)._dataItem.Name,e="",o="",h=1;h<s.length;h++)e+=s[h]+";";for(var c=1;c<l.length;c++)o+=l[c]+";";e=e.substring(0,e.length-1);o=o.substring(0,o.length-1);jQuery.ajax({url:applicationRoot+"SmartObjectHandler.sdk",dataType:"json",type:"post",data:{SmartObject:b,SmartObjectMethod:w,smartobjecttype:p,SmoProperties:e,SmoParameters:o,newIndex:1,pagesize:f.options.pagingNumber},beforeSend:function(n){var t=f.element;SourceCode.Forms.Browser.msie&&SourceCode.Forms.Browser.version==="8.0"||(t.append('<div class="ajaxLoader" style="width:100%; height:100%; position:absolute; left:0; top:0;"><\/div>'),t.css("opacity","0.3"));SourceCode.Forms.XSRFHelper.setAntiXSRFHeader(n)},success:function(e){var h=e[0].columns,c=[];h!=null&&(c=h.split(";"));for(var o=0;o<e.length;o++)e[o].Value1=f.options.value1,e[o].Value2=f.options.value2,e[o].Value3=f.options.value3;if($find(u)!=null)r=$find(u);else{var s=f.CreateDetailTable(c,q._id,5,t);n("#"+u).parent().remove();r=s.detailtable;s.elem.getElementsByTagName("table")[0].style.tableLayout="auto";n("#"+q.get_gridDataItem()._element.id+"_detailtableRow").append(s.elem);var l=n("#"+u+"_detailtable_pageInput");l.off("click");l.off("keydown").on("keydown",function(t){t.keyCode===13&&r.fireCommand("Page",n(this).html())});var v=n("#"+u+"_detailtable_lastbutton");v.on("click",function(){r.set_virtualItemCount(25e4);r.page("Last")});var y=n("#"+u+"_detailtable_prevbutton");y.on("click",function(){r.set_virtualItemCount(25e4);r.page("Prev")});var p=n("#"+u+"_detailtable_firstbutton");p.on("click",function(){r.set_virtualItemCount(25e4);r.page("First")});var a=n("#"+u+"_detailtable_nextbutton");a.off("click");a.on("click",function(){r.set_virtualItemCount(25e4);r.page("Next")})}f.unBindExpandedFirst(u);r.set_virtualItemCount(25e4);f.updateDetailTable(e,r,u);e.length>0&&e[0].hasNextPage.toLowerCase()==="false"&&f.unBindExpandedLast(u);n(r.get_element()).find(".rgAltRow").each(function(){n(this).addClass("radgrid-altrowLayout innerRow")});var w=n("#"+n(t.get_element()).attr("parentid"));w[0].style.opacity="";f.element.find(".ajaxLoader").remove();SourceCode.Forms.Browser.msie&&SourceCode.Forms.Browser.version==="8.0"&&(document.body.className=document.body.className)}})},unBindExpandedLast:function(t){var q=n("#"+t+"_detailtable_lastbutton"),r=n("#"+t+"_detailtable_nextbutton");q.off("click");q.children().each(function(){n(this).addClass("disabled")});r.off("click");r.children().each(function(){n(this).addClass("disabled")})},unBindExpandedFirst:function(t){var q=n("#"+t+"_detailtable_firstbutton"),r=n("#"+t+"_detailtable_prevbutton");q.off("click");q.children().each(function(){n(this).addClass("disabled")});r.children().each(function(){n(this).addClass("disabled")})},initializeLinks:function(t,q){var u=q.get_dataItem(),f=q.get_item(),e=" \t\t\t\t<div class='view-flow-wrapper' id='{0}' data-link='{1}'> \t\t\t\t\t<div class='view-flow-icon' title='{2}'><\/div> \t\t\t\t<\/div>".format(t.ClientID+"_alink",u.ViewFlow,ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.ViewFlow),r=n(f._element);r.find("td").last().html("").append(e);var o=r.find(".view-flow-icon");o.off("click").on("click",function(){var t=r.find(".view-flow-wrapper").data("link");n("#"+this.element[0].id).SFCReportingGrid("option","ViewFlowColumn",t);window.open(t,"_blank");raiseEvent(this.element[0].id,"Control","ViewFlow-Clicked")}.bind(this))},initializeHierarchy:function(t,q){var h=q.get_dataItem(),e=q.get_item(),r=e.get_element();n("#"+t.get_element().id).find(".rgPager").attr("style","");n("#"+t.get_element().id).find(".rgPager").css("width","100%");var o=this.createtablerowDetail(r.id);n("#"+r.id+"_detailtableRow").length>0&&n("#"+r.id+"_detailtableRow").remove();n(r).after(o);var f=document.createElement("td"),u=document.createElement("input"),s=t.get_masterTableView().get_element().id;n(u).attr("type","submit");n(u).attr("onclick",'$find("'+s+'")._toggleExpand(this, event); return false;');n(u).attr("title",ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.GridRowExpand);n(u).attr("value"," ");n(u).addClass("rgExpand");n(u).on("click",function(t){var q=n(t.target);q.hasClass("rgCollapse")?q[0].setAttribute("title",ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.GridRowCollapse):q[0].setAttribute("title",ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.GridRowExpand)});n(r).find(".rgExpandCol").append(u);n(f).addClass("rgExpandCol");n(f).append(u);n(f).css("width","2%");n(r).find(".rgExpandCol").length!=0||!this._booleanConverter(this.options.ExpandSMO)||n(r).hasClass("detailRow")||n(r).hasClass("innerRow")||(n(r).hasClass("radgrid-rowLayout")||n(r).hasClass("radgrid-altrowLayout"))&&n(r).prepend(f);n(r).parent().width("100%")},boundData:function(n,t){this.options.controltype=="workflowinstancesgrid"?this.initializeLinks(n,t):this.options.controltype=="workflowreferencesgrid"&&this.initializeHierarchy(n,t);this.initializeToolTips(n,t)},initializeToolTips:function(t,q){for(var o=q.get_dataItem(),e=q.get_item(),f=q.get_item().get_parent()._columnsInternal,u=0;u<f.length;u++){var r=e.get_cell(f[u]._data.UniqueName);(this.options.controltype=="workflowreferencesgrid"&&this._booleanConverter(this.options.ExpandSMO)&&!n(r).parent().hasClass("detailRow")&&(r=n(r).next()[0]),typeof r!="undefined")&&(r.setAttribute("title",n(r).text()),n(r).text().charCodeAt()===160&&r.setAttribute("title",""))}},createtablerowDetail:function(t){var q=document.createElement("tr");n(q).attr("id",t+"_detailtableRow");n(q).css("display","none");var r=document.createElement("td");return n(r).addClass("rgExpandCol"),n(r).css("border-right-width","0"),n(r).html(" "),n(q).append(r),q},bindButtons:function(){var t=this.options.grid,q=this.element.attr("id"),o=this.options.ShowTitle,s=this.options.ShowRange;o&&this.element.find(".UserPerfHeader").css("display","block");s&&this.element.find(".UserPerfSubHeader").css("display","block");var r=n("#"+q+"_nextbutton");r.off("click");r.on("click",function(){t.MasterTableView.page("Next")});var u=n("#"+q+"_lastbutton");u.off("click");u.on("click",function(){t.MasterTableView.page("Last")});var f=n("#"+q+"_prevbutton");f.off("click");f.on("click",function(){t.MasterTableView.page("Prev")});var e=n("#"+q+"_firstbutton");e.off("click");e.on("click",function(){t.MasterTableView.page("First")});u.children().each(function(){n(this).removeClass("disabled")});r.children().each(function(){n(this).removeClass("disabled")});f.children().each(function(){n(this).removeClass("disabled")});e.children().each(function(){n(this).removeClass("disabled")});n(t.MasterTableView.get_element()).find(".rgPager").on("click",function(){n(t.MasterTableView.get_element()).find(".radgrid-selectedItem").removeClass("radgrid-selectedItem")})},unBindLast:function(){var u=this.options.grid,t=this.element.attr("id"),q=n("#"+t+"_lastbutton"),r=n("#"+t+"_nextbutton");q.off("click");q.children().each(function(){n(this).addClass("disabled")});r.off("click");r.children().each(function(){n(this).addClass("disabled")})},unBindFirst:function(){var u=this.options.grid,t=this.element.attr("id"),q=n("#"+t+"_firstbutton"),r=n("#"+t+"_prevbutton");q.off("click");q.children().each(function(){n(this).addClass("disabled")});r.children().each(function(){n(this).addClass("disabled")})},rowClick:function(t){if(!this.options.isReadOnly){var r=this.element.attr("id");if(this.options.InvokeDoubleClick=!0,t.get_item()!=null){if(t.get_item()._dataItem!=null){var q=t.get_item()._dataItem;this.options.controltype=="workflowdatagrid"?(this.options.value=q.ProcInstID,this.options.NameColumn=q.Name,this.options.ValueColumn=q.Value):this.options.controltype=="workflowdatagrid"?(this.options.value=q.ProcInstID,this.options.SelectedProc=q.ProcInstID,this.options.workflowNameColumn=q.ProcFullName):(this.options.ActivityNameColumn=q.ActivityName,this.options.PriorityColumn=q.Priority,this.options.DateAssignedColumn=q.StartDate,this.options.StatusColumn=q.Status,this.options.DateCompletedColumn=q.FinishDate,this.options.DurationColumn=q.Duration,this.options.UserColumn=q.Destination,this.options.ActionColumn=q.final_action,this.options.FolioColumn=q.Folio,this.options.StartDateColumn=q.StartDate,this.options.CurrentActivityColumn=q.ActName,this.options.PriorityColumn=q.Priority,this.options.SelectedProc=q.ProcFullName,this.options.ViewFlowColumn=n(t.get_item()._element).find(".view-flow-wrapper").data("link"),this.options.NameColumn=q.Name,this.options.ValueColumn=q.Value,this.options.actInstID=q.ActInstID,this.options.workflowNameColumn=q.WorkflowName,this.options.WorkflowInstanceID=q.WorkflowInstanceID,this.options.ActivityInstanceID=q.ActivityInstanceID,this.options.ActivityInstanceDestinationID=q.ActInstDestID,this.options.versionNumberColumn=q.Version,this.options.controltype=="workflowinstancesgrid"&&(this.options.value=q.ProcInstID,this.options.SelectedProc=q.ProcInstID,this.options.workflowNameColumn=q.ProcFullName,this.options.workflowOriginatorColumn=q.ProcOriginatorFQN,this.options.FinishDateColumn=q.FinishDate),this.options.controltype=="activityinstancesgrid"&&(this.options.value=q.ActInstID,this.options.SelectedProc=q.ActInstID,this.options.fullactivityname=this.options.workflowNameColumn+"\\"+this.options.ActivityNameColumn,this.options.activityDisplayName=q.ActivityDisplayName),this.options.controltype=="userperformancegrid"&&(this.options.value=q.Full_User,this.options.UserColumn=q.DestinationUser))}this.options.controltype=="workflowreferencesgrid"&&(this.options.value=t.get_domEvent().target.innerHTML,typeof q!="undefined"&&(this.options.value1=q.Value1,this.options.value2=q.Value2,this.options.value3=q.Value3,this.options.smoMethodType=q.SMOMethodType))}else this.options.controltype=="workflowreferencesgrid"&&(this.options.value=t.get_domEvent().target.innerHTML);this.options.value===this.options.previousValue||this.options.firstLoadClick||raiseEvent(this.element[0].id,"Control","OnChange");this.options.previousValue=this.options.value}},loadVisibleColumns:function(t){var a=this.options.ActivityNameColumn,e=this.options.PriorityColumn,o=this.options.DateAssignedColumn,s=this.options.StatusColumn,h=this.options.DateCompletedColumn,r=this.options.DurationColumn,v=this.options.UserColumn,y=this.options.ActionColumn,p=this.options.FolioColumn,w=this.options.StartDateColumn,g=this.options.CurrentActivityColumn,e=this.options.PriorityColumn,b=this.options.ViewFlowColumn,u=this.options.versionNumberColumn,c=this.options.workflowNameColumn,k=this.options.workflowOriginatorColumn,d=this.options.FinishDateColumn,q=[],f=0;this.options.controltype=="activityinstancesgrid"?q.push(a,r,o,h,e,s,c,u):this.options.controltype=="userperformancegrid"?q.push(v,y,r,o,h,u):this.options.controltype=="workflowinstancesgrid"&&q.push(p,k,r,w,d,s,e,c,u,b);var l=0;n(q).each(function(){this=="Visible"?(t.get_masterTableView().showColumn(f),l++):t.get_masterTableView().hideColumn(f);f++});l===1&&this.element.find(".radgrid-tableMain").css("table-layout","auto")},clear:function(){if(this.options.running){this.methodQueue.push({method:"clear",parameters:[]});return}this.updateTitles();var t=this.options.grid,n=t.get_masterTableView(),q=n.get_dataItems().length;for(masterIndex=0;masterIndex<q;masterIndex++)n.collapseItem(masterIndex);this.updateGrid([],this.options.grid);this.options.value=""},changePage:function(t,q){q.set_cancel(!0);var f=this,e=q.get_tableView(),k=!1,r=q.get_commandArgument();if(q.get_commandName()=="Sort"&&(q.set_cancel(!0),r=t.get_masterTableView().get_currentPageIndex()+1),q.get_commandName()=="ExpandCollapse"&&e.expandItem(e.get_dataItems()[r].get_element()),q.get_commandName()!="Delete"){var qt=t.get_masterTableView().get_pageSize();if(q.get_commandName()=="Page"&&q.get_tableView()==t.get_masterTableView()){switch(q.get_commandArgument()){case"Prev":r=q.get_tableView().get_currentPageIndex()+1==1?0:q.get_tableView().get_currentPageIndex();break;case"PrevArrow":if(q.get_tableView().get_currentPageIndex()+1===1)r=1;else{var s=q.get_tableView().get_currentPageIndex()-1;s>-1?(e.CurrentPageIndex=s,r=q.get_tableView().get_currentPageIndex()+1):r=q.get_tableView().get_currentPageIndex()+1}break;case"First":r=1;break;case"Next":r=q.get_tableView().get_currentPageIndex()+1>q.get_tableView().get_pageCount()?q.get_tableView().get_currentPageIndex()+1:q.get_tableView().get_currentPageIndex()+1;break;case"NextArrow":if(q.get_tableView().get_currentPageIndex()+1>q.get_tableView().get_pageCount())r=q.get_tableView().get_currentPageIndex()+1;else{var s=q.get_tableView().get_currentPageIndex()+1;s<q.get_tableView().PageCount?(e.CurrentPageIndex=s,r=q.get_tableView().get_currentPageIndex()+1):r=s}break;case"Last":r=q.get_tableView().get_currentPageIndex()+1;break;default:var s=r-1;this.options.oldIndex=e.CurrentPageIndex+1;isNaN(r)?r=e.CurrentPageIndex:(r-1<q.get_tableView().PageCount&&r-1>=0?(e.CurrentPageIndex=s,r=parseInt(q.get_commandArgument())):r=e.CurrentPageIndex+1,k=!0)}q.get_tableView()==t.get_masterTableView()&&(this.bindButtons(),this.bindArrows());r>=q.get_tableView().PageCount&&q.get_tableView()==t.get_masterTableView()&&(this.unBindLast(),this.unbindRight());r<1&&q.get_tableView()==t.get_masterTableView()&&(this.unBindFirst(),this.unbindLeft());r===1&&q.get_commandArgument()=="PrevArrow"&&q.get_tableView()==t.get_masterTableView()&&(this.unBindFirst(),this.unbindLeft());r>q.get_tableView().PageCount&&(r=e.CurrentPageIndex)}q.get_commandName()=="PageSize"&&(r=1);var l=q.get_tableView().get_sortExpressions(),ht=q.get_tableView().get_filterExpressions(),v=q.get_tableView().get_currentPageIndex(),r=v+1;q.get_commandName()=="Filter"&&(v=0);var o="",u="";this.element.find(".rgSortDesc").css("position","absolute");this.element.find(".rgSortDesc").css("left","50%");this.element.find(".rgSortDesc").css("width","100%");this.element.find(".rgSortDesc").css("height","100%");this.element.find(".rgSortDesc").css("top","0px");this.element.find(".rgSortAsc").css("position","absolute");this.element.find(".rgSortAsc").css("left","50%");this.element.find(".rgSortAsc").css("width","100%");this.element.find(".rgSortAsc").css("height","100%");this.element.find(".rgSortAsc").css("top","0px");var d=l.toString();if(l.toList().length>0){o=l.toList()[0].SortOrder;u=l.toList()[0].FieldName;switch(o){case 1:o="ASC";break;case 2:o="DESC"}u.toLowerCase()=="final_action"&&(u="FinalAction");u.toLowerCase()=="version"&&(u="ProcessVersion");u.toLowerCase()=="procname"&&(u="ProcessSetName");d=u+" "+o;u.toLowerCase()=="processversion"&&(u="Version");u.toLowerCase()=="processsetname"&&(u="ProcName");u.toLowerCase()=="finalaction"&&(u="final_action")}if(q.get_tableView()==t.get_masterTableView()){master=t.get_masterTableView();var rt=master.get_dataItems().length;for(masterIndex=0;masterIndex<rt;masterIndex++)master.collapseItem(masterIndex);var h=this.options.grid;if(this.options.controltype=="workflowreferencesgrid"){var y=document.createElement("th"),ct=document.createElement("col");if(this.options.reload=!1,n(y).addClass("rgHeader rgExpandCol radgrid-gridheader radgrid-grid-column-header-cell radgrid-grid-column-headers-wrapper radgrid-grid-column-header-cell-wrapper theme-entry radgrid-grid radgrid-grid-column-header-text"),n(y).attr("scope","col"),this._booleanConverter(this.options.ExpandSMO))if(n(h.get_element()).find("thead > tr").find(".rgExpandCol").length==0)n(h.get_element()).find("thead > tr").prepend(y),this.element.find(".rgPager.radgrid-footer > td").attr("colspan","2");else{this.element.find(".detailRow").remove();n(h.get_element()).find("thead > tr").find(".rgExpandCol").remove();n(h.get_element()).find(".rgExpandCol").remove();var g=this.element.find(".rgDetailTable");n(g).each(function(){var t=$find(n(this).attr("id"));t!=null&&(n(t._dataItems).each(function(){t.deleteItem(this.get_element());Sys.Application.removeComponent(this)}),Sys.Application.removeComponent(t))});g.remove();h._detailTables=[];this.options.reload=!0}}q.get_commandName()=="Sort"?this.sort(u,o):this.FetchData(d,r,v,qt,u,o,k)}else{for(var a=this.options.curexpandrow,ut=a._dataItem.Properties,ft=a._dataItem.Parameters,et=a._dataItem.SMOMethodType,p=ut.split(";"),nt=ft.split(";"),ot=p[0].split(":")[1],st=a._dataItem.Name,c="",tt="",w=1;w<p.length;w++)c+=p[w]+";";for(var b=1;b<nt.length;b++)tt+=nt[b]+";";c=c.substring(0,c.length-1);jQuery.ajax({url:applicationRoot+"SmartObjectHandler.sdk",dataType:"json",type:"post",data:{SmartObject:st,SmartObjectMethod:ot,SmoProperties:c,smartobjecttype:et,SmoParameters:tt,newIndex:r,pagesize:f.options.pagingNumber},beforeSend:function(n){SourceCode.Forms.Browser.msie&&SourceCode.Forms.Browser.version==="8.0"?f.element.append('<div class="ajaxLoader" style="width:100%; height:100%; position:absolute; top:0; left:0; background-color:#FFFFFF; filter: alpha(opacity=80); opacity:0.3; -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)""><\/div>'):f.element.append('<div class="ajaxLoader" style="width:100%; height:100%; position:absolute; left:0; top:0;"><\/div>');f.element.css("opacity","0.3");dataitems=q.get_tableView()._dataSource;SourceCode.Forms.XSRFHelper.setAntiXSRFHeader(n)},success:function(t){for(var e=q.get_tableView(),u=n(e.get_element()).attr("id"),o=0;o<t.length;o++)t[o].Value1=f.options.value1,t[o].Value2=f.options.value2,t[o].Value3=f.options.value3;if(t.length>0){if(t[0].hasNextPage.toLowerCase()==="false"){var s=n("#"+u+"_detailtable_nextbutton");s.off("click");s.children().each(function(){n(this).addClass("disabled")})}if(r>1){var h=n("#"+u+"_detailtable_prevbutton");h.children().each(function(){n(this).removeClass("disabled")});var c=n("#"+u+"_detailtable_firstbutton");c.children().each(function(){n(this).removeClass("disabled")});h.off("click");h.on("click",function(){e.page("Prev")});c.off("click");c.on("click",function(){e.page("First")})}else{var h=n("#"+u+"_detailtable_prevbutton");h.off("click");h.children().each(function(){n(this).addClass("disabled")});var c=n("#"+u+"_detailtable_firstbutton");c.off("click");c.children().each(function(){n(this).addClass("disabled")});var s=n("#"+u+"_detailtable_nextbutton");s.off("click");s.on("click",function(){e.page("Next")});s.children().each(function(){n(this).removeClass("disabled")})}}else t=dataitems;f.updateDetailTable(t,q.get_tableView(),q.get_tableView().get_element().id);f.element[0].style.opacity="";f.element.find(".ajaxLoader").remove();t.length>0&&(f.options.pageCount=t[0].pageCount,f.options.itemSize=t[0].itemSize);n(e.get_element()).find(".rgAltRow").each(function(){n(this).addClass("radgrid-altrowLayout innerRow")});SourceCode.Forms.Browser.msie&&SourceCode.Forms.Browser.version==="8.0"&&(document.body.className=document.body.className)}})}}},sort:function(n,t){var q=this.options.grid.MasterTableView,r=q._dataSource;t==="ASC"?r.sort(function(t,q){var r=t[n].toLowerCase(),u=q[n].toLowerCase();return r<u?-1:r>u?1:0}):t==="DESC"&&r.sort(function(t,q){var r=t[n].toLowerCase(),u=q[n].toLowerCase();return r<u?1:r>u?-1:0});q.set_dataSource(r);q.dataBind()},updateTitles:function(){var q=this.element.find(".UserPerfHeader"),n=this.element.find(".UserPerfSubHeader"),t=SourceCode.Forms.Controls.Common.DateRange.ParseToken(this.options.RangeToken);if(q.text(this.options.text),this.options.RangeToken=="All")n.html(t.Pretty);else{var r={formatXmlString:"<Format Type='Date'>d<\/Format>",value:SCCultureHelper.Current()._convertDateObjToUTCString(t.StartDate),formattingError:!1},u=SCCultureHelper.Current().applyFormatToControlValue(r),f={formatXmlString:"<Format Type='Date'>d<\/Format>",value:SCCultureHelper.Current()._convertDateObjToUTCString(t.EndDate),formattingError:!1},e=SCCultureHelper.Current().applyFormatToControlValue(f);n.html(t.Pretty+" ("+u+" - "+e+")")}this.options.ShowTitle?q.show():q.html(" ");this.options.ShowRange?n.show():n.hide()},updateGrid:function(t,q,r){if(t!=null){if(!checkExists(r))for(var u=0;u<t.length;u++){var o=n(SCCultureHelper.current.cultureXml.selectSingleNode("/Cultures/Culture/DateTimePatterns/DateTimePattern[Symbol='d']/Value")).text();if(o=o+" "+n(SCCultureHelper.current.cultureXml.selectSingleNode("/Cultures/Culture/DateTimePatterns/DateTimePattern[Symbol='T']/Value")).text(),checkExistsNotEmpty(t[u].StartDate)){var a=new Date(t[u].StartDate+" UTC");t[u].StartDate=a.format(o)}if(checkExistsNotEmpty(t[u].FinishDate)){var v=new Date(t[u].FinishDate+" UTC");t[u].FinishDate=v.format(o)}}if(this.options.controltype=="workflowinstancesgrid")for(var u=0,y=t.length;u<y;u++)t[u].Folio=t[u].Folio.replace(/</g,"&lt;").replace(/>/g,"&gt;");var f=q.get_masterTableView();f.set_dataSource(t);var c=this.element.attr("id"),l=n("#"+c+"_pageCount"),p=n("#"+c+"_pageInput"),s=q.get_masterTableView(),w=this.element.find(".pageValue").html()==="True"?!0:!1;if(w)try{var b=t[0].pagecount;l.html("of "+parseInt(b))}catch(k){l.html("of "+s.PageCount)}if(p.html(s.CurrentPageIndex+1),s.CurrentPageIndex==0&&(this.unBindFirst(),this.unbindLeft()),this.options.controltype=="workflowreferencesgrid"){var h=document.createElement("th"),d=document.createElement("col");this.options.reload=!1;n(h).addClass("rgHeader rgExpandCol radgrid-gridheader radgrid-grid-column-header-cell radgrid-grid-column-headers-wrapper radgrid-grid-column-header-cell-wrapper theme-entry radgrid-grid radgrid-grid-column-header-text");n(h).attr("scope","col");var e=this.options.grid;this._booleanConverter(this.options.ExpandSMO)?(n(e.get_element()).find("thead > tr").find(".rgExpandCol").remove(),n(e.get_element()).find(".rgExpandCol").remove(),f.dataBind(),n(e.get_element()).find("thead > tr").prepend(h)):(n(e.get_element()).find("thead > tr").find(".rgExpandCol").remove(),n(e.get_element()).find(".rgExpandCol").remove(),f.dataBind())}else f.dataBind();this.updateRowClass();t.length!==0&&this.options.usePaging?(f.set_virtualItemCount(parseInt(t[0].count)),n("#"+q.get_element().id).find(".rgPager").attr("style","")):n("#"+q.get_element().id).find(".rgPager").css("display","none")}},loadData:function(){var f=this,t=this.options.grid;if(t.MasterTableView.set_dataSource([]),t.MasterTableView.dataBind(),t.MasterTableView._cachedItems=[],t.MasterTableView._cacheDataItems(),this.options.pageCount=-1,this.options.itemSize=-1,this.updateTitles(),t!=null){var u=t.get_masterTableView().get_pageSize(),e=this.element.attr("id");if(this.options.controltype=="workflowreferencesgrid"){var q=document.createElement("th"),o=document.createElement("col");if(this.options.reload=!1,n(q).addClass("rgHeader rgExpandCol radgrid-gridheader radgrid-grid-column-header-cell radgrid-grid-column-headers-wrapper radgrid-grid-column-header-cell-wrapper theme-entry radgrid-grid radgrid-grid-column-header-text"),n(q).attr("scope","col"),this._booleanConverter(this.options.ExpandSMO))if(n(t.get_element()).find("thead > tr").find(".rgExpandCol").length==0)n(t.get_element()).find("thead > tr").prepend(q),this.element.find(".rgPager.radgrid-footer > td").attr("colspan","2");else{n(".detailRow").remove();n(t.get_element()).find("thead > tr").find(".rgExpandCol").remove();n(t.get_element()).find(".rgExpandCol").remove();var r=n(".rgDetailTable");n(r).each(function(){var t=$find(n(this).attr("id"));t!=null&&(n(t._dataItems).each(function(){t.deleteItem(this.get_element());Sys.Application.removeComponent(this)}),Sys.Application.removeComponent(t))});n(".rgDetailTable").remove();t._detailTables=[];this.options.reload=!0}else{n(".detailRow").remove();n(t.get_element()).find("thead > tr").find(".rgExpandCol").remove();n(t.get_element()).find(".rgExpandCol").remove();var r=n(".rgDetailTable");n(r).each(function(){var t=$find(n(this).attr("id"));t!=null&&(n(t._dataItems).each(function(){t.deleteItem(this.get_element());Sys.Application.removeComponent(this)}),Sys.Application.removeComponent(t))});n(".rgDetailTable").remove();t._detailTables=[]}}this.bindButtons();this.unbindLeft();this.unBindFirst();this.FetchData("",1,0,u,"","",!1)}},GetUrl:function(){switch(this.options.controltype){case"activityinstancesgrid":return"ActivityInstancesGridHandler.sdk";case"workflowinstancesgrid":return"WorkflowInstancesGridHandler.sdk";case"userperformancegrid":return"UserPerformanceGridHandler.sdk";case"workflowdatagrid":return"ProcessDataGridHandler.sdk";case"workflowreferencesgrid":return"WorkflowReferencesHandler.sdk"}},FetchData:function(t,q,r,u,f,e,o){var s=this,h=this.options.grid;this.options.running=!0;var c=document.createElement("th");n(c).addClass("rgHeader rgExpandCol radgrid-gridheader radgrid-grid-column-header-cell radgrid-grid-column-headers-wrapper radgrid-grid-column-header-cell-wrapper theme-entry radgrid-grid radgrid-grid-column-header-text");n(c).attr("scope","col");n(c).css("width","35px");(this.options.StartedOnly==="true"||this.options.StartedOnly==="started")&&this.addCurrentUser();var l=checkExistsNotEmpty(this.options.WorkflowInstID)?this.options.WorkflowInstID:"-2",a={workflowinstanceid:l,procinstanceid:this.options.ProcInstID,fullprocname:this.options.FullProcName,ActName:this.options.ActivityNames,ActivityName:this.options.ActivityName,ActivitySystemName:this.options.ActivitySystemName,RangeToken:this.options.RangeToken.toLowerCase(),proccount:this.options.ProcCount,startedonly:this.options.StartedOnly,smartobjecttype:this.options.smoMethodType,status:this.options.Status,curPageIndex:r*u,newPageIndex:q*u,pageSize:u,sortDefault:this.options.sortDefault,groupDefault:this.options.groupDefault,groupValue:this.options.groupValue,usePaging:this.options.usePaging,Users:this.options.UsersFQN,SortVar:t,itemSize:this.options.itemSize,pageCount:this.options.pageCount,showSystemValues:this.options.showSystemValues,versionnumber:this.options.versionNumber};jQuery.ajax({url:applicationRoot+this.GetUrl(),dataType:"text",data:a,type:"POST",beforeSend:function(n){SourceCode.Forms.Browser.msie&&SourceCode.Forms.Browser.version==="8.0"?s.element.append('<div class="ajaxLoader" style="width:100%; height:100%; position:absolute; top:0; left:0; background-color:#FFFFFF; filter: alpha(opacity=80); opacity:0.3; -ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)""><\/div>'):s.element.append('<div class="ajaxLoader" style="width:100%; height:100%; top:0; left:0; position:absolute;"><\/div>');s.element.css("opacity","0.3");var t=h.get_masterTableView()._dataSource;s.options.controltype!="workflowreferencesgrid"&&s.updateGrid(t,h,!0);SourceCode.Forms.XSRFHelper.setAntiXSRFHeader(n)},success:function(t){try{t=JSON.parse(t)}catch(v){t=[]}if(s.options.data=t,s.UpdateColumns(),o&&t.length>0)s.updateGrid(t,h);else if(t.length>0)s.updateGrid(t,h);else if(t.length!==0||o){if(t.length===0&&o){var q=n("#"+s.element.attr("id")+"_pageInput");q.html(s.options.oldIndex);var u=s.options.grid.get_masterTableView();r=u.CurrentPageIndex=s.options.oldIndex-1;var l=h.get_masterTableView();l.dataBind();checkExists(s.options.lastIndex)&&s.options.lastIndex===r&&(s.unBindLast(),s.unbindRight())}}else s.updateGrid(t,h);s.element.find(".radgrid-gridheader").css({position:"relative",cursor:"default"});s.element.find(".rgExpandCol").css("width","35px");s.element.find("th").find("a").css({width:"100%",height:"100%",top:"5px",left:"0px"});t.length>0&&(s.options.pageCount=t[0].pagecount,s.options.itemSize=t[0].count,s.options.pageCount===1?(s.unBindLast(),s.unbindAllArrows()):t[0].hasNextPage.toLowerCase()==="false"&&(s.options.lastIndex=r,s.unBindLast(),s.unbindRight()));s.options.usePaging&&s.checkPagination(t);s.options.reload&&(n(h.get_element()).find("thead > tr").prepend(c),s.element.find(".radgrid-gridheader").css({position:"relative",cursor:"default"}),s.element.find(".rgExpandCol").css("width","35px"),s.element.find("th").find("a").css({width:"100%",height:"100%",top:"5px",left:"0px"}));s.element[0].style.opacity="";s.element.find(".ajaxLoader").remove();s.element.css("filter","");typeof t!="undefined"&&t.length>0&&(s.options.value1=t[0].Value1,s.options.value2=t[0].Value2,s.options.value3=t[0].Value3);checkExistsNotEmpty(f)&&checkExistsNotEmpty(e)&&s.sort(f,e);var y=s.element.find(".rgMasterTable").parent();if(r===0){s.unBindFirst();s.unbindLeft();var q=n("#"+s.element.attr("id")+"_pageInput");q.html("1");h.get_masterTableView().CurrentPageIndex=0;typeof t[0]!="undefined"&&typeof t[0].hasNextPage!="undefined"&&t[0].hasNextPage.toLowerCase()==="false"&&(s.unBindLast(),s.unbindAllArrows())}if(r===0&&(typeof t[0]=="undefined"||t[0].hasNextPage.toLowerCase()==="false")&&s.unbindAllArrows(),SourceCode.Forms.Browser.msie&&document.documentMode<9&&(document.body.className=document.body.className,s.addDivSpliter()),s.options.InitialValue=="first"){var a=n(s.element.find(".rgRow")[0]);s.options.firstLoadClick=!0;a.trigger("click")}s.options.running=!1;s.runMethodQueue()}});raiseEvent(s.element.attr("id"),"Control","Populated")},runMethodQueue:function(){while(this.methodQueue.length>0){var n=this.methodQueue.shift();this[n.method].apply(this,n.parameters)}},checkPagination:function(n){if(n.length>0){var t=this.options.grid.get_masterTableView();t.CurrentPageIndex===0&&n[0].hasNextPage.toLowerCase()==="false"?this.disablePagination():this.enablePagination()}else this.disablePagination()},enablePagination:function(){this.element.removeClass("disable-pagination");this.element.find(".report-grid-navigation-page-input-box")[0].setAttribute("contenteditable","true")},disablePagination:function(){this.element.addClass("disable-pagination");this.element.find(".report-grid-navigation-page-input-box")[0].setAttribute("contenteditable","false")},addCurrentUser:function(){var n=SourceCode.Forms.Settings.User.FQN;this.options.UsersFQN=n},setPagingNumber:function(){var n=this.options.grid;n.get_masterTableView().set_pageSize(this.options.pagingNumber)},UpdateColumns:function(){var t=this,r=n("#"+this.element.attr("id")+"_ViewFlowLink").prop("value");if(this.options.InitialValue=="nonevalue")this.options.ActivityNameColumn="",this.options.PriorityColumn="",this.options.DateAssignedColumn="",this.options.StatusColumn="",this.options.DateCompletedColumn="",this.options.DurationColumn="",this.options.UserColumn="",this.options.ActionColumn="",this.options.FolioColumn="",this.options.StartDateColumn="",this.options.CurrentActivityColumn="",this.options.ViewFlowColumn="",this.options.workflowNameColumn="",this.options.versionNumberColumn="",this.options.workflowOriginatorColumn="",this.options.ActivityInstanceID="",this.options.ActivityInstanceDestinationID="",this.options.FinishDateColumn="",this.options.value="";else if(this.options.InitialValue=="first"&&t.options.data.length>0&&this.options.firstFetch){this.options.ActivityNameColumn=t.options.data[0].ActivityName;this.options.PriorityColumn=t.options.data[0].Priority;this.options.DateAssignedColumn=t.options.data[0].StartDate;this.options.StatusColumn=t.options.data[0].Status;this.options.DateCompletedColumn=t.options.data[0].FinishDate;this.options.DurationColumn=t.options.data[0].Duration;this.options.UserColumn=t.options.data[0].DestinationUser;this.options.ActionColumn=t.options.data[0].final_action;this.options.FolioColumn=t.options.data[0].Folio;this.options.StartDateColumn=t.options.data[0].StartDate;this.options.FinishDateColumn=t.options.data[0].FinishDate;this.options.CurrentActivityColumn=t.options.data[0].ActName;this.options.ProcInstID=t.options.data[0].ProcInstID;this.options.ViewFlowColumn=t.options.data[0].ViewFlow;this.options.workflowNameColumn=t.options.data[0].WorkflowName;this.options.versionNumberColumn=t.options.data[0].Version;this.options.workflowOriginatorColumn=t.options.data[0].ProcOriginatorFQN;this.options.ActivityInstanceID=t.options.data[0].ActivityInstanceID;this.options.ActivityInstanceDestinationID=t.options.data[0].ActInstDestID;this.options.firstFetch=!1;this.options.controltype=="workflowinstancesgrid"&&(this.options.workflowNameColumn=t.options.data[0].ProcFullName);var q=n(this.element.find(".rgRow")[0]);q.addClass("rgSelectedRow")}else this.options.firstFetch&&(this.options.ActivityNameColumn="",this.options.PriorityColumn="",this.options.DateAssignedColumn="",this.options.StatusColumn="",this.options.DateCompletedColumn="",this.options.DurationColumn="",this.options.UserColumn="",this.options.ActionColumn="",this.options.FolioColumn="",this.options.StartDateColumn="",this.options.FinishDateColumn="",this.options.CurrentActivityColumn="",this.options.ViewFlowColumn="",this.options.workflowNameColumn="",this.options.versionNumberColumn="",this.options.workflowOriginatorColumn="",this.options.ActivityInstanceID="",this.options.ActivityInstanceDestinationID="",this.options.value="")},setStyles:function(){var q=parseXML(this.options.style);this.options.style=q.xml;this.element.width(this.options.width);var t=n(this.element).find(".stylewrapper"),r={border:t,background:t,margin:t,padding:t,font:t,horizontalAlign:t};StyleHelper.setStyles(r,q);this.computeAdjustedWidth()},computeAdjustedWidth:function(n){var t=this.element.find(".stylewrapper"),u=window.getComputedStyle(t[0]),f=parseInt(u.marginLeft),e=parseInt(u.marginRight),q,r;checkExists(n)?(q=n,r=q-(f+e),t[0].style.width=r+"px"):this.options.width.indexOf("%")>-1?t[0].style.width="auto":(q=parseInt(this.element.width()),r=q-(f+e),t[0].style.width="auto")},ReturnColumn:function(n){var t;switch(n){case"activitynamecolumn":t=this.options.ActivityNameColumn;break;case"prioritycolumn":t=this.options.PriorityColumn;break;case"dateassignedcolumn":t=this.options.DateAssignedColumn;break;case"statuscolumn":t=this.options.StatusColumn;break;case"datecompletedcolumn":t=this.options.DateCompletedColumn;break;case"durationcolumn":t=this.options.DurationColumn;break;case"usercolumn":t=this.options.UserColumn;break;case"actioncolumn":t=this.options.ActionColumn;break;case"foliocolumn":t=this.options.FolioColumn;break;case"startdatecolumn":t=this.options.StartDateColumn;break;case"finishdatecolumn":t=this.options.FinishDateColumn;break;case"currentactivitycolumn":t=this.options.CurrentActivityColumn;break;case"viewflowcolumn":t=this.options.ViewFlowColumn;break;case"value1column":t=this.options.value1;break;case"value2column":t=this.options.value2;break;case"value3column":t=this.options.value3;break;case"namecolumn":t=this.options.NameColumn;break;case"valuecolumn":t=this.options.ValueColumn;break;case"workflownamecolumn":t=this.options.workflowNameColumn;break;case"workfloworiginatorcolumn":t=this.options.workflowOriginatorColumn;break;case"versionnumbercolumn":t=this.options.versionNumberColumn}return t},getColumn:function(n){return this.ReturnColumn(n)},_optionValueConverter:function(n,t){n=n.toLowerCase();switch(n){case"versionnumber":t=isNaN(parseInt(t))?-1:parseInt(t);break;default:t=this.base._optionValueConverter(n,t)}return t},destroy:function(){n(this.element).off(".SFCReportingGrid");n.Widget.prototype.destroy.call(this)}});n.sfc.SFCReportingGrid.prototype.base=n.sfc.baseWidget.prototype;n(document).ready(function(){typeof ControlResources.SourceCode.Forms.Controls.Web.ControlPack!="undefined"&&typeof Resources.ControlProperties!="undefined"&&(Resources.ControlProperties.InvalidPageNumber=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.InvalidPageNumber);try{checkExists(Telerik)}catch(t){return}checkExists(Telerik.Web.UI.GridColumn)&&(Telerik.Web.UI.GridColumn.prototype._onMouseDownHandler=function(t){if((t.button!=Sys.UI.MouseButton.leftButton||Telerik.Web.UI.Grid._moveHeaderDiv)&&!$telerik.isTouchDevice)return!1;var q=this.get_owner().get_owner();n(q.get_element()).width("100%");var r=q._animation&&q._animation.ColumnAnimation,u=$telerik.isTouchDevice&&this._isTouchPointOverResizeHandle(t)&&this._owner._owner.ClientSettings&&this._owner._owner.ClientSettings.Resizing.AllowColumnResize&&this.get_resizable();if(r||(this._onMouseUpDelegate=$telerik.addMobileHandler(this,document,"mouseup",this._onMouseUpHandler,null,!0)),$telerik.isTouchDevice&&(this._canDragDrop=!0,u&&(this._canResize=!0)),q.ClientSettings.AllowDragToGroup||q.ClientSettings.AllowColumnsReorder){var f=q.ClientSettings.AllowColumnsReorder&&r&&q.ClientSettings.Animation.AllowColumnReorderAnimation&&q.ClientSettings.ColumnsReorderMethod===1;f||(this._onMouseMoveDelegate=$telerik.addMobileHandler(this,document,"mousemove",this._onMouseMoveHandler,null,!0));this._canDragDrop&&!u&&(this._data.Reorderable&&q.ClientSettings.AllowColumnsReorder||this._data.Groupable&&q.ClientSettings.AllowDragToGroup)&&(r?q._animation.ColumnAnimation._mouseDown(t,this):Telerik.Web.UI.Grid.CreateDragDrop(t,this,!0))}this._canResize&&(t.button==0||$telerik.isTouchDevice)&&(this._isMouseOverResizeHandle(t)&&(this._columnResizer=new Telerik.Web.UI.GridColumnResizer(this,!0),this._columnResizer._leftResizer.style.width="0px",this._columnResizer._rightResizer.style.width="0px",this._columnResizer._position(t),this._owner._owner._isResize=!0),Telerik.Web.UI.Grid.ClearDocumentEvents());n(".radgrid-tableMain").width("100%")},Telerik.Web.UI.GridColumn.prototype._onLocalMouseMoveHandler=function(t){var r=this.get_owner().get_owner();if((n(r.get_element()).width("100%"),Telerik.Web.UI.Grid&&!$telerik.isTouchDevice)&&(this._canDragDrop=!0,this._canResize=!1,!this._owner._owner._isResize)){var q=Telerik.Web.UI.Grid.GetCurrentElement(t),u=Telerik.Web.UI.Grid.GetFirstParentByTagName(q,"th"),f=Telerik.Web.UI.Grid.FindPosX(q),e=!!this._owner._owner.ClientSettings.AllowDragToGroup&&this._data.Groupable,o=!!this._owner._owner.ClientSettings.AllowColumnsReorder&&this.get_reorderable();if((e||o)&&(this.get_element().title=this._owner._owner.ClientSettings.ClientMessages.DragToGroupOrReorder,this.get_element().style.cursor="move"),this._owner._owner.ClientSettings.Resizing.AllowColumnResize&&this.get_resizable()&&Telerik.Web.UI.Grid.GetEventPosX(t)>=f+u.offsetWidth-5&&!Telerik.Web.UI.Grid._moveHeaderDiv&&(this._canDragDrop=!1),this._owner._owner.ClientSettings&&this._owner._owner.ClientSettings.Resizing.AllowColumnResize&&this.get_resizable()&&this.get_element().tagName.toLowerCase()=="th"){var q=Telerik.Web.UI.Grid.GetCurrentElement(t);this._owner._owner.GridDataDiv&&!this._owner._owner.GridHeaderDiv&&!window.netscape;this._isMouseOverResizeHandle(t)&&!Telerik.Web.UI.Grid._moveHeaderDiv?(this._owner._owner.ClientSettings.Resizing.AllowColumnResize&&(q.style.cursor="col-resize",this.get_element().style.cursor="col-resize"),this.get_element().title!==this._owner._owner.ClientSettings.ClientMessages.DragToResize&&(this._oldTitle=this.get_element().title),this.get_element().title=this._owner._owner.ClientSettings.ClientMessages.DragToResize,this._canResize=!0):(this.get_element().style.cursor!="move"&&(this.get_element().style.cursor="",q.style.cursor="",this.get_element().title=this._oldTitle),q.style.cursor=="col-resize"&&(q.style.cursor=""),this._canResize=!1)}n(".radgrid-tableMain").width("100%")}})});typeof ControlUtil!="undefined"&&(ControlUtil.clearUserGridProperties=function(t,q,r,u){var f=parseXML(t),e=f.selectSingleNode("/Controls/Control/Properties/Property[Name[text()='ActivityName']]/Value"),o=f.selectSingleNode("/Controls/Control/Properties/Property[Name[text()='ActivityName']]/DisplayValue"),s=f.selectSingleNode("/Controls/Control/Properties/Property[Name[text()='ActivityName']]"),h=e.cloneNode(),c=o.cloneNode();n(h).text("");n(c).text("(None)");e.remove();o.remove();s.appendChild(h);s.appendChild(c);e=f.selectSingleNode("/Controls/Control/Properties/Property[Name[text()='FullProcName']]/Value");o=f.selectSingleNode("/Controls/Control/Properties/Property[Name[text()='FullProcName']]/DisplayValue");s=f.selectSingleNode("/Controls/Control/Properties/Property[Name[text()='FullProcName']]");h=e.cloneNode();c=o.cloneNode();n(h).text("");n(c).text("(None)");e.remove();o.remove();s.appendChild(h);s.appendChild(c);u(1,f)});SourceCode.Forms.Controls.Web.ControlPack.Utils.MSAjaxReady(function(){var t;n(".SFC.StandardGrid").each(function(q,r){t=n(r);t.SFCReportingGrid()})})})(jQuery);
/*!
 SourceCode.Forms.Controls.Web.ControlPack.Reporting.ReportHeader.Resources.JS.ReportHeader.js (Embedded resource)
*/
(function(n,t){var q;SourceCode.Forms.Controls.Web.ControlPack.ReportHeader=q=n.extend({},SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase,{getDefaultValue:function(n){q.getValue(n)},setIsVisible:function(n,t){var q=["true","yes","1"].contains(t);SourceCode.Forms.Controls.Base.ControlType.setVisible(n,q);var r=n.find(".SFC")},PreviewLoad:function(t){var q=n(t).closest(".SourceCode-Forms-Controls-Web-ControlPack-Reporting-ReportHeader-ReportHeader"),f=q.find("#panel1 > .reportheader_main");f.addClass("topDivElipseEffect");var u=q.find("#toggleHead_"+n(q[0]).parent()[0].id);u.length>0&&u.remove();var r=n("<a><\/a>");r.attr("href","javascript:void(0);");r.attr("id","toggleHead_"+n(q[0]).parent()[0].id);r.attr("pid",q[0].id);r.addClass("dropbutton");var e=q.data("options").Expanded;typeof e=="undefined"?r.addClass("collapse-vertical"):(r.addClass("expand-vertical"),q.addClass("report-header-collapsed"),q.find(".reportheader_main").addClass("topDivElipseEffect"),q.find(".reportheader_wrapper").addClass("hidden"));var o=q.find(".sfc-report-header-header-wrapper");o.after(r)},setExpand:function(n,t){var r=["true","yes","1"].contains(t),q=n.find(".SFC");if(q.reportheader().reportheader("option")==q){var u=q.data().options;q.reportheader(u)}else{var f=q.reportheader("option","style");SourceCode.Forms.Controls.Web.ControlPack.ReportHeader.setStyles(n,f)}q.reportheader("expand",r);SourceCode.Forms.Designers.Common.Context.refreshLayout()},setRuleForOnSet:function(n){if(n.eventType==="changecontrol"){var q=n.designerDefinition.selectSingleNode("//Views/View/Controls/Control[@ID='"+n.controlId+"']/Properties"),r=q.selectSingleNode("Property[Name='Text']");checkExists(r)&&q.removeChild(r);var t=n.designerDefinition.createElement("Property"),u=n.designerDefinition.createElement("Name"),f=n.designerDefinition.createElement("Value"),e=n.designerDefinition.createElement("DisplayValue"),o=n.designerDefinition.createCDATASection(""),s=n.designerDefinition.createCDATASection("Text");f.appendChild(o);e.appendChild(o);u.appendChild(s);t.appendChild(e);t.appendChild(f);t.appendChild(u);q.appendChild(t)}EventUtil.manageControlEvent(n)},execute:function(t){var q=t.methodName,r=n("#"+t.CurrentControlID);switch(q.toLowerCase()){}},setIsEnabled:function(n,t){var r=["true","yes","1"].contains(t),q=n.find(".SFC");r?q.removeClass("disabled"):q.addClass("disabled")},setHeight:function(t,r,u){var s=t.find(".SFC.SourceCode-Forms-Controls-Web-ControlPack-Reporting-ReportHeader-ReportHeader");s.reportheader();typeof r=="undefined"&&(r="375px");r=r.trim();var tt=t.is(".form-control"),h=t.data().type;if(checkExists(h)||(h=t.attr("controltype")),!checkExists(h))return null;h=h.toLowerCase();var rt=t.find(".resizewrapper :not(.controloverlay):not(.ui-resizable-handle)").first(),a=t.find(".resizewrapper"),ut=t.find(".stylewrapper"),o=n(t.find("iframe")),v="100px",y="",p="",w="",b="",k="",d="",g="";if(u){var e=parseXML(u);v=e.selectSingleNode('//Properties/Property[Name/text()="Height"]/Value');y=n(e.selectNodes('//Properties/Property[Name = "Title"]/Value')).text();p=n(e.selectNodes('//Properties/Property[Name = "ChartType"]/Value')).text();w=n(e.selectNodes('//Properties/Property[Name = "GridLines"]/Value')).text();b=n(e.selectNodes('//Properties/Property[Name = "YValue"]/Value')).text();k=n(e.selectNodes('//Properties/Property[Name = "RangeToken"]/Value')).text();d=n(e.selectNodes('//Properties/Property[Name = "showDateRange"]/Value')).text();g=n(e.selectNodes('//Properties/Property[Name = "SelectEffect"]/Value')).text()}var f=t.find(".SFC.SourceCode-Forms-Controls-Web-ControlPack-Reporting-ReportHeader-ReportHeader");if(r){r=parseFloat(r);t.length>0&&(t[0].style.height=r+"px");a.each(function(){this.style.height="100%"});n(f[0]).height(r);var qt=f.outerHeight(!0);q.ResizeWrappersToHeight(t,a,f,qt);n(t.find(".SFC.SourceCode-Forms-Controls-Web-ControlPack-Reporting-ReportHeader-ReportHeader")).find(".stylewrapper").outerHeight(f.height(),!0);var c=f.find(".stylewrapper").innerWidth(),l=f.find(".stylewrapper").innerHeight();if(o.attr("src","Runtime/Runtime/ChartHandler.sdk?h="+l+"&w="+c+"&title="+y+"&charttype="+p+"&gridlines="+w+"&measurefilter="+b+"&controlid=01111&rangetoken="+k+"&showDateRange="+d+"&itemset=Workflow&effect="+g),o.css("width",c),o.css("height",l),(!checkExists(v)||v.text=="")&&t.is(":visible")&&tt){var nt=t.data("panel");checkExists(nt)&&(nt.equalizeWidths(),nt.equalizeHeights())}}else{q.ResizeWrappersToHeight(t,a,f,"auto");var c=f.find(".stylewrapper").innerWidth(),l=f.find(".stylewrapper").innerHeight();o.attr("src","Runtime/Runtime/ChartHandler.sdk?h="+l+"&w="+c+"&title="+y+"&charttype="+p+"&gridlines="+w+"&measurefilter="+b+"&controlid=01111&rangetoken="+k+"&showDateRange="+d+"&itemset=Workflow&effect="+g);o.css("width",c);o.css("height",l)}var s=t.find(".SFC.SourceCode-Forms-Controls-Web-ControlPack-Reporting-ReportHeader-ReportHeader");return s.reportheader("option")===s?s.reportheader("option","height",r):s.reportheader("option","height",r),f.outerHeight(!0)},ResizeWrappersToWidth:function(n,t,q,r){q[0].style.width=r;var u=q.outerWidth(!0)+"px";return t.each(function(){this.style.width=u}),n.length>0&&(n[0].style.width=n.is(":visible")?u:r),n[0].style.width},ResizeWrappersToHeight:function(n,t,q,r){q[0].style.height=r;var u=q.outerHeight(!0)+"px";t.each(function(){this.style.height=u});n.length>0&&(n[0].style.height=n.is(":visible")?u:r)},getProperty:function(r){var u=n(q._getInstance(r.CurrentControlId));switch(r.property.toLowerCase()){case"Style":return u.reportheader("option","style");case"conditionalstyles":return t;case"fullprocnamedisp":return u.reportheader("option","FullProcName");case"activityname":return u.reportheader("getActivityName");case"users":return u.reportheader("option","UsersFQN");case"status":return u.reportheader("option","Status");case"text":return u.reportheader("option","text");case"rangetokendisplay":return u.reportheader("option","RangeToken");case"showdaterange":return u.reportheader("option","showDateRange");case"charttype":return u.reportheader("option","ChartType");case"yvalue":return u.reportheader("option","YValue");case"gridlines":return u.reportheader("option","GridLines");case"selecteffect":return u.reportheader("option","SelectEffect");case"transitions":return u.reportheader("option","Transitions");case"isenabled":return u.reportheader("option","isenabled");case"isparentenabled":return u.reportheader("option","isparentenabled");case"isvisible":return u.reportheader("option","isvisible");case"isparentvisible":return u.reportheader("option","isparentvisible");case"expanded":return u.reportheader("option","Expanded");case"isreadonly":return u.reportheader("option","isreadonly");case"editfullprocname":return u.reportheader("option","EditFullProcName");case"editactivityname":return u.reportheader("option","EditActivityName");case"tabindex":return u.reportheader("option","tabIndex");case"edityvalue":return u.reportheader("option","EditYValue");case"editrange":return u.reportheader("option","EditRange");case"editstatus":return u.reportheader("option","EditStatus");case"editusers":return u.reportheader("option","EditUsers");case"editcharttype":return u.reportheader("option","EditChartType");case"editfullprocnamedisp":return u.reportheader("option","EditFullProcNameDisp");case"editgridlines":return u.reportheader("option","EditGridLines");case"displayfullprocname":u.reportheader("option","DisplayFullProcName");case"displayactivityname":return u.reportheader("option","DisplayActivityName");case"displayyvalue":return u.reportheader("option","DisplayYValue");case"displayrange":return u.reportheader("option","DisplayRange");case"displaystatus":return u.reportheader("option","DisplayStatus");case"displayusers":return u.reportheader("option","DisplayUsers");case"displaycharttype":return u.reportheader("option","DisplayChartType");case"displayfullprocnamedisp":return u.reportheader("option","DisplayFullProcNameDisp");case"displaygridlines":return u.reportheader("option","DisplayGridLines");case"height":return u.reportheader("option","height");case"controlname":return u.reportheader("option","ControlName");default:return u.reportheader("option",r.property)}},setProperty:function(t){var r=n(q._getInstance(t.CurrentControlId));switch(t.property){case"Style":r.reportheader("option","style",t.Value);break;case"fullprocnamedisp":r.reportheader("option","FullProcName",t.Value);break;case"activityname":r.reportheader("option","ActivityName",t.Value);break;case"users":r.reportheader("option","UsersFQN",t.Value);break;case"status":r.reportheader("option","Status",t.Value);break;case"text":r.reportheader("option","text",t.Value);break;case"rangetokendisplay":r.reportheader("option","RangeToken",t.Value);break;case"showdaterange":r.reportheader("option","showDateRange",t.Value);break;case"charttype":r.reportheader("option","ChartType",t.Value);break;case"yvalue":r.reportheader("option","YValue",t.Value);break;case"gridlines":r.reportheader("option","GridLines",t.Value);break;case"selecteffect":r.reportheader("option","SelectEffect",t.Value);break;case"tabindex":r.reportheader("option","tabIndex",t.Value);break;case"transitions":r.reportheader("option","Transitions",t.Value);break;case"isenabled":r.reportheader("option","isenabled",t.Value);break;case"isparentenabled":r.reportheader("option","isparentenabled",t.Value);break;case"isvisible":r.reportheader("option","isvisible",t.Value);break;case"isparentvisible":r.reportheader("option","isparentvisible",t.Value);break;case"expanded":r.reportheader("option","Expanded",t.Value);break;case"isreadonly":r.reportheader("option","isreadonly",t.Value);break;case"editfullprocname":r.reportheader("option","EditFullProcName",t.Value);break;case"editactivityname":r.reportheader("option","EditActivityName",t.Value);break;case"edityvalue":r.reportheader("option","EditYValue",t.Value);break;case"editrange":r.reportheader("option","EditRange",t.Value);break;case"editstatus":r.reportheader("option","EditStatus",t.Value);break;case"editusers":r.reportheader("option","EditUsers",t.Value);break;case"editcharttype":r.reportheader("option","EditChartType",t.Value);break;case"editfullprocnamedisp":r.reportheader("option","EditFullProcNameDisp",t.Value);break;case"editgridlines":r.reportheader("option","EditGridLines",t.Value);break;case"displayfullprocname":r.reportheader("option","DisplayFullProcName",t.Value);break;case"displayactivityname":r.reportheader("option","DisplayActivityName",t.Value);break;case"displayyvalue":r.reportheader("option","DisplayYValue",t.Value);break;case"displayrange":r.reportheader("option","DisplayRange",t.Value);break;case"displaystatus":r.reportheader("option","DisplayStatus",t.Value);break;case"displayusers":r.reportheader("option","DisplayUsers",t.Value);break;case"displaycharttype":r.reportheader("option","DisplayChartType",t.Value);break;case"displayfullprocnamedisp":r.reportheader("option","DisplayFullProcNameDisp",t.Value);break;case"displaygridlines":r.reportheader("option","DisplayGridLines",t.Value);break;default:r.reportheader("option",t.property,t.Value)}},setStyles:function(t,q){var r=t.find(".SFC");r.reportheader();var v=r.closest(".controlwrapper");v.length>0&&v.css("box-sizing","content-box");var o=t.find(".stylewrapper");n(t).width("100%");r.css("display","");var b=t.find(".resizewrapper"),e=o,s={border:e,background:e,margin:e,padding:e,font:e};StyleHelper.setStyles(s,q);var h=parseInt(o[0].style.marginTop,10);isNaN(h)&&(h=0);var c=parseInt(o[0].style.marginBottom,10);isNaN(c)&&(c=0);var l=parseInt(r[0].style.height,10);l=l-h-c;o[0].style.height=l+"px";for(var y=e.find(".linkText"),a=0;a<y.length;a++)s={font:n(y[a])},StyleHelper.setStyles(s,q);if(t.attr("id")=="StyleBuilderPreviewPanelContent"){var p=SourceCode.Forms.Designers[SourceCode.Forms.Designers.Common.getDefinitionNode().tagName].Styles._getSelectedControl(),u=p.find(".SFC").reportheader("option"),r=t.find(".SFC");u.style=q;u.height="200px";r.reportheader(u);r.reportheader("expandMini",u.Expanded);u.Expanded&&r.height("200px")}else if(t.hasClass("condtional-format-preview")){var p=SourceCode.Forms.Designers[SourceCode.Forms.Designers.Common.getDefinitionNode().tagName].Styles._getSelectedControl(),u=p.find(".SFC").reportheader("option"),r=t.find(".SFC");u.style=q;u.height="200px";r.reportheader(u);r.reportheader("expandMini",u.Expanded);u.Expanded&&r.height("200px")}else{var f=t.find(".SFC"),w=t.is(".form-control");if(w||f.find("#panel1").width("100%"),f.reportheader("option")===f){var s=f.data().options;f.reportheader(s);f.reportheader("option","style",q)}else f.reportheader("option","style",q)}},closeModal:function(){n("#DisplayValueConfigPicker").remove()},GetPicker:function(t,q){var u=n("#"+q),r={type:t};n.ajax({url:applicationRoot+"ReportHeaderHandler.sdk",dataType:"text",type:"POST",data:r,async:!1,success:function(t){n(document.body).append(t)}})}});n.widget("sfc.reportheader",n.sfc.baseWidget,{options:{FullProcNameActivity:"(None)",FullProcActivityName:"",FullProcName:"(All)",Status:"(All)",DisplayStatus:!0,EditStatus:!0,Users:"(All)",UsersFQN:"(All)",isVisible:!0,isParentVisible:!0,DisplayUsers:!0,EditUsers:!0,DisplayRange:!0,EditRange:!0,text:"Report Header",height:"200px",ChartType:"column",DisplayChartType:!0,EditChartType:!0,DisplayRange:!0,EditRange:!0,ActivityName:"(None)",DisplayActivityName:!0,EditActivityName:!0,GridLines:!1,DisplayGridLines:!0,EditGridLines:!0,RangeToken:"last_90_days",previous:{},DisplayFullProcNameDisp:!0,EditFullProcNameDisp:!0,DisplayYValue:!0,EditYValue:!0,YValue:"instancecount",DisplayFullProcName:!0,EditFullProcName:!0,text:"Report Header",RangeType:"Predefined",style:SourceCode.Forms.Controls.Base.emptyStylesNode,Expanded:!0,value:"",tabIndex:0,ActivitySystemName:""},topInfoTitle:null,_create:function(){this.topInfoTitle="";this.options.designtime=this.element.hasClass("designtime");this.options.ControlName=this.element.attr("Name");this.options.Id=this.element.attr("id");this.base._create.apply(this,arguments);this.updateEditAndDisplay();this.updateChanges();this.createToggle();this.setTabIndex();this.bindKeyHandlerLinks();this.bindShow();this.options.previous=n.extend({},this.options);this.computeContentHeight();this.expand(this.options.Expanded,!0)},_optionValueConverter:function(n,t){n=n.toLowerCase();switch(n){case"expanded":case"editfullprocname":case"editactivityname":case"edityvalue":case"editrange":case"editstatus":case"editusers":case"editcharttype":case"editfullprocnamedisp":case"editgridlines":case"displayfullprocname":case"displayactivityname":case"displayyvalue":case"displayrange":case"displaystatus":case"displayusers":case"displaycharttype":case"displayfullprocnamedisp":case"displaygridlines":case"isenabled":case"isvisible":case"isreadonly":t=this.base._booleanConverter(t);case"activityname":t===""&&(t="(None)")}return t},applyChanges:function(){this.updateChanges()},IsCollapsed:!1,setVisible:function(){(this.options.isVisible!==this.options.previous.isVisible||this.options.isParentVisible!==this.options.previous.isParentVisible)&&(this.options.isVisible&&this.options.isParentVisible?this.element.removeClass("hidden"):this.element.addClass("hidden"))},bindShow:function(){var t=this;n(document).on("click","ul.tab-box-tabs .tab",function(){t.options.designtime&&SourceCode.Forms.Designers.Common.Context.refreshLayout()})},expand:function(t,q){var e=this.element.find(".stylewrapper");if(e.length!==0){var u=window.getComputedStyle(e[0]),s=parseInt(u.marginTop),h=parseInt(u.marginBottom),l=parseInt(u.paddingTop),a=parseInt(u.paddingBottom),v=parseInt(u.borderTopWidth),y=parseInt(u.borderBottomWidth),p=this.element.find(".topDivElipseEffect");if(t){this.element.find(".reportheader_wrapper").show();var f=this.element.find(".dropbutton"),tt=this.element.find(".textlabel");f.removeClass("expand-vertical");f.addClass("collapse-vertical");this.element.addClass("report-header-expanded").removeClass("report-header-collapsed");this.element.find(".topInfoString").remove();this.element.height(this.options.height);var g=parseInt(this.options.height),nt=g-(s+h);e[0].style.height=nt+"px"}else{var w=parseInt(e.find(".textlabel").height()),b=s+h+l+a+v+y,k=w+b+"px";this.element.height(k);this.element.find(".topInfoString").remove();var r=document.createElement("div");n(r).addClass("topInfoString");n(r).css("margin-top","-10px");n(r).css("margin-left","2px");n(r).html(" ");var tt=this.element.find(".textlabel");n(r).css("display","inline");var f=this.element.find(".dropbutton");f.removeClass("collapse-vertical");f.addClass("expand-vertical");this.element.addClass("report-header-collapsed").removeClass("report-header-expanded");var c=this.element.find(".sfc-report-header-header-wrapper");p.append(c);c.after(f);this.element.find(".reportheader_wrapper").hide();var d=this.generateTopHeader();n(r).html(d);n(r).attr("title",this.topInfoTitle);this.element.find(".textlabel").attr("title",this.topInfoTitle);this.element.find(".textlabel").after(r)}var o=n("#toggleHead_{0}".format(this.element[0].id));o.length>0&&(o[0].setAttribute("title",t?ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.CollapseHeader:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.ExpandHeader),q||o.trigger("focus"))}},expandMini:function(t){var q=this.element.find(".stylewrapper"),u=parseInt(q.css("margin-top")),f=parseInt(q.css("margin-bottom")),e=parseInt(q.css("padding-top")),o=parseInt(q.css("padding-bottom")),s=parseInt(q.css("border-top")),h=parseInt(q.css("border-bottom")),l=parseInt(q.find(".textlabel").height());isNaN(u)&&(u=0);isNaN(f)&&(f=0);isNaN(e)&&(e=0);isNaN(o)&&(o=0);isNaN(s)&&(s=0);isNaN(h)&&(h=0);var a=l+u+f+e+o+s+h+4+"px";if(t){this.element.find(".reportheader_wrapper").show();this.element.find(".topInfoString").remove();var c=this.element.find(".dropbutton");c.addClass("collapse-vertical");this.element.addClass("report-header-expanded").removeClass("report-header-collapsed");this.element.height(this.options.height)}else{this.element.height(a);this.element.find(".topInfoString").remove();var r=document.createElement("div");n(r).addClass("topInfoString");n(r).css("margin-top","-10px");n(r).css("margin-left","2px");n(r).css("display","inline");n(r).html(" ");var c=this.element.find(".dropbutton");c.removeClass("collapse-vertical");this.element.addClass("report-header-collapsed").removeClass("report-header-expanded");this.element.find(".reportheader_wrapper").hide();n(r).html(" (Ww, Uu, Vv)");this.element.find(".textlabel").after(r)}this.options.Expanded=t},setEnabled:function(){(this.options.isEnabled!==this.options.previous.isEnabled||this.options.isParentEnabled!==this.options.previous.isParentEnabled)&&(this.options.isEnabled&&this.options.isParentEnabled?this.element.removeClass("disabled"):this.element.addClass("disabled"))},setReadOnly:function(){this.options.isReadOnly!==this.options.previous.isReadOnly&&(this.options.isReadOnly?this.element.addClass("readonly"):this.element.removeClass("readonly"))},getActivityName:function(){return this.options.ActivityName!=="(None)"&&this.options.FullProcActivityName.indexOf(";")==-1?this.options.FullProcNameActivity==="(None)"?this.options.FullProcActivityName:checkExistsNotEmpty(this.options.ActivitySystemName)?this.options.FullProcNameActivity+"\\"+this.options.ActivitySystemName:this.options.FullProcNameActivity+"\\"+this.options.ActivityName:this.options.ActivityName},bindKeyHandlerLinks:function(){var t=this.element.find(".linkText");t.on("keydown",function(t){if(t.keyCode===38||t.keyCode===37){var q=n(this).closest(".form-field").prev().find("a");q.length>0&&q.trigger("focus")}if(t.keyCode===40||t.keyCode===39){t.preventDefault();var q=n(this).closest(".form-field").next().find("a");q.length>0&&q.trigger("focus")}t.keyCode===32&&n(this).trigger("click")})},generateTopHeader:function(){for(var n="(",u=0,t=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon,r=[{name:t.Workflows,visible:this.options.DisplayFullProcName},{name:t.Range,visible:this.options.DisplayRange},{name:t.Status,visible:this.options.DisplayStatus},{name:t.Users,visible:this.options.DisplayUsers},{name:t.Activity,visible:this.options.DisplayActivityName},{name:t.DisplayValue,visible:this.options.DisplayYValue}],q=0;q<r.length;q++)r[q].visible&&(q!=0?(u>0&&(n+=", "),n+=r[q].name):(u>0&&(n+=" "),n+=r[q].name),u++);return n==="("?n="":n+=")",n},createToggle:function(){var u=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon,q=this,r=this.element.attr("id"),f=n("#topdiv_"+r);f.addClass("topDivElipseEffect");this.options.designtime||this.element.find(".dropbutton").remove();var t=document.createElement("a");n(t).attr("href","javascript:;");n(t).attr("id","toggleHead_"+r);n(t).attr("tabindex",this.options.tabIndex);n(t).attr("pid",r);this.options.Expanded?(n(t).attr("title",u.CollapseHeader),t.className="dropbutton collapse-vertical"):(n(t).attr("title",u.ExpandHeader),t.className="dropbutton expand-vertical");f.append(t);n("#toggleHead_"+r).on("click",function(){return q.options.Expanded=q.options.Expanded===!0?!1:!0,q.expand(q.options.Expanded),!1}).on("keydown",function(t){(t.keyCode===32||t.keyCode===38||t.keyCode===40)&&n(this).trigger("click")})},setDisplay:function(n,t){n=n=="true"?!0:!1;switch(t){case"displayfullprocname":this.options.DisplayFullProcName=n;break;case"displayactivityname":this.options.DisplayActivityName=n;break;case"displayyvalue":this.options.DisplayYValue=n;break;case"displayrange":this.options.DisplayRange=n;break;case"displaystatus":this.options.DisplayStatus=n;break;case"displayusers":this.options.DisplayUsers=n;break;case"displaycharttype":this.options.DisplayChartType=n;break;case"displayfullprocnamedisp":this.options.DisplayFullProcNameDisp=n;break;case"displaygridlines":this.options.DisplayGridLines=n}this.updateChanges()},setEdit:function(n,t){n=n=="true"?!0:!1;switch(t){case"editfullprocname":this.options.EditFullProcName=n;break;case"editactivityname":this.options.EditActivityName=n;break;case"edityvalue":this.options.EditYValue=n;break;case"editrange":this.options.EditRange=n;break;case"editstatus":this.options.EditStatus=n;break;case"editusers":this.options.EditUsers=n;break;case"editcharttype":this.options.EditChartType=n;break;case"editfullprocnamedisp":this.options.EditFullProcNameDisp=n;break;case"editgridlines":this.options.EditGridLines=n}this.updateChanges()},updateEditAndDisplay:function(){var t=[];this.options.EditFullProcName&&this.options.isEnabled&&!this.options.isReadOnly?this.bindFullProcNameDisp():n("#FullProcNameDisp_"+this.element.attr("id")).off("click");this.options.DisplayFullProcName?(n("#FullProcNameDisp_"+this.element.attr("id")).parent().parent().parent().show(),t.push(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Workflows)):n("#FullProcNameDisp_"+this.element.attr("id")).parent().parent().parent().hide();this.options.EditRange&&this.options.isEnabled&&!this.options.isReadOnly?this.bindRangeToken():n("#RangeToken_"+this.element.attr("id")).off("click");this.options.DisplayRange?(n("#RangeToken_"+this.element.attr("id")).parent().parent().parent().show(),t.push(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Range)):n("#RangeToken_"+this.element.attr("id")).parent().parent().parent().hide();this.options.EditStatus&&this.options.isEnabled&&!this.options.isReadOnly?this.bindStatus():n("#Status_"+this.element.attr("id")).off("click");this.options.DisplayStatus?(n("#Status_"+this.element.attr("id")).parent().parent().parent().show(),t.push(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Status)):n("#Status_"+this.element.attr("id")).parent().parent().parent().hide();this.options.EditUsers&&this.options.isEnabled&&!this.options.isReadOnly?this.bindUsers():n("#Users_"+this.element.attr("id")).off("click");this.options.DisplayUsers?(n("#Users_"+this.element.attr("id")).parent().parent().parent().show(),t.push(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Users)):n("#Users_"+this.element.attr("id")).parent().parent().parent().hide();this.options.EditActivityName&&this.options.isEnabled&&!this.options.isReadOnly?this.bindActivityName():n("#ActivityName_"+this.element.attr("id")).off("click");this.options.DisplayActivityName?(n("#ActivityName_"+this.element.attr("id")).parent().parent().parent().show(),t.push(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Activity)):n("#ActivityName_"+this.element.attr("id")).parent().parent().parent().hide();this.options.EditYValue&&this.options.isEnabled&&!this.options.isReadOnly?this.bindYValue():n("#DisplayValue_"+this.element.attr("id")).off("click");this.options.DisplayYValue?(n("#DisplayValue_"+this.element.attr("id")).parent().parent().parent().show(),t.push(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.DisplayValue)):n("#DisplayValue_"+this.element.attr("id")).parent().parent().parent().hide();this.updateTopStringTitle(t)},updateTopStringTitle:function(n){var t=n.join(", ");this.topInfoTitle=t},updateChanges:function(){var q=!1;if(this.updateEditAndDisplay(),this.options.RangeToken!==this.options.previous.RangeToken){this.options.RangeType="Predefined";this.options.RangeToken.indexOf("StartDate")!=-1?this.options.RangeType="Specific":this.options.RangeToken.indexOf(":")!=-1&&(this.options.RangeType="Custom");var h=SourceCode.Forms.Controls.Common.DateRange.ParseToken(this.options.RangeToken);this.options.RangeType==="Predefined"?this.options.RangeDisplay=h.Pretty:this.options.RangeType==="Specific"&&(this.options.RangeDisplay=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.SpecificRange);this._setOption("RangeToken",this.options.RangeToken);q=!0}if(this.options.FullProcName!==this.options.previous.FullProcName&&(this.options.FullProcNameDisp=this.options.FullProcName,this.options.FullProcNameHTML=t,this._setOption("FullProcName",this.options.FullProcName),q=!0),this.options.Status!==this.options.previous.Status&&(this._setOption("Status",this.options.Status),q=!0),this.options.tabIndex!==this.options.previous.tabIndex&&this.setTabIndex(),this.options.YValue!==this.options.previous.YValue&&(this._setOption("YValue",this.options.YValue),q=!0),this.options.UsersFQN!==this.options.previous.UsersFQN){this.options.UsersFQN==="(All)"&&(this.options.Users="(All)");try{var r=JSON.parse(this.options.UsersFQN);this.options.UsersJSON=this.options.UsersFQN;this.options.UsersFQN="";this.options.Users="";for(var n=0;n<r.length;n++)n!=0?(this.options.UsersFQN+=";"+r[n].fqn,this.options.Users+=";"+r[n].name):(this.options.UsersFQN+=r[n].fqn,this.options.Users+=r[n].name),n++}catch(c){}this._setOption("UsersFQN",this.options.UsersFQN);q=!0}if(this.options.style!==this.options.previous.style&&(this.setStyles(),this.createToggle()),this.options.height!==this.options.previous.height&&this.element.height(this.options.height),this.options.Expanded!==this.options.previous.Expanded&&this.expand(this.options.Expanded),this.options.ActivityName!==this.options.previous.ActivityName){try{var f={};f=JSON.parse(this.options.ActivityName);this.options.FullProcActivityName=f.SystemPath;for(var e=f.SystemPath.split("\\"),s="",n=0;n<e.length-1;n++)n!==0&&(s+="\\"),s+=e[n];this.options.FullProcNameActivity=s;this.options.ActivityName=f.DisplayName;this.options.ActivitySystemName=e[e.length-1]}catch(c){var u=this.options.ActivityName.split("\\");if(u.length>1){for(var o="",n=0;n<u.length-1;n++)n!==0&&(o+="\\"),o+=u[n];this.options.FullProcActivityName=o;this.options.FullProcNameActivity=o;this.options.ActivityName=u[u.length-1]}}this._setOption("ActivityName",this.options.ActivityName);q=!0}this.options.text!==this.options.previous.text&&(this.element.find(".textlabel").text(this.options.text),q=!0);this.setVisible();this.setEnabled();this.setReadOnly();this.updateOptionsfull(this.options);!this.options.designtime&&q&&raiseEvent(this.element.attr("id"),"Control","OnChange")},updateOptions:function(t,q){var r=this.element.attr("id");n("#"+t).html(q);this.options[t]=q;raiseEvent(this.element.attr("id"),"Control","OnChange")},setTabIndex:function(){var t=this.options.tabIndex,q=this.element.find(".linkText");if(this.options.isEnabled===!1||this.options.isReadOnly===!0){t=-1;for(var n=0;n<q.length;n++)q[n].tabIndex=-1}var r=this.element.find(".dropbutton");r.attr("tabindex",t);r[0].tabIndex=t;for(var n=0;n<q.length;n++)q[n].tabIndex=t},updateOptionsfull:function(t){this.options=t;var r=n("#FullProcNameDisp_"+this.options.Id),u=n("#Status_"+this.options.Id),f=n("#Users_"+this.options.Id),e=n("#ActivityName_"+this.options.Id),q=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon;this.options.FullProcNameDisp!=="(All)"?(r.html("("+q.Custom+")"),r.attr("title",q.Custom)):(r.html(q.All),r.attr("title",q.All));this.options.Status!=="(All)"?(u.html("("+q.Custom+")"),u.attr("title",q.Custom)):(u.html(q.All),u.attr("title",q.All));this.options.Users!=="(All)"?(f.html("("+q.Custom+")"),f.attr("title",q.Custom)):(f.html(q.All),f.attr("title",q.All));this.options.ActivityName!=="(None)"?(e.html(this.options.ActivityName),e.attr("title",this.options.ActivityName)):(e.html(q.None),e.attr("title",q.None));n("#ChartType").html(this.options.ChartType);var o=n("#RangeToken_"+this.options.Id);o.html(this.options.RangeDisplay);o.attr("title",this.options.RangeDisplay);var s=this.options.YValue.toLowerCase()==="instancecount"?ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.InstanceCount:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Duration;var h=n("#DisplayValue_"+this.options.Id);if(h.html(s),h.attr("title",s),this.IsCollapsed){var l=this.generateTopHeader(),c=n("#titleinfo_"+this.element.attr("id"));c.html(l);c.addClass("report-header-main-sub-text")}},bindFullProcNameDisp:function(){var t=this,r=this.element.attr("id");n("#FullProcNameDisp_"+t.options.Id).off("click").on("click",function(){q.GetPicker("workflowconfig",r);SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.initialize(null,null,null,t.options,t.updateOptionsfull,null,null,!0)})},bindActivityName:function(){var t=this,r=this.element.attr("id");n("#ActivityName_"+t.options.Id).off("click").on("click",function(){q.GetPicker("activityconfig",r);SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.initialize(null,null,null,t.options,t.updateOptionsfull,null,null,!0)})},bindStatus:function(){var t=this,r=this.element.attr("id");n("#Status_"+t.options.Id).off("click").on("click",function(){q.GetPicker("statusconfig",r);SourceCode.Forms.Controls.Reporting.StatusPropertyConfig.initializeRuntime(null,null,null,t.options,t.updateOptionsfull,null,null,!0)})},bindUsers:function(){var t=this,r=this.element.attr("id");n("#Users_"+t.options.Id).off("click").on("click",function(){q.GetPicker("usersconfig",r);SourceCode.Forms.Controls.Reporting.UsersComplexConfig.initialize(null,null,null,t.options,t.updateOptionsfull,null,null,!0)})},bindRangeToken:function(){var t=this,r=this.element.attr("id");n("#RangeToken_"+t.options.Id).off("click").on("click",function(){q.GetPicker("daterangeconfig",r);SourceCode.Forms.Controls.Reporting.DateRangeConfig.initialize(null,null,null,t.options,t.updateOptionsfull,null,null,!0)})},bindYValue:function(){var r=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon,t=this;n("#DisplayValue_"+this.element.attr("id")).off("click").on("click",function(){var u=document.createElement("select");u.setAttribute("tabindex","0");u.setAttribute("id","displayValueDropDown");var o=t.options.YValue,h=t.element.attr("id");n(u).on("change",function(){o=n(this).val()});var f=document.createElement("option");f.value="InstanceCount";f.innerHTML=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.InstanceCount;f.value.toLowerCase()==t.options.YValue.toLowerCase()&&n(f).attr("selected","selected");var e=document.createElement("option");e.value="Duration";e.innerHTML=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Duration;e.value.toLowerCase()==t.options.YValue.toLowerCase()&&n(e).attr("selected","selected");n(u).append(e);n(u).append(f);var s=document.createElement("div");n(s).attr("id","display-reportheader-dropdown");n(s).append(u);n(u).dropdown();popupManager.showPopup({id:"DisplayValueConfigPicker",buttons:[{type:"help",click:function(){HelpHelper.runHelp(5003)}},{text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.OK,click:function(){n("#DisplayValue_"+h).html(o.toLowerCase()=="instancecount"?ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.InstanceCount:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Duration);t.options.YValue=o;popupManager.closeLast()}},{id:"UsersConfig_Cancel",text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Cancel,click:function(){popupManager.closeLast()}}],headerText:r.DisplayValue,draggable:!0,content:s,width:300,height:100,onClose:q.closeModal});n(".SourceCode-Forms-Controls-Web-Button.help").on("keyup",function(t){t.keyCode===32&&n(this).trigger("click")});n("#display-reportheader-dropdown").find("a").trigger("focus")})},bindChartType:function(){var t=this,r=this.element.attr("id");n("#ChartType_"+r).off("click").on("click",function(){var r=document.createElement("select"),u="";n(r).on("change",function(){u=n(this).val();n("#ChartType").html(u);t.options.ChartType=u;raiseEvent(t.element.attr("id"),"Control","OnChange")});var f=document.createElement("option");f.value="Column";f.innerHTML="Column";var e=document.createElement("option");e.value="Bar";e.innerHTML="Bar";var o=document.createElement("option");o.value="Pie";o.innerHTML="Pie";n(r).append(e);n(r).append(f);n(r).append(o);var s=document.createElement("div");n(s).append(r);n(r).dropdown();popupManager.showPopup({id:"UsersConfig_secondPageOutside",buttons:[{type:"help",click:function(){HelpHelper.runHelp(5003)}},{text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.OK,click:q.closeModal},{id:"UsersConfig_Cancel",text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Cancel,click:q.closeModal}],headerText:"Chart Type",draggable:!0,content:s,width:300,height:100,onClose:q.closeModal})})},destroy:function(){n(this.element).off(".reportheader");n.Widget.prototype.destroy.call(this)},computeContentHeight:function(){var h=this.element.find(".stylewrapper"),n=h[0].style,r=parseInt(n.marginTop,10);r=isNaN(r)?0:r;var u=parseInt(n.marginBottom,10);u=isNaN(u)?0:u;var f=parseInt(n.paddingTop,10);f=isNaN(f)?10:f;var e=parseInt(n.paddingBottom,10);e=isNaN(e)?10:e;var t=parseInt(n.borderTopWidth,10);t=isNaN(t)?0:t;var q=parseInt(n.borderBottomWidth,10);q=isNaN(q)?0:q;var c=this.element.find(".topDivElipseEffect"),l=this.element.find(".reportheader_wrapper"),a=this.element.height(),v=c.outerHeight(),o=-1;(t>0||q>0)&&(o=1);var s=a-v-f-e-r-u-t-q+o;l[0].style.height=parseInt(s)<159?"auto":s+"px"},setStyles:function(){var q=this.options.style,t=this.element.find(".stylewrapper");this.options.style=q;var r={border:t,background:t,margin:t,padding:t,font:t,horizontalAlign:t};StyleHelper.setStyles(r,q);this.computeContentHeight();for(var f=t.find(".linkText"),u=0;u<f.length;u++)r={font:n(f[u])},StyleHelper.setStyles(r,q);SourceCode.Forms.Browser.msie&&SourceCode.Forms.Browser.version==="8.0"&&(document.body.className=document.body.className)}});n.sfc.reportheader.prototype.base=n.sfc.baseWidget.prototype;n(document).ready(function(){n(".SFC.SourceCode-Forms-Controls-Web-ControlPack-Reporting-ReportHeader-ReportHeader").reportheader()})})(jQuery);
/*!
 SourceCode.Forms.Controls.Web.ControlPack.Reporting.UtilityTemplates.JS.ProcessesComplexConfig.js (Embedded resource)
*/
function initWorkflowConfig(n,t,q,r,u,f,e,o){SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.initialize(n,t,q,r,u,f,e,o)}(function(n){(typeof SourceCode=="undefined"||SourceCode===null)&&(SourceCode={});(typeof SourceCode.Forms=="undefined"||SourceCode.Forms===null)&&(SourceCode.Forms={});(typeof SourceCode.Forms.Controls=="undefined"||SourceCode.Forms.Controls===null)&&(SourceCode.Forms.Controls={});(typeof SourceCode.Forms.Controls.Reporting=="undefined"||SourceCode.Forms.Controls.Reporting===null)&&(SourceCode.Forms.Controls.Reporting={});var o,s,u,q,t,r,f,e,h=360,c=420;SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig={validationMessages:null,errorItems:[],IsInError:null,resourceServices:null,initialize:function(u,l,a,v,y,p,w,b){t="";r="";f="";n(".textboxSpan").remove();this.Context=w;var ft=n("#ProcessChartConfig_secondPage");ft.css("display","block");n("#addButton1").addClass("disabled");ft.find("input:radio").radiobutton();o=y;q=document.getElementById("ProcessChartTextBox");s=l;loading=!0;this.callback=y;this.controltype=v;this.treeXml=null;this.isInternal=p;this.isRuntime=b;jQuery("#propertyConfig_propertiesXml").val(u||(u="<Controls><Control/><\/Controls>"));var et=parseXML(u),nt=et.documentElement,tt;this.IsInError=null;var qt=et.selectSingleNode("Controls/Control/Properties/Property[Name='FullProcName']");checkExists(qt)&&checkExists(qt.getAttribute("ValidationMessages"))&&(this.resourceServices=new SourceCode.Forms.Services.AnalyzerResourcesService,this.errorItems=this.resourceServices.parseValidationMessage(qt.getAttribute("ValidationMessages")),this.updateErrorState(),this.IsInError===!0&&n(q).addClass("error"));var k=nt.selectSingleNode('/Controls/Control/Properties/Property[Name = "FullProcNameHTML"]'),rt=nt.selectSingleNode('/Controls/Control/Properties/Property[Name = "FullProcNameDisp"]'),ut=nt.selectSingleNode('/Controls/Control/Properties/Property[Name = "FullProcName"]');this.isRuntime||n("#ProcessChartConfig_secondPage").addClass("complex-picker-entry");n("#checkboxAll,#checkboxAll1").on("click",SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.checkAll);b&&(k=v.FullProcNameHTML,rt=v.FullProcNameDisp,ut=v.FullProcName,typeof k=="undefined"&&(SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.generateHTML(ut),k=n(q).html()));try{var g=" ";typeof y=="object"?(g=v.FullProcName,typeof v.FullProcName=="undefined"&&(g="(All)")):g=nt.selectSingleNode('/Controls/Control/Properties/Property[Name = "FullProcName"]/Value');tt=g.text==="(All)"||g.text===undefined?!0:!1}catch(yt){tt=!1}var ot;ot=SourceCode.Forms.Layout.isRuntime()?h:c;popupManager.showPopup({id:"ProcessChartPropertyConfig_secondPageOutside",buttons:[{type:"help",click:function(){HelpHelper.runHelp(5003)}},{text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.OK,click:this.processChartOKClick.bind(this)},{id:"processchartPropertyConfig_Cancel",text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Cancel,click:this.ProcessChartConfigCancelClick.bind(this)}],headerText:jQuery("#ProcessChartConfig_secondPage").attr("MainHeaderProcessChartConfig"),draggable:!0,content:jQuery("#ProcessChartConfig_secondPage"),width:500,height:ot,onClose:function(){this.processChartConfigClose(o)}.bind(this)});checkExistsNotEmpty(b)||n("#ProcessChartPropertyConfig_secondPageOutside").addClass("designtime");n(".SourceCode-Forms-Controls-Web-Button.help").on("keyup",function(t){t.keyCode===32&&n(this).trigger("click")});if(n(q).html(" "),k&&!tt){if(typeof v!="object"){var lt=parseXML(k.xml),at=n(lt).find("Value");SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.generateHTML(qt.selectSingleNode("Value").text);rt!=null&&(t=n(rt.selectSingleNode("Value")).text(),r=n(ut.selectSingleNode("Value")).text(),f=n(at).text())}else t=v.FullProcNameDisp,r=v.FullProcName,f=v.FullProcNameHTML,typeof f=="undefined"&&(f=k),SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.generateHTML(r);t=="(None)"&&(t="");var st=n("#checkboxAll1"),vt=n("#checkboxAll");st.prop("checked",!0);e=!1;st.parent().addClass("checked");vt.parent().removeClass("checked");n("#selectedPanelDisabler").removeClass("disabled");n("#checkboxAll1").trigger("focus");var ht=n("#ProcessChartConfigTreeHolder");ht.find("a").attr("tabindex","0");n("#ProcessChartPropertyConfig_secondPageOutside").find(".textboxSpan").attr("tabindex","0");SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.getProcesses(l,!1,null)}else if(checkExists(p)&&p==!0)SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.loadInternal(w,l);else{var ht=n("#ProcessChartConfigTreeHolder");ht.css("opacity",".5");n("#selectedPanelDisabler").addClass("disabled");var ct=document.getElementById("ProcessChartPropertyConfig_secondPageOutside").querySelector("ul.tree");ct!==null&&(ct.style.display="none");n("#addButton1").addClass("disabled");n("#addButton1").attr("onclick","");jQuery("#ProcessChartTextBox > .spanUsers").css("display","none");SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.getProcessesRuntime(l,!0,tt)}t==="(None)"&&(t="");n("#ProcessChartTextBox").on("click",".processInnerSpan",SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.removeSpan);n("#addButton1").SFCButton({});var d=n("#ProcessChartPropertyConfig_secondPageOutside").find(".spanUsers");d.on("focus",function(){n(this).addClass("focus")});d.on("blur",function(){n(this).removeClass("focus")});d.on("keyup",function(t){if(t.keyCode===13||t.keyCode===32){SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.removeSpanObject(n(this).find("span")[0]);var u=n("#checkboxAll1");d=n("#ProcessChartPropertyConfig_secondPageOutside").find(".spanUsers");d.length>0?d.first().trigger("focus"):n(u).trigger("focus")}if(t.keyCode===38){var q=n(this).prev().prev();q.length>0&&q.trigger("focus")}if(t.keyCode===40){var r=n(this).next().next();r.length>0&&r.trigger("focus")}});n("#addButton1").attr("tabindex","-1")},loadInternal:function(t,q){checkExistsNotEmpty(t.options.complexValue)?t.options.complexValue!=="(All)"?(r=t.options.complexValue,SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.generateHTML(t.options.complexValue),SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.getProcesses(q,!1,null),n("#checkboxAll1").trigger("click")):(SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.getProcesses(q,!0,null),n("#checkboxAll").trigger("click")):(SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.getProcesses(q,!1,null),n("#checkboxAll1").trigger("click"))},generateHTML:function(t){for(var u=t.split(";"),r=0;r<u.length;){if(u[r]!==""){var f=u[r].split("\\");f.length>1&&n(q).append(SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.generateSpan(f[f.length-1],u[r]))}r++}},checkSelected:function(u){var o=n("#checkboxAll"),h=n("#checkboxAll1");if(o.prop("checked")||u){var c=SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.treeXml.selectNodes("/nodes/node[@text='Workflows']/node[@ItemType='ProcessFolder']/node[@ItemType='Process']");q.value="";n(q).css("opacity",".5");n(q).prop("disabled",!0);q=document.getElementById("workflowsAll");q.value="";n(c).each(function(){q.value="(All)"});e=!0;var l=n("#addButton1");l.addClass("disabled");u&&(o.prop("checked",!0),o.parent().addClass("checked"),h.parent().removeClass("checked"));t="(All)";r="(All)";f="";n("#selectedPanelDisabler").addClass("disabled");n("#checkboxAll").trigger("focus");var s=n("#ProcessChartConfigTreeHolder");s.find("a").attr("tabindex","-1");n("#ProcessChartPropertyConfig_secondPageOutside").find(".textboxSpan").attr("tabindex","-1")}else{var s=n("#ProcessChartConfigTreeHolder");s[0].style.opacity=1;e=!1;n("#checkboxAll1").trigger("focus");s.find("a").attr("tabindex","0");n("#ProcessChartPropertyConfig_secondPageOutside").find(".textboxSpan").attr("tabindex","0");n("#selectedPanelDisabler").removeClass("disabled")}},processChartConfigClose:function(n){typeof this.controltype!="object"?(jQuery("#ProcessChartConfig_secondPage").remove(),n()):jQuery("#ProcessChartConfig_secondPage").remove()},checkAll:function(){var l=n(this),u=n("#addButton1"),a=n.Deferred(),o=document.getElementById("ProcessChartPropertyConfig_secondPageOutside").querySelector("ul.tree");if(l.val()==="0"){o!==null&&(o.style.display="none");e=!0;u.addClass("disabled");u.attr("onclick","");jQuery("#ProcessChartTextBox > .spanUsers").css("display","none");var s=n("#ProcessChartConfigTreeHolder");s[0].style.opacity=.5;var v=n("#checkboxAll");v.prop("checked")&&(q.value="",n(q)[0].style.opacity=.5,n(q).prop("disabled",!0),q=document.getElementById("workflowsAll"),q.value="");n("#selectedPanelDisabler").addClass("disabled");t=" ";t="(All)";r="(All)";f="";s.find("a").attr("tabindex","-1");n("#ProcessChartPropertyConfig_secondPageOutside").find(".textboxSpan").attr("tabindex","-1")}else{o!==null&&n(o).css("display","initial");jQuery("#ProcessChartTextBox > .spanUsers").css("display","initial");e=!1;n("#selectedPanelDisabler").removeClass("disabled");q=document.getElementById("ProcessChartTextBox");n(q)[0].style.opacity=1;n(q).prop("disabled",!1);var s=n("#ProcessChartConfigTreeHolder");s[0].style.opacity=1;var h=n(".textboxSpan");t="";r="";for(var c=0;c<h.length;)t+=";"+n(h[c]).attr("data-info"),r+=n(h[c]).attr("data-fqn")+";",c++;f=n(q).html();n("#ProcessChartConfigTreeHolder .selected.workflow").length>0&&(u.removeClass("disabled"),u.attr("onclick","SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.addClick()"));s.find("a").attr("tabindex","0");h.attr("tabindex","0");a.resolve()}SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.IsInError=!1},addClick:function(){var t=u.tree("find","selected"),r="";try{t!=null&&(r=t.metadata().name.toString())}catch(l){}var s=r.split("\\");if(s.length<2)popupManager.showWarning(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.ValidWorkflow);else{var e=t.metadata().name.toString(),o=e.split("\\"),h=SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.addSpan(o[o.length-1],e);n(q).append(h);f=n(q).html();var c=n("#addButton1");c.addClass("disabled")}},foundInError:function(n){for(var q=0;q<this.errorItems.length;q++)if(this.errorItems[q].name===n&&this.errorItems[q].status==="Missing"){var t=this.errorItems[q];return t.message=this.resourceServices.getValidationMessages("{0},{1},{2},{3},{4},{5}".format(t.type,t.referenceAs,t.status,"",t.name,t.displayName)),!0}return!1},returnMessage:function(n){for(var t=0;t<this.errorItems.length;t++)if(this.errorItems[t].name===n)return this.errorItems[t].message.toString().replace("SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReferencesAs.ReportingWorkflow",ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReferencesAs.ReportingWorkflow)},generateSpan:function(t,q){var u=n("#delete16url").val(),r=document.createElement("span");if(n(r).attr("data-info",t),n(r).addClass("spanProcess"),n(r).attr("data-fqn",q),r.setAttribute("tabindex","0"),r.innerHTML=t+'<span tabindex="-1" class="processInnerSpan"><img class="imgDelete16" src=\''+u+"'/><\/span>",r.className="spanUsers textboxSpan",this.IsInError&&this.foundInError(q)){n(r).addClass("error");var f=this.returnMessage(q);n(r).attr("title",f)}n(r).on("focus",function(){n(this).addClass("focus")});n(r).on("blur",function(){n(this).removeClass("focus")});n(r).on("keyup",function(t){if(t.keyCode===13||t.keyCode===32){SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.removeSpanObject(n(this).find("span")[0]);var f=n("#checkboxAll1"),q=n("#ProcessChartPropertyConfig_secondPageOutside").find(".spanUsers");q.length>0?q.first().trigger("focus"):n(f).trigger("focus")}if(t.keyCode===38){var r=n(this).prev().prev();r.length>0&&r.trigger("focus")}if(t.keyCode===40){var u=n(this).next().next();u.length>0&&u.trigger("focus")}});return r},addSpan:function(q,u){for(var s=r.split(";"),f=!1,e=0;e<s.length;)s[e]==u&&(f=!0),e++;var o=SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.generateSpan(q,u);f||(t=t+";"+q,r=r+u+";");n(o).on("focus",function(){n(this).addClass("focus")});n(o).on("blur",function(){n(this).removeClass("focus")});return f?"":o},removeErrorItem:function(n){for(var t=0;t<this.errorItems.length;t++)if(this.errorItems[t].name===n){this.errorItems.splice(t,1);break}},updateErrorState:function(){for(var t=0;t<this.errorItems.length;t++)if(this.errorItems[t].status=="Missing"){this.IsInError=!0;return}if(this.errorItems.length===0){this.IsInError=!1;n(q).removeClass("error");n(q).removeAttr("title");return}this.IsInError=!1},removeSpan:function(){var c=this,l=n(c).parent().data().fqn,e=u.tree("find","selected");if(e.length>1)for(var o=0;o<e.length;o++)l===n(e[o]).metadata().name&&n(e[o]).removeClass("selected");else if(e.length==1){var a=n("#addButton1");a.removeClass("disabled")}n(c).closest(".spanUsers").remove();var h=n(".textboxSpan");t="";r="";for(var s=0;s<h.length;)t+=";"+n(h[s]).attr("data-info"),r+=n(h[s]).attr("data-fqn")+";",s++;f=n(q).html();SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.removeErrorItem(l);SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.updateErrorState()},removeSpanObject:function(e){var l=n(e).parent().data().fqn,o=u.tree("find","selected");if(o.length>1)for(var s=0;s<o.length;s++)l===n(o[s]).metadata().name&&n(o[s]).removeClass("selected");else if(o.length==1){var a=n("#addButton1");a.removeClass("disabled")}n(e.parentNode).next().remove();n(e.parentNode).remove();var c=n("#ProcessChartPropertyConfig_secondPageOutside").find(".textboxSpan");t="";r="";for(var h=0;h<c.length;)t+=";"+n(c[h]).attr("data-info"),r+=n(c[h]).attr("data-fqn")+";",h++;f=n(q).html();SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.removeErrorItem(l);SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.updateErrorState()},addDblClick:function(t){var s=n(t),r="",e="";try{r=u.tree("find","selected");e=r.metadata().name.toString()}catch(a){e=s.parent().metadata().name.toString()}var h=e.split("\\");if(r.length===0){popupManager.showWarning(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.ValidWorkflow);return}if(r.metadata().ItemType!=="Process")popupManager.showWarning(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.ValidWorkflow);else{var o;try{o=r.metadata().name.toString()}catch(a){o=s.parent().metadata().name.toString()}var c=SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.addSpan(h[h.length-1],o);n(q).append(c);f=n(q).html();var l=n("#addButton1");l.addClass("disabled")}},addKeyUp:function(t){var u=n(t),r="",e="";try{r=u;e=r.metadata().name.toString()}catch(l){e=u.metadata().name.toString()}var s=e.split("\\");if(r.length===0){popupManager.showWarning(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.ValidWorkflow);return}if(r.metadata().ItemType!=="Process")popupManager.showWarning(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.ValidWorkflow);else{var o;try{o=r.metadata().name.toString()}catch(l){o=u.metadata().name.toString()}var h=SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.addSpan(s[s.length-1],o);n(q).append(h);f=n(q).html();var c=n("#addButton1");c.addClass("disabled")}},filterOut:function(t){var r=n("#ProcessChartConfigTreeHolder");r.css("opacity","1");var f=n("#checkboxAll1");f.prop("checked",!0);var e=n(t).val(),q=null;jQuery.ajax({url:applicationRoot+"Utilities/AJAXCall.ashx",data:{method:"getItems",resultTypes:"ProcessFolders|ProcessSets|Processes"},type:"POST",dataType:"text",global:!1,async:!1,success:function(n){q=n}});jQuery.ajax({type:"POST",url:applicationRoot+"FilterProcessHandler.sdk",dataType:"text",data:{text:e,xml:q},success:function(t){n("#ProcessChartConfigTreeHolder").html("");var r=jQuery('<div id="processTree" class="scroll-wrapper"><ul class="tree collapsed-root"><li class="root"><a href="javascript:;">Root<\/a><\/li><\/ul><\/div>'),e=jQuery("<div id='formProcessDiv'><\/div>");r.appendTo(e);var q=new XslTransform;q.importStylesheet(applicationRoot+"Rules/XSLT/TreeSelectorWidget.xslt");q.addParameter("WorkflowsResourceName",ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Workflows);var f=parseXML(q.transformToText(t));u=r.find(".tree").tree();var o=u.tree("find","root");u.tree("loadXML",f,o);n("#ProcessChartConfigTreeHolder").append(u);n(".root").removeClass("closed");n(".root").addClass("open");n(".root ul li").removeClass("closed");n(".root ul li").addClass("open");this.treeXml=f;n("#addButton1").attr("onclick","SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.addClick()");n(".workflow > a").each(function(){n(this).attr("ondblclick","SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.addDblClick(this)")})},error:function(){}})},processChartOKClick:function(){var o=null;if(this.IsInError){popupManager.showWarning("Errors in Configuration still present");return}if(t==""){popupManager.showWarning(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.ErrorOneWorkflow);return}if(checkExists(this.isInternal)&&this.isInternal===!0){var e=[];e.push("");var q={};q.value=r;var u={};t!="(All)"&&t.substring(0,1)==";"?(t=t.substring(1,t.length),q.display="(Custom)",u.display="(Custom)"):(q.display="(All)",u.display="(All)");u.icon="FullProcNameDisp";var s=[q,u];e.push(s);o=e}else if(this.isRuntime)t!="(All)"&&t.substring(0,1)==";"&&(t=t.substring(1,t.length)),this.controltype.FullProcName=r,this.controltype.FullProcNameDisp=t,this.controltype.FullProcNameHTML=f,this.controltype.FullProcNameDisp==""&&(this.controltype.FullProcNameDisp="(None)"),jQuery("#ProcessChartConfig_secondPage").remove();else{var n=parseXML(document.getElementById("propertyConfig_propertiesXml").value);this.saveXmlValues("FullProcName",n);this.saveXmlValues("FullProcNameDisp",n);this.saveXmlValues("FullProcNameHTML",n);this.saveXmlValues("WorkflowSelection",n);jQuery("#ProcessChartConfig_secondPage").remove()}popupManager.closeLast({cancelOnClose:!0});checkExists(this.isInternal)&&this.isInternal===!0?this.callback(o,this.Context):this.isRuntime?this.callback(this.controltype):this.callback(1,n.xml);jQuery(document.body).off(".controlUtil")},saveXmlValues:function(q,u){if(q!="ControlName"){var o=u.selectSingleNode('/Controls/Control/Properties/Property[Name = "'+q+'"]'),c=u.selectSingleNode("/Controls/Control/Properties");if(c||(c=u.createElement("Properties"),u.selectSingleNode("/Controls/Control").appendChild(c)),o)for(var l=o.childNodes.length-1;l>=0;l--)o.childNodes[l].nodeName!="Name"&&o.removeChild(o.childNodes[l]);if(!o){o=u.createElement("Property");o.setAttribute("selected","all");var p=n("#checkboxAll");p.prop("checked")?o.appendChild(u.createCDATASection("all")):o.appendChild(u.createCDATASection("select"));var a=u.createElement("Name");a.appendChild(u.createCDATASection(q));o.appendChild(a);c.appendChild(o)}var h=null,s=null;if(q=="FullProcName"&&(r==""&&(r="None"),h=r,s=r),q=="FullProcNameDisp"&&(t!=="(All)"&&t.substring(0,1)===";"&&(t=t.substring(1,t.length)),h=t,s=t,checkExists(this.isInternal)&&this.isInternal===!0&&(h=r,s=r)),q=="FullProcNameHTML"&&(h=f,s=f),q=="WorkflowSelection"&&(e?(h="All",s="All"):(h="Selection",s="Selection")),s){var v=u.createElement("DisplayValue");v.appendChild(u.createCDATASection(h));o.appendChild(v);var y=u.createElement("Value");y.appendChild(u.createCDATASection(s));o.appendChild(y)}else u.selectSingleNode("/Controls/Control/Properties").removeChild(o)}},getProcesses:function(t,q,f){var e={method:"getItems",resultTypes:"ProcessFolders|ProcessSets|Processes"};this.isRuntime&&(e.resultFlags="Client");var o=this;jQuery.ajax({url:applicationRoot+"Utilities/AJAXCall.ashx",data:e,type:"POST",dataType:"text",global:!1,beforeSend:function(t){var q=n("#ProcessChartConfigTreeHolder");q.wrap('<div class="ajaxLoader" style="width:'+q.width()+';"><\/div>');q.css("opacity","0.3");SourceCode.Forms.XSRFHelper.setAntiXSRFHeader(t)},success:function(e){var s=n("#ProcessChartConfigTreeHolder");s.unwrap("div.ajaxLoader");var v=jQuery('<div id="processTree" class="scroll-wrapper"><ul class="tree collapsed-root"><li class="root"><a href="javascript:;">Root<\/a><\/li><\/ul><\/div>'),y=jQuery("<div id='formProcessDiv'><\/div>");v.appendTo(y);var l=new XslTransform,p=n("#TreeXSLT").val();l.importStylesheet(t==null?p:applicationRoot+"Rules/XSLT/TreeSelectorWidget.xslt");l.addParameter("WorkflowsResourceName","Workflows");var h=parseXML(l.transformToText(e)),a=[],w=h.selectNodes("/nodes/node/node");n(w).each(function(){a.push(this)});var b=h.getElementsByTagName("node")[0];h.childNodes[0].removeChild(b);n(a).each(function(){h.childNodes[0].appendChild(this)});u=v.find(".tree").tree();var k=u.tree("find","root"),c=n("#addButton1");u.tree("loadXML",h,k);s.html(" ");s.append(u);s.find(".root").removeClass("closed").addClass("open");SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.treeXml=h;a.length===0&&n("#ProcessChartConfigTreeHolder").prepend('<div class="processPickerWaterMark">'+ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.WorkflowPickerWaterMark+"<\/div>");var d=jQuery("#checkboxAll");d.is("checked")||c.attr("onclick","SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.addClick()");try{s.find("a.workflow").each(function(){n(this).attr("ondblclick","SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.addDblClick(this)");n(this).on("keyup",function(t){(t.keyCode===13||t.keyCode===32)&&o.addKeyUp(n(t.target).parent())});n(this).on("click",function(){var u=n(this).parent(),t="";if(u!=null)t=u.metadata().name.toString();else return;var o=t.split("\\");if(!(o.length<1)){for(var s=t,f=r.split(";"),e=!1,q=0;q<f.length;)f[q]===s&&(e=!0),q++;e?c.addClass("disabled"):c.removeClass("disabled")}})});s.find("a.workflows").each(function(){n(this).on("click",function(){c.addClass("disabled")})})}catch(nt){}if(q)SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.checkSelected(f);else{var g=r.split(";");s.css("opacity","1");n(g).each(function(){var n=u.tree("find","metadata","","name",this.toString());if(n.length>0&&(n.addClass("selected"),this.length>0))while(!n.hasClass("root"))n.addClass("open"),n.removeClass("closed"),n=n.parent()})}},error:this.error})},getProcessesRuntime:function(t,q,f){var o=this,e={method:"getItems",resultTypes:"ProcessFolders|ProcessSets|Processes"};this.isRuntime&&(e.resultFlags="Client");jQuery.ajax({url:applicationRoot+"Utilities/AJAXCall.ashx",data:e,type:"POST",dataType:"text",global:!1,beforeSend:function(t){var q=n("#ProcessChartConfigTreeHolder");q.wrap('<div class="ajaxLoader" style="width:'+q.width()+';"><\/div>');q.css("opacity","0.3");SourceCode.Forms.XSRFHelper.setAntiXSRFHeader(t)},success:function(e){var s=n("#ProcessChartConfigTreeHolder");s.unwrap("div.ajaxLoader");var l=jQuery('<div id="processTree" class="scroll-wrapper"><ul class="tree collapsed-root"><li class="root"><a href="javascript:;">Root<\/a><\/li><\/ul><\/div>'),p=jQuery("<div id='formProcessDiv'><\/div>");l.appendTo(p);var y=l.find("ul.tree").first();y.length>0&&(y[0].style.display="none");var a=new XslTransform,w=n("#TreeXSLT").val();a.importStylesheet(t==null?w:applicationRoot+"Rules/XSLT/TreeSelectorWidget.xslt");a.addParameter("WorkflowsResourceName","Workflows");var c=parseXML(a.transformToText(e)),v=[],b=c.selectNodes("/nodes/node/node");n(b).each(function(){v.push(this)});var k=c.getElementsByTagName("node")[0];c.childNodes[0].removeChild(k);n(v).each(function(){c.childNodes[0].appendChild(this)});u=l.find(".tree").tree();var d=u.tree("find","root"),h=n("#addButton1");u.tree("loadXML",c,d);s.html(" ");s.append(u);s.find(".root").removeClass("closed").addClass("open");SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.treeXml=c;v.length===0&&n("#ProcessChartConfigTreeHolder").prepend('<div class="processPickerWaterMark">'+ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.WorkflowPickerWaterMark+"<\/div>");try{s.find("a.workflow").each(function(){n(this).attr("ondblclick","SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.addDblClick(this)");n(this).on("keyup",function(t){(t.keyCode===13||t.keyCode===32)&&o.addKeyUp(n(t.target).parent())});n(this).on("click",function(){var u=n(this).parent(),t="";if(u!=null)t=u.metadata().name.toString();else return;var o=t.split("\\");if(!(o.length<1)){for(var s=t,f=r.split(";"),e=!1,q=0;q<f.length;)f[q]===s&&(e=!0),q++;e?(h.addClass("disabled"),h.attr("onclick","")):(h.removeClass("disabled"),h.attr("onclick","SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.addClick()"))}})});s.find("a.workflows").each(function(){n(this).on("click",function(){h.addClass("disabled");h.attr("onclick","")})})}catch(nt){}if(q)SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.checkSelected(f);else{var g=r.split(";");s.css("opacity","1");h.attr("onclick","SourceCode.Forms.Controls.Reporting.ProcessesComplexConfig.addClick()");n(g).each(function(){var n=u.tree("find","metadata","","name",this.toString());if(n.length>0&&(n.addClass("selected"),this.length>0))while(!n.hasClass("root"))n.addClass("open"),n.removeClass("closed"),n=n.parent()})}},error:this.error})},ProcessChartConfigCancelClick:function(){popupManager.closeLast()}}})(jQuery);
/*!
 SourceCode.Forms.Controls.Web.ControlPack.Reporting.UtilityTemplates.JS.StatusPropertyConfig.js (Embedded resource)
*/
function initStatusConfig(n,t,q,r,u,f,e,o){SourceCode.Forms.Controls.Reporting.StatusPropertyConfig.initialize(n,t,q,r,u,f,e,o)}function initStatusRuntimeConfig(n,t,q,r,u,f,e,o){SourceCode.Forms.Controls.Reporting.StatusPropertyConfig.initializeRuntime(n,t,q,r,u,f,e,o)}function initStatusWorkflowConfig(n,t,q,r,u,f,e){SourceCode.Forms.Controls.Reporting.StatusPropertyConfig.initializeWorkflow(n,t,q,r,u,f,e)}(function(n){(typeof SourceCode=="undefined"||SourceCode===null)&&(SourceCode={});(typeof SourceCode.Forms=="undefined"||SourceCode.Forms===null)&&(SourceCode.Forms={});(typeof SourceCode.Forms.Controls=="undefined"||SourceCode.Forms.Controls===null)&&(SourceCode.Forms.Controls={});(typeof SourceCode.Forms.Controls.Reporting=="undefined"||SourceCode.Forms.Controls.Reporting===null)&&(SourceCode.Forms.Controls.Reporting={});var q,u,f,t,e=!1,r={reportHeader:{runtime:270,designer:335},workflowGrid:{designer:286},activityInstancesGrid:{designer:240}};SourceCode.Forms.Controls.Reporting.StatusPropertyConfig={initialize:function(t,f,e,o,s,h,c,l){var p=n("#StatusPropertyConfig_secondPage");p.css("display","block");var w=n("#StatusPropertyConfig_thirdPage");w.css("display","block");usersDisplay=" ";usersFQN=" ";q=s;u=f;loading=!0;this.callback=s;this.controltype=o;this.treeXml=null;this.Context=c;this.Internal=h;this.isRuntime=!1;jQuery("#StatusPropertyConfig_propertiesXml").val(t||(t="<Controls><Control/><\/Controls>"));var b=parseXML(t),k=b.documentElement,v=k.selectSingleNode('/Controls/Control/Properties/Property[Name = "Status"]/Value');this.isRuntime||n("#StatusPropertyConfig_secondPage").addClass("complex-picker-entry");popupManager.showPopup({id:"StatusPropertyConfig_secondPageOutside",buttons:[{type:"help",click:function(){HelpHelper.runHelp(5003)}},{text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.OK,click:this.UsersOKClick.bind(this)},{id:"StatusPropertyConfig_Cancel",text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Cancel,click:this.StatusPropertyConfigCancelClick.bind(this)}],headerText:jQuery("#StatusPropertyConfig_secondPage").attr("MainHeaderStatusPropertyConfig"),draggable:!0,content:jQuery("#StatusPropertyConfig_secondPage"),width:250,height:r.activityInstancesGrid.designer,onClose:function(){this.StatusPropertyConfigClose(q)}.bind(this)});checkExistsNotEmpty(l)||n("#StatusPropertyConfig_secondPageOutside").addClass("designtime");var a=["(All)","Active","Completed","Expired","Waiting"];if(v!=null){var y=v.text;SourceCode.Forms.Controls.Reporting.StatusPropertyConfig.populateStatusList(y,a)}else if(checkExists(this.Internal)&&this.Internal===!0)SourceCode.Forms.Controls.Reporting.StatusPropertyConfig.populateStatusList(c.options.complexValue,a);else{var y=o.Status;SourceCode.Forms.Controls.Reporting.StatusPropertyConfig.populateStatusList(y,a)}jQuery("#StatusPropertyConfig_secondPage").find("input:checkbox").checkbox();n("#StatusPropertyConfig_secondPageOutside").find(".classAll").trigger("focus")},initializeWorkflow:function(t,f,e,o,s,h,c){var y=n("#StatusPropertyConfig_secondPage");y.css("display","block");var p=n("#StatusPropertyConfig_thirdPage");p.css("display","block");usersDisplay=" ";usersFQN=" ";q=s;u=f;loading=!0;this.callback=s;this.controltype=o;this.treeXml=null;this.Context=c;this.Internal=h;this.isRuntime=!1;jQuery("#StatusPropertyConfig_propertiesXml").val(t||(t="<Controls><Control/><\/Controls>"));var w=parseXML(t),b=w.documentElement,a=b.selectSingleNode('/Controls/Control/Properties/Property[Name = "Status"]/Value');this.isRuntime||n("#StatusPropertyConfig_secondPage").addClass("complex-picker-entry");popupManager.showPopup({id:"StatusPropertyConfig_secondPageOutside",buttons:[{type:"help",click:function(){HelpHelper.runHelp(5003)}},{text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.OK,click:this.UsersOKClick.bind(this)},{id:"StatusPropertyConfig_Cancel",text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Cancel,click:this.StatusPropertyConfigCancelClick.bind(this)}],headerText:jQuery("#StatusPropertyConfig_secondPage").attr("MainHeaderStatusPropertyConfig"),draggable:!0,content:jQuery("#StatusPropertyConfig_secondPage"),width:250,height:r.workflowGrid.designer,onClose:function(){this.StatusPropertyConfigClose(q)}.bind(this)});n("#StatusPropertyConfig_secondPageOutside").addClass("designtime");var l=["(All)","Active","Completed","Deleted","Error","Running","Stopped"];if(a!=null){var v=a.text;SourceCode.Forms.Controls.Reporting.StatusPropertyConfig.populateStatusList(v,l)}else if(checkExists(this.Internal)&&this.Internal===!0)SourceCode.Forms.Controls.Reporting.StatusPropertyConfig.populateStatusList(c.options.complexValue,l);else{var v=o.Status;SourceCode.Forms.Controls.Reporting.StatusPropertyConfig.populateStatusList(v,l)}jQuery("#StatusPropertyConfig_secondPage").find("input:checkbox").checkbox();n("#StatusPropertyConfig_secondPageOutside").find(".classAll").trigger("focus")},initializeRuntime:function(t,f,e,o,s,h,c,l){var w=n("#StatusPropertyConfig_secondPage");w.css("display","block");var b=n("#StatusPropertyConfig_thirdPage");b.css("display","block");usersDisplay=" ";usersFQN=" ";q=s;u=f;loading=!0;this.callback=s;this.controltype=o;this.treeXml=null;this.Context=c;this.Internal=h;this.isRuntime=l;jQuery("#StatusPropertyConfig_propertiesXml").val(t||(t="<Controls><Control/><\/Controls>"));var k=parseXML(t),d=k.documentElement,v=d.selectSingleNode('/Controls/Control/Properties/Property[Name = "Status"]/Value'),y;y=SourceCode.Forms.Layout.isRuntime()?r.reportHeader.runtime:r.reportHeader.designer;popupManager.showPopup({id:"StatusPropertyConfig_secondPageOutside",buttons:[{type:"help",click:function(){HelpHelper.runHelp(5003)}},{text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.OK,click:this.UsersOKClick.bind(this)},{id:"StatusPropertyConfig_Cancel",text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Cancel,click:this.StatusPropertyConfigCancelClick.bind(this)}],headerText:jQuery("#StatusPropertyConfig_secondPage").attr("MainHeaderStatusPropertyConfig"),draggable:!0,content:jQuery("#StatusPropertyConfig_secondPage"),width:250,height:y,onClose:function(){this.StatusPropertyConfigClose(q)}.bind(this)});checkExistsNotEmpty(l)||n("#StatusPropertyConfig_secondPageOutside").addClass("designtime");n(".SourceCode-Forms-Controls-Web-Button.help").on("keyup",function(t){t.keyCode===32&&n(this).trigger("click")});var a=["(All)","Active","Completed","Deleted","Error","Expired","Running","Stopped","Waiting"];if(v!=null){var p=v.text;SourceCode.Forms.Controls.Reporting.StatusPropertyConfig.populateStatusList(p,a)}else if(checkExists(this.Internal)&&this.Internal===!0)SourceCode.Forms.Controls.Reporting.StatusPropertyConfig.populateStatusList(c.options.complexValue,a);else{var p=o.Status;SourceCode.Forms.Controls.Reporting.StatusPropertyConfig.populateStatusList(p,a)}jQuery("#StatusPropertyConfig_secondPage").find("input:checkbox").checkbox();n("#StatusPropertyConfig_secondPageOutside").find(".classAll").trigger("focus")},populateStatusList:function(t,q){if(checkExistsNotEmpty(t)){var f=t.split(";");SourceCode.Forms.Controls.Reporting.StatusPropertyConfig.createStatusCheckBoxList(f,q)}else checkExists(this.Internal)&&this.Internal===!0?SourceCode.Forms.Controls.Reporting.StatusPropertyConfig.createStatusCheckBoxList([],q):SourceCode.Forms.Controls.Reporting.StatusPropertyConfig.createStatusCheckBoxList(q,q);var r=n("#StatusPropertyTextBox input");if(r.checkbox(),e)for(var u=0;u<r.length;)n(r[u]).checkbox("check"),u++},createStatusCheckBoxList:function(t,q){var h=n("#StatusPropertyTextBox");h.html(" ");for(var u=0;u<q.length;){var s=document.createElement("div"),c=q[u];n(s).addClass("linkHighlightStatusText");var r=document.createElement("input"),f=document.createElement("label");if(n(r).attr("type","checkbox"),n(r).attr("name","status"),n(r).attr("value",q[u]),n(r).attr("tabindex",0),f.appendChild(r),t!==null)for(var o=0;o<t.length;)t[o]==c&&(r.checked=!0,n(r).parent().addClass("checked")),t[o]=="(All)"&&(e=!0),o++;if(q[u]=="(All)"){n(r).attr("class","classAll");n(r).attr("id","classAll");n(r).on("click",function(){n(this).parent().hasClass("checked")?n("#StatusPropertyTextBox input:checked:not(.classAll)").each(function(){this.checked?(this.checked=!1,n(this).parent().removeClass("checked")):(this.checked=!0,n(this).parent().addClass("checked"))}):n("#StatusPropertyTextBox input:not(:checked)").each(function(){this.checked=!0;n(this).parent().addClass("checked")})})}else n(r).on("click",function(){var t=n("#StatusPropertyTextBox .classAll");if(n(this).parent().hasClass("checked"))t[0].checked=!1,n(t[0]).parent().removeClass("checked");else{var q=!0;n("#StatusPropertyTextBox input:not(.classAll)").each(function(){this.checked==!1&&(q=!1)});q&&(t[0].checked=!0,n(t[0]).parent().addClass("checked"))}});var l=document.createElement("span");c=="(All)"?n(f).append(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.All):n(f).append(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon[q[u]]);n(s).append(f);n(h).append(s);u++;n(r).on("keyup, keydown",function(t){var q=n(this).closest(".linkHighlightStatusText").prev().find("input:checkbox"),r=n(this).closest(".linkHighlightStatusText").next().find("input:checkbox");(t.keyCode===38||t.keyCode===37)&&q.length>0&&q.trigger("focus");(t.keyCode===40||t.keyCode===39)&&r.length>0&&r.trigger("focus")})}},StatusPropertyConfigClose:function(n){this.isRuntime||this.Internal===!0||n();jQuery("#StatusPropertyConfig_secondPage").remove()},UsersOKClick:function(){if(this.isRuntime)if(checkExists(this.Internal)&&this.Internal===!0){t="";var y=[],r=n("#StatusPropertyTextBox .classAll");if(r[0].checked)t+=r.val()+";";else for(var u=n("#StatusPropertyTextBox input:checked:enabled"),q=0;q<u.length;q++)t+=n(u[q]).val()+";";t=t.substring(0,t.length-1)}else{t="";var y=[],r=n("#StatusPropertyTextBox .classAll");if(r[0].checked)t+=r.val()+";";else for(var u=n("#StatusPropertyTextBox input:checked:enabled"),q=0;q<u.length;q++)t+=n(u[q]).val()+";";t=t.substring(0,t.length-1);t.length>0&&(this.controltype.Status=t,t==""&&(this.controltype.Status="(None)"),jQuery("#StatusPropertyConfig_secondPage").remove())}else{var h=parseXML(document.getElementById("StatusPropertyConfig_propertiesXml").value);t="";var y=[],r=n("#StatusPropertyTextBox .classAll");if(r[0].checked)t+=r.val()+";";else for(var c=n("#StatusPropertyTextBox input:checked:enabled"),q=0;q<c.length;q++)t+=n(c[q]).val()+";";t=t.substring(0,t.length-1);t.length>0&&(this.saveXmlValues("Status",h),jQuery("#StatusPropertyConfig_secondPage").remove())}if(t.length<1)popupManager.showWarning(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.StatusValidation);else{popupManager.closeLast({cancelOnClose:!0});e=!1;var l=n("#StatusPropertyConfig_secondPage");l.css("display","none");var a=n("#StatusPropertyConfig_thirdPage");if(a.css("display","none"),checkExists(this.Internal)&&this.Internal===!0){var s=[];s.push("");var f={};f.value=t;var o={};t==="(All)"?(f.display="(All)",o.display="(All)"):(f.display="(Custom)",o.display="(Custom)");o.icon="Status";var v=[f,o];s.push(v);this.callback(s,this.Context);jQuery("#StatusPropertyConfig_secondPage").remove()}else this.isRuntime?this.callback(this.controltype):this.callback(1,h.xml);jQuery(document.body).off(".controlUtil")}},saveXmlValues:function(n,q){var y=f;if(n!="ControlName"){var r=q.selectSingleNode('/Controls/Control/Properties/Property[Name = "'+n+'"]'),u=q.selectSingleNode("/Controls/Control/Properties");if(u||(u=q.createElement("Properties"),q.selectSingleNode("/Controls/Control").appendChild(u)),r)for(var e=r.childNodes.length-1;e>=0;e--)r.childNodes[e].nodeName!="Name"&&r.removeChild(r.childNodes[e]);if(!r){r=q.createElement("Property");var s=q.createElement("Name");s.appendChild(q.createCDATASection(n));r.appendChild(s);u.appendChild(r)}var h=null,o=null,c=null;if(n=="Status"&&(h=t,o=t),o){var l=q.createElement("DisplayValue");l.appendChild(q.createCDATASection(h));r.appendChild(l);var a=q.createElement("Value");if(a.appendChild(q.createCDATASection(o)),r.appendChild(a),c!=null){var v=q.createElement("Guid");v.appendChild(q.createCDATASection(c));r.appendChild(v)}}else q.selectSingleNode("/Controls/Control/Properties").removeChild(r)}},checkAll:function(t){var l=n(t),s=n("#StatusPropertyConfig_secondPageOutside");if(l.val()=="0"){var q=n("#addButton1");q.addClass("disabled");q.prop("disabled",!0);var r=n("#UsersList");r.css("opacity",".5");r.prop("disabled",!0);q.off("click");var u=n("#UsersTextBox");u.css("opacity",".5");u.prop("disabled",!0);f="(All)";usersDisplay="(All)";usersFQN="(All)";var h=n("#labelsdropdown");h.prop("disabled",!0);var c=n("#dropdowntype");c.prop("disabled",!0);n("#usersearchdiv").hide();s.height(325)}else{var a=n("#UsersTextBox");f=a.html();var e=n(".textboxSpan");usersDisplay="";usersFQN="";for(var o=0;o<e.length;)usersDisplay+=n(e[o]).attr("data-info")+";",usersFQN+=n(e[o]).attr("data-fqn")+";";var q=n("#addButton1");q.removeClass("disabled");var r=n("#UsersList");r.css("opacity","1");r.prop("disabled",!1);q.prop("disabled",!1);var u=n("#UsersTextBox");u.css("opacity","1");u.prop("disabled",!1);q.on("click",function(){SourceCode.Forms.Controls.Reporting.UsersComplexConfig.addSpan()});var h=n("#labelsdropdown");h.prop("disabled",!1);var c=n("#dropdowntype");c.prop("disabled",!1);n("#usersearchdiv").show();s.height(350)}},StatusPropertyConfigCancelClick:function(){popupManager.closeLast()}}})(jQuery);
/*!
 SourceCode.Forms.Controls.Web.ControlPack.Reporting.UtilityTemplates.JS.UsersComplexConfig.js (Embedded resource)
*/
function initUsersConfig(n,t,q,r,u,f,e,o){SourceCode.Forms.Controls.Reporting.UsersComplexConfig.initialize(n,t,q,r,u,f,e,o)}(function(n){(typeof SourceCode=="undefined"||SourceCode===null)&&(SourceCode={});(typeof SourceCode.Forms=="undefined"||SourceCode.Forms===null)&&(SourceCode.Forms={});(typeof SourceCode.Forms.Controls=="undefined"||SourceCode.Forms.Controls===null)&&(SourceCode.Forms.Controls={});(typeof SourceCode.Forms.Controls.Reporting=="undefined"||SourceCode.Forms.Controls.Reporting===null)&&(SourceCode.Forms.Controls.Reporting={});var f,e,o,t,q,r,u,s=435,h=475;SourceCode.Forms.Controls.Reporting.UsersComplexConfig={initialize:function(q,r,u,o,c,l,a,v){n(".textboxSpan").remove();this.usersDisplay="";f=c;e=r;loading=!0;this.Internal=l;this.Context=a;this.callback=c;this.usersFQN="";this.treeXml=null;this.isRuntime=v;this.controltype=o;jQuery("#UsersConfig_propertiesXml").val(q||(q="<Controls><Control/><\/Controls>"));var st=parseXML(q),g=st.documentElement,nt,ut=n("#addButton2");ut.addClass("disabled");var ft=jQuery("#UsersConfig_secondPageInternal"),ht=jQuery("#UsersConfig_thirdPageInternal"),w=null;this.isRuntime||n("#UsersConfig_secondPage").addClass("complex-picker-entry");ft.find("select").dropdown();ht.find("select").dropdown();ft.find("input:text").textbox();var ct=n("#advBtn");ut.on("click",function(){n(this).hasClass("disabled")||(SourceCode.Forms.Controls.Reporting.UsersComplexConfig.addSpan(),n(this).addClass("disabled"))});ct.on("click",function(){SourceCode.Forms.Controls.Reporting.UsersComplexConfig.labelPopup()});SourceCode.Forms.Controls.Reporting.UsersComplexConfig.showUserSearch();n("#checkboxAllUsers").on("click",function(){SourceCode.Forms.Controls.Reporting.UsersComplexConfig.toggleCheckAll();n("#usersearchbar").attr("tabindex","-1");n("#dropbuttonLabelUser").attr("tabindex","-1");var q=n("#ddlUserSearch").next(".select-box")[0];n(q).find("a").attr("tabindex","-1");n("#searchButtonDiv").attr("tabindex","-1");var t=n("#UsersConfig_secondPageOutside");t.find(".textboxSpan").attr("tabindex","-1");t.find(".spanUsers").attr("tabindex","-1")});n("#checkboxAllUsers1").on("click",function(){SourceCode.Forms.Controls.Reporting.UsersComplexConfig.toggleCheckSelect();n("#usersearchbar").attr("tabindex","0");n("#dropbuttonLabelUser").attr("tabindex","0");var t=n("#ddlUserSearch").next(".select-box")[0];n(t).find("a").attr("tabindex","0");n(t).find(".dropdown").attr("tabindex","-1");n("#searchButtonDiv").attr("tabindex","-1");var q=n("#UsersConfig_secondPageOutside");q.find(".textboxSpan").attr("tabindex","0");q.find(".spanUsers").attr("tabindex","0")});n("#checkboxAllUsers").attr("tabindex",0);n("#checkboxAllUsers1").attr("tabindex",0);try{var y="",p="",et="";if(checkExists(this.Internal)&&this.Internal===!0){if(checkExistsNotEmpty(a.options.complexValue))if(a.options.complexValue!=="(All)"){for(var b=JSON.parse(a.options.complexValue),k=0;k<b.length;k++)k!=0&&(this.usersFQN+=";",this.usersDisplay+=";"),this.usersFQN+=b[k].fqn,this.usersDisplay+=b[k].name;SourceCode.Forms.Controls.Reporting.UsersComplexConfig.generateHTML(b);y="";p=n("#UsersTextBox").html();n("#UsersTextBox").html("")}else this.usersFQN=a.options.complexValue,y=a.options.complexValue,UsersHTML=""}else if(this.isRuntime){y=o.Users;try{var b=JSON.parse(o.UsersJSON);SourceCode.Forms.Controls.Reporting.UsersComplexConfig.generateHTML(b)}catch(yt){p=o.UsersHTML}this.usersFQN=o.UsersFQN;this.usersDisplay=o.Users;UsersFQN=o.UsersFQN}else y=g.selectSingleNode('/Controls/Control/Properties/Property[Name = "Users"]/Value'),p=g.selectSingleNode('/Controls/Control/Properties/Property[Name = "UsersHTML"]/Value'),et=g.selectSingleNode('/Controls/Control/Properties/Property[Name = "UsersFQN"]/Value'),this.usersDisplay=y.text,this.usersFQN=et,p!=null&&(p=p.text),y=y.text;if(y=="(All)"){nt=!0;n("#checkboxAllUsers").parent().addClass("checked");n("#checkboxAllUsers").trigger("click");w=n("#checkboxAllUsers");n("#usersearchbar").attr("tabindex","-1");n("#dropbuttonLabelUser").attr("tabindex","-1");var d=n("#ddlUserSearch").next(".select-box")[0];n(d).find("a").attr("tabindex","-1");n("#searchButtonDiv").attr("tabindex","-1")}else{nt=!1;var lt=n("#UsersTextBox");lt.append(p);t=p;n("#checkboxAllUsers1").parent().addClass("checked");n("#checkboxAllUsers1").trigger("click");w=n("#checkboxAllUsers1");n("#usersearchbar").attr("tabindex","0");n("#dropbuttonLabelUser").attr("tabindex","0");var d=n("#ddlUserSearch").next(".select-box")[0];n(d).find("a").attr("tabindex","0");n(d).find(".dropdown").attr("tabindex","-1");n("#searchButtonDiv").attr("tabindex","-1")}}catch(yt){nt=!1;n("#checkboxAllUsers").parent().addClass("checked");n("#usersearchbar").attr("tabindex","-1");n("#dropbuttonLabelUser").attr("tabindex","-1");var d=n("#ddlUserSearch").next(".select-box")[0];n(d).find("a").attr("tabindex","-1");n(d).find(".dropdown").attr("tabindex","-1");n("#searchButtonDiv").attr("tabindex","-1");w=n("#checkboxAllUsers");this.usersDisplay="";this.usersFQN="";n("#selectedUsersPanel").removeClass("disabled")}var at=n("#UsersConfig_secondPage");at.find("input:radio").radiobutton();var ot;ot=SourceCode.Forms.Layout.isRuntime()?s:h;popupManager.showPopup({id:"UsersConfig_secondPageOutside",buttons:[{type:"help",click:function(){HelpHelper.runHelp(5003)}},{text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.OK,click:this.UsersOKClick.bind(this)},{id:"UsersConfig_Cancel",text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Cancel,click:this.UsersConfigCancelClick.bind(this)}],headerText:jQuery("#UsersConfig_secondPage").attr("MainHeaderUsersConfig"),draggable:!0,content:jQuery("#UsersConfig_secondPage"),width:500,height:ot,onClose:function(){this.UsersConfigClose(f)}.bind(this)});n(".SourceCode-Forms-Controls-Web-Button.help").on("keyup",function(t){t.keyCode===32&&n(this).trigger("click")});checkExistsNotEmpty(v)||n("#UsersConfig_secondPageOutside").addClass("designtime");checkExistsNotEmpty(w)&&w.trigger("focus");var vt=n("#spanlabel1");vt.css("display","none");var tt=n("#dropdowntype").empty(),qt=document.createElement("option"),rt=document.createElement("option");qt.value="0";qt.innerHTML="Basic";rt.value="1";rt.innerHTML="Advanced";tt.append(qt);tt.append(rt);tt.dropdown("refresh");this.usersDisplay==="(None)"&&(this.usersDisplay="");n("#UsersConfig_secondPageOutside").on("click",".removeUserItem",function(){SourceCode.Forms.Controls.Reporting.UsersComplexConfig.removeSpan(this)});n("#addButton2").SFCButton();n("#addButton2").attr("tabindex","-1")},generateHTML:function(t){for(var q=0;q<t.length;q++){var r=SourceCode.Forms.Controls.Reporting.UsersComplexConfig.generateSpan(t[q].name,t[q].fqn);n("#UsersTextBox").append(r)}},generateSpan:function(t,q){var u=n("#DeleteIcon2").val(),r=document.createElement("span");n(r).attr("data-info",t);n(r).attr("data-fqn",q);n(r).attr("tabindex",0);r.innerHTML=t.htmlEncode()+'<span tabindex="-1" class="removeUserItem"><img class="imgDelete16" src=\''+u+"'/><\/span>";r.className="spanUsers textboxSpan";n(r).on("focus",function(){n(this).addClass("focus")});n(r).on("blur",function(){n(this).removeClass("focus")});n(r).on("keyup",function(t){var f=n("#UsersConfig_secondPageOutside");if(t.keyCode===13||t.keyCode===32){SourceCode.Forms.Controls.Reporting.UsersComplexConfig.removeSpan(n(this).find(".removeUserItem")[0]);var q=f.find(".textboxSpan").first();q.length>0?q.trigger("focus"):n("#checkboxAllUsers1").trigger("focus")}if(t.keyCode===38){var r=n(this).prev().prev();r.length>0&&r.trigger("focus")}if(t.keyCode===40){var u=n(this).next().next();u.length>0&&u.trigger("focus")}});return r},addSpan:function(){var h=n("#DeleteIcon2").val(),u=n(".selectedspan"),r=u.attr("data-info"),c=u.attr("data-fqn");if(r!=undefined){var f=[];typeof this.usersFQN!="undefined"&&(f=this.usersFQN.split(";"));var e=!1;n(f).each(function(){this.toString()==c&&(e=!0)});var o=u.attr("data-fqn"),s=n("#UsersTextBox"),q=document.createElement("span");n(q).attr("data-info",r);n(q).attr("data-fqn",o);n(q).attr("tabindex","0");q.innerHTML=r.htmlEncode()+"<span tabindex=\"-1\" style='cursor:pointer; color:red;' class=\"removeUserItem\"><img style='position:relative; top:3px; width:12px; height:12px;' src='"+h+"'/><\/span>";q.className="spanUsers textboxSpan";n(q).on("focus",function(){n(this).addClass("focus")});n(q).on("blur",function(){n(this).removeClass("focus")});n(q).on("keyup",function(t){var f=n("#UsersConfig_secondPageOutside");if(t.keyCode===13||t.keyCode===32){SourceCode.Forms.Controls.Reporting.UsersComplexConfig.removeSpan(n(this).find(".removeUserItem")[0]);var q=f.find(".textboxSpan").first();q.length>0?q.trigger("focus"):n("#checkboxAllUsers1").trigger("focus")}if(t.keyCode===38){var r=n(this).prev().prev();r.length>0&&r.trigger("focus")}if(t.keyCode===40){var u=n(this).next().next();u.length>0&&u.trigger("focus")}});if(!e){s.append(q);n(q).find(".removeUserItem").off("click").on("click",function(){SourceCode.Forms.Controls.Reporting.UsersComplexConfig.removeSpan(this)});t=s.html();this.usersDisplay!==""&&(this.usersDisplay+=";",this.usersFQN+=";");this.usersDisplay+=r;this.usersFQN+=o}}},removeSpan:function(q){var f=n("#UsersTextBox");n(q).closest(".spanUsers").remove();t=f.html();var u=n(".textboxSpan");this.usersDisplay="";this.usersFQN="";for(var r=0;r<u.length;)r!=0&&(this.usersDisplay+=";",this.usersFQN+=";"),this.usersDisplay+=n(u[r]).attr("data-info"),this.usersFQN+=n(u[r]).attr("data-fqn"),r++},showUserSearch:function(){var q=document.createElement("div");q.setAttribute("class","search-container sfc-reporting-user-config-section-container");var v=document.createElement("div"),f=document.createElement("div"),e=document.createElement("div"),o=document.createElement("div");v.className="users-complex-search-options indented";f.setAttribute("id","textBoxDiv");f.setAttribute("class","user-search-textbox");o.setAttribute("id","dropButtonDiv");o.setAttribute("class","search-expander");e.setAttribute("id","clearButtonDiv");e.style.cssFloat="left";var tt=SCLookupBox.html({buttonId:"searchButtonDiv",buttonIcon:"search",id:"usersearchbar"});n(f).html(tt);var y=document.createElement("span");y.className="button-wrapper";var r=document.createElement("a");n(r).attr("href","javascript:void(0);");r.className="button clearsearch";var k=document.createElement("span");k.className="button-text";n(y).append(k);n(r).append(y);n(e).append(r);n(r).on("click",function(){SourceCode.Forms.Controls.Reporting.UsersComplexConfig.resetResults()});var p=document.createElement("select");n(p).attr("id","labelsdropdown");n(p).on("change",function(){SourceCode.Forms.Controls.Reporting.UsersComplexConfig.changeLabel(this)});var s=document.createElement("select");s.setAttribute("id","ddlUserSearch");s.className="ddlUserSearch";var t=document.createElement("a");n(t).attr("href","javascript:;");n(t).on("click",function(){SourceCode.Forms.Controls.Reporting.UsersComplexConfig.toggleAdvanced(this)}).on("keydown",function(t){t.keyCode===32&&n(this).trigger("click")});n(t).attr("title","Expand Search Criteria");n(t).attr("id","dropbuttonLabelUser");t.className="dropbutton expand-vertical";n(o).append(t);n(q).append(o);n(q).append(s);n(q).append(f);var h=document.createElement("table"),d=document.createElement("tr"),u=document.createElement("tr");u.setAttribute("id","chooselabelrow");var c=document.createElement("td"),qt=document.createElement("td");n(u).css("display","none");c.setAttribute("colspan","2");c.setAttribute("class","security-label-cell");var l=document.createElement("div");l.setAttribute("class","security-label-container sfc-reporting-user-config-section-container");var w=document.createElement("div");w.setAttribute("class","security-label-box");var b=document.createElement("div");n(b).html(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.SecurityLabel);b.setAttribute("id","securityLabelText");n(l).append(b);n(w).append(p);n(l).append(w);n(c).append(l);n(u).append(c);n(u).append(qt);var g=document.createElement("td"),rt=document.createElement("td");n(g).append(q);n(rt).append(e);n(d).append(g);h.className="defaultTable";n(h).append(d);n(h).append(u);n(v).append(h);n("#UsersList").before(v);n("#textBoxDiv").find(".select-box").lookupbox();n("#usersearchbar").on("keyup",function(n){SourceCode.Forms.Controls.Reporting.UsersComplexConfig.searchUsers(!1,n)});n("#searchButtonDiv").on("click",function(n){SourceCode.Forms.Controls.Reporting.UsersComplexConfig.searchUsers(!0,n)});var a=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon,ut=[{text:a.Contains,value:"contains",selected:!0},{text:a.EndsWith,value:"endswith"},{text:a.EqualTo,value:"equalto"},{text:a.StartsWith,value:"startswith"}],nt=n(s);nt.dropdown({items:ut});var ft=nt.next(".select-box")[0];SourceCode.Forms.Browser.msie&&SourceCode.Forms.Browser.version==="8.0"&&(ft.style.marginLeft="5px");SourceCode.Forms.Controls.Reporting.UsersComplexConfig.getLabels()},toggleAdvanced:function(t){var q=n("#UsersConfig_secondPageOutside");n(t).hasClass("collapse-vertical")?(n(t).removeClass("collapse-vertical"),n(t).addClass("expand-vertical"),q.removeClass("expanded"),n("#chooselabelrow").hide(),q.removeClass("search-expanded")):(n(t).addClass("collapse-vertical"),n(t).removeClass("expand-vertical"),n("#chooselabelrow").show(),q.addClass("expanded"),q.addClass("search-expanded"))},UsersConfigClose:function(t){jQuery("#UsersConfig_secondPage").remove();this.isRuntime||this.Internal===!0?this.isRuntime&&n("#Users_"+this.controltype.Id).trigger("focus"):t()},labelPopup:function(){popupManager.showPopup({id:"UsersConfig_thirdPageOutside",buttons:[{type:"help",click:function(){HelpHelper.runHelp(5003)}},{text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.OK,click:function(){popupManager.closeLast()}},{id:"UsersConfig_Cancel",text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Cancel,click:function(){popupManager.closeLast()}}],headerText:"Advanced - Choose Label",draggable:!0,content:jQuery("#UsersConfig_thirdPage"),width:200,height:150});var t=n("#spanlabel1");t.css("display","inline")},addClick:function(){if(!n("#addbutton2").hasClass("disabled")){var t=o.tree("find","selected"),q=t.metadata().name.toString();ProcessChartTextBox.value+=q+";"}},changeMode:function(t){var u=n(t).val(),q=n("#spanlabel1"),r=n("#UsersConfig_secondPageOutside");switch(u){case"0":q.css("display","none");r.height(325);break;case"1":q.css("display","inline");r.height(350)}},UsersOKClick:function(){var f=parseXML(document.getElementById("UsersConfig_propertiesXml").value),e="";if(checkExists(this.Internal)&&this.Internal===!0)this.usersDisplay.length>1&&(this.usersDisplay!=="(All)"&&this.usersDisplay.substring(1,2)===";"&&(this.usersDisplay=this.usersDisplay.substring(2,this.usersDisplay.length)),e=this.usersFQN);else if(this.isRuntime){if(this.usersDisplay.length>1){if(this.usersDisplay!=="(All)"&&this.usersDisplay.substring(0,1)===";"&&(this.usersDisplay=this.usersDisplay.substring(1,this.usersDisplay.length)),this.controltype.Users=this.usersDisplay,this.controltype.UsersHTML=t,this.controltype.UsersFQN=this.usersFQN,this.usersDisplay!=="(All)"){for(var o=[],r=n(".textboxSpan"),q=0;q<r.length;q++){var u={};u.fqn=n(r[q]).attr("data-fqn");u.name=n(r[q]).attr("data-info");o.push(u)}this.controltype.UsersJSON=JSON.stringify(o)}else this.controltype.UsersJSON=undefined;this.controltype.Users==""&&(this.controltype.Users="(None)");jQuery("#UsersConfig_secondPage").remove()}}else this.usersDisplay.length>1&&(this.saveXmlValues("Users",f),this.saveXmlValues("UsersHTML",f),this.saveXmlValues("UsersFQN",f),jQuery("#UsersConfig_secondPage").remove());if(this.usersDisplay.length>1){if(popupManager.closeLast({cancelOnClose:!0}),checkExists(this.Internal)&&this.Internal===!0){if(e!=="(All)"){for(var o=[],r=n(".textboxSpan"),q=0;q<r.length;q++){var u={};u.fqn=n(r[q]).attr("data-fqn");u.name=n(r[q]).attr("data-info");o.push(u)}e=JSON.stringify(o)}var c=[];c.push("");var s={};s.value=e;var h={};this.usersDisplay==="(All)"?(s.display="(All)",h.display="(All)"):(s.display="(Custom)",h.display="(Custom)");h.icon="Users";var l=[s,h];c.push(l);this.callback(c,this.Context);jQuery("#UsersConfig_secondPage").remove()}else this.isRuntime?(this.callback(this.controltype),n("#Users_"+this.controltype.Id).trigger("focus")):this.callback(1,f.xml);jQuery(document.body).off(".controlUtil")}else popupManager.showWarning(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.UsersValidation)},addToXml:function(q){t=n(q).val()},saveXmlValues:function(n,q){var s=t;if(n!="ControlName"){var r=q.selectSingleNode('/Controls/Control/Properties/Property[Name = "'+n+'"]'),e=q.selectSingleNode("/Controls/Control/Properties");if(e||(e=q.createElement("Properties"),q.selectSingleNode("/Controls/Control").appendChild(e)),r)for(var o=r.childNodes.length-1;o>=0;o--)r.childNodes[o].nodeName!="Name"&&r.removeChild(r.childNodes[o]);if(!r){r=q.createElement("Property");var h=q.createElement("Name");h.appendChild(q.createCDATASection(n));r.appendChild(h);e.appendChild(r)}var f=null,u=null,c=null;if(n=="Users"&&(this.usersDisplay!=="(All)"&&this.usersDisplay.substring(0,1)===";"&&(this.usersDisplay=this.usersDisplay.substring(1,this.usersDisplay.length)),f=this.usersDisplay,u=this.usersDisplay,checkExists(this.Internal)&&this.Internal===!0&&(f=this.usersFQN,u=this.usersFQN)),n=="UsersHTML"&&(f=s,u=s),n=="UsersFQN"&&(f=this.usersFQN,u=this.usersFQN),u){var l=q.createElement("DisplayValue");l.appendChild(q.createCDATASection(f));r.appendChild(l);var a=q.createElement("Value");if(a.appendChild(q.createCDATASection(u)),r.appendChild(a),c!=null){var v=q.createElement("Guid");v.appendChild(q.createCDATASection(c));r.appendChild(v)}}else q.selectSingleNode("/Controls/Control/Properties").removeChild(r)}},getLabels:function(){jQuery.ajax({url:applicationRoot+"UsersHandler.sdk",data:{action:"getLabels"},type:"POST",dataType:"json",global:!1,success:function(t){var q=n("#labelsdropdown");SourceCode.Forms.Controls.Reporting.UsersComplexConfig.populateLabels(q,t)},error:this.error})},changeLabel:function(t){var r=n(t).val();q=r;SourceCode.Forms.Controls.Reporting.UsersComplexConfig.getUsers(r)},searchUsers:function(t,r){var u=n("#usersearchbar").val(),f=n("#ddlUserSearch").dropdown("SelectedValue");if(r.keyCode==n.ui.keyCode.ENTER||t){if(u.length===0){popupManager.showWarning(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.EmptyUserSearchWarning);return}SourceCode.Forms.Controls.Reporting.UsersComplexConfig.searchFilter(q,u,f)}},getUsers:function(t){var q=n("#usersearchbar").val(),f=n("#ddlUserSearch").dropdown("SelectedValue");u=jQuery.ajax({url:applicationRoot+"UsersHandler.sdk",dataType:"json",data:{label:t,filterToken:f,textFilter:q},type:"POST",global:!1,beforeSend:function(t){n("#selectedUsersPanel").find(".users-complex-search-options").append("<div class='ajaxLoader base0'><\/div>");SourceCode.Forms.XSRFHelper.setAntiXSRFHeader(t)},success:function(t){var u=n("#UsersList");SourceCode.Forms.Controls.Reporting.UsersComplexConfig.populateList(u,t,q);n("#selectedUsersPanel").find(".users-complex-search-options").find("> .ajaxLoader").remove();r=t},error:this.error})},resetResults:function(){if(u!=null&&u.abort(),r!=null){n("#usersearchbar").val("");var t=n("#UsersList");SourceCode.Forms.Controls.Reporting.UsersComplexConfig.populateList(t,r)}},toggleCheckAll:function(){n("#selectedPanelDisabler").addClass("disabled");t="(All)";this.usersDisplay="(All)";this.usersFQN="(All)";var q=jQuery("#UsersConfig_secondPageInternal"),r=jQuery("#UsersConfig_thirdPageInternal");q.find("select").dropdown().dropdown("disable");r.find("select").dropdown().dropdown("disable");n("#addButton2").addClass("disabled");n("#UsersList").addClass("disabled");n("#UsersTextBox").addClass("disabled");n("#searchButtonDiv").addClass("disabled");n("#securityLabelText").addClass("disabled");n("#clearButtonDiv").addClass("disabled");n("#dropButtonDiv").addClass("disabled");q.find(".select-box").addClass("disabled");q.find("input:text").textbox().textbox("disable")},toggleCheckSelect:function(){n("#selectedPanelDisabler").removeClass("disabled");var f=n("#UsersTextBox");t=f.html();var r=n(".textboxSpan");this.usersDisplay="";this.usersFQN="";for(var q=0;q<r.length;)q!==0&&(this.usersDisplay+=";",this.usersFQN+=";"),this.usersDisplay+=n(r[q]).attr("data-info"),this.usersFQN+=n(r[q]).attr("data-fqn"),q++;var u=jQuery("#UsersConfig_secondPageInternal"),e=jQuery("#UsersConfig_thirdPageInternal");u.find("select").dropdown().dropdown("enable");e.find("select").dropdown().dropdown("enable");var o=n(".selectedspan");o.length>0&&n("#addButton2").removeClass("disabled");n("#UsersList").removeClass("disabled");n("#UsersTextBox").removeClass("disabled");n("#searchButtonDiv").removeClass("disabled");n("#securityLabelText").removeClass("disabled");n("#textBoxDiv").removeClass("disabled");n("#clearButtonDiv").removeClass("disabled");n("#dropButtonDiv").removeClass("disabled");u.find("input:text").textbox().textbox("enable");u.find(".select-box").removeClass("disabled")},populateList:function(t,q,r){if(t.html(""),n("#addButton2").addClass("disabled"),q.length>0)for(var o=0;o<q.length;o++){var f=q[o].DisplayName.htmlEncode(),h=f.length,s="",c=0;if(r!=null&&r!="")for(r=r.htmlEncode();c<h;){var e=f.toLowerCase().indexOf(r.toLowerCase());if(e>-1){var l=r.length,a=f.substring(e,e+l);e>0&&(s+=f.substring(0,e));s+="<span class='sfc-reporting-user-search-result'>"+a+"<\/span>";f=f.substring(e+l,h);c=e+l}else s+=f,c=h}else r!=null&&(s=f);var u=document.createElement("div");n(u).attr("class","spanUsers search-result-list-box");n(u).attr("data-fqn",q[o].FQN);n(u).attr("data-info",q[o].DisplayName);n(u).attr("tabindex","0");n(u).html(s);n(u).on("click",function(){SourceCode.Forms.Controls.Reporting.UsersComplexConfig.Select(this)});n(u).on("focus",function(){n(this).addClass("focus")});n(u).on("blur",function(){n(this).removeClass("focus")});n(u).on("dblclick",function(){SourceCode.Forms.Controls.Reporting.UsersComplexConfig.Select(this);SourceCode.Forms.Controls.Reporting.UsersComplexConfig.addSpan()});n(u).on("keyup",function(t){if((t.keyCode===13||t.keyCode===32)&&(SourceCode.Forms.Controls.Reporting.UsersComplexConfig.Select(this),SourceCode.Forms.Controls.Reporting.UsersComplexConfig.addSpan()),t.keyCode===38){var q=n(this).prev().prev();q.length>0&&q.trigger("focus")}if(t.keyCode===40){var r=n(this).next().next();r.length>0&&r.trigger("focus")}});n(u).on("blur",function(){SourceCode.Forms.Controls.Reporting.UsersComplexConfig.blurSpanUser()});t.append(u)}else n("#addButton2").addClass("disabled")},searchFilter:function(t,q,r){var u=q;jQuery.ajax({url:applicationRoot+"UsersHandler.sdk",dataType:"json",data:{label:t,filterToken:r,textFilter:q},type:"POST",global:!1,beforeSend:function(t){n("#selectedUsersPanel").find(".users-complex-search-options").append("<div class='ajaxLoader base0'><\/div>");SourceCode.Forms.XSRFHelper.setAntiXSRFHeader(t)},success:function(t){var q=n("#UsersList");SourceCode.Forms.Controls.Reporting.UsersComplexConfig.populateList(q,t,u);n("#selectedUsersPanel").find(".users-complex-search-options").find("> .ajaxLoader").remove()},error:this.error})},populateLabels:function(t,r){n(r).each(function(){var n=document.createElement("option");n.value=this.Name;n.innerHTML=this.Name;t.append(n)});var e=SourceCode.Forms.Settings.User.FQN,u=e.split("\\");if(u.length>0){var f=u[0].split(":");f.length>0&&t.val(f[0])}t.dropdown().dropdown("refresh");q=t.dropdown("SelectedValue")},Select:function(t){var q=[],f=n(t).attr("data-fqn");typeof this.usersFQN!="undefined"&&(q=this.usersFQN.split(";"));for(var u=!1,r=0;r<q.length;r++)if(q[r].toString()==f){u=!0;break}u?n("#addButton2").addClass("disabled"):(n("#addButton2").removeClass("disabled"),n(".spanUsers").each(function(){n(this).removeClass("selectedspan");n(this).css("background-color","")}),n(t).addClass("selectedspan"))},blurSpanUser:function(){n(".spanUsers").each(function(){n(this).css("background-color","")})},UsersConfigCancelClick:function(){popupManager.closeLast();checkExists(this.controltype)&&checkExists(this.controltype.Id)&&n("#Users_"+this.controltype.Id).trigger("focus")}}})(jQuery);
/*!
 SourceCode.Forms.Controls.Web.ControlPack.Reporting.UtilityTemplates.JS.WorkflowActivityComplexConfig.js (Embedded resource)
*/
function initActivityNameRuntimeConfig(n,t,q,r,u,f,e){SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.initializeReportHeader(n,t,q,r,u,f,e)}function initActivityNameConfig(n,t,q,r,u,f,e,o){SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.initialize(n,t,q,r,u,f,e,o)}(function(n){(typeof SourceCode=="undefined"||SourceCode===null)&&(SourceCode={});(typeof SourceCode.Forms=="undefined"||SourceCode.Forms===null)&&(SourceCode.Forms={});(typeof SourceCode.Forms.Controls=="undefined"||SourceCode.Forms.Controls===null)&&(SourceCode.Forms.Controls={});(typeof SourceCode.Forms.Controls.Reporting=="undefined"||SourceCode.Forms.Controls.Reporting===null)&&(SourceCode.Forms.Controls.Reporting={});var q,r,t="#WorkflowActivityChartConfig_secondPage",u=290,f=250;SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig={initializeReportHeader:function(e,o,s,h,c,l,a){n(t)[0].style.display="block";n(t).addClass("complex-picker-entry");q=o;loading=!0;this.callback=c;this.controltype=h;this.rulesWizardTree="";this.treeXml=null;this.Internal=l;this.Context=a;this.fromHeader=!0;this.isRunTime=!1;jQuery("#propertyConfig_propertiesXml").val(e||(e="<Controls><Control/><\/Controls>"));var g=parseXML(e),w=g.documentElement;r=h;var k=n("#ProcessChartConfigTreeHolder1");k.html(" ");k.addClass("workflowTreeContainer");var d;d=SourceCode.Forms.Layout.isRuntime()?f:u;popupManager.showPopup({id:"ReportHeaderActivityPicker",buttons:[{type:"help",click:function(){HelpHelper.runHelp(5003)}},{text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.OK,click:this.processChartOKClick.bind(this)},{id:"processchartPropertyConfig_Cancel",text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Cancel,click:this.ProcessChartConfigCancelClick.bind(this)}],headerText:n(t).attr("MainHeaderProcessChartConfig"),draggable:!0,content:n(t),width:500,height:d,onClose:function(){this.processChartConfigClose(this.callback)}.bind(this)});n("#ReportHeaderActivityPicker").addClass("designtime");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.getProcesses(o);var p="",y="";if(checkExists(this.Internal)&&this.Internal===!0)if(checkExistsNotEmpty(a.options.complexValue))try{var nt=JSON.parse(a.options.complexValue);y=nt.SystemPath}catch(tt){var b=a.options.complexValue.split("\\");b.length>0&&(p=b[b.length-1],y=a.options.complexValue)}else p="",y=null;else p=w.selectSingleNode('/Controls/Control/Properties/Property[Name = "ActivitySystemName"]/Value'),checkExistsNotEmpty(p)||(p=w.selectSingleNode('/Controls/Control/Properties/Property[Name = "ActivityName"]/Value')),y=w.selectSingleNode('/Controls/Control/Properties/Property[Name = "FullProcNameActivity"]/Value');if(y!=null){var v="";if(v=checkExists(this.Internal)&&this.Internal===!0?this.rulesWizardTree.tree("find","metadata","","name",y):this.rulesWizardTree.tree("find","metadata","","name",n(y).text()+"\\"+n(p).text()),v.addClass("selected"),v.length>0)while(!v.hasClass("root"))v.addClass("open"),v.removeClass("closed"),v=v.parent()}else n("#workflowSearchBox").trigger("focus");n("#workflowSearchBox").on("keyup",function(){SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.filterOut(this)});n("#workflowSearchBox").textbox()},isInError:null,errorItems:null,initialize:function(e,o,s,h,c,l,a,v){this.isInError=!1;n(t).css("display","block");q=o;loading=!0;this.callback=c;this.controltype=h;this.treeXml=null;this.fromHeader=!1;this.Internal=l;this.Context=a;this.isRunTime=v;this.errorItems=[];jQuery("#propertyConfig_propertiesXml").val(e||(e="<Controls><Control/><\/Controls>"));var tt=parseXML(e),b=tt.documentElement;r=h;this.isRuntime||n(t).addClass("complex-picker-entry");var g=n("#ProcessChartConfigTreeHolder1");g.html(" ");g.addClass("workflowTreeContainer");var nt;nt=SourceCode.Forms.Layout.isRuntime()?f:u;popupManager.showPopup({id:"ReportHeaderActivityPicker",buttons:[{type:"help",click:function(){HelpHelper.runHelp(5003)}},{text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.OK,click:this.processChartOKClick.bind(this)},{id:"processchartPropertyConfig_Cancel",text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Cancel,click:this.ProcessChartConfigCancelClick.bind(this)}],headerText:n(t).attr("MainHeaderProcessChartConfig"),draggable:!0,content:n(t),width:500,height:nt,onClose:function(){this.processChartConfigClose(this.callback)}.bind(this)});SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.getProcessesRuntime(o);n(".SourceCode-Forms-Controls-Web-Button.help").on("keyup",function(t){t.keyCode===32&&n(this).trigger("click")});var y="",p="";if(checkExists(this.Internal)&&this.Internal===!0)if(checkExistsNotEmpty(a.options.complexValue)){var k=a.options.complexValue.split("\\");k.length>0&&(y=k[k.length-1],p=a.options.complexValue)}else y="",p=null;else if(v)y=h.ActivitySystemName,checkExistsNotEmpty(y)||(y=h.ActivityName),p=h.FullProcNameActivity+"\\"+y;else if(y=b.selectSingleNode('/Controls/Control/Properties/Property[Name = "ActivitySystemName"]/Value'),checkExistsNotEmpty(y)||(y=b.selectSingleNode('/Controls/Control/Properties/Property[Name = "ActivityName"]/Value')),p=b.selectSingleNode('/Controls/Control/Properties/Property[Name = "FullProcName"]/Value'),workflowObject=b.selectSingleNode('/Controls/Control/Properties/Property[Name = "FullProcName"]'),actnameObject=b.selectSingleNode('/Controls/Control/Properties/Property[Name = "ActivityName"]'),checkExists(workflowObject)&&checkExists(workflowObject.getAttribute("ValidationMessages"))&&(this.resourceServices=new SourceCode.Forms.Services.AnalyzerResourcesService,this.errorItems=this.resourceServices.parseValidationMessage(workflowObject.getAttribute("ValidationMessages")),this.updateErrorState(),this.isInError===!0)){var qt=n("#ProcessChartConfigTreeHolder1");qt.addClass("error")}if(p!=null){var w="",d="";if(checkExists(this.Internal)&&this.Internal===!0||v?(w=this.rulesWizardTree.tree("find","metadata","","name",p),d=this.rulesWizardTree.tree("find","metadata","","name",p)):(w=this.rulesWizardTree.tree("find","metadata","","name",p.text+"\\"+y.text),d=this.rulesWizardTree.tree("find","metadata","","name",p.text+"\\"+y.text)),w.addClass("selected"),w.length>0)while(!w.hasClass("root"))w.addClass("open"),w.removeClass("closed"),w=w.parent(),d.find("a").trigger("focus");else n("#workflowSearchBox").trigger("focus"),n("#workflowSearchBox").closest(".text-input").addClass("active")}else n("#workflowSearchBox").trigger("focus");this.cloneTree();n("#workflowSearchBox").on("keyup",function(){SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.filterOut(this)});n("#workflowSearchBox").textbox()},updateErrorState:function(){for(var q=n("#ProcessChartConfigTreeHolder1"),t=0;t<this.errorItems.length;t++)if(this.errorItems[t].status=="Missing"){this.isInError=!0;return}if(this.errorItems.length===0){this.isInError=!1;q.removeClass("error");q.removeAttr("title");return}this.isInError=!1},cloneTree:function(){var q=n("#ProcessChartConfigTreeHolder1");this.clonedTree=q.html();this.clonedTreeData=[];for(var r=q.find("li"),t=0,u=r.length;t<u;t++){var f=n(r[t]);this.clonedTreeData[t]=f.data()}},processChartConfigClose:function(n){this.isRunTime||(jQuery("#ProcessChartConfig_secondPage").remove(),n())},addClick:function(){var n=this.rulesWizardTree.tree("find","selected"),t=n.metadata().name.toString();ProcessChartTextBox.value+=t+";"},filteredXML:function(n,t){for(var q=0;q<n.length;q++){if(n[q].getAttribute("text").toUpperCase().indexOf(t)>-1){var r=n[q].getAttribute("text"),f="",e=0;if(t!=null&&t!="")while(e<n[q].getAttribute("text").length){var u=r.toUpperCase().indexOf(t.toUpperCase());if(u>-1){var o=t.length,s=r.substring(u,u+o);u>0&&(f+=r.substring(0,u));f+="<div class='highlight'>"+s+"<\/div>";r=r.substring(u+o,n[q].getAttribute("text").length);e=u+o}else f+=r,e=n[q].getAttribute("text").length}else t!=null&&(f=r);n[q].setAttribute("text",decodeURI(f));n[q].setAttribute("originalText",t)}var h=n[q].selectNodes("node");this.filteredXML(h,t)}},filterOut:function(t){var o=n(t).val(),y=this.rulesWizardTree.tree().tree("find","root"),f=[],h=jQuery('<div id="processTree" class="scroll-wrapper"><ul class="tree collapsed-root"><li class="root"><a href="javascript:;">Root<\/a><\/li><\/ul><\/div>'),p=jQuery("<div id='formProcessDiv'><\/div>");h.appendTo(p);n("#ProcessChartConfigTreeHolder1").html("");var c=parseXML(this.treeXml.xml);this.rulesWizardTree=h.find(".tree").tree();var y=this.rulesWizardTree.tree("find","root");if(this.filteredXML(c.selectNodes("/nodes/node"),o.toUpperCase()),this.rulesWizardTree.tree("loadXML",c,y),o==""){var l=n("#ProcessChartConfigTreeHolder1");l.append(this.clonedTree);for(var u=l.find("li"),q=0,s=u.length;q<s;q++){var w=n(u[q]);w.data(this.clonedTreeData[q])}this.rulesWizardTree=n("#ProcessChartConfigTreeHolder1").find(".tree").tree();n(".root").removeClass("closed");n(".root").addClass("open")}else{if(n("#ProcessChartConfigTreeHolder1").html(""),n("#ProcessChartConfigTreeHolder1").append(this.rulesWizardTree),n(".root").removeClass("closed"),n(".root").addClass("open"),this.rulesWizardTree.find("li").each(function(){n(this).hasClass("root")||(n(this).removeClass("selected"),n(this).removeClass("open"),n(this).addClass("closed"))}),this.rulesWizardTree.find("a").each(function(){n(this).removeClass("selected");n(this).removeClass("open");n(this).addClass("close")}),this.rulesWizardTree.find("a").each(function(){if(n(this).text().toUpperCase().indexOf(o.toUpperCase())!=-1){f.push(n(this));return}}),f.length>0){for(var q=0;q<f.length;q++){f.length==1&&n(f[q]).parent().addClass("selected");for(var e=n(f[q]);!e.hasClass("root");)e=e.parent(),e.addClass("open"),e.removeClass("closed")}var b=this.rulesWizardTree.find("li.closed");b.remove()}else n("#ProcessChartConfigTreeHolder1").html(""),n("#ProcessChartConfigTreeHolder1").append("<span>"+ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.NoResults+"<\/span>");for(var a=n("#ProcessChartConfigTreeHolder1").find(".workflow, .workflows"),q=0;q<a.length;q++){$workflow=n(a[q]);for(var v=[],u=$workflow.find("li"),r=0,s=u.length;r<s;r++)v[r]=n(u[r]).data();$workflow.html($workflow.html().replace(/&lt;/g,"<").replace(/&gt;/g,">"));u=$workflow.find("li");for(var r=0,s=u.length;r<s;r++)n(u[r]).data(v[r])}}},processChartOKClick:function(){var u=parseXML(document.getElementById("propertyConfig_propertiesXml").value),q=this.rulesWizardTree.tree().tree("find","selected");if(q.length==0){popupManager.showWarning(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.WorkflowActValidation);return}var o="",f="";if(q.length===0||typeof q.metadata().name=="undefined"){o="";var f=""}else o=q.metadata().name.toString(),f=q.metadata().orginalText,checkExistsNotEmpty(f)||(f=q.metadata().text);var n=o.split("\\");if(q.metadata().ItemType!=="Activity")popupManager.showWarning(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.WorkflowActValidation);else{var s="",h="";if(checkExists(this.Internal)&&this.Internal===!0){for(var t=0,v=n.length;t<v;t++)t!=0&&(s+="\\"),s+=n[t];h=n[n.length-1]}else if(this.isRunTime){for(var e="",t=0,v=n.length;t<v-1;t++)t!=0&&(e+="\\"),e+=n[t];var y=n[n.length-1];strInputCode=f.replace(/&(lt|gt);/g,function(n,t){return t=="lt"?"<":">"});var r=strInputCode.replace(/<\/?[^>]+(>|$)/g,"");this.controltype.ActivityName=r;this.controltype.FullProcActivityName=e;this.controltype.FullProcNameActivity=e;this.controltype.ActivitySystemName=y}else this.fromHeader==!0?this.saveXmlValues("FullProcNameActivity",u):this.saveXmlValues("FullProcName",u),this.saveXmlValues("ActivitySystemName",u),this.saveXmlValues("ActivityName",u),jQuery("#ProcessChartConfig_secondPage").remove();if(popupManager.closeLast({cancelOnClose:!0}),checkExists(this.Internal)&&this.Internal===!0){strInputCode=f.replace(/&(lt|gt);/g,function(n,t){return t=="lt"?"<":">"});var r=strInputCode.replace(/<\/?[^>]+(>|$)/g,""),c=[];c.push("");var l={};l.value='{"SystemPath":"'+s.replace(/\\/g,"\\\\")+'","DisplayName":"'+r+'"}';var a={};l.display=checkExistsNotEmpty(r)?r:h;a.display=checkExistsNotEmpty(r)?r:h;a.icon="ActivityName";var p=[l,a];c.push(p);this.callback(c,this.Context);jQuery("#ProcessChartConfig_secondPage").remove()}else this.isRunTime?this.callback(this.controltype):this.callback(1,u.xml);jQuery(document.body).off(".controlUtil")}},setXMLProperty:function(n,t,q,r){var u=n.selectSingleNode("/Controls/Control/Properties/Property[Name[text()='"+t+"']]"),f=n.selectSingleNode("/Controls/Control/Properties/Property[Name[text()='"+t+"']]/Value"),e=n.selectSingleNode("/Controls/Control/Properties/Property[Name[text()='"+t+"']]/DisplayValue");if(checkExists(u)){checkExists(f)&&u.removeChild(f);checkExists(e)&&u.removeChild(e);var o=n.createElement("Value"),s=n.createElement("DisplayValue");o.appendChild(n.createCDATASection(q));s.appendChild(n.createCDATASection(r));u.appendChild(o);u.appendChild(s)}},saveXmlValues:function(n,t){for(var c=this.rulesWizardTree.tree("find","selected"),k=c.metadata().name.toString(),e=k.split("\\"),r="",d=c.metadata().text,o=0,g=e.length-1;o<g;o++)o!=0&&(r+="\\"),r+=e[o];var l=e[e.length-1];if(n!="ControlName"){var q=t.selectSingleNode('/Controls/Control/Properties/Property[Name = "'+n+'"]'),s=t.selectSingleNode("/Controls/Control/Properties");if(s||(s=t.createElement("Properties"),t.selectSingleNode("/Controls/Control").appendChild(s)),q)for(var h=q.childNodes.length-1;h>=0;h--)q.childNodes[h].nodeName!="Name"&&q.removeChild(q.childNodes[h]);if(!q){q=t.createElement("Property");var a=t.createElement("Name");a.appendChild(t.createCDATASection(n));q.appendChild(a);s.appendChild(q)}var f=null,u=null,v=null;if(n=="FullProcName"&&(f=r,u=r),n=="FullProcNameActivity"&&(f=r,u=r),n=="ActivitySystemName"&&(f=l,u=l),n=="ActivityName"){strInputCode=d.replace(/&(lt|gt);/g,function(n,t){return t=="lt"?"<":">"});var y=strInputCode.replace(/<\/?[^>]+(>|$)/g,"");f=y;u=y}if(u){var p=t.createElement("DisplayValue");p.appendChild(t.createCDATASection(f));q.appendChild(p);var w=t.createElement("Value");if(w.appendChild(t.createCDATASection(u)),q.appendChild(w),v!=null){var b=t.createElement("Guid");b.appendChild(t.createCDATASection(v));q.appendChild(b)}}else t.selectSingleNode("/Controls/Control/Properties").removeChild(q)}},getProcesses:function(t){var q=this,r={method:"getItems",resultTypes:"ProcessFolders|ProcessSets|Processes|Activities|ActivitiesWithClientEvents"};this.isRunTime&&(r.resultFlags="Client");jQuery.ajax({url:applicationRoot+"Utilities/AJAXCall.ashx",data:r,dataType:"text",type:"POST",global:!1,async:!1,success:function(r){var o=jQuery('<div id="processTree" class="scroll-wrapper"><ul class="tree collapsed-root"><li class="root"><a href="javascript:;">Root<\/a><\/li><\/ul><\/div>'),s=jQuery("<div id='formProcessDiv'><\/div>");o.appendTo(s);var f=new XslTransform,h=n("#TreeXSLT1").val();f.importStylesheet(t==null?h:applicationRoot+"Rules/XSLT/TreeSelectorWidget.xslt");f.addParameter("WorkflowsResourceName","Workflows");var u=parseXML(f.transformToText(r)),e=[],c=u.selectNodes("/nodes/node/node");n(c).each(function(){e.push(this)});var l=u.getElementsByTagName("node")[0];u.childNodes[0].removeChild(l);n(e).each(function(){u.childNodes[0].appendChild(this)});q.rulesWizardTree=o.find(".tree").tree();var a=q.rulesWizardTree.tree("find","root");q.rulesWizardTree.tree("loadXML",u,a);n("#ProcessChartConfigTreeHolder1").append(q.rulesWizardTree);n(".root").removeClass("closed");n(".root").addClass("open");q.treeXml=u;e.length===0&&n("#ProcessChartConfigTreeHolder1").prepend('<div class="activityPickerWaterMark">'+ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.WorkflowActivityPickerWaterMark+"<\/div>");q.cloneTree.call(q)},error:this.error})},getProcessesRuntime:function(t){var q=this,r={method:"getItems",resultTypes:"ProcessFolders|ProcessSets|Processes|Activities|ActivitiesWithClientEvents"};this.isRunTime&&(r.resultFlags="Client");jQuery.ajax({url:applicationRoot+"Utilities/AJAXCall.ashx",data:r,dataType:"text",type:"POST",global:!1,async:!1,success:function(r){var o=jQuery('<div id="processTree" class="scroll-wrapper"><ul class="tree collapsed-root"><li class="root"><a href="javascript:;">Root<\/a><\/li><\/ul><\/div>'),s=jQuery("<div id='formProcessDiv'><\/div>");o.appendTo(s);var f=new XslTransform,h=n("#TreeXSLT1").val();f.importStylesheet(t==null?h:applicationRoot+"Rules/XSLT/TreeSelectorWidget.xslt");f.addParameter("WorkflowsResourceName","Workflows");var u=parseXML(f.transformToText(r)),e=[],c=u.selectNodes("/nodes/node/node");n(c).each(function(){e.push(this)});var l=u.getElementsByTagName("node")[0];u.childNodes[0].removeChild(l);n(e).each(function(){u.childNodes[0].appendChild(this)});q.rulesWizardTree=o.find(".tree").tree();var a=q.rulesWizardTree.tree("find","root");q.rulesWizardTree.tree("loadXML",u,a);n("#ProcessChartConfigTreeHolder1").append(q.rulesWizardTree);n(".root").removeClass("closed");n(".root").addClass("open");q.treeXml=u;q.cloneTree.call(q);e.length===0&&n("#ProcessChartConfigTreeHolder1").prepend('<div class="activityPickerWaterMark">'+ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.WorkflowActivityPickerWaterMark+"<\/div>")},error:this.error})},ProcessChartConfigCancelClick:function(){n("#workflowSearchBox").val("");this.isRunTime?popupManager.closeLast():popupManager.closeLast({cancelOnClose:!0})}};typeof ControlUtil!="undefined"&&(ControlUtil.clearProcsProperties=function(n,t,q,r){var u=parseXML(n);SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"FullProcNameDisp","(All)","(All)");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"FullProcNameHTML","","");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"FullProcName","(All)","(All)");r(1,u)},ControlUtil.clearUsersProperties=function(n,t,q,r){var u=parseXML(n);SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"Users","(All)","(All)");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"UsersFQN","(All)","(All)");r(1,u)},ControlUtil.clearColumnsProperties=function(n,t,q,r){var u=parseXML(n);SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"VisibleColumns","User;Action;Duration;Date Assigned;Date Completed","User;Action;Duration;Date Assigned;Date Completed");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"UserColumn","Visible","Visible");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"ActionColumn","Visible","Visible");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"DateAssignedColumn","Visible","Visible");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"DateCompletedColumn","Visible","Visible");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"DurationColumn","Visible","Visible");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"VersionNumberColumn","Not Visible","Not Visible");r(1,u)},ControlUtil.clearColumnsCustomWFProperties=function(n,t,q,r){var u=parseXML(n);SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"VisibleColumns","Folio;Start Date;Status;Duration;Priority;View Flow","Folio;Start Date;Status;Duration;Priority;View Flow");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"FolioColumn","Visible","Visible");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"StartDateColumn","Visible","Visible");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"FinishDateColumn","Not Visible","Not Visible");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"StatusColumn","Visible","Visible");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"PriorityColumn","Visible","Visible");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"DurationColumn","Visible","Visible");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"ViewFlowColumn","Visible","Visible");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"WorkflowOriginatorColumn","Not Visible","Not Visible");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"WorkflowNameColumn","Not Visible","Not Visible");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"VersionNumberColumn","Not Visible","Not Visible");r(1,u)},ControlUtil.clearColumnsCustomAGProperties=function(n,t,q,r){var u=parseXML(n);SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"VisibleColumns","Activity Name;Duration;Date Assigned;Date Completed;Priority;Status","Activity Name;Duration;Date Assigned;Date Completed;Priority;Status");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"ActivityNameColumn","Visible","Visible");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"DurationColumn","Visible","Visible");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"DateAssignedColumn","Visible","Visible");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"StatusColumn","Visible","Visible");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"DateCompletedColumn","Visible","Visible");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"PriorityColumn","Visible","Visible");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"WorkflowNameColumn","Not Visible","Not Visible");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"VersionNumberColumn","Not Visible","Not Visible");r(1,u)},ControlUtil.clearStatusProperties=function(n,t,q,r){var u=parseXML(n);SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"Status","(All)","(All)");r(1,u)},ControlUtil.clearRangeProperties=function(n,t,q,r){var u=parseXML(n);SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"RangeToken","last_90_days","Last 90 Days");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"RangeTokenDisplay","last_90_days","Last 90 Days");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"RangeType","Predefined","Predefined");r(1,u)},ControlUtil.clearUserProperties=function(n,t,q,r){var u=parseXML(n);SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"ActivityName","(None)","(None)");SourceCode.Forms.Controls.Reporting.WorkflowActivityComplexConfig.setXMLProperty(u,"FullProcName","","(None)");r(1,u)})})(jQuery);
/*!
 SourceCode.Forms.Controls.Web.ControlPack.Reporting.UtilityTemplates.JS.DateRangeConfig.js (Embedded resource)
*/
function initDateRangeConfig(n,t,q,r,u,f,e,o){SourceCode.Forms.Controls.Reporting.DateRangeConfig.initialize(n,t,q,r,u,f,e,o)}(function(n){(typeof SourceCode=="undefined"||SourceCode===null)&&(SourceCode={});(typeof SourceCode.Forms=="undefined"||SourceCode.Forms===null)&&(SourceCode.Forms={});(typeof SourceCode.Forms.Controls=="undefined"||SourceCode.Forms.Controls===null)&&(SourceCode.Forms.Controls={});(typeof SourceCode.Forms.Controls.Reporting=="undefined"||SourceCode.Forms.Controls.Reporting===null)&&(SourceCode.Forms.Controls.Reporting={});var t,q=270,r=173;SourceCode.Forms.Controls.Reporting.DateRangeConfig={defaultSelection:"last_90_days",initialize:function(u,f,e,o,s,h,c,l){jQuery("#DateRangeConfig_secondPageInternal").find("input:radio").radiobutton();jQuery("#DateRangeConfig_secondPageInternal").find("input:text").textbox();jQuery("#DateRangeConfig_secondPageInternal").find("select").dropdown();var v,y,rt,tt,p=this;jQuery("#propertyConfig_propertiesXml").val(u||(u="<Controls><Control/><\/Controls>"));var pt=s;this.callback=s;this.Internal=h;this.Context=c;this.controltype=o;this.isRuntime=l;this.isRuntime||n("#DateRangeConfig_secondPageInternal").addClass("complex-picker-entry");checkExists(h)&&h===!0?checkExistsNotEmpty(c.options.complexValue)?(y=c.options.complexValue,v=c.options.complexValue.indexOf("StartDate")!==-1?"Specific":c.options.complexValue.indexOf(":")!==-1?"Custom":"Predefined"):(v="Predefined",y=this.defaultSelection):this.isRuntime?(v=o.RangeType,y=o.RangeToken):(rt=parseXML(u),tt=rt.documentElement,v=tt.selectSingleNode('/Controls/Control/Properties/Property[Name = "RangeType"]'),y=tt.selectSingleNode('/Controls/Control/Properties/Property[Name = "RangeToken"]'));var ut;ut=SourceCode.Forms.Layout.isRuntime()?r:q;popupManager.showPopup({id:"DateRangeConfig_secondPageOutside",buttons:[{type:"help",click:function(){HelpHelper.runHelp(5003)}},{text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.OK,click:this.processChartOKClick.bind(this)},{id:"DateRangePropertyConfig_Cancel",text:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.Cancel,click:this.DateRangeCancelClick.bind(this)}],headerText:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.SelectDateRange,draggable:!0,content:jQuery("#DateRangeConfig_secondPage"),width:500,height:ut,onClose:function(){this.DateRangeConfigClose(pt)}.bind(this)});checkExistsNotEmpty(l)||n("#DateRangeConfig_secondPageOutside").addClass("designtime");checkExists(t)||(t=new Calendar(!1));n(".SourceCode-Forms-Controls-Web-Button.help").on("keyup",function(t){t.keyCode===32&&n(this).trigger("click")});var w=n("#RangeBox");w.on("keydown",function(n){if(!p.isNumericKey(n))return!1});var ft=n("#PredefinedRadio");ft[0].setAttribute("tabindex","0");ft[0].parentNode.setAttribute("title",ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.PredefinedRange);var et=n("#buttonCustomRadio");et[0].setAttribute("tabindex","0");et[0].parentNode.setAttribute("title",ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.CustomRange);var ot=n("#buttonSpecificRadio");ot[0].setAttribute("tabindex","0");ot[0].parentNode.setAttribute("title",ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.SpecificRange);n("#DateRangeConfig_TextBox").textbox("readonly");n("#DateRangeConfig_TextBox2").textbox("readonly");var b=n("#DateRangeConfig_secondPageOutside");n("#PredefinedRadio").on("click",function(){n("#DateRangeConfig_secondPageOutside").addClass("predefined-range-selected").removeClass("custom-range-selected").removeClass("specific-range-selected");n("#ListDropBoxGroup").dropdown("disable");w.textbox("disable");n(document.getElementById("ListDropRange")).dropdown("enable");b.find(".specific-drop-wrapper, .custom-drop-wrapper").addClass("disabled");b.find(".predefined-drop-wrapper").removeClass("disabled");jQuery("#DateRangeConfig_Image2").off("click");jQuery("#DateRangeConfig_Image").off("click");jQuery("#DateRangeConfig_TextBox2").parents().closest(".input-control.select-box.lookup-box").lookupbox({}).lookupbox("disable");jQuery("#DateRangeConfig_TextBox").parents().closest(".input-control.select-box.lookup-box").lookupbox({}).lookupbox("disable");jQuery("#DateRangeConfig_TextBox").parents().closest(".form-field").addClass("disabled");p.turnIndexOffAll();p.turnIndexOnPredefined()});n("#buttonCustomRadio").on("click",function(){n("#DateRangeConfig_secondPageOutside").addClass("custom-range-selected").removeClass("specific-range-selected").removeClass("predefined-range-selected");n(document.getElementById("ListDropRange")).dropdown();n(document.getElementById("ListDropRange")).dropdown("disable");n("#ListDropBoxGroup").dropdown("enable");w.textbox("enable");b.find(".specific-drop-wrapper, .predefined-drop-wrapper").addClass("disabled");b.find(".custom-drop-wrapper").removeClass("disabled");w.parents().closest(".form-field").removeClass("disabled");jQuery("#DateRangeConfig_Image2").off("click");jQuery("#DateRangeConfig_Image").off("click");jQuery("#DateRangeConfig_TextBox2").parents().closest(".input-control.select-box.lookup-box").lookupbox({}).lookupbox("disable");jQuery("#DateRangeConfig_TextBox").parents().closest(".input-control.select-box.lookup-box").lookupbox({}).lookupbox("disable");jQuery("#DateRangeConfig_TextBox").parents().closest(".form-field").addClass("disabled");p.turnIndexOffAll();p.turnIndexOnCustom()});n("#buttonSpecificRadio").on("click",function(){n("#DateRangeConfig_secondPageOutside").addClass("specific-range-selected").removeClass("predefined-range-selected").removeClass("custom-range-selected");n(document.getElementById("ListDropRange")).dropdown("disable");n("#ListDropBoxGroup").dropdown("disable");w.textbox("disable");b.find(".custom-drop-wrapper, .predefined-drop-wrapper").addClass("disabled");b.find(".specific-drop-wrapper").removeClass("disabled");jQuery("#DateRangeConfig_TextBox").parents().closest(".form-field").removeClass("disabled");jQuery("#DateRangeConfig_TextBox2").parents().closest(".input-control.select-box.lookup-box").lookupbox({}).lookupbox("enable");jQuery("#DateRangeConfig_TextBox").parents().closest(".input-control.select-box.lookup-box").lookupbox({}).lookupbox("enable");n("#DateRangeConfig_TextBox").parents(".calendar-control").on("keydown keypress",function(t){t.keyCode===n.ui.keyCode.BACKSPACE&&t.preventDefault()});n("#DateRangeConfig_TextBox2").parents(".calendar-control").on("keydown keypress",function(t){t.keyCode===n.ui.keyCode.BACKSPACE&&t.preventDefault()});var q={firstDayOfWeek:"7",minInterval:"1",secInterval:"1",timeFormat:"hh:mm:ss",type:"datePicker"};n("#DateRangeConfig_TextBox").data("format","<Format Type='Date'>d<\/Format>");t.addCalendarUpdateObject(n("#DateRangeConfig_TextBox"),n("#DateRangeConfig_Image"),q);n("#DateRangeConfig_TextBox2").data("format","<Format Type='Date'>d<\/Format>");t.addCalendarUpdateObject(n("#DateRangeConfig_TextBox2"),n("#DateRangeConfig_Image2"),q);n("#DateRangeConfig_Image2").on("calendarChanged",function(){var q=t.getCurrentDate(n("#DateRangeConfig_TextBox")),f=t.getCurrentDate(n("#DateRangeConfig_TextBox2"));if(q!=""){var e=new Date(Date.parse(q)),o=new Date(Date.parse(f));if(o.getTime()<e.getTime()){popupManager.showWarning(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.StartDateWarning);var s=new Date,r={formatXmlString:"<Format Type='Date'>d<\/Format>",value:q,formattingError:!1},u=SCCultureHelper.Current().applyFormatToControlValue(r);r.value=u;t.setCurrentDate(n("#DateRangeConfig_TextBox2"),u)}}});n("#DateRangeConfig_Image").on("calendarChanged",function(){var q=t.getCurrentDate(n("#DateRangeConfig_TextBox")),f=t.getCurrentDate(n("#DateRangeConfig_TextBox2"));if(q!=""){var e=new Date(Date.parse(q)),o=new Date(Date.parse(f));if(o.getTime()<e.getTime()){popupManager.showWarning(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.StartDateWarning);var s=new Date,r={formatXmlString:"<Format Type='Date'>d<\/Format>",value:q,formattingError:!1},u=SCCultureHelper.Current().applyFormatToControlValue(r);r.value=u;t.setCurrentDate(n("#DateRangeConfig_TextBox2"),u)}}});p.turnIndexOffAll();p.turnIndexOnSpecific()});var k;if(v){var d,a;if(checkExists(this.Internal)&&this.Internal===!0?(d=v,a=y):this.isRuntime?(d=v,a=y):(d=n(v.selectSingleNode("Value")).text(),a=n(y.selectSingleNode("Value")).text()),d=="Predefined")k=n("#PredefinedRadio");else if(d=="Specific"){var st=JSON.parse(a),g=new Date(st.StartDate),nt=new Date(st.EndDate),ht={formatXmlString:"<Format>d<\/Format>",value:SCCultureHelper.Current()._convertDateObjToUTCString(g),formattingError:!1};g=SCCultureHelper.Current().applyFormatToControlValue(ht);ht.value=g;var ct={formatXmlString:"<Format>d<\/Format>",value:SCCultureHelper.Current()._convertDateObjToUTCString(nt),formattingError:!1};nt=SCCultureHelper.Current().applyFormatToControlValue(ct);ct.value=nt;n("#DateRangeConfig_TextBox").data("format","<Format Type='Date'>d<\/Format>");n("#DateRangeConfig_TextBox2").data("format","<Format Type='Date'>d<\/Format>");t.setCurrentDate(n("#DateRangeConfig_TextBox"),g);t.setCurrentDate(n("#DateRangeConfig_TextBox2"),nt);var lt={firstDayOfWeek:"7",minInterval:"1",secInterval:"1",timeFormat:"hh:mm:ss",type:"datePicker"};n("#DateRangeConfig_TextBox").data("format","<Format Type='Date'>d<\/Format>");t.addCalendarUpdateObject(n("#DateRangeConfig_TextBox"),n("#DateRangeConfig_Image"),lt);n("#DateRangeConfig_TextBox2").data("format","<Format Type='Date'>d<\/Format>");t.addCalendarUpdateObject(n("#DateRangeConfig_TextBox2"),n("#DateRangeConfig_Image2"),lt);n("#DateRangeConfig_Image2").on("calendarChanged",function(){var q=t.getCurrentDate(n("#DateRangeConfig_TextBox")),f=t.getCurrentDate(n("#DateRangeConfig_TextBox2"));if(q!=""){var e=new Date(Date.parse(q)),o=new Date(Date.parse(f));if(o.getTime()<e.getTime()){popupManager.showWarning(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.StartDateWarning);var s=new Date,r={formatXmlString:"<Format Type='Date'>d<\/Format>",value:q,formattingError:!1},u=SCCultureHelper.Current().applyFormatToControlValue(r);r.value=u;t.setCurrentDate(n("#DateRangeConfig_TextBox2"),u)}}});n("#DateRangeConfig_Image").on("calendarChanged",function(){var q=t.getCurrentDate(n("#DateRangeConfig_TextBox")),f=t.getCurrentDate(n("#DateRangeConfig_TextBox2"));if(q!=""){var e=new Date(Date.parse(q)),o=new Date(Date.parse(f));if(o.getTime()<e.getTime()){popupManager.showWarning(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.StartDateWarning);var s=new Date,r={formatXmlString:"<Format Type='Date'>d<\/Format>",value:q,formattingError:!1},u=SCCultureHelper.Current().applyFormatToControlValue(r);r.value=u;t.setCurrentDate(n("#DateRangeConfig_TextBox2"),u)}}});k=n("#buttonSpecificRadio");a=this.defaultSelection}else{var at=a.split(":");w.val(at[0]);n("#ListDropBoxGroup").val(at[1]);n("#ListDropBoxGroup").dropdown("refresh");k=n("#buttonCustomRadio");a=this.defaultSelection}}else a||(a=this.defaultSelection),k=n("#PredefinedRadio");var vt=[],yt=0;n(["All","this_week","this_month","this_year","last_7_days","last_30_days","last_60_days","last_90_days","last_120_days","last_week","last_month","last_year","today","yesterday","previous_and_current_week","previous_and_current_month","previous_and_current_year","today_and_yesterday"]).each(function(){var n=SourceCode.Forms.Controls.Common.DateRange.ParseToken(this.toString()),t={text:n.Pretty,value:this.toString(),className:"DateRange "+this.toString(),selected:a===this.toString(),index:yt};vt.push(t);yt++});var qt=n(document.getElementById("ListDropRange"));qt.addClass("icon-control");qt.dropdown({items:vt});qt.dropdown("refresh");jQuery("#DateRangeConfig_secondPageInternal").find("select").dropdown();k.trigger("click")},DateRangeCancelClick:function(){popupManager.closeLast()},DateRangeConfigClose:function(n){jQuery("#DateRangeConfig_secondPage").remove();typeof this.controltype!="object"&&n()},turnIndexOffAll:function(){n("#PredefinedRadio").attr("tabindex","-1");n("#buttonCustomRadio").attr("tabindex","-1");n("#RangeBox").attr("tabindex","-1");n("#buttonSpecificRadio").attr("tabindex","-1");n("#DateRangeConfig_TextBox").attr("tabindex","-1");n("#DateRangeConfig_Image").attr("tabindex","-1");n("#DateRangeConfig_TextBox2").attr("tabindex","-1");n("#DateRangeConfig_Image2").attr("tabindex","-1");var t=n("#ListDropRange").next(),q=n("#ListDropBoxGroup").next();t.find("a").attr("tabindex","-1");t.find(".dropdown").attr("tabindex","-1");q.find("a").attr("tabindex","-1");q.find(".dropdown").attr("tabindex","-1")},turnIndexOnPredefined:function(){var t=n("#ListDropRange").next();n("#PredefinedRadio").attr("tabindex","0");t.find("a").attr("tabindex","0");t.find(".dropdown").attr("tabindex","-1");n("#PredefinedRadio").trigger("focus")},turnIndexOnCustom:function(){var t=n("#ListDropBoxGroup").next();n("#buttonCustomRadio").attr("tabindex","0");n("#RangeBox").attr("tabindex","0");t.find("a").attr("tabindex","0");t.find(".dropdown").attr("tabindex","-1");n("#buttonCustomRadio").trigger("focus")},turnIndexOnSpecific:function(){n("#buttonSpecificRadio").attr("tabindex","0");n("#DateRangeConfig_TextBox").attr("tabindex","0");n("#DateRangeConfig_Image").attr("tabindex","0");n("#DateRangeConfig_TextBox2").attr("tabindex","0");n("#DateRangeConfig_Image2").attr("tabindex","0");n("#buttonSpecificRadio").trigger("focus")},processChartOKClick:function(){var f,u,e;this.isError=!1;this.isErrorCustom=!1;var d=jQuery("#DateRangeConfig_secondPage");if(checkExists(this.Internal)&&this.Internal===!0)if(n("#PredefinedRadio:checked").length>0){var r=n(document.getElementById("ListDropRange")),y=r.dropdown("SelectedIndex"),s=r.dropdown("option","items")[y];f=s.value;u=s.text}else if(n("#buttonSpecificRadio:checked").length>0){var p=t.getCurrentDate(n("#DateRangeConfig_TextBox")),w=t.getCurrentDate(n("#DateRangeConfig_TextBox2")),b={formatXmlString:"<Format Culture='en-US' Type='Date'>d<\/Format>",value:p,formattingError:!1},k={formatXmlString:"<Format Culture='en-US' Type='Date'>d<\/Format>",value:w,formattingError:!1},h=SCCultureHelper.Current().applyFormatToControlValue(b),c=SCCultureHelper.Current().applyFormatToControlValue(k);typeof h=="undefined"||typeof c=="undefined"?this.isError=!0:(f='{"StartDate":"'+h+'","EndDate":"'+c+'"}',u=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.SpecificRange)}else{var r=document.getElementById("ListDropBoxGroup"),q=document.getElementById("RangeBox");isNaN(parseInt(q.value))||q.value===""||parseInt(q.value)===0?this.isErrorCustom=!0:(u=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.LastCustomRange.format(q.value,r.options[r.selectedIndex].value),f=q.value+":"+r.options[r.selectedIndex].value)}else if(this.isRuntime){if(f=this.controltype.RangeToken,u=this.controltype.RangeDisplay,e=this.controltype.RangeType,n("#PredefinedRadio:checked").length>0){var r=n(document.getElementById("ListDropRange")),y=r.dropdown("SelectedIndex"),s=r.dropdown("option","items")[y];f=s.value;u=s.text;e="Predefined"}else if(n("#buttonSpecificRadio:checked").length>0){var p=t.getCurrentDate(n("#DateRangeConfig_TextBox")),w=t.getCurrentDate(n("#DateRangeConfig_TextBox2")),b={formatXmlString:"<Format Culture='en-US' Type='Date'>d<\/Format>",value:p,formattingError:!1},k={formatXmlString:"<Format Culture='en-US' Type='Date'>d<\/Format>",value:w,formattingError:!1},h=SCCultureHelper.Current().applyFormatToControlValue(b),c=SCCultureHelper.Current().applyFormatToControlValue(k);typeof h=="undefined"||typeof c=="undefined"?this.isError=!0:(f='{"StartDate":"'+h+'","EndDate":"'+c+'"}',u=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.SpecificRange,e="Specific")}else{var r=document.getElementById("ListDropBoxGroup"),q=document.getElementById("RangeBox");isNaN(parseInt(q.value))||q.value===""||parseInt(q.value)===0?this.isErrorCustom=!0:(u=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.LastCustomRange.format(q.value,r.options[r.selectedIndex].value),f=q.value+":"+r.options[r.selectedIndex].value,e="Custom")}this.controltype.RangeToken=f;this.controltype.RangeDisplay=u;this.controltype.RangeType=e;this.controltype.RangeDisplay==""&&(this.controltype.RangeDisplay="(None)")}else{var o=parseXML(document.getElementById("propertyConfig_propertiesXml").value);if(this.saveXmlValues("RangeToken",o),this.saveXmlValues("RangeTokenDisplay",o),this.saveXmlValues("RangeType",o),n("#buttonCustomRadio:checked").length>0){this.saveXmlValues("RangeGroup",o);var q=document.getElementById("RangeBox");(isNaN(parseInt(q.value))||q.value===""||parseInt(q.value)===0)&&(this.isErrorCustom=!0)}var g=checkExists(SourceCode.Forms.Designers.View.viewDefinitionXML)?!1:!0;if(g)n(document).on("ajaxComplete.sfcReportingDateRangeReturned",function(){setTimeout(function(){SourceCode.Forms.Designers.Common.Context.refreshSelectedControlProperties();n(document).off("ajaxComplete.sfcReportingDateRangeReturned")},0)})}if(this.isErrorCustom)popupManager.showWarning(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.CustomWarning),this.isErrorCustom=!1;else if(this.isError)popupManager.showWarning(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.CalendarWarning);else{if(checkExists(this.Internal)&&this.Internal===!0){var l=[];l.push("");var a={};a.value=f;var v={};a.display=u;v.display=u;v.icon="RangeTokenDisplay";var nt=[a,v];l.push(nt);this.callback(l,this.Context)}else this.isRuntime?this.callback(this.controltype):this.callback(1,o.xml);popupManager.closeLast({cancelOnClose:!0});jQuery(document.body).off(".controlUtil");d.remove()}},saveXmlValues:function(q,r){if(q!="ControlName"){var f=r.selectSingleNode('/Controls/Control/Properties/Property[Name = "'+q+'"]'),c=r.selectSingleNode("/Controls/Control/Properties");if(c||(c=r.createElement("Properties"),r.selectSingleNode("/Controls/Control").appendChild(c)),f)for(var l=f.childNodes.length-1;l>=0;l--)f.childNodes[l].nodeName!="Name"&&f.removeChild(f.childNodes[l]);if(!f){f=r.createElement("Property");f.setAttribute("selected","All");var g=n("#checkboxAll");g.prop("checked")?f.appendChild(r.createCDATASection("All")):f.appendChild(r.createCDATASection("select"));var w=r.createElement("Name");w.appendChild(r.createCDATASection(q));f.appendChild(w);c.appendChild(f)}var e=null,u=null;if(q=="FullProcName"&&(FullProcNameFull==""&&(FullProcNameFull="None"),e=FullProcNameFull,u=FullProcNameFull),q=="FullProcNameDisp"&&(FullProcNameDisp!="(All)"&&FullProcNameDisp.substring(0,1)==";"&&(FullProcNameDisp=FullProcNameDisp.substring(1,FullProcNameDisp.length)),e=FullProcNameDisp,u=FullProcNameDisp),q=="RangeToken")if(n("#PredefinedRadio:checked").length>0){var o=n(document.getElementById("ListDropRange")),b=o.dropdown("SelectedIndex"),a=o.dropdown("option","items")[b];u=a.value;e=a.text}else if(n("#buttonSpecificRadio:checked").length>0){var nt=t.getCurrentDate(n("#DateRangeConfig_TextBox")),tt=t.getCurrentDate(n("#DateRangeConfig_TextBox2")),qt={formatXmlString:"<Format Culture='en-US' Type='Date'>d<\/Format>",value:nt,formattingError:!1},rt={formatXmlString:"<Format Culture='en-US' Type='Date'>d<\/Format>",value:tt,formattingError:!1},y=SCCultureHelper.Current().applyFormatToControlValue(qt),p=SCCultureHelper.Current().applyFormatToControlValue(rt);if(typeof y=="undefined"||typeof p=="undefined"){this.isError=!0;return}e='{"StartDate":"'+y+'","EndDate":"'+p+'"}';u='{"StartDate":"'+y+'","EndDate":"'+p+'"}'}else{var o=document.getElementById("ListDropBoxGroup"),v=document.getElementById("RangeBox");e=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.LastCustomRange.format(v.value,o.options[o.selectedIndex].value);u=v.value+":"+o.options[o.selectedIndex].value}if(q=="RangeTokenDisplay")if(n("#PredefinedRadio:checked").length>0){var o=n(document.getElementById("ListDropRange")),b=o.dropdown("SelectedIndex"),a=o.dropdown("option","items")[b];u=a.value;e=a.text}else if(n("#buttonSpecificRadio:checked").length>0)e="Specific Range",u="Specific Range";else{var o=document.getElementById("ListDropBoxGroup"),v=document.getElementById("RangeBox");e=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.LastCustomRange.format(v.value,o.options[o.selectedIndex].innerHTML);u=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Reporting.Properties.ReportingCommon.LastCustomRange.format(v.value,o.options[o.selectedIndex].innerHTML)}if(q=="RangeGroup"&&!(n("#PredefinedRadio:checked").length>0)&&!(n("#buttonSpecificRadio:checked").length>0)){var o=document.getElementById("ListDropBoxGroup"),s="",h="";switch(o.options[o.selectedIndex].value){case"Hours":s="Hourly";h="hour";break;case"Days":s="Daily";h="today";break;case"Weeks":s="Weekly";h="this_week";break;case"Months":s="Monthly";h="this_month";break;case"Quarters":s="Quarterly";h="this_quarter";break;case"Years":s="Yearly";h="this_year"}e=s;u=h}if(q=="RangeType"&&(n("#PredefinedRadio:checked").length>0?(e="Predefined",u="Predefined"):n("#buttonSpecificRadio:checked").length>0?(e="Specific",u="Specific"):(e="Custom",u="Custom")),q=="WorkflowSelection"&&(checkedAll?(e="All",u="All"):(e="Selection",u="Selection")),u){var k=r.createElement("DisplayValue");k.appendChild(r.createCDATASection(e));f.appendChild(k);var d=r.createElement("Value");d.appendChild(r.createCDATASection(u));f.appendChild(d)}else r.selectSingleNode("/Controls/Control/Properties").removeChild(f)}},isNumericKey:function(t){var q=t.keyCode?t.keyCode:t.which;return q>=48&&q<=57||q>=96&&q<=105||q===n.ui.keyCode.BACKSPACE||q>=37&&q<=40||q===46?t.shiftKey||t.ctrlKey?!1:!0:!1}}})(jQuery);
