/*!
 SourceCode.Forms.Controls.Web.ControlPack.Resources.JS.GenericListBehavior.js (Embedded resource)
*/
(function(n){(typeof SourceCode=="undefined"||SourceCode===null)&&(SourceCode={});(typeof SourceCode.Forms=="undefined"||SourceCode.Forms===null)&&(SourceCode.Forms={});(typeof SourceCode.Forms.Controls=="undefined"||SourceCode.Forms.Controls===null)&&(SourceCode.Forms.Controls={});(typeof SourceCode.Forms.Controls.Web=="undefined"||SourceCode.Forms.Controls.Web===null)&&(SourceCode.Forms.Controls.Web={});(typeof SourceCode.Forms.Controls.Web.ControlPack=="undefined"||SourceCode.Forms.Controls.Web.ControlPack===null)&&(SourceCode.Forms.Controls.Web.ControlPack={});var t;SourceCode.Forms.Controls.Web.ControlPack.GenericList=t=n.extend({},SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase,{displayMethod:function(){return!1},setEnabled:function(n,q){var r=n.find(".SourceCode-Forms-Controls-Web-ControlPack-GenericList");t._setProperty(r,"isEnabled",q)},setJSONConfig:function(q,r){var nt=q.find(".SourceCode-Forms-Controls-Web-ControlPack-GenericList"),e=nt.parent().parent().attr("id");t._setProperty(nt,"jSONConfig",r);try{var o=JSON.parse(r),s=checkExistsNotEmpty(o.SmartObject)?o.SmartObject:o.AssociationSO,l=checkExistsNotEmpty(o.SmartObjectMethod)?o.SmartObjectMethod:o.AssociationMethod,u=SFCTreeRuleHelper.getViewNode(),ft=u.selectSingleNode("//Controls/Control[@ID='"+e+"']"),w=u.selectSingleNode("//Controls/Control[@ID='"+e+"']/Properties"),tt=u.selectSingleNode("//Controls/Control[@ID='"+e+"']/Properties/Property[Name='"+s+"']"),b=u.selectSingleNode("//Controls/Control[@ID='"+e+"']/Properties/Property[Name='"+l+"']");if(checkExists(tt)&&checkExists(b)&&n(tt.selectSingleNode("/Value")).text()===s&&n(b.selectSingleNode("/Value")).text()===b)return;for(var h=u.getAttribute("ID"),k=u.selectSingleNode("Events/Event[(@SourceType='View') and (@SourceID='{0}') and (@Type='User') and (Name/text()='Init')]".format(h)),v=[{Name:"AssociationSO",Value:s,DisplayValue:s},{Name:"AssociationMethod",Value:l,DisplayValue:"List"},{Name:"DataSourceType",Value:"SmartObject",DisplayValue:"SmartObject"},{Name:"OriginalProperty",Value:o.PrimaryKeyField,DisplayValue:o.PrimaryKeyField},{Name:"ValueProperty",Value:o.PrimaryKeyField,DisplayValue:o.PrimaryKeyField},{Name:"DisplayTemplate",Value:"",DisplayValue:""}],a=0;a<v.length;a++){w=u.selectSingleNode("//Controls/Control[@ID='"+e+"']/Properties");var qt=u.selectSingleNode("//Controls/Control[@ID='"+e+"']/Properties/Property[Name='"+v[a].Name+"']");checkExists(qt)&&checkExists(w)&&w.removeChild(qt);EventUtil.addProperty(u.ownerDocument,ft,v[a].Name,v[a].Value)}if(checkExists(k)){var et="Handlers/Handler/Actions/Action/Properties/Property[Name[text()='ControlID'] and Value[text()='"+e+"']]",y=k.selectNodes(et);if(y.length>0)for(var p=0;p<y.length;p++)EventUtil106.updateProperty(u,y[p],"Method",l),EventUtil106.updateProperty(u,y[p],"ObjectID",s);else{u=u.ownerDocument;var f=u.createElement("Action");f.setAttribute("ID","".generateGuid());f.setAttribute("DefinitionID","".generateGuid());f.setAttribute("Type","Execute");f.setAttribute("ExecutionType","Synchronous");EventUtil106.updateProperty(u,f,"Location","View");EventUtil106.updateProperty(u,f,"ControlID",e);EventUtil106.updateProperty(u,f,"Method",l);EventUtil106.updateProperty(u,f,"ViewID",h);EventUtil106.updateProperty(u,f,"ObjectID",s);EventUtil106.addResult(u,f,s,"Result",e,"Control");var rt=u.createElement("Actions");rt.appendChild(f);var c=u.createElement("Handler");c.setAttribute("ID",(new String).generateGuid());c.setAttribute("DefinitionID",(new String).generateGuid());c.setAttribute("Type","If");EventUtil106.updateProperty(u,c,"Location","view");c.appendChild(rt);var ot=k.selectSingleNode("Handlers");ot.appendChild(c)}}else{var ut=context.designer._GetViewName();h=context.designer._GetViewID();var d=context.designer._GetViewDisplayName(),st=context.designer.getControlDisplayName({viewDefinition:context.designerDefinition,controlId:context.controlId});if(checkExists(SourceCode.Forms.Designers.View)){var g=SFCTreeRuleHelper.getViewNode();if(g!==null){h=g.getAttribute("ID");var ht={Events:[{SourceType:"View",SourceID:h,SourceDisplayName:{_ignoreChanges:!0,_valueToSet:d},SourceName:{_ignoreChanges:!0,_valueToSet:ut},Type:"User",Name:"Init",Properties:{ViewID:{_alwaysReplace:!0,_valueToSet:{value:h,displayValue:d}},RuleName:"When the View executed Initialize",Location:{_alwaysReplace:!0,_valueToSet:ut}},Handlers:[{Properties:{Location:"View"},Actions:[{Type:"Execute",ExecutionType:"Synchronous",Properties:{Location:"View",ControlID:{value:context.controlId,displayValue:st},Method:l,ViewID:{_alwaysReplace:!0,_valueToSet:{value:h,displayValue:d}},ObjectID:s},Results:[{SourceID:s,SourceType:"Result",TargetID:e,TargetType:"Control"}]}]}]}]};EventUtil.ensureEventingPattern(g,ht,{replaceExisting:!1})}}}}catch(ct){}},execute:function(t){var r=t.methodName,u=t.methodParameters.expenseitemid,q=n("#{0}".format(t.CurrentControlId));switch(r){case"Refresh":q.SFCGenericList("refreshMethod");break;case"RefreshAndSelectLastItem":q.SFCGenericList("refreshListSelectLastItem");break;case"SelectFirstItem":q.SFCGenericList("selectFirstItem");break;case"CountItems":return q.SFCGenericList("countItems");case"Clear":q.SFCGenericList("clearList");break;case"GetPropertyValue":return q.SFCGenericList("getSelectedItemPropertyValue",t.methodParameters.propertyname)}},DisplayProperty:function(){return!1},_createProperties:function(q){try{for(var w=n(t._getInstance(q.controlId).find(".SourceCode-Forms-Controls-Web-ControlPack-GenericList")),f=JSON.parse(t._getProperty(w,"jSONConfig")),o=checkExistsNotEmpty(f.SmartObject)?f.SmartObject:f.AssociationSO,l=checkExistsNotEmpty(f.SmartObjectMethod)?f.SmartObjectMethod:f.AssociationMethod,r=q.designerDefinition,b=r.selectSingleNode("//Controls/Control[@ID='"+q.controlId+"']"),v=[{Name:"AssociationSO",Value:o,DisplayValue:o},{Name:"AssociationMethod",Value:l,DisplayValue:"List"},{Name:"DataSourceType",Value:"SmartObject",DisplayValue:"SmartObject"},{Name:"OriginalProperty",Value:f.PrimaryKeyField,DisplayValue:f.PrimaryKeyField},{Name:"ValueProperty",Value:f.PrimaryKeyField,DisplayValue:f.PrimaryKeyField},{Name:"DisplayTemplate",Value:"",DisplayValue:""}],e=0;e<v.length;e++)EventUtil.addProperty(r,b,v[e].Name,v[e].Value);EventUtil.manageControlEvent(q);var h=r.getAttribute("ID"),y=r.selectSingleNode("Events/Event[(@SourceType='View') and (@SourceID='{0}') and (@Type='User') and (Name/text()='Init')]".format(h));if(checkExists(y)){var k="Handlers/Handler/Actions/Action/Properties/Property[Name[text()='ControlID'] and Value[text()='"+controlId+"']]",a=y.selectNodes(k);if(a.length>0)for(var e=0;e<a.length;e++)EventUtil106.updateProperty(r,a[e],"Method",l),EventUtil106.updateProperty(r,a[e],"ObjectID",o);else{r=r.ownerDocument;var u=r.createElement("Action");u.setAttribute("ID","".generateGuid());u.setAttribute("DefinitionID","".generateGuid());u.setAttribute("Type","Execute");u.setAttribute("ExecutionType","Synchronous");EventUtil106.updateProperty(r,u,"Location","View");EventUtil106.updateProperty(r,u,"ControlID",controlId);EventUtil106.updateProperty(r,u,"Method",l);EventUtil106.updateProperty(r,u,"ViewID",h);EventUtil106.updateProperty(r,u,"ObjectID",o);EventUtil106.addResult(r,u,o,"Result",controlId,"Control");var p=r.createElement("Actions");p.appendChild(u);var s=r.createElement("Handler");s.setAttribute("ID",(new String).generateGuid());s.setAttribute("DefinitionID",(new String).generateGuid());s.setAttribute("Type","If");EventUtil106.updateProperty(r,s,"Location","view");s.appendChild(p);var d=y.selectSingleNode("Handlers");d.appendChild(s)}}else if(checkExists(SourceCode.Forms.Designers.View)){var c=SFCTreeRuleHelper.getViewNode();if(c!==null){var r=c.ownerDocument,h=c.getAttribute("ID"),g={Events:[{SourceType:"View",SourceID:h,Type:"User",Name:"Init",Properties:{ViewID:h,RuleName:"When the View executed Initialize",Location:c.selectSingleNode("Name").text},Handlers:[{Properties:{Location:"View"},Actions:[{Type:"Execute",ExecutionType:"Synchronous",Properties:{Location:"View",ControlID:q.controlId,Method:l,ViewID:h,ObjectID:o},Results:[{SourceID:o,SourceType:"Result",TargetID:q.controlId,TargetType:"Control"}]}]}]}]};EventUtil.ensureEventingPattern(c,g,{replaceExisting:!0})}}}catch(nt){}},settingItems:function(q){var u=q.brokerPackageXML,r=n("#"+q.CurrentControlId),f=r[0].getAttribute("data-widget"),e=r[f]("option").page,o=r[f]("option").pageSize,s=r[f]("option").pageItems;u[0].metadata.pagenumber=e.toString();u[0].metadata.pagesize=o.toString();t._setProperty(r,"settingItems",!0);t._setProperty(r,"brokerPackage",JSON.parse(JSON.stringify(u)));q.modalizeView=!1;SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.settingItems(q)}});n.widget("sfc.SFCGenericList",n.sfc.baseWidget,{options:{controlName:"",previous:{},templateName:"GenericItem",designTime:!0,preview:!1,runtime:!1,isEnabled:!0,itemsDictionary:{},isParentEnabled:!0,interval:5e3,jsonData:null,settingItems:!1,timerTimout:null,splitExpenseItemsDictionary:[],showDeleteWarning:!1,showAddButton:!1,showDeleteButton:!1,enableAddButton:!1,enableDeleteButton:!1,style:SourceCode.Forms.Controls.Base.emptyStylesNode,jSONConfig:"",associatedJoinProperty:"",associationMethod:"",property1:"",property2:"",timer:"",description:"",detail:"",itemId:"",genericItem:"",selectedIndicator:"",toggled:!1,watermark:"No Data to Display",showFooter:!0,safeIdReplaceRegex:/[\.@\\:\/]/gi,value:"",page:1,pageSize:3,pageItems:0},methodQueue:[],ControlResourceStrings:{},scrollbar:null,setSelectedItemProperties:function(n){var t=this;t.options.selectedItem=n;t.options.property1=n.Property1;t.options.property2=n.Property2;t.options.title=n.Title;t.options.description=n.Description;t.options.detail=n.Detail;t.options.itemId=n.ID},_create:function(){var t=this;this.options.controlName=this.element[0].getAttribute("name");this.options.designTime=this.element.hasClass("designtime");this.options.preview=this.element.hasClass("preview");this.options.runtime=this.options.designTime===!1&&this.options.preview===!1;this.options.jSONConfig!==""&&(this.options.pageSize=parseInt(JSON.parse(this.options.jSONConfig).PageSize||"99999999"),this.options.templateName=JSON.parse(this.options.jSONConfig).TemplateName||this.options.templateName);this.setStyles();this.ControlResourceStrings={};this.initializeHandlers();this.element.closest(".editor-cell.droptarget").css("padding","0px");this.options.previous=n.extend({},this.options);checkExistsNotEmpty(t.options.jSONConfig)&&(t.options.config=JSON.parse(t.options.jSONConfig));this.scrollbar=SourceCode.Forms.Controls.Web.ControlPack.Utils.SetSimpleScrollbar(this.element.find(".scrollWrapperDiv")[0])},countItems:function(){var n=0;return checkExists(this.options.itemsDictionary)&&(n=Object.keys(this.options.itemsDictionary).length),n},selectFirstItem:function(){var n=this.element.find(".genericitem:not(.removeItem):not(.deleted)").eq(0);if(n.length>0){var t=n.find(".PART_ClickArea");t.trigger("click")}},selectExpenseItem:function(t){if(this.options.settingItems)this.methodQueue.push({method:"selectExpenseItem",parameters:[t]});else{var q=n(this.options.itemsDictionary[".Item"+t].element);q.length>0?q.trigger("click"):this.element.find(".genericitem").trigger("click")}},getSelectedItemPropertyValue:function(n){return checkExistsNotEmpty(n)&&checkExists(this.options.selectedItem)?this.options.selectedItem.SMOValues[n]:null},addWatermark:function(){this.element.find(".watermark").remove();var t=document.createElement("div");n(t).addClass("watermark hidden");var q=document.createElement("div");n(q).addClass("watermarkwrapper");var r=document.createElement("div");n(r).addClass("middleText");n(r).append(this.options.watermark);n(q).append(r);n(t).append(q);this.element.find(".itemsbody").prepend(t);n(t).fadeIn("fast",function(){n(this).removeClass("hidden")})},initializeHandlers:function(){var n=this;this.element.find(".genericitemsfooter").on("click",function(){n.element.find(".genericitem").removeClass("selected");n.element.find(".innerItem").removeClass("selected")});this.element.find("#addExpenseItem").on("click",function(){n.options.enableAddButton&&raiseEvent(n.element.attr("id"),"Control","Add Item")});this.element.find(".buttonMore").on("click",function(){var q=n.countItems()+n.options.pageSize,t=n.options.brokerPackage,u=n,r=q;t[0].metadata.pagenumber=1..toString();t[0].metadata.pagesize=r.toString();n.options.brokerPackage=t;n.refreshList()})},setEnabled:function(){this.options.isEnabled&&this.options.isParentEnabled?this.element.removeClass("disabled"):this.element.addClass("disabled")},setStyles:function(){var s=parseInt(this.options.height),h=parseInt(this.element.find(".genericitemsfooter").height()),a=this.element.find(".itemsbody").height(),n=s-h;if(this.element.find(".scrollWrapperDiv")[0].style.height="550px",this.element.find(".toolbarhover ")[0].style.height="550px",isNaN(n))this.element.find(".scrollWrapperDiv")[0].style.height="100%",this.element.find(".toolbarhover ")[0].style.height="50px";else{this.element[0].style.height=n+"px";this.element.find(".scrollWrapperDiv")[0].style.height=n+"px";this.element.find(".toolbarhover ")[0].style.height="50px";for(var r=this.element.find(".genericitem"),u=this.element.find(".tableDivWrapper:visible"),f=0,e=0,c=this.element.find(".watermark").outerHeight(),t=0;t<r.length;t++)f+=r.eq(t).outerHeight();for(var q=0;q<u.length;q++)e+=u.eq(q).outerHeight();var l=this.element.find(".spacerdiv");if(l.length>0){var o=n-f-e-c-50;o>0?this.element.find(".spacerdiv").height(o):this.element.find(".spacerdiv").height(0)}}},updateItem:function(n,t){var v=this,q=this.element.find("Item"+n),r=t.ImageProperty,u=t.TitleProperty,f=t.DescriptionProperty,e=t.DetailProperty||"",o=t.Property1,s=t.Property2,h=t.ShowIndicatorsBar,c=t.Indicator1,l=t.Indicator2,a=t.Indicator3;q.length>0&&(this.updateImageDiv(r,q),this.updateTitleProperty(u,q),this.updateDescriptionProperty(f,q),this.updateDetailProperty(e,q),this.updateProperty1(o,q),this.updateProperty2(s,q),this.updateIndicatorBar(h,q),this.updateIndicator1(c,q),this.updateIndicator2(l,q),this.updateIndicator3(a,q))},updateImageDiv:function(n,t){if(checkExistsNotEmpty(n)){var q=t.find(".ImageDiv");if(typeof n=="object"){switch(n.PropertyType){case"String":q.css("background-image",'url("'+n.Value+'")');break;case"Classname":q.addClass(n.Value)}if(n.Clickable)q.off("click").on("click",function(){raiseEvent(self.element.attr("id"),"Control","Image Clicked")});else q.off("click");if(n.Visible&&typeof n.Visible!="object"&&typeof n.Visible!="Array")switch(n.Visible){case"Show":q.parent().removeClass("hide");break;default:q.parent().addClass("hide")}}}},updateTitleProperty:function(n,t){if(checkExistsNotEmpty(n)){var q=t.find("TitleDiv");typeof n=="object"?checkExistsNotEmpty(n.format):q.html(n)}},checkIntegrity:function(t,q,r){var l=this,u=this.options.itemsDictionary[q],h=t[q],d="";for(var f in u)if(h[f]!==u[f]){d=f;var e=null;try{switch(f){case"Title":e=n(u.element).find(".PART_TitleDiv:not(.hide)");for(var s=0;s<e.length;s++){var a=e.eq(s).find("span.PART_ClickTitle");a.addClass("fadeIn");a.data().value=ControlPackBase.escapeSpecialChar(h[f]);a.data().format=h.TitleFormat;a.addClass("fade")}u[f]=h[f];break;case"TitleTooltip":e=n(u.element).find(".PART_TitleDiv:not(.hide)");e[0].setAttribute("title",h.TitleTooltip);break;case"Description":e=n(u.element).find(".PART_DescriptionDiv:not(.hide)");for(var s=0;s<e.length;s++)e.eq(s).addClass("fadeIn"),e.eq(s).data().value=ControlPackBase.escapeSpecialChar(h[f]),e.eq(s).data().format=h.DescriptionFormat,e.eq(s).addClass("fade");u[f]=h[f];break;case"Detail":e=n(u.element).find(".PART_DetailDiv:not(.hide)");for(var s=0;s<e.length;s++)e.eq(s).addClass("fadeIn"),e.eq(s).data().value=ControlPackBase.escapeSpecialChar(h[f]),e.eq(s).data().format=h.DetailFormat,e.eq(s).addClass("fade");u[f]=h[f];break;case"Property1":e=n(u.element).find(".PART_Property1Div:not(.hide)");for(var s=0;s<e.length;s++)e.eq(s).addClass("fadeIn"),e.eq(s).data().value=ControlPackBase.escapeSpecialChar(h[f]),e.eq(s).data().format=h.Property1Format,e.eq(s).addClass("fade");u[f]=h[f];break;case"Property2":e=n(u.element).find(".PART_Property2Div:not(.hide)");for(var s=0;s<e.length;s++)e.eq(s).addClass("fadeIn"),e.eq(s).data().value=ControlPackBase.escapeSpecialChar(h[f]),e.eq(s).data().format=h.Property2Format,e.eq(s).addClass("fade");u[f]=h[f];break;case"Indicator1Classname":n(u.element).find(".PART_Indicator1Div").removeClass(u[f]);n(u.element).find(".PART_Indicator1Div").addClass(h[f]);u[f]=h[f];break;case"Indicator2Classname":n(u.element).find(".PART_Indicator2Div").removeClass(u[f]);n(u.element).find(".PART_Indicator2Div").addClass(h[f]);u[f]=h[f];break;case"Indicator3Classname":n(u.element).find(".PART_Indicator3Div").removeClass(u[f]);n(u.element).find(".PART_Indicator3Div").addClass(h[f]);u[f]=h[f];break;case"element":case"imageElement":break;default:u[f]=h[f]}}catch(st){}}var ht=u.Title,ct=u.Description,lt=u.Detail,at=u.Property1,vt=u.Property2,yt=u.ID,v=u.Image,g=u.ShowIndicatorsBar,pt=u.Indicator1Classname,wt=u.Indicator2Classname,bt=u.Indicator3Classname,y=u.Indicator1Visible,p=u.Indicator2Visible,w=u.Indicator3Visible,nt=u.DescriptionVisible,kt=u.DetailVisible,tt=u.Property1Visible,qt=u.Property2Visible,rt=u.ImageValue,ut=u.ImagePropertyType,dt=u.ImageClickable,b=u.Toggle,o=n(u.element);nt==="Hide"?(n(o).find(".PART_PropertiesTitleProperty1TableRow .PART_DescriptionDiv,.PART_PropertiesTitleProperty1TableRow .PART_TitleDiv").addClass("hide"),n(o).find(".PART_TitlteDescriptionDynamicLeft").removeClass("hide"),n(o).find(".PART_TitleDescriptionDynamicLeftTableRow .PART_DescriptionDiv").addClass("hide")):(n(o).find(".PART_TitlteDescriptionDynamicLeft").addClass("hide"),n(o).find(".PART_PropertiesTitleProperty1TableRow .PART_DescriptionDiv,.PART_PropertiesTitleProperty1TableRow .PART_TitleDiv").removeClass("hide"),n(o).find(".PART_TitleDescriptionDynamicLeftTableRow .PART_DescriptionDiv").removeClass("hide"));tt==="Hide"?(n(o).find(".PART_PropertiesTitleProperty1TableRow .PART_Property1Div,.PART_PropertiesTitleProperty1TableRow .PART_Property2Div").addClass("hide"),n(o).find(".PART_Property1Property2DynamicRight").removeClass("hide"),n(o).find(".PART_Property1Property2DynamicRightTableRow .PART_Property1Div").addClass("hide")):(n(o).find(".PART_PropertiesTitleProperty1TableRow .PART_Property1Div,.PART_PropertiesTitleProperty1TableRow .PART_Property2Div").removeClass("hide"),n(o).find(".PART_Property1Property2DynamicRight").addClass("hide"),n(o).find(".PART_Property1Property2DynamicRightTableRow .PART_Property1Div").removeClass("hide"));qt==="Hide"?(n(o).find(".PART_PropertiesTitleProperty1TableRow .PART_Property1Div,.PART_PropertiesTitleProperty1TableRow .PART_Property2Div").addClass("hide"),n(o).find(".PART_Property1Property2DynamicRight").removeClass("hide"),n(o).find(".PART_Property1Property2DynamicRightTableRow .PART_Property2Div").addClass("hide")):(n(o).find(".PART_PropertiesTitleProperty1TableRow .PART_Property1Div,.PART_PropertiesTitleProperty1TableRow .PART_Property2Div").removeClass("hide"),n(o).find(".PART_Property1Property2DynamicRight").addClass("hide"),n(o).find(".PART_Property1Property2DynamicRightTableRow .PART_Property2Div").removeClass("hide"));y==="Hide"?n(o).find(".PART_Indicator1Div").addClass("hide"):n(o).find(".PART_Indicator1Div").removeClass("hide");p==="Hide"?n(o).find(".PART_Indicator2Div").addClass("hide"):n(o).find(".PART_Indicator2Div").removeClass("hide");w==="Hide"?n(o).find(".PART_Indicator3Div").addClass("hide"):n(o).find(".PART_Indicator3Div").removeClass("hide");var k=n(o).find(".PART_IndicatorsTableMain");if((y==="Show"||p==="Show"||w==="Show")&&g==="Show"){k.removeClass("hide");var ft=n(o).find(".PART_Property1Property2DynamicRight"),et=n(o).find(".PART_Property2Div"),ot=n(o).find(".PART_Property1Div");ft.addClass("hide");et.addClass("hide");ot.addClass("hide")}else k.addClass("hide");var c=o.find(".PART_ImageDiv");ut==="Classname"&&(checkExistsNotEmpty(v)?n(c).addClass(v):n(c).addClass(rt));checkExistsNotEmpty(u.ImageToolTip)&&n(c).attr("title",u.ImageToolTip);checkExistsNotEmpty(b)&&b==="Show"&&(n(c).addClass("toggleon"),checkExistsNotEmpty(u.ImageToggleToolTip)&&n(c).attr("title",u.ImageToggleToolTip));n(u.element).find(".fadeOut").fadeOut("fast",function(){n(this).removeClass("fadeOut");n(this).addClass("hide")});n(u.element).find(".fadeIn").fadeIn("fast",function(){n(this).removeClass("fadeIn");n(this).removeClass("hide")});n(u.element).find(".fade").fadeOut("fast",function(){var t=n(this).data().value,q=n(this).data().format,u=t;if(checkExistsNotEmpty(q)){var f={formatXmlString:q,value:t,formattingError:!1};u=SCCultureHelper.Current().applyFormatToControlValue(f)}n(this).html(u);n(this).attr("style","");r==="itemsbody"?l.element.find(".itemsbody").prepend(n(this).closest(".genericitem")):n(l.options.itemsDictionary[r].element).after(n(this).closest(".genericitem"));var e=l.element.find(".lastItem");e.removeClass("lastItem");l.element.find(".genericitem").last().addClass("lastItem");n(this).removeClass("fade");n(this).attr("title",t);n(this).fadeIn("slow")})},timeout:null,toggleShow:function(n,t){switch(n){case"add":this.element.find("#addExpenseItem").toggleClass("hide",!t);this._setToolbarVisibility();break;case"footer":this.element.find(".genericitemsfooter").toggleClass("hide",!t);break;case"delete":this.element.find(".deleteItem:not(.mainDeleteBtn)").toggleClass("hidden",!t)}},_setToolbarVisibility:function(){this.element.find(".toolbarhover").toggleClass("hide",this.element.find("#addExpenseItem").hasClass("hide")&&this.element.find(".buttonMore").hasClass("hide"))},toggleEnable:function(n,t){switch(n){case"add":this.element.find("#addExpenseItem").toggleClass("disabled",!t);break;case"delete":this.element.find(".deleteItem:not(.mainDeleteBtn)").toggleClass("disabled",!t)}},createItem:function(t,q,r,u,f,e){var o=this;raiseEvent(o.element.attr("id"),"Control","Item Adding");var g=t.Title,nt=t.TitleTooltip,ot=t.Description,st=t.Detail,v=t.Property1,y=t.Property2,ht=t.ID,a=t.Image,tt=t.ShowIndicatorsBar,ct=t.Indicator1Classname,lt=t.Indicator2Classname,at=t.Indicator3Classname,qt=t.Indicator1Visible,rt=t.Indicator2Visible,ut=t.Indicator3Visible,vt=t.DescriptionVisible,yt=t.DetailVisible,pt=t.Property1Visible,wt=t.Property2Visible,ft=t.ImageValue,bt=t.ImagePropertyType,fq=t.ImageClickable,p=t.Toggle,kt=t.ImageVisible,h=document.createElement("div");n(h).addClass("genericitem hidden");n(h).data().expenseItemID=r;n(h).addClass(f);var s=document.createElement("div");n(s).addClass("itemwrapper");var et=g,c={};checkExistsNotEmpty(t.TitleFormat)&&(c={formatXmlString:t.TitleFormat,value:g,formattingError:!1},et=SCCultureHelper.Current().applyFormatToControlValue(c));var w=ot;checkExistsNotEmpty(t.DescriptionFormat)&&(c={formatXmlString:t.DescriptionFormat,value:w,formattingError:!1},w=SCCultureHelper.Current().applyFormatToControlValue(c));var b=st;checkExistsNotEmpty(t.DetailFormat)&&(c={formatXmlString:t.DetailFormat,value:b,formattingError:!1},b=SCCultureHelper.Current().applyFormatToControlValue(c));var k=v;checkExistsNotEmpty(t.Property1Format)&&(t.Property1Format.toUpperCase()==="FRIENDLYDATE"?k=ControlPackCultureHelper.formatDateAsFriendly(v):(c={formatXmlString:t.Property1Format,value:v,formattingError:!1},k=SCCultureHelper.Current().applyFormatToControlValue(c)));var d=y;checkExistsNotEmpty(t.Property2Format)&&(t.Property2Format.toUpperCase()==="FRIENDLYDATE"?d=ControlPackCultureHelper.formatDateAsFriendly(y):(c={formatXmlString:t.Property2Format,value:y,formattingError:!1},d=SCCultureHelper.Current().applyFormatToControlValue(c)));this.createItemStructure(s,et,w,b,k,d,"","","",tt,ht);n(h).append(s);var l=n(s).find(".PART_ImageDiv");if(bt==="Classname"&&(checkExistsNotEmpty(a)?n(l).addClass(a):(n(l).addClass(ft),a=ft)),checkExistsNotEmpty(t.ImageToolTip)&&n(l).attr("title",t.ImageToolTip),checkExistsNotEmpty(p)&&p==="Show"&&(n(l).addClass("toggleon"),checkExistsNotEmpty(t.ImageToggleToolTip)&&n(l).attr("title",t.ImageToggleToolTip)),checkExistsNotEmpty(nt)){var dt=n(s).find(".PART_TitleDiv");dt.attr("title",nt)}vt==="Hide"&&(n(s).find(".PART_PropertiesTitleProperty1TableRow .PART_DescriptionDiv,.PART_PropertiesTitleProperty1TableRow .PART_TitleDiv").addClass("hide"),n(s).find(".PART_TitlteDescriptionDynamicLeft").removeClass("hide"),n(s).find(".PART_TitleDescriptionDynamicLeftTableRow .PART_DescriptionDiv").addClass("hide"));yt==="Hide"&&n(s).find(".PART_TitleDetailDynamicLeftTableRow .PART_DetailDiv").addClass("hide");pt==="Hide"&&(n(s).find(".PART_PropertiesTitleProperty1TableRow .PART_Property1Div,.PART_PropertiesTitleProperty1TableRow .PART_Property2Div").addClass("hide"),n(s).find(".PART_Property1Property2DynamicRight").removeClass("hide"),n(s).find(".PART_Property1Property2DynamicRightTableRow .PART_Property1Div").addClass("hide"));wt==="Hide"&&(n(s).find(".PART_PropertiesTitleProperty1TableRow .PART_Property1Div,.PART_PropertiesTitleProperty1TableRow .PART_Property2Div").addClass("hide"),n(s).find(".PART_Property1Property2DynamicRight").removeClass("hide"),n(s).find(".PART_Property1Property2DynamicRightTableRow .PART_Property2Div").addClass("hide"));n(s).find(".PART_Indicator1Div").addClass(ct);n(s).find(".PART_Indicator2Div").addClass(lt);n(s).find(".PART_Indicator3Div").addClass(at);qt==="Hide"&&n(s).find(".PART_Indicator1Div").addClass("hide");rt==="Hide"&&n(s).find(".PART_Indicator2Div").addClass("hide");ut==="Hide"&&n(s).find(".PART_Indicator3Div").addClass("hide");var gt=n(s).find(".PART_IndicatorsTableMain");if((qt==="Show"||rt==="Show"||ut==="Show")&&tt==="Show"){gt.removeClass("hide");var nq=n(s).find(".PART_Property1Property2DynamicRight"),tq=n(s).find(".PART_Property2Div"),qq=n(s).find(".PART_Property1Div");nq.addClass("hide");tq.addClass("hide");qq.addClass("hide")}kt==="Hide"&&n(s).find(".PART_ImageCell").addClass("hide");checkExistsNotEmpty(a)||n(s).find(".PART_ImageCell").addClass("hide");n(s).find(".PART_ImageDiv").data().expenseItem=r;n(s).find(".PART_ImageDiv").data().toggle=p;n(s).find(".PART_ImageDiv").data().toggletooltip=t.ImageToggleToolTip;n(s).find(".PART_ImageDiv").data().tooltip=t.ImageToolTip;n(s).find(".PART_ImageDiv").on("click",function(){var t=o.options.itemsDictionary[n(this).data().expenseItem];o.setSelectedItemProperties(t);checkExistsNotEmpty(n(this).data().toggle)&&(n(this).data().toggle==="Show"?(n(this).data().toggle="Hide",n(this).removeClass("toggleon"),checkExistsNotEmpty(n(this).data().tooltip)&&n(this).attr("title",n(this).data().tooltip),o.options.toggled=!1):(n(this).data().toggle="Show",n(this).addClass("toggleon"),checkExistsNotEmpty(n(this).data().toggletooltip)&&n(this).attr("title",n(this).data().toggletooltip),o.options.toggled=!0));t.ImageClickable&&(o.options.itemId=t.ID,raiseEvent(o.element.attr("id"),"Control","Image Clicked"))});n(s).find(".PART_Indicator1Div").on("click",function(t){t.stopPropagation();n(this).closest(".genericitem").find(".PART_GenericExpenseGridItemMain").trigger("click");o.options.selectedIndicator="1";raiseEvent(o.element.attr("id"),"Control","Indicator Clicked");raiseEvent(o.element.attr("id"),"Control","Indicator 1 Clicked")});n(s).find(".PART_Indicator2Div").on("click",function(t){t.stopPropagation();n(this).closest(".genericitem").find(".PART_GenericExpenseGridItemMain").trigger("click");o.options.selectedIndicator="2";raiseEvent(o.element.attr("id"),"Control","Indicator Clicked");raiseEvent(o.element.attr("id"),"Control","Indicator 2 Clicked")});n(s).find(".PART_Indicator3Div").on("click",function(t){t.stopPropagation();n(this).closest(".genericitem").find(".PART_GenericExpenseGridItemMain").trigger("click");o.options.selectedIndicator="3";raiseEvent(o.element.attr("id"),"Control","Indicator Clicked");raiseEvent(o.element.attr("id"),"Control","Indicator 3 Clicked")});n(s).find(".PART_ClickTitle").on("click",function(t){t.stopPropagation();n(this).closest(".genericitem").find(".PART_GenericExpenseGridItemMain").trigger("click");raiseEvent(o.element.attr("id"),"Control","Title Clicked")});n(s).find(".PART_ClickDescription").on("click",function(t){t.stopPropagation();n(this).closest(".genericitem").find(".PART_GenericExpenseGridItemMain").trigger("click");raiseEvent(o.element.attr("id"),"Control","Description Clicked")});n(s).find(".PART_ClickDetail").on("click",function(t){t.stopPropagation();n(this).closest(".genericitem").find(".PART_GenericExpenseGridItemMain").trigger("click");raiseEvent(o.element.attr("id"),"Control","Detail Clicked")});n(s).find(".PART_ClickProperty1").on("click",function(t){t.stopPropagation();n(this).closest(".genericitem").find(".PART_GenericExpenseGridItemMain").trigger("click");raiseEvent(o.element.attr("id"),"Control","Property 1 Clicked")});n(s).find(".PART_ClickProperty2").on("click",function(t){t.stopPropagation();n(this).closest(".genericitem").find(".PART_GenericExpenseGridItemMain").trigger("click");raiseEvent(o.element.attr("id"),"Control","Property 2 Clicked")});if(t.element=h,t.imageElement=l,this.options.itemsDictionary[r]=t,!checkExists(e)||e){q===u?o.element.find("."+q).prepend(h):n(this.options.itemsDictionary[q].element).after(h);n(h).fadeIn("slow",function(){n(this).removeClass("hidden")});raiseEvent(o.element.attr("id"),"Control","Item Added");n(h).find(".PART_ClickArea").on("click",function(t){n(this).closest(".genericitem").find(".PART_GenericExpenseGridItemMain").trigger("click");t.preventDefault();t.stopPropagation()});n(h).on("click",function(){o.element.find(".genericitem").removeClass("selected");o.element.find(".innerItem").removeClass("selected");n(this).addClass("selected");var t=o.options.itemsDictionary[n(this).data().expenseItemID];o.setSelectedItemProperties(t);raiseEvent(o.element[0].getAttribute("id"),"Control","Item Selected")});n(h).find(".PART_GenericExpenseGridItemMain").on("click",function(t,q){var r=o.options.itemsDictionary[n(this).closest(".genericitem").data().expenseItemID];if(o.options.property1=r.Property1,o.options.property2=r.Property2,o.options.title=r.Title,o.options.description=r.Description,o.options.detail=r.Detail,o.options.itemId=r.ID,checkExists(q)){if(q.cancel)return}else raiseEvent(o.element[0].getAttribute("id"),"Control","OnClick"),o.element.find(".genericitem").removeClass("selected"),o.element.find(".innerItem").removeClass("selected"),n(this).closest(".genericitem").addClass("selected")});n(h).on("blur",function(){o.element.find(".genericitem").removeClass("selected");o.element.find(".innerItem").removeClass("selected")});var rq=n("."+u).find(".watermark");n(rq).fadeOut("fast",function(){n(this).remove()});var uq=o.element.find(".lastItem");uq.removeClass("lastItem");this.element.find(".genericitem").last().addClass("lastItem")}return r},loadImages:function(){var r=this,t=JSON.parse(this.options.jSONConfig),u=t.SmartObject,o=t.SmartObjectMethod;checkExistsNotEmpty(u)||(u=t.AssociationSO);checkExistsNotEmpty(o)||(o=t.AssociationMethod);var q=t.ImageProperty,s=t.PrimaryKeyField,f=null;if(checkExistsNotEmpty(q)){var e=q;if(typeof e=="object"&&(q=q,e=q.PropertyName,f=q.PropertyType),checkExistsNotEmpty(f)&&f==="Classname")return;n.ajax({method:"POST",contentType:"application/json; charset=utf-8",url:"SmartObjectImageStore.handler",dataType:"json",data:JSON.stringify({smartObjectId:u,smartObjectMethod:r.options.associationMethod,idProperty:s,nameProperty:"",imageProperty:e,methodName:"getImagesById",smartObjectParams:{}})}).fail(function(n){popupManager.showError(n.responseText)}).done(function(t){for(var a in t){var u=t[a],e=n("<img/>");e.data().id=u.Id;e.data().path=u.Path;var h="Item"+u.Id;if(r.options.itemsDictionary.hasOwnProperty(h)){var f=r.options.itemsDictionary[h],q=f.imageElement,c="",o=u.Path.split("Image_");if(o.length>0&&(c=o[o.length-1]),checkExistsNotEmpty(q.data().path)&&(q.data().path===c||f.ImageType==="Classname"))checkExistsNotEmpty(f.Image)?q.addClass(f.Image):q.addClass(f.ImageValue);else{var l="",s=u.Path.split("Image_");s.length>0&&(l=s[s.length-1]);q.data().path=l;q[0].style.backgroundImage="";q.append('<div class="ajaxLoader"><\/div>');n(e).attr("src",u.Path).on("load",function(){var t=r.options.itemsDictionary["Item"+n(this).data().id].imageElement;t.hasClass("loaded")||(t.css("background-image","url('"+n(this).data().path+"')"),t.find(".ajaxLoader").remove(),n(this).remove())})}}}})}},createItemStructure:function(t,q,r,u,f,e,o,s,h,c){var l=this,a=SFCTemplateManager.getTemplate(l.options.templateName,SFCTemplateBehaviour.Default,this);a.setToken("Title",ControlPackBase.escapeSpecialChar(q));a.setToken("Description",ControlPackBase.escapeSpecialChar(r));a.setToken("Detail",ControlPackBase.escapeSpecialChar(u));a.setToken("Property1",ControlPackBase.escapeSpecialChar(f));a.setToken("Property2",ControlPackBase.escapeSpecialChar(e));a.setToken("Indicator1",ControlPackBase.escapeSpecialChar(o));a.setToken("Indicator2",ControlPackBase.escapeSpecialChar(s));a.setToken("Indicator3",ControlPackBase.escapeSpecialChar(h));a.setToken("OpenButtonText",ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Properties.GenericList.OpenButtonText);var y=a.content;n(t).append(y);var p=n(t).find(".PART_IndicatorsTableMain"),w=n(t).find(".PART_Property1Property2DynamicRight"),b=n(t).find(".PART_Property2Div"),k=n(t).find(".PART_Property1Div");c==="Show"?(w.addClass("hide"),k.addClass("hide"),b.addClass("hide")):p.addClass("hide");var v=n('<a href="javascript:;" tabindex="0" class="toolbar-button generic deleteItem hidden" id="deleteBtn" title="Delete Item"><span class="button-l"><\/span><span class="button-c"><span class="button-icon"><\/span><\/span><span class="button-r"><\/span><\/a>');this.options.showDeleteButton&&v.removeClass("hidden");n(t).find(".PART_GenericExpenseGridItemMainRow").append(v);v.on("click",function(t){var q=l.options.itemsDictionary[n(this).closest(".genericitem").data().expenseItemID];l.options.property1=q.Property1;l.options.property2=q.Property2;l.options.title=q.Title;l.options.description=q.Description;l.options.detail=q.Detail;l.options.itemId=q.ID;var r=this;n(r).addClass("selectedDelete");n(this).closest(".genericitem").addClass("deleted");var u=function(){l.options.enableDeleteButton&&(raiseEvent(l.element.attr("id"),"Control","Delete Item"),n(r).trigger("blur"),n(r).removeClass("selectedDelete"),n(r).addClass("hidden"),l.scrollbar.recalculate())};u();t.stopPropagation()})},refreshView:function(t){var r=this,u=0,e=r.options.config.MaxVisibleItems;for(var q in this.options.itemsDictionary)checkExists(t[q])||(n(this.options.itemsDictionary[q].element).addClass("removeItem"),delete this.options.itemsDictionary[q]);var o=0,h=0,f="itemsbody";for(var q in t){var s="evenRow";o===0?(s="evenRow",o++):(s="oddRow",o=0);var c=t[q];checkExists(this.options.itemsDictionary[q])?(this.checkIntegrity(t,q,f),f=q):f=this.createItem(c,f,q,"itemsbody",s,e===0||e>h||!checkExists(e));h+=1}if(this.element.find(".removeItem").fadeOut("slow",function(){var t=r.element.find(".lastItem");t.removeClass("lastItem");n(this).remove();r.element.find(".genericitem").last().addClass("lastItem");r.setStyles();raiseEvent(r.element[0].getAttribute("id"),"Control","Item Removed")}),u=this.countItems(),u==0&&this.element.find(".watermark").length===0)this.addWatermark();else if(u>0){var l=this.element.find(".itemsbody").find(".watermark"),a=this.element.find(".genericitemsfooter");n(l).fadeOut("fast",function(){n(this).remove();r.setStyles()});this.options.showAddButton&&this.options.showFooter&&a.fadeIn("fast",function(){n(this).removeClass("hide");r.setStyles()})}this.element.toggleClass("empty",u==0);this.scrollbar.recalculate();this.loadImages()},clearList:function(){this.options.pageItems=0;this.refreshView({})},refreshMethod:function(){var n=this,q=n.options.pageSize,t=n.options.brokerPackage,u=n,r=q;t[0].metadata.pagenumber=1..toString();t[0].metadata.pagesize=r.toString();n.options.brokerPackage=t;n.options.pageItems=0;n.refreshList()},refreshList:function(){var n=this;sendPacket(JSON.parse(JSON.stringify(n.options.brokerPackage)),null)},refreshListSelectLastItem:function(){var n=this,t=function(){n.element.find(".genericitem").promise().done(function(){var t=n.element.find(".lastItem");t.length>0&&t.trigger("click")})},q=sendPacket(JSON.parse(JSON.stringify(this.options.brokerPackage)),null);q.then(t,null)},setItems:function(){raiseEvent(this.element[0].getAttribute("id"),"Control","Initializing");var u={},n=this.options.config;checkExistsNotEmpty(n.SmartObject)||(n.SmartObject=n.AssociationSO);var q=this.options.jsonData.collection,c=this.options.jsonData.HasMorePages,f=this.element.find(".buttonMore");q.length>0&&c==="true"?f.removeClass("hide"):f.addClass("hide");this._setToolbarVisibility();for(var r=0;r<q.length;r++){var e=q[r].fields,o={};for(var s in e)o[s]=e[s].value;var h=this.GetNormalizedItemObject(n,o);u["Item"+h.ID]=h}this.refreshView(u);raiseEvent(this.element[0].getAttribute("id"),"Control","OnChange");this.options.pageItems=q.length;this.options.previous.jsonData=this.options.jsonData;this.element.removeClass("loading");this.element.find(".toolbarhover").addClass("loaded");this.setStyles();this.processMethodQueue();t._setProperty(this.element,"settingItems",!1);raiseEvent(this.element[0].getAttribute("id"),"Control","OnSetItemsCompleted");raiseEvent(this.element[0].getAttribute("id"),"Control","Initialized");raiseEvent(this.element[0].getAttribute("id"),"Control","Populated");this.scrollbar?this.scrollbar.recalculate():this.scrollbar=SourceCode.Forms.Controls.Web.ControlPack.Utils.SetSimpleScrollbar(this.element.find(".scrollWrapperDiv")[0])},GetNormalizedItemObject:function(n,t){var qt=n.TitleProperty,s=n.DescriptionProperty,e=n.DetailProperty||"",rt=n.Property1,ut=n.Property2,hq=n.PrimaryKeyField,ft=n.ImageProperty,et=n.Indicator1,ot=n.Indicator2,st=n.Indicator3,ct="Show",lt="Show",at="Hide",vt="Show",yt="Show",pt="Hide",wt="Hide",bt="Hide",kt="Show",dt="",gt="File",nq=!0,o,u,f,r,h,c,l,tq,qq="",rq="";if(checkExistsNotEmpty(rt))try{u=rt;checkExistsNotEmpty(u.Visible)&&(vt=this.GetVisibility(u.Visible,t))}catch(vq){u=rt}if(checkExistsNotEmpty(ut))try{f=ut;checkExistsNotEmpty(f.Visible)&&(yt=this.GetVisibility(f.Visible,t))}catch(vq){f=ut}if(checkExistsNotEmpty(qt))try{o=qt;checkExistsNotEmpty(o.Visible)&&(ct=this.GetVisibility(o.Visible,t))}catch(vq){o=qt}if(checkExistsNotEmpty(s))try{checkExistsNotEmpty(s.Visible)&&(lt=this.GetVisibility(s.Visible,t))}catch(vq){}if(checkExistsNotEmpty(e))try{checkExistsNotEmpty(e.Visible)&&(at=this.GetVisibility(e.Visible,t))}catch(vq){}if(checkExistsNotEmpty(et))try{h=et;checkExistsNotEmpty(h.Visible)&&(pt=this.GetVisibility(h.Visible,t))}catch(vq){h=et}if(checkExistsNotEmpty(ot))try{c=ot;checkExistsNotEmpty(c.Visible)&&(wt=this.GetVisibility(c.Visible,t))}catch(vq){c=ot}if(checkExistsNotEmpty(st))try{l=st;checkExistsNotEmpty(l.Visible)&&(bt=this.GetVisibility(l.Visible,t))}catch(vq){l=st}if(checkExistsNotEmpty(ft))try{r=ft;checkExistsNotEmpty(r.Visible)&&(kt=this.GetVisibility(r.Visible,t));checkExistsNotEmpty(r.Classname)&&(dt=r.Classname);checkExistsNotEmpty(r.PropertyType)&&(gt=r.PropertyType);checkExistsNotEmpty(r.Clickable)&&(nq=this.base._booleanConverter(r.Clickable));checkExistsNotEmpty(r.Toggle)&&(tq=this.GetVisibility(r.Toggle,t))}catch(vq){r=ft}var k="",a=o;if(typeof o=="object"&&(a=o.PropertyName),typeof a=="object"){var b=this.GetVisibility(a.Condition,t);k=b==="Show"?a.TrueValue:a.FalseValue}else k=t[a];if(checkExists(o.Template)&&(k=this.GetTemplateJSON(o.Template,t)),checkExists(n.TitleProperty.Tooltip))if(checkExists(n.TitleProperty.Tooltip.Template)){var cq=n.TitleProperty.Tooltip.Template;titleTooltip=this.GetTemplateJSON(cq,t)}else titleTooltip=n.TitleProperty.Tooltip.Text;else titleTooltip="";var d="",v=s;if(typeof s=="object"&&(v=s.PropertyName),typeof v=="object"){var b=this.GetVisibility(v.Condition,t);d=b==="Show"?v.TrueValue:v.FalseValue}else d=t[v];checkExists(s.Template)&&(d=this.GetTemplateJSON(s.Template,t));var g="",y=e;if(typeof e=="object"&&(y=e.PropertyName),typeof y=="object"){var b=this.GetVisibility(y.Condition,t);g=b==="Show"?y.TrueValue:y.FalseValue}else g=t[y];checkExists(e.Template)&&(g=this.GetTemplateJSON(e.Template,t));var p=u,nt="";if(typeof u=="object"&&(p=u.PropertyName),typeof p=="object"){var b=this.GetVisibility(p.Condition,t);nt=b==="Show"?p.TrueValue:p.FalseValue}else nt=t[p];checkExists(u)&&checkExists(u.Template)&&(nt=this.GetTemplateJSON(u.Template,t));var w=f,tt="";if(typeof f=="object"&&(w=f.PropertyName),typeof w=="object"){var b=this.GetVisibility(w.Condition,t);tt=b==="Show"?w.TrueValue:w.FalseValue}else tt=t[w];checkExists(f)&&checkExists(f.Template)&&(tt=this.GetTemplateJSON(f.Template,t));var uq=r,fq="File";typeof r=="object"&&(uq=r.PropertyName,fq=r.PropertyType,qq=this.GetTemplateJSON(r.Tooltip,t),rq=this.GetTemplateJSON(r.ToggleTooltip,t));var lq=t[uq],aq=t[hq],ht=n.ShowIndicatorsBar,eq="",oq="",sq="";checkExistsNotEmpty(n.ShowIndicatorsBar)?(ht=this.GetVisibility(n.ShowIndicatorsBar,t),checkExists(h)&&(eq=h.Classname),checkExists(c)&&(oq=c.Classname),checkExists(l)&&(sq=l.Classname)):ht=!1;var q={};return q.TitleFormat="",q.DescriptionFormat="",q.DetailFormat="",q.Property1Format="",q.Property2Format="",checkExistsNotEmpty(o)&&checkExistsNotEmpty(o.format)&&typeof o.format=="string"&&(q.TitleFormat=o.format),checkExistsNotEmpty(s)&&checkExistsNotEmpty(s.format)&&typeof e.format=="string"&&(q.DescriptionFormat=s.format),checkExistsNotEmpty(e)&&checkExistsNotEmpty(e.format)&&typeof e.format=="string"&&(q.DetailFormat=e.format),checkExistsNotEmpty(u)&&checkExistsNotEmpty(u.format)&&typeof u.format=="string"&&(q.Property1Format=u.format),checkExistsNotEmpty(f)&&checkExistsNotEmpty(f.format)&&typeof f.format=="string"&&(q.Property2Format=f.format),q.Title=k,q.TitleTooltip=titleTooltip,q.Description=d,q.Detail=g,q.Property1=nt,q.Property2=tt,q.ID=aq,q.Indicator1Classname=eq,q.Indicator2Classname=oq,q.Indicator3Classname=sq,q.Indicator1Visible=pt,q.Indicator2Visible=wt,q.Indicator3Visible=bt,q.Image=lq,q.ImageType=fq,q.ShowIndicatorsBar=ht,q.ImageVisible=kt,q.ImageToggle="Hide",q.TitleVisible=ct,q.DescriptionVisible=lt,q.DetailVisible=at,q.Property1Visible=vt,q.Property2Visible=yt,q.ImageValue=dt,q.ImagePropertyType=gt,q.ImageClickable=nq,q.SMOValues=t,q.Toggle=tq,q.ImageToggleToolTip=rq,q.ImageToolTip=qq,q},UpdateItemFromJSON:function(n){var t=this.options.itemsDictionary["Item"+Id],q=JSON.parse(n),r=this.GetNormalizedItemObject(q,t.SMOValues);this.checkIntegrity(this.options.itemsDictionary,"Item"+Id,null)},GetTemplateJSON:function(n,t){if(!checkExistsNotEmpty(n))return"";if(typeof n=="object"){for(var u in n)if(u.toUpperCase()==="DEFAULT"||SourceCode.Forms.Controls.Web.ControlPack.Utils.EvaluateClauses(t,n[u].Condition))return this.GetTemplateJSON(n[u].Template,t);if(checkExists(n["default"]))return this.GetTemplateJSON(n["default"].Template,t)}else{var q=[];n.replace(/\{(.*?)\}/g,function(n,t){q.push(t)});for(var f=n,r=0;r<q.length;r++){var e="{"+q[r]+"}";f=f.replace(new RegExp(e,"g"),t[q[r]])}return f}},GetVisibility:function(n,t){return typeof n!="object"?n.indexOf("Show")>-1?"Show":"Hide":SourceCode.Forms.Controls.Web.ControlPack.Utils.EvaluateClauses(t,n)?"Show":"Hide"},processMethodQueue:function(){for(var n=0;n<this.methodQueue.length;n++)return this[methodQueue[n]].apply(this,methodQueue[n].parameters)},_optionNameTransformer:function(n){n=n.toLowerCase();switch(n){case"controlname":n="controlName";break;case"isenabled":n="isEnabled";break;case"isparentenabled":n="isParentEnabled";break;case"interval":n="interval";break;case"jsondata":n="jsonData";break;case"settingitems":n="settingItems";break;case"brokerpackage":n="brokerPackage";break;case"showaddbutton":n="showAddButton";break;case"showdeletebutton":n="showDeleteButton";break;case"enableaddbutton":n="enableAddButton";break;case"enabledeletebutton":n="enableDeleteButton";break;case"expenseitems":n="expenseItems";break;case"showtotal":n="showTotal";break;case"jsonconfig":n="jSONConfig";break;case"associatedjoinproperty":n="associatedJoinProperty";break;case"associationmethod":n="associationMethod";break;case"itemid":n="itemId";break;case"genericitem":n="genericItem";break;case"selectedindicator":n="selectedIndicator";break;case"servercontroltype":n="serverControlType";break;case"showfooter":n="showFooter";break;default:n=this.base._optionNameTransformer(n)}return n},_optionValueConverter:function(n,t){n=n.toLowerCase();switch(n){case"isenabled":case"designtime":case"preview":case"runtime":case"enabledeletebutton":case"enableaddbutton":case"showaddbutton":case"showdeletebutton":case"toggled":case"showfooter":t=this.base._booleanConverter(t);break;default:t=this.base._optionValueConverter(n,t)}return t},applyChanges:function(){this.options.enableAddButton!==this.options.previous.enableAddButton&&this.toggleEnable("add",this.options.enableAddButton);this.options.enableDeleteButton!==this.options.previous.enableDeleteButton&&this.toggleEnable("delete",this.options.enableAddButton);this.options.showAddButton!==this.options.previous.showAddButton&&this.toggleShow("add",this.options.showAddButton);this.options.showDeleteButton!==this.options.previous.showDeleteButton&&this.toggleShow("delete",this.options.showDeleteButton);this.options.showFooter!==this.options.previous.showFooter&&this.toggleShow("footer",this.options.showFooter);this.options.isEnabled!==this.options.previous.isEnabled&&this.setEnabled();this.options.isParentEnabled!==this.options.previous.isParentEnabled&&this.setEnabled();this.options.style!==this.options.previous.style&&this.setStyles();this.options.width!==this.options.previous.width&&this.setStyles();this.options.height!==this.options.previous.height&&this.setStyles();this.options.jsonData!==this.options.previous.jsonData&&this.setItems();this.base.applyChanges.apply(this,arguments)}});n.sfc.SFCGenericList.prototype.base=n.sfc.baseWidget.prototype;n(document).ready(function(){for(var q=n(".SourceCode-Forms-Controls-Web-ControlPack-Genericlist"),t=0;t<q.length;t++)n(q[t]).SFCGenericList()})})(jQuery);
