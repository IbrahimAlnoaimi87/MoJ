/*!
 SourceCode.Forms.Controls.Web.ControlPack.Resources.Script.StackedContentFrame.js (Embedded resource)
*/
(typeof SourceCode=="undefined"||SourceCode===null)&&(SourceCode={});(typeof SourceCode.Forms=="undefined"||SourceCode.Forms===null)&&(SourceCode.Forms={});(typeof SourceCode.Forms.Controls=="undefined"||SourceCode.Forms.Controls===null)&&(SourceCode.Forms.Controls={});(typeof SourceCode.Forms.Controls.Web=="undefined"||SourceCode.Forms.Controls.Web===null)&&(SourceCode.Forms.Controls.Web={});(typeof SourceCode.Forms.Controls.Web.ControlPack=="undefined"||SourceCode.Forms.Controls.Web.ControlPack===null)&&(SourceCode.Forms.Controls.Web.ControlPack={});SourceCode.Forms.Controls.Web.ControlPack.StackedContentFrame=function(){this.messageQueue=[];this.url=null;this.loadingMessage=null;this.canBeDestroyed=null;this.load=null;this.id=null;this.initialized=!1;this.frameElement=null;this.isBlocked=!1};SourceCode.Forms.Controls.Web.ControlPack.StackedContentFrame.prototype={addToMessageQueue:function(n,t){this.messageQueue.push({message:n,origin:t});this.flushQueue()},flushQueue:function(){if(this.initialized&&checkExists(this.frameElement)&&checkExists(this.frameElement[0])&&checkExists(this.frameElement[0].contentWindow))while(this.messageQueue.length>0){var n=this.messageQueue.splice(0,1);this.frameElement[0].contentWindow.postMessage(n[0].message,n[0].origin)}}};
/*!
 SourceCode.Forms.Controls.Web.ControlPack.StackedContentBehavior.js (Embedded resource)
*/
(function(n){var t;SourceCode.Forms.Controls.Web.ControlPack.StackedContent=t=n.extend({},SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase,{scrollWidth:16,setText:function(q,r){q=n(q).find(".SFC");t._setProperty(q,"text",r)},setScrolling:function(q,r){q=n(q).find(".SFC");r&&t._setProperty(q,"scrolling",r)},setWatermark:function(q,r){q=n(q).find(".SFC");t._setProperty(q,"watermark",r)},setShowPreview:function(q,r){q=n(q).find(".SFC");t._setProperty(q,"showPreview",r)},setIsVisible:function(q,r){q=n(q).find(".SFC");var u=["true","yes","1"].contains(r);SourceCode.Forms.Controls.Base.ControlType.setVisible(q,u);t._setProperty(q,"isvisible",r)},setIsEnabled:function(q,r){q=n(q).find(".SFC");var u=["true","yes","1"].contains(r);SourceCoabde.Forms.Controls.Base.ControlType.setEnable(q,u);t._setProperty(q,"isenabled",r)},setStyles:function(q,r){if(q=n(q).find(".SFC"),checkExists(q)&&q.length>0&&(t._setProperty(q,"style",r),q.attr("id")==="StyleBuilderPreviewPanelContent")){q.find("iframe.content-control-iframe").off("load");var u=q.find(".SourceCode-Forms-Controls-Web-Content-Content");u[0].style.height="250px";u[0].style.width=""}},execute:function(q){var u=t._getInstance(q.CurrentControlId);instance=n("#"+q.CurrentControlId);var r=q.methodName;if(r)switch(r){case"RefreshPanel":case"SetPanelUrl":case"AddPanel":instance.SFCStackedContentControl("loadIframe",q);break;case"RemovePanel":case"RemoveAllHiddenPanels":case"ShowPanel":instance.SFCStackedContentControl("toggleIframe",q);break;case"CloseCurrentWindow":instance.SFCStackedContentControl("closeCurrentWindow");break;case"PassToChild":instance.SFCStackedContentControl("passToChild",q);break;case"FrameExists":return instance.SFCStackedContentControl("checkFrameExists",q)}},refresh:function(n){var r=t._getInstance(n.CurrentControlId),q=r.find("iframe.content-control-iframe");if(q.length>0){var u=q.attr("src");q.attr("src","about:blank");q.attr("src",u)}},getDefaultValue:function(n){getValue(n)},setValue:function(q){var r=n(t._getInstance(q.CurrentControlId)),f=r.SFCStackedContentControl("option","text"),u=q.Value;f!==u&&r.SFCStackedContentControl("option","text",u)},getProperty:function(q){var r=n(t._getInstance(q.CurrentControlId)),u=r.SFCStackedContentControl("option",q.property);return r!==u?u:null},setProperty:function(q){n(t._getInstance(q.CurrentControlId)).SFCStackedContentControl("option",q.property,q.Value)},ResizeWrappersToHeight:function(n,t,q,r){q[0].style.height=r;var u=q.outerHeight(!0)+"px";t.each(function(){this.style.height=u});n.length>0&&(n[0].style.height=n.is(":visible")?u:r)},setWidth:function(q,r){var u=n(q).find(".SFC");return SourceCode.Forms.Controls.Base.ControlType.setWidth(q,u,r,0),r.contains("%")?t._setProperty(u,"width","100%"):t._setProperty(u,"width",r),u.outerWidth(!0)},setHeight:function(q,r,u){q=n(q).find(".SFC");(typeof r=="undefined"||r==="")&&(r="375px");r=r.trim();var a=q.find(".resizewrapper :not(.controloverlay):not(.ui-resizable-handle)").first(),e=q.find(".resizewrapper"),v=q.find(".content-control-style-wrapper"),o="100px";if(u){var h=parseXML(u);o=h.selectSingleNode('//Properties/Property[Name/text()="Height"]/Value')}var f=q;if(r){r=parseFloat(r)+"px";q.length>0&&(q[0].style.height=r);e.each(function(){this.style.height="100%"});f[0].style.height=r;var c=f.outerHeight(!0);if(t.ResizeWrappersToHeight(q,e,f,c),(!checkExists(o)||o.text==="")&&q.is(":visible")){var l=q.hasClass("form-control");if(l){var s=q.data("panel");checkExists(s)&&(s.equalizeWidths(),s.equalizeHeights())}}}else t.ResizeWrappersToHeight(q,e,f,"auto");return SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase._getWidgetName(q),t._setProperty(q,"height",r),f.outerHeight(!0)},validate:function(){}});n.widget("sfc.SFCStackedContentControl",n.sfc.baseWidget,{options:{width:"100%",height:"",scrolling:"auto",watermark:"",text:"",showPreview:!1,designtime:!1,formControl:!1,preview:!1,style:SourceCode.Forms.Controls.Base.emptyStylesNodeParsed,isPercentWidth:!1,initialPanelID:"mainiframe",loadingMessage:"Loading",initialPanelDestroyable:!1,previous:{},maxFrames:10,value:"",showLoadingScreen:!1,showCancelButton:!1,showLoadingGraphic:!1,crossSiteMessage:"",crossSiteLearnUrl:"",iframeDictionary:{},iframeQueue:[]},iframeDictionary:null,iframeQueue:null,controlResources:null,defaultLoaderHTML:'<div style="display:table-row;"><div style="display:table-cell; vertical-align:middle;"><div class="loaderDiv"\t\t"><div class="loadMessage" style="margin-left: auto; margin-right: auto; width: 43px; padding-bottom: 19px; white-space: nowrap;\t\t">{0}<\/div><div class="progressElem"><div class="progressBar"><\/div><\/div><div style=" cursor:pointer;\t\tright: 0px; width:43px; margin-left:auto; margin-right:auto; padding-top: 19px;" class="cancelBtn">Cancel<\/div><\/div><\/div>\t\t',errorLoaderHTML:'<div class="loaderDiv" style="\t\twidth: 95px; position: absolute; top: 50%; left: 50%; margin-left: -37px;\t\t"><div class="loadMessage" style="margin-left: auto; margin-right: auto; width: 43px; padding-bottom: 19px; white-space: nowrap;\t\t">{0}<\/div>\t\t  <div style="\t\tposition: absolute;\t\tright: 0px; cursor:pointer;\t\t" class="retryBtn">Retry<\/div>\t  <\/div>',_optionValueConverter:function(n,t){n=n.toLowerCase();switch(n){case"isvisible":case"isparentvisible":case"isenabled":case"isparentenabled":case"showpreview":case"initialpaneldestroyable":case"showloadingscreen":case"showcancelbutton":case"showloadinggraphic":t=this.base._booleanConverter(t);break;case"style":t=this._stylesConverter(t);break;default:t=this.base._optionValueConverter(n,t)}return t},_optionNameTransformer:function(n){n=n.toLowerCase();switch(n){case"scrolling":n="scrolling";break;case"watermark":n="watermark";break;case"style":n="style";break;case"showpreview":n="showPreview";break;case"text":n="text";break;case"width":n="width";break;case"height":n="height";break;case"maxframes":n="maxFrames";break;case"tabindex":n="tabIndex";break;case"initialpaneldestroyable":n="initialPanelDestroyable";break;case"loadingmessage":n="loadingMessage";break;case"initialpanelid":n="initialPanelID";break;case"showloadingscreen":n="showLoadingScreen";break;case"showcancelbutton":n="showCancelButton";break;case"showloadinggraphic":n="showLoadingGraphic";break;case"crosssitemessage":n="crossSiteMessage";break;case"crosssitelearnurl":n="crossSiteLearnUrl";break;case"servercontroltype":n="serverControlType";break;default:n=this.base._optionNameTransformer(n)}return n},_create:function(){if(this.options.styleWrapper=this.element.find(".content-control-style-wrapper"),this.iframeDictionary=this.options.iframeDictionary,this.iframeQueue=this.options.iframeQueue,this.element.hasClass("designtime")&&(this.options.designtime=!0),this.element.parent().hasClass("form-control")&&(this.options.formControl=!0),this.element.hasClass("preview")&&(this.options.preview=!0),this.options.designtime){if(this.options.formControl){this.element.overlay();var t=this.element.parent().find(".k2-overlay")[0]}}else{var n=this.GetTabIndex();this.specifiedTabIndex=n;checkExists(n)&&(this.options.tabIndex=n)}this.base._create.apply(this,arguments);this.options.isEnabled&&this.options.isParentEnabled||(this.options.tabIndex=-1,this.applyChanges());this.element.hasClass("designtime")||this.element.hasClass("preview")||(this.initializeFrameDictionary(),this.initializeMessageSystem(),this.ControlResources=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Properties);this.element[0].setAttribute("propertytype","iframe");this.SetScrolling()},initializeFrameDictionary:function(){if(this.options.text!==""){var q=this,t=new SourceCode.Forms.Controls.Web.ControlPack.StackedContentFrame;t.id=this.options.initialPanelID;this.options.loadingMessage=ControlPackBase.escapeSpecialChar(this.options.loadingMessage);t.loadingMessage=this.options.loadingMessage;t.url=this.options.text;t.canBeDestroyed=this.options.initialPanelDestroyable;t.load=!0;t.initialized=!1;t.isBlocked=!1;this.element.find(".overlayLoader").removeClass("hide");this.element.find(".overlayLoader").addClass("enabled");this.element.find(".overlayLoader").html(n(this.defaultLoaderHTML.replace("{0}",t.loadingMessage)));this.iframeDictionary[this.options.initialPanelID]=t;this.iframeQueue.push(t);raiseEvent(this.element[0].getAttribute("id"),"Control","PanelLoading");this.element.find(".cancelBtn").off("click").on("click",function(){navigator.appName=="Microsoft Internet Explorer"?window.frames[0].document.execCommand("Stop"):window.frames[0].stop()});this.element.find("."+this.options.initialPanelID)[0].onload=function(){q.element.find(".overlayLoader").removeClass("enabled");q.element.find(".overlayLoader").addClass("hide");q.element.find(".message-panel").addClass("hide");raiseEvent(q.element[0].getAttribute("id"),"Control","PanelLoaded")}}},checkFrameExists:function(n){var t=n.methodParameters.frameid;return checkExists(this.iframeDictionary[t])},passToChild:function(n){var q=n.methodParameters.value,t=this.element.find(".content-control-iframe:not(.hide)"),u=checkExists(q)?q:this.options.value;if(checkExists(t)&&t.length>0){var r=this._getFrameObjectbyId(t[0].getAttribute("data-frame-id"));r?r.addToMessageQueue("DynamicData|"+u,"*"):SFLog({type:3,source:"StackedContent",category:"Control",message:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Properties.StackedContent.InitializeIframeNotFound})}},validateUrlScheme:function(n){var t="";try{var q=document.createElement("a");q.setAttribute("href",n);t=q.protocol.toLowerCase()}catch(u){return n}if(t!==""&&t!=="http:"&&t!=="https:"&&t!=="ftp:"&&t!=="mailto:"&&t!=="news:"){var r=location.protocol+"//";return r+n}return n},loadIframe:function(t){var l=!0,s=!0,c=!0,a=!1,r=t.methodParameters.id,f=this.validateUrlScheme(t.methodParameters.url),o=checkExists(t.methodParameters.loadingmessage)?t.methodParameters.loadingmessage:this.options.loadingMessage;l=checkExistsNotEmpty(t.methodParameters.canbedestroyed)?this.base._booleanConverter(t.methodParameters.canbedestroyed):!0;s=checkExistsNotEmpty(t.methodParameters.load)?this.base._booleanConverter(t.methodParameters.load):!0;c=checkExistsNotEmpty(t.methodParameters.show)?this.base._booleanConverter(t.methodParameters.show):!0;var p={iframeID:r,url:f,message:o,destructible:l,load:s,show:c,isBlocked:a},q=this;q.ToggleIframe(!0);var v=q.element.find(".message-panel");switch(t.methodName){case"AddPanel":if(checkExists(this.iframeDictionary[r])){var u=this.element.find('iframe[data-frame-id="'+r+'"]');if(this.element.find(".content-control-iframe").addClass("hide"),u.removeClass("hide"),v.addClass("hide").removeClass("enabled"),c?u.removeClass("hide"):u.addClass("hide"),f!==this.iframeDictionary[r].url){if(s){var u=this.element.find('iframe[data-frame-id="'+r+'"]');u[0].setAttribute("src",f);q.options.showLoadingScreen?(this.element.find(".overlayLoader").removeClass("hide"),this.element.find(".overlayLoader").addClass("enabled"),this.element.find(".overlayLoader").html(n(this.defaultLoaderHTML.replace("{0}",o))),q.options.showCancelButton?q.element.find(".overlayLoader").find(".cancelBtn").show():q.element.find(".overlayLoader").find(".cancelBtn").hide(),q.options.showLoadingGraphic?q.element.find(".overlayLoader").find(".progressElem").show():q.element.find(".overlayLoader").find(".progressElem").hide()):q.element.find(".overlayLoader").addClass("hide");raiseEvent(this.element[0].getAttribute("id"),"Control","PanelLoading")}this.iframeDictionary[r].url=f}else raiseEvent(q.element[0].getAttribute("id"),"Control","PanelLoaded");o!==this.iframeDictionary[r].loadingMessage&&(this.iframeDictionary[r].loadingMessage=o)}else{var u=new SourceCode.Forms.Controls.Web.ControlPack.StackedContentFrame;if(u.url=f,u.loadingMessage=o,u.canBeDestroyed=l,u.load=s,u.id=r,u.initialized=!1,u.isBlocked=a,v.addClass("hide").removeClass("enabled"),this.addIframe(u,r)){var y=this.element.find("."+this.options.initialPanelID),e=y.clone();e.removeClass(this.options.initialPanelID);e.attr("data-frame-id",r);e.data().iframeid=r;s&&(e[0].setAttribute("src",f),q.options.showLoadingScreen?(q.element.find(".overlayLoader").removeClass("hide"),q.element.find(".overlayLoader").addClass("enabled"),q.element.find(".overlayLoader").html(n(q.defaultLoaderHTML.replace("{0}",u.loadingMessage))),q.options.showCancelButton?q.element.find(".overlayLoader").find(".cancelBtn").show():q.element.find(".overlayLoader").find(".cancelBtn").hide(),q.options.showLoadingGraphic?q.element.find(".overlayLoader").find(".progressElem").show():q.element.find(".overlayLoader").find(".progressElem").hide()):q.element.find(".overlayLoader").addClass("hide"),raiseEvent(q.element[0].getAttribute("id"),"Control","PanelLoading"),e[0].onload=function(){q.options.showLoadingScreen&&q.element.find(".overlayLoader").addClass("hide").removeClass("enabled");raiseEvent(q.element[0].getAttribute("id"),"Control","PanelLoaded")},e[0].setAttribute("src",f));e.insertBefore(this.element.find(".overlayLoader"));this.element.find(".content-control-iframe").addClass("hide");this.element.find('iframe[data-frame-id="'+r+'"]').removeClass("hide");c?this.element.find('iframe[data-frame-id="'+r+'"]').removeClass("hide"):this.element.find('iframe[data-frame-id="'+r+'"]').addClass("hide");u.frameElement=e}}break;case"RefreshPanel":var h=this.iframeDictionary[r];if(checkExists(h)){var u=this.element.find('iframe[data-frame-id="'+r+'"]');q.options.showLoadingScreen?(this.element.find(".overlayLoader").html(n(this.defaultLoaderHTML.replace("{0}",o))),q.options.showCancelButton?q.element.find(".overlayLoader").find(".cancelBtn").show():q.element.find(".overlayLoader").find(".cancelBtn").hide(),q.options.showLoadingGraphic?q.element.find(".overlayLoader").find(".progressElem").show():q.element.find(".overlayLoader").find(".progressElem").hide()):q.element.find(".overlayLoader").addClass("hide");u[0].setAttribute("src",h.url)}break;case"SetPanelURL":var h=this.iframeDictionary[r];checkExists(h)&&(h.url=f,h.loadingMessage=o)}},checkFrameDomain:function(n){var t=document.createElement("a");t.href=n;targetDomain=t.hostname;var q=document.domain;return targetDomain===q?!0:!1},checkBlockedFrameExists:function(n){var t=!1;for(var r in this.iframeDictionary){var q=this.iframeDictionary[r];if(q.url===n.url&&q.isBlocked===!0){t=!0;break}}return t},checkFrameContent:function(t){var q=0;try{q=n(t).contents().find("body").contents().length}catch(r){}return q==0?!1:!0},setMessagePanel:function(t,q,r,u){var f=this,e=n(".PART-message-panel-body");e.text(u);q.addClass("enabled").removeClass("hide");t.setAttribute("isBlocked",!0);f.iframeDictionary[r.iframeID].isBlocked=!0;f.element.find("a.message-panel-button").attr("href",r.url)},initializeMessageSystem:function(){var n=this,t=window.addEventListener?"addEventListener":"attachEvent",q=window[t],r=t=="attachEvent"?"onmessage":"message";q(r,function(t){var q=n._extractMessageDetails(t.data);if(!checkExists(q)){SFLog({type:3,source:"StackedContent",category:"Control",message:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Properties.StackedContent.InvalidMessage.format(t.data)});return}switch(q.key){case"closeCurrentWindow":n.parentCloseCurrentWindow();break;case"DynamicData":n._receiveDataMessage.call(n,q);break;case"FCInitialized":n._initializeIframe.call(n,q)}},!1)},closeCurrentWindow:function(){parent.postMessage("closeCurrentWindow","*")},parentCloseCurrentWindow:function(){var t=this.element.find(".content-control-iframe:not(.hide)"),n={};n.methodParameters={};n.methodParameters.id=t.data().iframeid;n.methodName="RemovePanel";this.toggleIframe(n)},toggleIframe:function(n){var t=n.methodParameters.id;switch(n.methodName){case"RemovePanel":if(checkExists(this.iframeDictionary[t])){var r=null;this.element.find('iframe[data-frame-id="'+t+'"]').remove();delete this.iframeDictionary[t];for(var q=0;q<this.iframeQueue.length;q++)if(t===this.iframeQueue[q].id){r=this.iframeQueue[q-1];this.iframeQueue.splice(q,1);break}this.element.find(".content-control-iframe").addClass("hide");this.element.find('iframe[data-frame-id="'+r.id+'"]').removeClass("hide")}else{for(var t in this.iframeDictionary)this.element.find('iframe[data-frame-id="'+t+'"]').remove(),delete this.iframeDictionary[t];this.iframeQueue=[]}break;case"RemoveAllHiddenPanels":var u;for(var t in this.iframeDictionary){var f=this.element.find('iframe[data-frame-id="'+t+'"]');f.hasClass("hide")?(f.remove(),delete this.iframeDictionary[t]):u=t}for(var e;this.iframeQueue.length>0;)this.iframeQueue[0].id===u&&(e=this.iframeQueue[0]),this.iframeQueue.splice(0,1);this.iframeQueue.push(e);break;case"ShowPanel":checkExists(this.iframeDictionary[t])&&(this.element.find(".overlayLoader").removeClass("enabled"),this.element.find(".overlayLoader").addClass("hide"),this.element.find(".content-control-iframe").addClass("hide"),this.element.find('iframe[data-frame-id="'+t+'"]').removeClass("hide"),raiseEvent(this.element[0].getAttribute("id"),"Control","PanelShown"))}},addIframe:function(n,t){if(this.iframeQueue.length<this.options.maxFrames)return this.iframeQueue.push(n),this.iframeDictionary[t]=n,!0;for(var r=null,q=0;q<this.iframeQueue.length;q++)if(this.iframeQueue[q].canBeDestroyed){r=this.iframeQueue[q];break}if(checkExists(r)){this.element.find('iframe[data-frame-id="'+r.id+'"]').remove();delete this.iframeDictionary[r.id];for(var q=0;q<this.iframeQueue.length;q++)r.id===this.iframeQueue[q].id&&this.iframeQueue.splice(q,1);return this.iframeQueue.push(n),this.iframeDictionary[t]=n,!0}return!1},focus:function(){this.element.find(".content-control-iframe").trigger("focus")},applyChanges:function(){var n=this.options.text.length>0;if(this.options.style!==this.options.previous.style&&this._checkStyleChanged()&&this.setStyles(),this.options.width!==this.options.previous.width&&this.SetWidth(),this.options.height!==this.options.previous.height&&this.SetHeight(),this.options.tabIndex!==this.options.previous.tabIndex)if(n){var t=this.element.find(".content-control-iframe");t.length>0&&t[0].setAttribute("tabindex",this.options.tabIndex)}else this.element[0].setAttribute("tabindex",this.options.tabIndex);if(this.options.text!==this.options.previous.text&&(this.ToggleIframe(n),n&&this.SetIFrameURL(),this.options.designtime||raiseEvent(this.element[0].id,"Control","OnChange")),this.options.showPreview!==this.options.previous.showPreview&&(this.ToggleIframe(n),n&&this.SetIFrameURL()),this.options.scrolling!==this.options.previous.scrolling&&n&&(this.options.showPreview||!this.options.designtime)&&this.SetScrolling(),this.options.watermark!==this.options.previous.watermark&&(n||this.SetWatermark()),(this.options.isvisible!==this.options.previous.isvisible||this.options.isparentvisible!==this.options.previous.isparentvisible)&&this.SetVisable(),this.options.isEnabled!==this.options.previous.isEnabled||this.options.isParentEnabled!==this.options.previous.isParentEnabled){if(n)var q=this.element.find(".content-control-iframe");else var q=this.element;this.options.disabled||!this.options.isParentEnabled?(this.specifiedTabIndex=this.options.tabIndex,q[0].setAttribute("tabindex",-1),this.options.tabIndex=-1):(q[0].setAttribute("tabindex",this.options.tabIndex),this.options.tabIndex=this.specifiedTabIndex)}this.base.applyChanges.apply(this,arguments)},setStyles:function(){var t=this.options.style;if(t){var q={},n=this.element.find("div.content-control-style-wrapper");jQuery.extend(q,{border:n,background:n,margin:n,padding:n});StyleHelper.setStyles(q,t);n[0].style.boxSizing="border-box";n.css("-moz-box-sizing","border-box");n.css("-webkit-box-sizing","border-box")}},ToggleIframe:function(n){if(n)if(this.options.showPreview||!this.options.designtime){var q=this.element.find(".content-control-iframe");q.length===0&&this.AddIframe()}else{var r=this.element.find(".content-control-frameMark");r.length===0&&this.AddFrameMark()}else{var t=this.element.find(".content-control-watermark");t.length===0&&this.AddWatermark()}},AddWatermark:function(){this.options.styleWrapper.html('<span style="padding-left:2px" class="theme-entry input-control-watermark content-control-watermark"><\/span>');this.options.previous.watermark=""},AddIframe:function(){var n=this,t=SFCTemplateManager.getTemplate("MessagePanel",SFCTemplateBehaviour.Default,this),q="";checkExists(n.options.crossSiteLearnUrl)||(q="hide");t.setToken("Message",n.options.crossSiteMessage);t.setToken("Link",n.options.crossSiteLearnUrl);t.setToken("Display",q);var r=t.content;this.options.styleWrapper.html('<div class="content-control-frame-wrapper"><iframe class="content-control-iframe '+this.options.initialPanelID+'" src="about:blank" frameborder="0" allowtransparency="true"><\/iframe><div class="overlayLoader"><\/div><\/div>');this.options.previous.scrolling="";n.element.find(".content-control-frame-wrapper").append(r)},AddFrameMark:function(){this.options.styleWrapper.html('<div class="framemark-spacer"><\/div><div class="framemark-inner"><span class="theme-entry input-control-watermark framemark-watermark"><\/span><\/div>')},SetWidth:function(){this.element[0].style.width=this.options.width;this.options.isPercentWidth=this.options.width.toString().indexOf("%")!==-1&&(this.options.width.toString().replaceAll("%","")===this.element.width()||100===this.element.width())?!0:!1},GetTabIndex:function(){var n=this.options.text.length>0;return n?this.element.find(".content-control-iframe")[0].getAttribute("tabindex"):this.element[0].getAttribute("tabindex")},SetHeight:function(){this.element[0].style.height=this.options.height},SetIFrameURL:function(){if(this.options.showPreview||!this.options.designtime){var t=this.options.text,n=this.element.find(".content-control-iframe");n.attr("src",t);n.addClass(this.options.initialPanelID)}else{var q=this.element.find(".input-control-watermark");q.html(this.options.text)}},SetScrolling:function(){var q=this.options.scrolling,n=this.element.find(".content-control-iframe");if(n.length>0&&n.is(":visible")){var f=this.element.find(".content-control-frame-wrapper");if(this.options.isPercentWidth)n.attr("scrolling","auto"),n[0].style.scrolling="auto",n[0].style.overflowY="auto",n[0].style.overflowX="auto",this.element.addClass("scrolling"),n[0].style.width="100%",n[0].style.height="100%";else{var r=f.innerWidth(),u=f.innerHeight();switch(q){case"auto":n.attr("scrolling","auto");n[0].style.scrolling="auto";n[0].style.overflowY="auto";n[0].style.overflowX="auto";this.element.addClass("scrolling");break;case"no":n.attr("scrolling","no");n[0].style.scrolling="no";n[0].style.overflowY="hidden";n[0].style.overflowX="hidden";this.element.removeClass("scrolling");break;default:n.attr("scrolling","yes");n[0].style.scrolling="yes";this.element.addClass("scrolling")}(q==="bottom"||q==="no")&&(r=r+t.scrollWidth,n.width(r),n[0].style.overflowY="hidden");(q==="right"||q==="no")&&(u=u+t.scrollWidth,n[0].style.overflowX="hidden",n.height(u))}}},SetWatermark:function(){var n=this.element.find(".content-control-watermark");n.html(this.options.watermark)},_getFrameObjectbyId:function(n){var q=null;for(var t in this.iframeDictionary)if(this.iframeDictionary.hasOwnProperty(t)&&t===n){q=this.iframeDictionary[t];break}return q},_receiveDataMessage:function(n){this.options.value=n.value;raiseEvent(this.element[0].id,"Control","Child Message")},_initializeIframe:function(n){var t=this._getFrameObjectbyId(n.value);checkExists(t)?(t.initialized=!0,t.flushQueue()):SFLog({type:3,source:"StackedContent",category:"Control",message:ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Properties.StackedContent.InitializeIframeNotFound})},_extractMessageDetails:function(n){var q=null;if(checkExists(n)){var t=n.split("|");t.length>0&&(q={key:t[0],value:t[1]})}return q}});n.sfc.SFCStackedContentControl.prototype.base=n.sfc.baseWidget.prototype;n(document).ready(function(){for(var q=n(".SourceCode-Forms-Controls-Web-ControlPack-StackedContent"),t=0;t<q.length;t++)n(q[t]).SFCStackedContentControl()})})(jQuery);
/*!
 SourceCode.Forms.Controls.Web.ControlPack.AutoCompleteBehavior.js (Embedded resource)
*/
(function(n){var t;SourceCode.Forms.Controls.Web.ControlPack.AutoComplete=t=n.extend({},SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase,{setProperty:function(n){return n.property==="text"?t.setValueWithOnSet(n):ControlPackBase.setProperty(n)},setRulesMethod:function(t){if(SourceCode.Forms.Controls.Web.ControlPack.Utils.SetRulesMethodForOnSet(t),EventUtil.manageControlEvent(t),t.eventType==="create"||t.eventType==="remove"){var r=SourceCode.Forms.Designers.View.viewDefinitionXML.selectSingleNode("SourceCode.Forms/Views/View"),f=r.getAttribute("ID"),s=r.ownerDocument,q=r.selectSingleNode("Controls/Control[@ID='{0}']".format(t.controlId)),e=q.selectSingleNode("Properties/Property[Name = 'AssociationSO']"),o=q.selectSingleNode("Properties/Property[Name = 'AssociationMethod']"),u=q.selectSingleNode("Properties/Property[Name = 'LiveSearch']/Value");u=checkExists(u)?u.text==="true":!1;t.viewId=f;t.viewNode=r;t.viewName=t.designer._GetViewName();t.viewDisplayName=t.designer._GetViewDisplayName();t.associationMethodNode=o;t.smartobjectNode=e;t.initRuleName="When the View executed Initialize";t.controlName=q.selectSingleNode("Name").text;t.controlDisplayName=q.selectSingleNode("DisplayName").text;t.controlNameValue=q.selectSingleNode("NameValue").text;t.controlNode=q;t.dataSourceType=q.selectSingleNode("Properties/Property[Name = 'DataSourceType']/Value");t.isCached=n("#"+t.controlId).data("Preload");t.remove=!1;(u===!0||t.dataSourceType===null||t.dataSourceType.text!=="SmartObject"||t.eventType==="remove")&&(t.remove=!0);SourceCode.Forms.Controls.Web.ControlPack.AutoComplete.manageAutocompleteRules(t);return}},manageAutocompleteRules:function(t){var l={Location:{_alwaysReplace:!0,_valueToSet:{value:t.viewName,displayValue:t.viewDisplayName,NameValue:t.viewName}},ViewID:{_alwaysReplace:!0,_valueToSet:{value:t.viewId,displayValue:t.viewDisplayName,nameValue:t.viewName}},RuleFriendlyName:{_alwaysReplace:!0,_valueToSet:{value:t.initRuleName,displayValue:t.initRuleName,NameValue:t.initRuleName}}},q={Location:{_ignoreChanges:!0,_valueToSet:"View",displayValue:t.viewDisplayName},ControlID:{_valueToSet:{value:t.controlId,displayValue:t.controlDisplayName,nameValue:t.controlNameValue}},ViewID:{_valueToSet:{value:t.viewId,displayValue:t.viewDisplayName,nameValue:t.viewName}}};checkExists(t.associationMethodNode)&&(q.Method={_alwaysReplace:!0,_valueToSet:{value:t.associationMethodNode.selectSingleNode("Value").text,displayValue:t.associationMethodNode.selectSingleNode("DisplayValue").text,nameValue:t.associationMethodNode.selectSingleNode("NameValue").text}});var s={};if(q.Method!==null&&checkExists(t.smartobjectNode)){var h=t.smartobjectNode.selectSingleNode("Value").text;s={value:h,displayValue:t.smartobjectNode.selectSingleNode("DisplayValue").text,nameValue:t.viewNode.selectSingleNode('Sources/Source[@SourceID="{0}"]'.format(h)).getAttribute("SourceName")};q.ObjectID={_alwaysReplace:!0,_valueToSet:s}}else t.remove=!0;var r={_removeFromThisLevel:!0,ID:{_ignoreChanges:!0,_returnValue:!0,_valueToSet:"".generateGuid()},Type:"Execute",ExecutionType:{_ignoreChanges:!0,_valueToSet:"Synchronous"},ItemState:{_ignoreChanges:!0,_valueToSet:"All"}};r.Properties=n.extend(!0,{},q);var c={ID:{_ignoreChanges:!0,_returnValue:!0,_valueToSet:"".generateGuid()},Type:"User",SourceID:t.viewNode.getAttribute("ID"),SourceDisplayName:{_ignoreChanges:!0,_valueToSet:t.viewDisplayName},SourceType:"View",Name:"Init",Properties:l,Handlers:[{Actions:null}]},a=t.remove?n.extend(!0,{},r):n.extend(!0,{},r,{Results:[{SourceID:{_alwaysReplace:!0,_valueToSet:q.ObjectID._valueToSet.value},SourceName:{_ignoreChanges:!0,_valueToSet:q.ObjectID._valueToSet.nameValue},SourceDisplayName:{_ignoreChanges:!0,_valueToSet:q.ObjectID._valueToSet.displayValue},SourceType:"Result",TargetID:t.controlId,TargetDisplayName:{_ignoreChanges:!0,_valueToSet:t.controlDisplayName},TargetType:"Control"}]});var f=n.extend(!0,{},c,{Handlers:[{Actions:[a]}]}),v=n.extend(!0,{},r,{_removeFromThisLevel:!0,ID:{_ignoreChanges:!0,_returnValue:!0,_valueToSet:"".generateGuid()},Type:"Execute",ExecutionType:{_ignoreChanges:!0,_valueToSet:"Synchronous"},ItemState:{_ignoreChanges:!0,_valueToSet:"All"}}),y=n.extend(!0,{},r,{_removeFromThisLevel:!0,ID:{_ignoreChanges:!0,_returnValue:!0,_valueToSet:"".generateGuid()},Type:"PopulateControl",ExecutionType:{_ignoreChanges:!0,_valueToSet:"Synchronous"},ItemState:{_ignoreChanges:!0,_valueToSet:"All"}}),e=n.extend(!0,{},c,{Handlers:[{Actions:[v,y]}]}),u,o;t.remove===!0?u={Events:[e,f]}:t.isCached===!0?(u={Events:[e]},o={Events:[f]}):(u={Events:[f]},o={Events:[e]});t.remove?EventUtil.removeEventingPattern(t.viewNode,u):EventUtil.ensureEventingPattern(t.viewNode,u,{moveEventsDefinition:o})},setTooltip:function(n,q){var r=n.find(".SFC");t._setProperty(r,"tooltip",q)},setReadOnly:function(n,q){var r=n.find(".SFC");t._setProperty(r,"isReadOnly",q)},setEnabled:function(n,q){var r=n.find(".SFC");t._setProperty(r,"isEnabled",q)},setVisible:function(n,q){var r=n.find(".SFC");t._setProperty(r,"isVisible",q);typeof q=="string"&&(q=q.toLowerCase()==="true");n.toggleClass("invisible",!q)},setDelay:function(n,q){var r=n.find(".SFC");t._setProperty(r,"isDelay",q)},setSearchType:function(n,q){var r=n.find(".SFC");t._setProperty(r,"searchType",q)},setTrigger:function(n,q){var r=n.find(".SFC");t._setProperty(r,"isTrigger",q)},setLiveSearch:function(n,q){var u=n.find(".SFC");t._setProperty(u,"liveSearch",q);var r=u.parent()[0].id.split("_");r=r[r.length-1];SourceCode.Forms.Designers.View.DragDrop._newControlIds.contains(r)||SourceCode.Forms.Designers.View.DragDrop._newControlIds.push(r)},setHeight:function(n,q){var r=n.find(".SFC");t._setProperty(r,"height",q)},setStyles:function(n,q){var r=n.find(".SFC"),e=SourceCode.Forms.Designers[SourceCode.Forms.Designers.Common.getDefinitionNode().tagName].Styles._getSelectedControl(),u=r.find(".stylewrapper"),f=r.find("input"),o={border:u,background:u,margin:u,padding:u,decoration:u,horizontalAlign:f};n.attr("id")==="StyleBuilderPreviewPanelContent"?(r.addClass("style-builder-preview"),r.SFCAutoComplete(),r.SFCAutoComplete("initStyleBuilderPreview",n,q)):n.hasClass("condtional-format-preview")===!0?(r.SFCAutoComplete(),r.SFCAutoComplete("initStyleBuilderPreview",n,q)):t._setProperty(r,"style",q)},setWatermarkText:function(n,q){var r=n.find(".SFC");t._setProperty(r,"waterMarkText",q)},setText:function(n,q){var r=n.find(".SFC");t._setProperty(r,"text",q)},setItems:function(n){var q=t._getInstance(n.CurrentControlId);q.SFCAutoComplete("option","jsonData",n.JsonData);q.SFCAutoComplete("setListData",n.JsonData)},setValueWithOnSet:function(q){var r=t._getInstance(q.CurrentControlId);r.SFCAutoComplete("option","previous").setValueTemp="";r.SFCAutoComplete("option","text")!==q.Value&&(r.SFCAutoComplete("option","value",q.Value),r.SFCAutoComplete("option","text",q.Value));var u=r.SFCAutoComplete("option");if(u.fixedListItems.substring(0,1)==="["){list=JSON.parse(u.fixedListItems);var f=!1;n.each(list,function(n,t){t.value===q.Value&&(r.SFCAutoComplete("option","previous").setValueTemp=t.display,r.SFCAutoComplete("option","text",t.display),r.SFCAutoComplete("setText"),f=!0);f||(r.SFCAutoComplete("option","previous").setValueTemp=q.Value,r.SFCAutoComplete("option","text",q.Value),r.SFCAutoComplete("setText"))})}else r.SFCAutoComplete("option","data").length>0?(r.SFCAutoComplete("applyValue"),r.SFCAutoComplete("setText"),r.SFCAutoComplete("option","previous").text=r.SFCAutoComplete("option","text")):r.find("input").val(q.Value);q.Value===""&&(r.SFCAutoComplete("option","text",""),r.SFCAutoComplete("setText"));raiseEvent(q.CurrentControlId,"Control","OnSet")},getItems:function(n){var q=[];if(checkExistsNotEmpty(n.CurrentControlId)){var r=t._getInstance(n.CurrentControlId);checkExists(r)&&(r.SFCAutoComplete("option").dataSourceType==="SmartObject"?q=SourceCode.Forms.Controls.Web.ControlPack.AutoComplete._getSmoDataSourceItems(n):r.SFCAutoComplete("option").dataSourceType==="Static"&&(q=SourceCode.Forms.Controls.Web.ControlPack.AutoComplete._getStaticDataSourceItems(n)))}return q},_getSmoDataSourceItems:function(n){var f=[];if(checkExists(n.JsonData)){var h=t._getInstance(n.CurrentControlId).SFCAutoComplete("option"),q=n.JsonData;if(n.Value==="All")f=q;else{var r=null,c=h.valueProperty,l=this.getValue(n);switch(n.Value){case"Selected":case"Checked":r=!0;break;case"Unselected":case"Unchecked":r=!1}if(r!==null)for(var e=l.toString().toLowerCase(),u=0;u<q.length;u++){var o=q[u].fields[c].value;if(checkExists(o)){var s=o.toString().toLowerCase();if(r===!0&&s===e){f.push(q[u]);break}else r!==!0&&s!==e&&f.push(q[u])}}}}return f},getValue:function(n){var q=t._getInstance(n.CurrentControlId);return q.SFCAutoComplete("getValue",n)},_getStaticDataSourceItems:function(n){var u=[],q=JSON.parse(t._getInstance(n.CurrentControlId).SFCAutoComplete("option").fixedListItems);switch(n.Value){case"All":u=q;break;case"Selected":case"Checked":var f=this.getValue(n);if(checkExistsNotEmpty(f))for(var r=0;r<q.length;r++)if(q[r].value===f){u.push(q[r]);break}break;case"Unselected":case"Unchecked":var f=this.getValue(n);if(checkExistsNotEmpty(f))for(var r=0;r<q.length;r++)q[r].value!==f&&u.push(q[r]);else u=q}return u},applyDataSource:function(n,t,q,r){var u=n.find(".SFC");u.SFCAutoComplete("applyDataSourceConfig",t,r)},validate:function(q){var r=n(t._getInstance(q.CurrentControlId));n(r).SFCAutoComplete("validate",q)},execute:function(t){var q=t.methodName,r=n("#{0}".format(t.CurrentControlID));switch(q){case"Focus":r.SFCAutoComplete("executeFocus",t.CurrentControlID)}}});n.widget("sfc.SFCAutoComplete",n.sfc.baseWidget,{suggestionCount:100,smartObjectData:null,popupVerticalOffsetFromControl:5,options:{width:"100%",height:"auto",value:"",data:[],fixedListItems:"<Items><\/Items>",displaySO:"",defaultSOProperty:"",displayJoinProperty:"",displayMethod:"",delimiter:";",defaultValue:"",defaultText:"",previous:{},isEnabled:!0,isReadOnly:!1,isVisible:!0,designtime:!1,preview:!1,runTime:!1,searchType:"contains",settingItems:!1,selected:!1,liveSearch:!1,style:SourceCode.Forms.Controls.Base.emptyStylesNode,tooltip:"",initialDisplayValue:"",waterMarkText:"",text:"",tabIndex:0,searchDelay:0,searchTrigger:1,onSetItemsCompleted:!1,setValueTemp:"",currentSelectedItem:"",uiComplete:"ui-autocomplete",autofocus:!0},_create:function(){if(this.options.designtime=this.element.hasClass("designtime"),this.options.preview=this.element.hasClass("preview"),this.options.runTime=this.options.designtime===!1&&this.options.preview===!1,this.element.removeClass("disabled"),this.options.designtime===!0){this.element.attr("name")||this.element.attr("name",this.element.parent()[0].id+"_autocomplete");var t=this.element.find(".input-control-watermark");t.length===0&&n(this.element.find("input")).after("<div class='input-control-watermark' style='display:block'>"+this.options.waterMarkText+"<\/div>")}else this.suggestionCount=parseInt(this.element[0].getAttribute("suggestCount")),this.options.preview===!1&&this.options.dataSourceType!=="SmartObject"&&raiseEvent(this.element.attr("id"),"Control","OnSetItemsCompleted");this.options.runTime===!0&&this.options.isReadOnly===!0&&this.element.find(".input-control").addClass("read-only");this.base._create.apply(this,arguments);this.options.previous=n.extend({},this.options);this.initialize();this.setStyles()},initialize:function(){var q=this,r=this.element;this.options.runTime===!0&&raiseEvent(this.element.prop("id"),"Control","Init");this.options.designtime===!1&&(this.setTabIndex(),this.options.dataSourceType==="Static"&&this.setListData(),this.setupSearch(),this.bindEventAutoComplete());this.setReadOnly();this.setEnabled();this.options.tooltip.length>0&&this.element.attr("title",this.options.tooltip);this.element.find("controlWrapper").children().addClass("autocomplete-control-item-row");this.element.on("keydown",function(t){t.keyCode===n.ui.keyCode.BACKSPACE&&t.target.readOnly&&t.preventDefault()});this.element.find("input").on("keydown",function(t){if(t.keyCode===jQuery.ui.keyCode.ENTER){var q=n(".autocomplete-menu-"+this.element[0].id);if(q.length>0&&q.is(":visible")){var r=q.children(".ui-menu-item").find(".ui-state-active").parent();return r.length>0&&q.data("ui-menu").focus(t,r),q.hide(),!1}}}.bind(this));var t=n._data(this.element.find("input")[0],"events");t.keydown.unshift(t.keydown.pop())},getValue:function(){return SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.formatSpecialChar(this.options.value)},executeFocus:function(){this.options.isEnabled&&this.options.isParentEnabled&&this.element.find("input").trigger("focus")},bindEventAutoComplete:function(){var t=this,q=t.element;q.on("keyup","input",function(n){n.keyCode!=13&&n.keyCode!=27&&q.find(".input-control-watermark").hide();t.options.text=this.value;t.options.selected=!1});q.find("input").off("blur.textbox").on("blur",function(){q.find(".input-control").removeClass("active");var r=n(this).val().trim();r===""&&(t.options.isReadOnly===!1&&n(this).siblings(".input-control-watermark").show(),t.options.value="",t.options.text="",t.onChange())});n(window).on("resize",function(){n(".ui-autocomplete").css("display","none")})},setListData:function(n){var f=[];if(this.smartObjectData=n,this.options.initialDisplayValue="",this.options.previous.initialDisplayValue="",this.options.dataSourceType!=="SmartObject"||this.smartObjectData){if(this.options.dataSourceType==="SmartObject"){var s=!1,u="",r="",e=!1,h=this.options.displaySO?this.options.displaySO:this.options.associationSO,t=null;checkExistsNotEmpty(h)?t=this.smartObjectData.collection:(t=n,s=!0);for(var q=0;q<t.length;q++)if(s)u=SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(t[q].Name),r=u;else{if(u=SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(UtilitiesHelper.setDisplayTemplateValueFromJson(this.options.displayTemplate,t[q].fields)),this.options.associationSO==h?r=t[q].fields[this.options.valueProperty].value:(r=null,checkExists(t[q].joins)&&t[q].joins.length>0&&(u=SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(UtilitiesHelper.setDisplayTemplateValueFromJson(this.options.displayTemplate,t[q].joins[0].fields)),r=t[q].fields[this.options.valueProperty].value)),!e){var c=t[q].fields[this.options.defaultSOProperty];if(checkExists(c)){var o=c.value;checkExists(o)&&typeof o=="string"&&o.toUpperCase()==="TRUE"&&(e=!0,this.options.defaultText=u,this.options.defaultValue=r)}}if(r!==null){var l={text:u,value:r};f.push(l)}}this.options.defaultValue!==""&&e&&(this.options.value=this.options.defaultValue,this.options.text=this.options.defaultText,this.setText(),this.onChange())}}else f=[],this.options.designtime&&f.push("Value 1","Value 2","Value 3","Value 4","Value 5");this.options.data=f;this.setupSearch()},createlist:function(t,q){var r=n("<li><\/li>");r.attr("title",q.value).data("item.autocomplete",q).append(n("<a><\/a>").html(q.label));self.options.currentSelectedItem===q.value&&r.addClass("selected");r.appendTo(t);t.css("text-align",_input.css("text-align"));t.hasClass("autocomplete-menu")||t.addClass("autocomplete-menu")},setupSearch:function(){var t=this,q=parseInt(t.options.searchDelay),r=n(this.element.find("input")),u=parseInt(this.options.searchTrigger);t.options.dataSourceType==="Static"?t.staticOp(r,u,q):t.options.dataSourceType==="SmartObject"&&t.smartObjectOp(r,u,q)},staticOp:function(t,q,r){var u=this,h=[],o;if(this.options.fixedListItems.substring(0,1)==="["){for(var f=JSON.parse(this.options.fixedListItems),e=0;e<f.length;e++){var c=f[e].display,a=f[e].value;h.push({label:c,value:SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(c),datavalue:SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(a),isDefault:f[e].isDefault});f[e].isDefault&&(o=h[e],u.setvalue(o))}typeof o!="undefined"&&o!==null&&(this.options.defaultText=o.label,this.options.defaultValue=o.datavalue)}else for(var f=n(u.options.fixedListItems).find("Item"),s=0;s<f.length;s++)h.push({label:f[s].textContent,value:f[s].textContent,datavalue:s+1});var l=t.autocomplete({minLength:q,delay:r,autoFocus:u.options.autofocus,source:function(n,t){u.sources(u,n,t,h)},change:function(){if(u.options.selected){u.options.selected=!1;return}var n=u.element.find("input").val();u.resolveText(n,!0);u.onChange()},select:function(n,t){u.options.selected=!0;u.setvalue(t.item);u.onChange()}}).data(u.options.uiComplete);l._renderMenu=function(n,t){u.renderMenu(this,n,t)};l._suggest=u.suggest},smartObjectOp:function(t,q,r){var u=this,o=u.element.attr("data-options"),f=JSON.parse(o),s="yes",h=u.element.find("input");if(this.options.liveSearch){r||(r=150);var e=t.autocomplete({minLength:q,delay:r,autoFocus:u.options.autofocus,change:function(n,t){if(u.options.selected){u.options.selected=!1;return}checkExists(t.item)||h.val()!==""||(u.options.value="",u.options.text="");u.setvalue(t.item);u.onChange()},select:function(n,t){u.options.selected=!0;u.onSelect(n,t.item);u.onChange()},source:function(q,r){t.addClass("ui-autocomplete-loading");var c=n(this),e=n(this.element),o=e.data("jqXHR");o&&o.abort();var h=t.val();e.data("jqXHR",n.ajax({url:applicationRoot+"AutoComplete.handler",dataType:"json",data:{text:h,command:"get_all",splitkeyword:s,filterToken:f.searchType,SmartObjectName:f.associationSO,SmartObjectMethod:f.associationMethod,SmartObjectValueProp:f.valueProperty,SmartObjectDisplayTemplate:f.displayTemplate,DisplaySmartObjectName:f.displaySO,DisplaySmartObjectMethod:f.displayMethod,DisplaySmartObjectJoinProp:f.displayJoinProperty},success:function(n){if(c.removeData("jqXHR"),t.val()===""){t.removeClass("ui-autocomplete-loading");return}for(var o=SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(h),f=[],q=0,s=n.length;q<s;q++){var l=n[q],e=n[q].display,a=n[q].value,v=u.highlightItem(e,o);f.push({label:v,value:SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(e),datavalue:SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(a),properties:l.properties})}r(f);u.updateRuntimeFields(f);n.length>0&&(u.options.onSetItemsCompleted=!0,u.executeOnSetItemsCompleted(),u.offset());t.removeClass("ui-autocomplete-loading")},error:function(){t.removeClass("ui-autocomplete-loading")}}))}}).data(u.options.uiComplete);e._renderMenu=function(n,t){u.renderMenu(this,n,t)};e._suggest=u.suggest}else checkExists(u.smartObjectData)&&u.xmlOp(t,q,r)},updateRuntimeFields:function(n){for(var u=[],f="",q=0;q<n.length;q++){q!=0&&(f+=",",f+=n.datavalue);var t={};t.parentid=this.options.associationSO;t.parenttype="Object";t.join="false";t.contextid=this.element.attr("id").replace("00000000-0000-0000-0000-000000000000_","");t.contexttype="External";t.counter=n.length-1-q;for(var e=t.fields={},r=0;r<n[q].properties.length;r++)e[n[q].properties[r].name]={value:n[q].properties[r].value};u.push(t)}_runtimeSetControlFields(u,this.element.attr("id"),this.options.valueProperty)},xmlOp:function(n,t,q){for(var r=this,f=r.options.data,e=[],s=r.element.find("input"),u=0;u<f.length;u++){var h=f[u].text,c=f[u].value;e.push({value:h,datavalue:SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(c)})}var o=n.autocomplete({minLength:t,delay:q,autoFocus:r.options.autofocus,source:function(n,t){r.sources(r,n,t,e)},change:function(n,t){if(r.options.selected){r.options.selected=!1;return}t.item===null&&s.val()===""&&(r.options.value="",r.options.text="");r.setvalue(t.item);r.onChange()},select:function(n,t){r.options.selected=!0;r.onSelect(n,t.item)}}).data(r.options.uiComplete);o._renderMenu=function(n,t){r.renderMenu(this,n,t)};o._suggest=r.suggest},suggest:function(n){var t=this.menu.element;t.html("");t.css("width",this.element.width());this._renderMenu(t,n);this.isNewMenu=!0;SourceCode.Forms.Browser.msie&&this.menu.refresh();t.show();var r=this.element;if(t.position({my:"left top+ "+this.popupVerticalOffsetFromControl,at:"left bottom",of:r,collision:"none fit"}),this.options.autoFocus){var q=t[0].firstChild;q&&(q.firstChild.className+=" ui-state-active")}},renderMenu:function(t,q,r){var u=this,s=n(u.element.find("input"));q.css("text-align",s.css("text-align"));q.hasClass("autocomplete-menu")||q.addClass("autocomplete-menu");q.addClass("autocomplete-menu-"+u.element[0].id);var o="",f=r.length;f>this.suggestionCount&&(f=this.suggestionCount);for(var e=0;e<f;e++)o+=u.renderItem(q,r[e]);q.html(o)},renderItem:function(n,t){var q=this;if(q.options.uiComplete==="ui-autocomplete"){var u="";q.options.currentSelectedItem===t.value&&(u="selected");var f=t.label,e=SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.formatSpecialChar(t.label),o=SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.formatSpecialChar(t.value),s=SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.formatSpecialChar(t.datavalue),h={label:e,value:o,datavalue:s},r=JSON.stringify(h);r=r.replace(/'/g,"&#39;");return'<li title="{0}" data-value="{0}" data-ui-autocomplete-item=\'{3}\' class="ui-menu-item {1}" role="presentation"><a class="ui-corner-all ui-menu-item-wrapper" tabindex="-1">{2}<\/a><\/li>'.format(t.value,u,f,r)}return q.createlist(n,t)},sources:function(n,t,q,r){var u=n.filterItems(t,r);u.length>0&&(n.options.onSetItemsCompleted=!0,n.executeOnSetItemsCompleted(),n.offset());q(u)},highlightItem:function(t,q){t=SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(t);var r=n.ui.autocomplete.escapeRegex(q),u=new RegExp("(?![^&;]+;)(?!<[^<>]*)("+r+")(?![^<>]*>)(?![^&;]+;)","gi");return t.replace(u,"<strong>$1<\/strong>")},filterItems:function(t,q){var u=[],f=this;t.term=SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(t.term.toLowerCase());for(var o=n.ui.autocomplete.escapeRegex(t.term),r=0;r<q.length;r++){var e=q[r];e.value.toLowerCase().indexOf(t.term.toLowerCase())>=0&&(f.options.searchType==="starts-with"?(q[r].label=q[r].value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+n.ui.autocomplete.escapeRegex(t.term)+")(?![^<>]*>)(?![^&;]+;)","i"),"<strong>$1<\/strong>"),q[r].label.indexOf("<strong>")===0&&u.push(q[r])):f.options.searchType==="contains"&&(q[r].label=q[r].value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)("+n.ui.autocomplete.escapeRegex(t.term)+")(?![^<>]*>)(?![^&;]+;)","gi"),"<strong>$1<\/strong>"),u.push(q[r])))}return u},hideWatermark:function(){this.element.find("input").val().trim().length>0&&this.element.find(".input-control-watermark").hide()},offset:function(){var r=this,q=this.element.find("input"),t=this.element.find(".stylewrapper"),f=parseInt(t.css("padding-left")),e=parseInt(t.css("border-left-width")),o=parseInt(t.css("padding-top")),s=parseInt(t.css("border-top-width")),u=q.autocomplete().autocomplete("option","position");checkExistsNotEmpty(this.options.dataSourceType)===!1&&q.autocomplete({source:[],change:function(){r.onChange()}});u.my="left-"+(f+e+1)+" top+"+(o+s);q.autocomplete("option","position",u);setTimeout(function(){var q=t.outerWidth();n(".autocomplete-menu-"+r.element[0].id).css("width",q)},0)},htmlDecode:function(n){return n.htmlDecode()},resolveText:function(){var n=this,t=n.element.find("input").val();if(this.options.liveSearch){n.options.text=SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.formatSpecialChar(t);n.options.value=t;return}var e=!1,o=!0;if(n.options.dataSourceType==="SmartObject")for(var s=n.options.data.length,q=0;q<s;q++){var u=n.options.data[q],r=u.text,f=u.value;if(t===r||t===f||t===this.htmlDecode(r)){n.options.text=r;n.options.value=f;e=!0;break}}else if(n.options.dataSourceType==="Static")for(var h=JSON.parse(n.options.fixedListItems),s=h.length,q=0;q<s;q++){var u=h[q],r=u.display,f=u.value;if(t===r||t===f||t===this.htmlDecode(r)){n.options.text=r;n.options.value=f;e=!0;break}}else o=!1;if(!e){var c=n.element.attr("strictValidation")==="true";if(c&&o){n.options.text="";n.options.value="";setTimeout(function(){var t={CurrentControlId:n.element.attr("id"),Error:!0,DataType:null,IsPopup:!1,IsRequired:null,Pattern:"Item cannot resolve."};UtilitiesHelper.showValidationMessage(n.element.find(".input-control"),t,!1);UtilitiesHelper.showValidationMessage(n.element,t,!1)},0);return}n.options.text=SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.formatSpecialChar(t);n.options.value=t}},setvalue:function(n){var t=this,q=this.element.find("input");if(n)switch(t.options.dataSourceType){case"Static":case"SmartObject":setTimeout(function(){q.val(SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.formatSpecialChar(n.value))},0);t.options.text=SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.formatSpecialChar(n.value);t.options.value=n.datavalue;break;default:return!1}else return t.resolveText(),!1},onSelect:function(n,t){var q=this;q.setvalue(t);q.onChange()},onChange:function(){var n=this;this.options.text!==this.options.previous.text&&(this.options.previous.text=this.options.text,this.options.previous.value=this.options.value,this.options.currentSelectedItem=this.options.text,this.options.designtime===!1&&raiseEvent(this.element.attr("id"),"Control","OnChange"))},applyChanges:function(){var t=!1;this.options.tooltip!==this.options.previous.tooltip&&this.setTooltip();this.options.setValueTemp!==this.options.previous.setValueTemp&&(this.options.previous.text=this.options.previous.setValueTemp);this.options.style!==this.options.previous.style&&(this.setStyles(),this.options.designtime===!1&&n(".tab-wrapper").length<2&&this.offset());this.options.value!==this.options.previous.value&&(this.options.previous.value=this.options.value,this.options.runTime&&raiseEvent(this.element.attr("id"),"Control","OnChange"));this.options.text!==this.options.previous.text&&(this.setText(),this.options.runTime&&(this.resolveText(),this.options.value!==this.options.previous.value&&this.applyChanges()));this.options.initialDisplayValue!==this.options.previous.initialDisplayValue&&(this.options.previous.initialDisplayValue=this.options.initialDisplayValue);this.options.width!==this.options.previous.width&&this.element.width(this.options.width);this.options.height!==this.options.previous.height&&this.setHeight();this.options.isReadOnly!==this.options.previous.isReadOnly&&(t=!0);(this.options.isEnabled!==this.options.previous.isEnabled||typeof this.options.disabled!="undefined"&&this.options.disabled!=null)&&this.setEnabled();this.options.isVisible!==this.options.previous.isVisible&&this.options.designtime===!1&&typeof this.options.dataSourceType!="undefined"&&this.options.dataSourceType!=null&&(this.offset(),this.setVisible());this.options.tabIndex!==this.options.previous.tabIndex&&this.setTabIndex();!1&&(t=!0);this.options.waterMarkText!==this.options.previous.waterMarkText&&this.setWaterMark();t===!0&&this.setReadOnly();(this.options.searchDelay!==this.options.previous.searchDelay||this.options.searchTrigger!==this.options.previous.searchTrigger)&&this.setupSearch();this.options.settingItems!==this.options.previous.settingItems&&(this.options.previous.settingItems=this.options.settingItems,raiseEvent(this.element.attr("id"),"Control","OnSetItemsCompleted"));this.setTabIndex();this.hideWatermark();this.base.applyChanges.apply(this,arguments)},executeOnSetItemsCompleted:function(){this.options.runTime===!0&&this.options.onSetItemsCompleted===!0&&this.options.data.length===0&&this.options.dataSourceType==="SmartObject"&&(this.options.onSetItemsCompleted=!1,raiseEvent(this.element.attr("id"),"Control","OnSetItemsCompleted"))},_optionNameTransformer:function(n){n=n.toLowerCase();switch(n){case"tooltip":n="tooltip";break;case"associationso":n="associationSO";break;case"associationmethod":n="associationMethod";break;case"fixedlistitems":n="fixedListItems";break;case"defaultvalue":n="defaultValue";break;case"defaulttext":n="defaultText";break;case"defaultsoproperty":n="defaultSOProperty";break;case"displayso":n="displaySO";break;case"displayjoinproperty":n="displayJoinProperty";break;case"displaymethod":n="displayMethod";break;case"valueproperty":n="valueProperty";break;case"delimiter":n="delimiter";break;case"displaytype":n="displayType";break;case"associatedjoinproperty":n="associatedJoinProperty";break;case"displaytemplate":n="displayTemplate";break;case"datasourcetype":n="dataSourceType";break;case"watermarktext":n="waterMarkText";break;case"text":n="text";break;case"livesearch":n="liveSearch";break;case"height":n="height";break;case"isreadonly":n="isReadOnly";break;case"isvisible":n="isVisible";break;case"isenable":n="isEnable";break;case"searchtype":n="searchType";break;case"settingitems":n="settingItems";break;case"initialdisplayvalue":n="initialDisplayValue";break;case"tabindex":n="tabIndex";break;case"searchdelay":n="searchDelay";break;case"searchtrigger":n="searchTrigger";break;case"setvaluetemp":n="setValueTemp";break;default:n=this.base._optionNameTransformer(n)}return n},_optionValueConverter:function(n,t){n=n.toLowerCase();switch(n){case"displaytype":t=t.toLowerCase();break;case"tabIndex":if(t=parseInt(t),t>=-1&&t<=32767)break;else{t=-1;break}default:t=this.base._optionValueConverter(n,t)}return t},widgetnizeElement:function(){if(this.options.designtime===!1){var n=this.element.find("input");n.filter(":text").textbox()}},initStyleBuilderPreview:function(n,t){this.options.style=t;this.applyChanges()},applyValue:function(){if(this.options.preview===!1&&this.options.designtime===!1&&checkExistsNotEmpty(this.options.value)===!0){var r=this.options.value;this.options.data.length<1&&this.setListData();for(var t=this.options.data,n=0;n<t.length;n++)if(t[n].value==r){var q=document.createElement("div");q.innerHTML=t[n].text;this.options.text=SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.formatSpecialChar(q.innerHTML);break}}},setStyles:function(){var n=this.element.find(".stylewrapper"),q=n.find("input"),r=n.find(".input-control-m-c"),t={},u=this;t={background:n,margin:n,padding:n,font:n,decoration:n,horizontalAlign:n};StyleHelper.setStyles(t,this.options.style);t={background:q,font:q,horizontalAlign:q};StyleHelper.setStyles(t,this.options.style);t={border:r,background:r};StyleHelper.setStyles(t,this.options.style);this.options.runTime&&(this.element.width(this.options.width),checkExists(checkExists(this.options.style.split("BackgroundColor")[1]))&&this.element.find(".stylewrapper").css("background-color",""));n.css("width","auto")},setHeight:function(){var n=this.options.height,t=this.element.find(".stylewrapper");t[0].style.height="auto";this.element[0].style.height="auto";this.options.height=n},destroy:function(){n(this.element).off(".AutoComplete");n.Widget.prototype.destroy.call(this)},setText:function(){var n=this.element.find(".input-control-watermark"),t=this.element.find("input");this.options.text.length>0?(n.hide(),t.val(this.options.text)):(t.val(""),n.show())},setTooltip:function(){this.element.attr("title",this.options.tooltip)},setVisible:function(){this.options.isVisible===!0?this.element.addClass("hidden"):this.element.removeClass("hidden")},setReadOnly:function(){var n=this.element,t=n.find("input");this.options.isReadOnly===!0?(n.find(".input-control").removeClass("active"),n.find(".input-control-watermark").hide(),t.prop("readonly",!0),t.addClass("readonly"),n.find(".input-control").addClass("read-only")):(t.val().length===0&&n.find(".input-control-watermark").show(),n.find(".input-control").removeClass("read-only"),t.prop("readonly",!1),t.removeClass("readonly"))},setEnabled:function(){var n=this.element,t=n.find("input");this.options.isEnabled===!1||this.options.disabled?(n.find(".input-control-watermark").hide(),n.addClass("disabled"),n.find(".input-control").addClass("disabled"),t.addClass("disabled"),t.prop("disabled",!0)):this.options.isEnabled!==!0&&this.options.disabled||(this.options.text.length===0&&t.is(":focus")===!1&&(this.options.isReadOnly===!1&&n.find(".input-control-watermark").show(),n.removeClass("disabled")),n.find(".input-control").removeClass("disabled"),t.removeClass("disabled"),t.prop("disabled",!1))},setWaterMark:function(){var n=this.element.find(".input-control-watermark");n.length>0&&(n[0].innerHTML=this.options.waterMarkText)},setTabIndex:function(){var t=this.options.tabIndex;(this.options.isEnabled===!1||this.options.isReadOnly===!0)&&(t=-1);for(var q=this.element[0].getElementsByTagName("Input"),n=0;n<q.length;n++)q[n].tabIndex=t},validate:function(n){if(n.DataType)n.Error=!1,n.DataType=null;else{if(n.IgnoreInvisible==="true"&&(this.options.isVisible===!1||this.options.isParentVisible===!1)||checkExists(this.options.isReadOnly)&&n.IgnoreReadOnly==="true"&&this.options.isReadOnly===!0||n.IgnoreDisabled==="true"&&this.options.disabled===!0){this.element.find(".input-control").removeClass("invalid");this.element.removeClass("invalid");return}checkExists(this.options.isFormatValid)&&this.options.isFormatValid===!1&&(n.IsRequired=!1,n.Error=!0,n.Pattern=Resources.RuntimeMessages.InvalidFormat)}UtilitiesHelper.showValidationMessage(this.element.find(".input-control"),n,!1);UtilitiesHelper.showValidationMessage(this.element,n,!1)},destroy:function(){this.element.off();n(document).off("click","#"+this.element.attr("id"));this.element.children().remove();n.Widget.prototype.destroy.call(this)}});n.sfc.SFCAutoComplete.prototype.base=n.sfc.baseWidget.prototype})(jQuery);$(document).ready(function(){for(var t=$(".SFC.SourceCode-Forms-Controls-Web-ControlPack-AutoComplete"),n=0;n<t.length;n++)$(t[n]).SFCAutoComplete()});
/*!
 SourceCode.Forms.Controls.Web.ControlPack.ChoiceBehavior.js (Embedded resource)
*/
(function(n){var t;SourceCode.Forms.Controls.Web.ControlPack.Choice=t=n.extend({},SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase,{getDisplayTypeDropdownValues:function(){return{values:["dropdown","checkbox","radio"],displays:["Drop-Down List","Check Box List","Radio Button List"],iconClasses:["dropdown-control","multiselectcheckbox-control","radiobuttonlist-control"]}},setOwnValue:function(n,q){var r=n.find(".SFC");t._setProperty(r,"AllowOwnValue",q)},setSelectEmptyValue:function(n,q){var r=n.find(".SFC");t._setProperty(r,"SelectEmptyValue",q)},setDisplayType:function(n,q){var o=n.find(".SFC"),u=n.attr("id"),s=n.attr("controltype");t._setProperty(o,"displayType",q);controlNode=SourceCode.Forms.Designers.View.Styles._getControlNode(u,s);var f=controlNode.selectSingleNode("Properties");SourceCode.Forms.Controls.Web.ControlPack.Choice._correctChoiceXml(f,n);var r=SourceCode.Forms.Designers.View.propertyGrid;checkExists(r)&&r.controlid===u&&(r.valuexml="<Controls>"+controlNode.xml+"<\/Controls>",r.refresh());var e=f.selectSingleNode("Property[Name = 'WatermarkText']/Value");checkExists(e)&&SourceCode.Forms.Controls.Web.ControlPack.Choice.setWatermarkText(n,e.text)},setTooltip:function(n,q){var r=n.find(".SFC");t._setProperty(r,"tooltip",q)},setIsReadOnly:function(n,q){var r=n.find(".SFC");t._setProperty(r,"IsReadOnly",q)},setHeight:function(n,q){var r=n.find(".SFC");t._setProperty(r,"height",q)},setStyles:function(n,q){var r=n.find(".SFC"),f=SourceCode.Forms.Designers[SourceCode.Forms.Designers.Common.getDefinitionNode().tagName].Styles._getSelectedControl(),u=r.find(".stylewrapper"),e={border:u,background:u,margin:u,padding:u};if(n.attr("id")==="StyleBuilderPreviewPanelContent"){r.addClass("style-builder-preview");var e=f.find(".SFC").SFCChoice("option");r.SFCChoice();r.SFCChoice("initStyleBuilderPreview",n,e.displayType,q)}else if(n.hasClass("condtional-format-preview")===!0){var e=f.find(".SFC").SFCChoice("option");r.addClass("condtional-format-preview-choice");r.SFCChoice();r.SFCChoice("initStyleBuilderPreview",n,e.displayType,q)}else t._setProperty(r,"style",q)},setWatermarkText:function(n,q){var r=n.find(".SFC");t._setProperty(r,"watermarkText",q)},setStackedBy:function(n,q){var r=n.find(".SFC");t._setProperty(r,"StackedBy",q)},setStackCapacity:function(n,q){var r=n.find(".SFC");t._setProperty(r,"StackCapacity",q)},getStackedByOptions:function(){var n={values:[],displays:[],iconClasses:[],add:function(){if(arguments.length===0)return this;var t=arguments.length===1?arguments[0]:arguments[1],q=arguments[0],r=arguments.length===3?arguments[2]:t;return n.displays.push(q.toString()),n.values.push(t.toString()),n.iconClasses.push(r.toString()),this}};return n.add("Rows","rows","stacked-rows").add("Columns","columns","stacked-columns"),n},setItems:function(n){var q=t._getInstance(n.CurrentControlId);q.SFCChoice("option","jsonData",n.JsonData)},setValueWithOnSet:function(n){var q=t._getInstance(n.CurrentControlId),r=q.SFCChoice("option","value",n.Value);raiseEvent(n.CurrentControlId,"Control","OnSet");return q.SFCChoice("setValueWithOnSet",n)},getItems:function(n){var q=[];if(checkExistsNotEmpty(n.CurrentControlId)){var r=t._getInstance(n.CurrentControlId);checkExists(r)&&(r.SFCChoice("option").dataSourceType==="SmartObject"?q=SourceCode.Forms.Controls.Web.ControlPack.Choice._getSmoDataSourceItems(n):r.SFCChoice("option").dataSourceType==="Static"&&(q=SourceCode.Forms.Controls.Web.ControlPack.Choice._getStaticDataSourceItems(n)))}return q},_getSmoDataSourceItems:function(n){var q=[],r=n.JsonData;if(checkExists(r)){var h=t._getInstance(n.CurrentControlId).SFCChoice("option"),a=h.displaySO;checkExistsNotEmpty(a)||(a=h.associationSO);var u=null,c=!1,y=h.valueProperty,p=this.getValue(n);switch(n.Value){case"All":c=!0;break;case"Selected":case"Checked":u=!0;break;case"Unselected":case"Unchecked":u=!1}var o=p.split(t._getInstance(n.CurrentControlId).SFCChoice("option").delimiter);if(o.length>0&&u!==null)for(var e=0;e<r.length;e++){var l=r[e].fields[y].value;checkExists(l)&&(u===!0&&o.indexOf(l.toString())>-1?q.push(r[e]):u!==!0&&o.indexOf(l.toString())===-1&&q.push(r[e]))}else(c||u===!1&&o.length===0)&&(q=r);var w=t._getInstance(n.CurrentControlId).SFCChoice("option").allowOwnValue;if(w){var v=t._getInstance(n.CurrentControlId).find("input").last()[0].value,s=t._getInstance(n.CurrentControlId).SFCChoice("option").displayType;if(checkExistsNotEmpty(v)&&r.length>0){var f=jQuery.extend(!0,{},r[0]);for(var b in f.fields)f.fields[b].value=v;c?q.push(f):u===!0?s==="dropdown"&&t._getInstance(n.CurrentControlId).find(".ownvalue").prev().hasClass("checked")?q.push(f):(s==="radio"||s==="checkbox")&&t._getInstance(n.CurrentControlId).find(".ownvalue").prev().hasClass("checked")&&q.push(f):u===!1&&(s==="dropdown"&&t._getInstance(n.CurrentControlId).find(".ownvalue").hasClass("disabled")?q.push(f):t._getInstance(n.CurrentControlId).find(".ownvalue").prev().hasClass("checked")||q.push(f))}}}return q},_getStaticDataSourceItems:function(n){var u=[],f=JSON.parse(t._getInstance(n.CurrentControlId).SFCChoice("option").fixedListItems);switch(n.Value){case"All":if(u=f,t._getInstance(n.CurrentControlId).SFCChoice("option").allowOwnValue){var q=t._getInstance(n.CurrentControlId).find("input").last()[0].value;u.push({display:q,value:q})}break;case"Selected":case"Checked":var o=this.getValue(n),e=o.split(t._getInstance(n.CurrentControlId).SFCChoice("option").delimiter);if(e.length>0)for(var r=0,s=f.length;r<s;r++)checkExistsNotEmpty(f[r])&&e.indexOf(f[r].value)>-1&&u.push(f[r]);if(t._getInstance(n.CurrentControlId).SFCChoice("option").allowOwnValue){var q=t._getInstance(n.CurrentControlId).find("input").last()[0].value;t._getInstance(n.CurrentControlId).SFCChoice("option").displayType==="dropdown"&&t._getInstance(n.CurrentControlId).find(".ownvalue").prev().hasClass("checked")?u.push({display:q,value:q}):(t._getInstance(n.CurrentControlId).SFCChoice("option").displayType==="radio"||t._getInstance(n.CurrentControlId).SFCChoice("option").displayType==="checkbox")&&t._getInstance(n.CurrentControlId).find(".ownvalue").prev().hasClass("checked")&&u.push({display:q,value:q})}break;case"Unselected":case"Unchecked":var o=this.getValue(n),e=o.split(t._getInstance(n.CurrentControlId).SFCChoice("option").delimiter);if(e.length>0)for(var r=0,s=f.length;r<s;r++)checkExistsNotEmpty(f[r])&&e.indexOf(f[r].value)==-1&&u.push(f[r]);if(t._getInstance(n.CurrentControlId).SFCChoice("option").allowOwnValue){var q=t._getInstance(n.CurrentControlId).find("input").last()[0].value;t._getInstance(n.CurrentControlId).SFCChoice("option").displayType!=="dropdown"||t._getInstance(n.CurrentControlId).find(".ownvalue").prev().hasClass("checked")?t._getInstance(n.CurrentControlId).find(".ownvalue").prev().hasClass("checked")||u.push({display:q,value:q}):u.push({display:q,value:q})}}return u},_correctChoiceXml:function(n,t){var q=getNodeValue("Property[Name='DisplayType']/Value",n,"dropdown"),r=n.selectSingleNode("Property[Name='WatermarkText']"),u=getNodeValue("Value",r,""),f=u;if(SourceCode.Forms.Controls.Web.ControlPack.Choice._isDefaultChoiceWatermarkValue(u))f=SourceCode.Forms.Controls.Web.ControlPack.Choice._getWatermarkTextFromDisplayType(q),checkExists(r)&&n.removeChild(r),propElem=n.ownerDocument.createElement("Property"),propNameElem=n.ownerDocument.createElement("Name"),propSystemValueElem=n.ownerDocument.createElement("Value"),propDisplayValueElem=n.ownerDocument.createElement("DisplayValue"),propNameElem.appendChild(n.ownerDocument.createTextNode("WatermarkText")),propSystemValueElem.appendChild(n.ownerDocument.createTextNode(f)),propDisplayValueElem.appendChild(n.ownerDocument.createTextNode(f)),propElem.appendChild(propNameElem),propElem.appendChild(propSystemValueElem),propElem.appendChild(propDisplayValueElem),n.appendChild(propElem);else if(q==="dropdown"){var s=t.find(".choiceddl").find(".input-control span");s[0].innerHTML=u.htmlEncode();t.find(".choiceddl").addClass("watermark")}var o=n.selectSingleNode("Property[Name='DataType']"),e="";e=q==="checkbox"?"MultiValue":"Text";checkExists(o)&&n.removeChild(o);propElem=n.ownerDocument.createElement("Property");propNameElem=n.ownerDocument.createElement("Name");propSystemValueElem=n.ownerDocument.createElement("Value");propDisplayValueElem=n.ownerDocument.createElement("DisplayValue");propNameElem.appendChild(n.ownerDocument.createTextNode("DataType"));propSystemValueElem.appendChild(n.ownerDocument.createTextNode(e));propDisplayValueElem.appendChild(n.ownerDocument.createTextNode(e));propElem.appendChild(propNameElem);propElem.appendChild(propSystemValueElem);propElem.appendChild(propDisplayValueElem);n.appendChild(propElem)},_isDefaultChoiceWatermarkValue:function(n){var t=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Properties.Choice;return[t.ChoiceDropDownText,t.ChoiceAltText].contains(n)},_getWatermarkTextFromDisplayType:function(n){var t=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Properties.Choice,q=t.ChoiceDropDownText;return n==="dropdown"?t.ChoiceDropDownText:t.ChoiceAltText},applyDataSource:function(n,t,q,r){var u=n.find(".SFC");u.SFCChoice("applyDataSourceConfig",t,r)},resetPropertyXml:function(n){var t={DefaultValueDisplay:"(None)",DisplayType:"dropdown",Delimiter:";",AllowOwnValue:"false",SelectEmptyValue:"true",Height:"",Width:"100%",DataType:"Text"},q=n.selectSingleNode("Property[Name='DefaultValueDisplay']/Value");q!==null&&(t.DefaultValueDisplay=q.text);var r=n.selectSingleNode("Property[Name='DisplayType']/Value");r!==null&&(t.DisplayType=r.text);var u=n.selectSingleNode("Property[Name='Delimiter']/Value");u!==null&&(t.Delimiter=u.text);var f=n.selectSingleNode("Property[Name='AllowOwnValue']/Value");f!==null&&(t.AllowOwnValue=f.text);var e=n.selectSingleNode("Property[Name='SelectEmptyValue']/Value");e!==null&&(t.SelectEmptyValue=e.text);var o=n.selectSingleNode("Property[Name='Height']/Value");o!==null&&(t.Height=o.text);var s=n.selectSingleNode("Property[Name='Width']/Value");s!==null&&(t.Width=s.text);var h=n.selectSingleNode("Property[Name='DataType']/Value");return h!==null&&(t.DataType=h.text),t},setEnabled:function(n,q){var r=n.find(".SFC");t._setProperty(r,"isEnabled",q)}});n.widget("sfc.SFCChoice",n.sfc.baseWidget,{BehaviorHelperFactory:null,options:{width:"100%",height:"auto",value:"",fixedListItems:"<Items><\/Items>",defaultSOProperty:"",displaySO:"",displayJoinProperty:"",displayMethod:"",delimiter:";",dataSourceType:"",allowOwnValue:!1,selectEmptyValue:!0,displayType:"dropdown",defaultValue:"",previous:{},isEnabled:!0,isReadOnly:!1,isParentReadOnly:!1,designtime:!1,preview:!1,runTime:!1,settingItems:!1,style:SourceCode.Forms.Controls.Base.emptyStylesNode,tooltip:"",initialDisplayValue:"",watermarkText:"",data:[{text:"",value:""}],modalElem:null,hasEverSetItems:!1,onSetItemsCompleted:!1,_val:[],tabIndex:0,displaychange:!1,stackCapacity:1,stackedBy:"rows",items:null,blockInitStackSave:!1,allowOwnValueStackElement:null},_create:function(){if(this.options.designtime=this.element.hasClass("designtime"),this.options.preview=this.element.hasClass("preview"),this.options.runTime=this.options.designtime===!1&&this.options.preview===!1,this.element.removeClass("disabled"),this.options.disabled=!this.options.isEnabled||!this.options.isParentEnabled,this.BehaviorHelperFactory=new SourceCode.Forms.Controls.Web.SFCChoiceFactory(this),this.BehaviorHelper=this.BehaviorHelperFactory.getControlHelper(this.options.displayType),SourceCode.Forms.Browser.msie){this.element.addClass("ie");switch(document.documentMode){case 8:this.element.addClass("ie8");break;case 9:this.element.addClass("ie9");break;case 10:this.element.addClass("ie10")}}else SourceCode.Forms.Browser.mozilla&&(document.documentMode===11?this.element.addClass("ie").addClass("ie11"):this.element.addClass("moz"));this.options.designtime===!0?(this.options.dataSourceType!=="Static"?this.BehaviorHelper.setDummyData():this.options.displayType==="dropdown"&&this.BehaviorHelper.changeDisplayType(),this.element.attr("name")||this.element.attr("name",this.element.parent()[0].id+"_choice")):this._handleValidation();this.BehaviorHelper.initialize();this.base._create.apply(this,arguments);this.options.previous=n.extend({},this.options);this.setClearChoiceControlDataSourcePropertyMethod()},initStyleBuilderPreview:function(n,t,q){this.BehaviorHelper.initStyleBuilderPreview(n,t,q)},setValueWithOnSet:function(n){this.BehaviorHelper.setValueWithOnSet(n)},databind:function(){this.BehaviorHelper.databind()},applyChanges:function(){var n=!1,q=!1,t=!1;if(this.options.tooltip!==this.options.previous.tooltip&&this.BehaviorHelper.setTooltip(),this.options.settingItems!==this.options.previous.settingItems&&this.BehaviorHelper.toggleModal(),this.options.displayType!==this.options.previous.displayType){this.options.previous.displayType=this.options.displayType;this.BehaviorHelper=this.BehaviorHelperFactory.getControlHelper(this.options.displayType);n=!0;this.options.displaychange=!0;switch(this.options.displayType){case"dropdown":this.element.removeClass("displayTypeCheckbox displayTypeRadio").addClass("displayTypeDropdown");break;case"checkbox":this.element.removeClass("displayTypeDropdown displayTypeRadio").addClass("displayTypeCheckbox");break;case"radio":this.element.removeClass("displayTypeDropdown displayTypeCheckbox").addClass("displayTypeRadio")}}if((this.options.jsonData!==this.options.previous.jsonData||this.options.fixedListItems!==this.options.previous.fixedListItems)&&(this.options.previous.jsonData=this.options.jsonData,this.options.previous.fixedListItems=this.options.fixedListItems,n=!0,this.options.hasEverSetItems=!0,this.options.onSetItemsCompleted=!0),this.options.value!==this.options.previous.value&&(this.options.hasEverSetItems===!0&&this.options.settingItems===!1?q=!0:this.options.suppresOnChange=!0),this.options.initialDisplayValue!==this.options.previous.initialDisplayValue&&this.BehaviorHelper.applyDisplayValue(),this.options.allowOwnValue!==this.options.previous.allowOwnValue&&(this.BehaviorHelper.setAllowOwnValue(),this.BehaviorHelper.configureOwnValueBehavior(),q=!0),this.options.width!==this.options.previous.width&&this.element.width(this.options.width),this.options.height!==this.options.previous.height&&this.BehaviorHelper.setHeight(),this.options.style!==this.options.previous.style&&this.BehaviorHelper.setStyles(),this.options.isReadOnly!==this.options.previous.isReadOnly&&(t=!0),this.options.isParentReadOnly!==this.options.previous.isParentReadOnly&&(t=!0),this.options.disabled!==this.options.previous.disabled&&this.BehaviorHelper.setEnabled(),this.options.selectEmptyValue!==this.options.previous.selectEmptyValue&&this.options.displayType==="dropdown"&&(n=!0),this.options.tabIndex!==this.options.previous.tabIndex&&this.BehaviorHelper.setTabIndex(),(this.options.stackCapacity!==this.options.previous.stackCapacity||this.options.stackedBy!==this.options.previous.stackedBy)&&n===!1&&this.BehaviorHelper.setStackedByAndStackCapacity(),n===!0&&(this.BehaviorHelper.changeDisplayType(),t=!0),q===!0&&this.BehaviorHelper.applyValue(),t===!0&&this.BehaviorHelper.setReadOnly(),this.options.watermarkText!==this.options.previous.watermarkText&&this.options.displayType==="dropdown"){var r=this.element.find(".watermark");this.element.find("select").dropdown("option","watermark",this.options.watermarkText).dropdown("refresh")}this.options.delimiter!==this.options.previous.delimiter&&(this.options.value=this.BehaviorHelper.getSelectedValue());this.base.applyChanges.apply(this,arguments)},_optionNameTransformer:function(n){n=n.toLowerCase();switch(n){case"tooltip":n="tooltip";break;case"associationso":n="associationSO";break;case"associationmethod":n="associationMethod";break;case"fixedlistitems":n="fixedListItems";break;case"defaultvalue":n="defaultValue";break;case"defaultsoproperty":n="defaultSOProperty";break;case"displayso":n="displaySO";break;case"displayjoinproperty":n="displayJoinProperty";break;case"displaymethod":n="displayMethod";break;case"valueproperty":n="valueProperty";break;case"delimiter":n="delimiter";break;case"displaytype":n="displayType";break;case"associatedjoinproperty":n="associatedJoinProperty";break;case"displaytemplate":n="displayTemplate";break;case"datasourcetype":n="dataSourceType";break;case"allowownvalue":n="allowOwnValue";break;case"watermarktext":n="watermarkText";break;case"jsondata":n="jsonData";break;case"selectemptyvalue":n="selectEmptyValue";break;case"height":n="height";break;case"isreadonly":n="isReadOnly";break;case"isparentreadonly":n="isParentReadOnly";break;case"settingitems":n="settingItems";break;case"initialdisplayvalue":n="initialDisplayValue";break;case"stackedby":n="stackedBy";break;case"stackcapacity":n="stackCapacity";break;case"tabindex":n="tabIndex";break;default:n=this.base._optionNameTransformer(n)}return n},_optionValueConverter:function(n,t){n=n.toLowerCase();switch(n){case"displaytype":t=t.toLowerCase();switch(t){case"checkbox":case"dropdown":case"radio":break;default:t="dropdown"}break;case"allowownvalue":case"selectemptyvalue":case"isreadonly":case"isparentreadonly":t=this.base._booleanConverter(t);break;case"tabIndex":if(t=parseInt(t),t>=-1&&t<=32767)break;else{t=-1;break}default:t=this.base._optionValueConverter(n,t)}return t},executeOnSetItemsCompleted:function(){this.options.designtime===!1&&this.options.preview===!1&&this.options.onSetItemsCompleted===!0&&(this.options.onSetItemsCompleted=!1,raiseEvent(this.element.attr("id"),"Control","OnSetItemsCompleted"))},applyDataSourceConfig:function(n,t){if(typeof n!="undefined"){if(n==="Static"){var q=t.selectSingleNode("Property[Name='FixedListItems']/Value");q!==null&&(q=q.text);this.options.fixedListItems!==q&&(this.options.fixedListItems=q)}this.options.dataSourceType=n;var r=SourceCode.Forms.Controls.Web.ControlPack.Choice.resetPropertyXml(t),u=r.DisplayType;this.applyChanges()}},setClearChoiceControlDataSourcePropertyMethod:function(){typeof ControlUtil!="undefined"&&typeof ControlUtil.clearChoiceControlDataSourceConfigProperty=="undefined"&&(ControlUtil.clearChoiceControlDataSourceConfigProperty=function(n,q,r,u){ControlUtil.clearComplexPropertyConfig(n,q,r,u);var f=parseXML(n),e=f.selectSingleNode("Controls/Control").getAttribute("ID"),o=t._getInstance(e).find(".SFC");o.SFCChoice("setDummyData")})},setDummyData:function(){this.BehaviorHelper.setDummyData()},_handleValidation:function(){var r=this,t=this.element,q="#{0} .stylewrapper.{1}".format(t[0].getAttribute("id"),"invalid");n(document).on("mouseenter",q,function(){var q=jQuery("#"+t[0].id+"_Tooltip");UtilitiesHelper.setToolTipPosition(q,n(this));q.show()});n(document).on("mouseleave",q,function(){var n=jQuery("#"+t[0].id+"_Tooltip");n.hide()})},validate:function(n){n.DataType&&(n.Error=!1,n.DataType=null);var t=this.element.find(".stylewrapper");UtilitiesHelper.showValidationMessage(t,n)},destroy:function(){this.element.off();var t=this.element.find(".ownvalue"),q=t.siblings("label");t.off();q.off();n(document).off("click","#"+this.element.attr("id"));this.element.children().remove();n.Widget.prototype.destroy.call(this)}});n.sfc.SFCChoice.prototype.base=n.sfc.baseWidget.prototype})(jQuery);$(document).ready(function(){for(var t=$(".SFC.SourceCode-Forms-Controls-Web-ControlPack-Choice"),n=0;n<t.length;n++)$(t[n]).SFCChoice();typeof ControlResources.SourceCode.Forms.Controls.Web.ControlPack!="undefined"&&typeof Resources.ControlProperties!="undefined"&&(Resources.ControlProperties.InvalidDelimiter=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Properties.Choice.InvalidDelimiter,Resources.ControlProperties.InvalidStackCapacity=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Properties.Choice.InvalidStackCapacity)});
/*!
 SourceCode.Forms.Controls.Web.ControlPack.Resources.JS.SFCChoiceBase.js (Embedded resource)
*/
(typeof SourceCode=="undefined"||SourceCode===null)&&(SourceCode={});(typeof SourceCode.Forms=="undefined"||SourceCode.Forms===null)&&(SourceCode.Forms={});(typeof SourceCode.Forms.Controls=="undefined"||SourceCode.Forms.Controls===null)&&(SourceCode.Forms.Controls={});(typeof SourceCode.Forms.Controls.Web=="undefined"||SourceCode.Forms.Controls.Web===null)&&(SourceCode.Forms.Controls.Web={});SourceCode.Forms.Controls.Web.SFCChoiceBase=function(n){this.widget=n;this.element=n.element;this.options=n.options};SourceCode.Forms.Controls.Web.SFCChoiceBase.prototype={widget:null,element:null,options:null,bindEventOwnValue:function(){var n=this;this.element.off("change",".ownvalue");this.element.on("change",".ownvalue",function(){n.widget.BehaviorHelper=n.widget.BehaviorHelperFactory.getControlHelper(n.options.displayType);n.options.value=n.widget.BehaviorHelper.getSelectedValue()})},raiseOnChangeEvent:function(){this.options.runTime&&checkExists(this.options.previous.value)&&(this.options.value!==this.options.previous.value||this.options.suppresOnChange===!0)&&(this.options.previous.value=this.options.value,raiseEvent(this.element.attr("id"),"Control","OnChange"),this.options.suppresOnChange=!1)}};
/*!
 SourceCode.Forms.Controls.Web.ControlPack.Resources.JS.SFCChoiceFactory.js (Embedded resource)
*/
(typeof SourceCode=="undefined"||SourceCode===null)&&(SourceCode={});(typeof SourceCode.Forms=="undefined"||SourceCode.Forms===null)&&(SourceCode.Forms={});(typeof SourceCode.Forms.Controls=="undefined"||SourceCode.Forms.Controls===null)&&(SourceCode.Forms.Controls={});(typeof SourceCode.Forms.Controls.Web=="undefined"||SourceCode.Forms.Controls.Web===null)&&(SourceCode.Forms.Controls.Web={});SourceCode.Forms.Controls.Web.SFCChoiceFactory=function(n){this.Radio=null;this.Checkbox=null;this.Dropdown=null;this.widget=n};SourceCode.Forms.Controls.Web.SFCChoiceFactory.prototype={getControlHelper:function(n){switch(n.toUpperCase()){case"RADIO":return this.Radio===null?(this.Radio=new SourceCode.Forms.Controls.Web.SFCChoiceRadio(this.widget),this.Radio):this.Radio;case"CHECKBOX":return this.Checkbox===null?(this.Checkbox=new SourceCode.Forms.Controls.Web.SFCChoiceCheckbox(this.widget),this.Checkbox):this.Checkbox;case"DROPDOWN":default:return this.Dropdown===null?(this.Dropdown=new SourceCode.Forms.Controls.Web.SFCChoiceDropdown(this.widget),this.Dropdown):this.Dropdown}}};
/*!
 SourceCode.Forms.Controls.Web.ControlPack.Resources.JS.SFCChoiceRadio.js (Embedded resource)
*/
(typeof SourceCode=="undefined"||SourceCode===null)&&(SourceCode={});(typeof SourceCode.Forms=="undefined"||SourceCode.Forms===null)&&(SourceCode.Forms={});(typeof SourceCode.Forms.Controls=="undefined"||SourceCode.Forms.Controls===null)&&(SourceCode.Forms.Controls={});(typeof SourceCode.Forms.Controls.Web=="undefined"||SourceCode.Forms.Controls.Web===null)&&(SourceCode.Forms.Controls.Web={});SourceCode.Forms.Controls.Web.SFCChoiceRadio=function(n){SourceCode.Forms.Controls.Web.SFCChoiceBase.call(this,n)};SourceCode.Forms.Controls.Web.SFCChoiceRadio.prototype={designerInit:function(){},runtimeInit:function(){if(raiseEvent(this.element.prop("id"),"Control","Init"),this.options.dataSourceType==="Static"&&this.options.fixedListItems.substring(0,1)==="["){for(var n=JSON.parse(this.options.fixedListItems),q=0,t=0;t<n.length;t++)n[t].isDefault&&(q!=0?this.options.defaultValue+=this.options.delimiter+n[t].value:this.options.defaultValue=n[t].value,q++);this.options.value===""&&this.options.defaultValue!==""&&(this.options.value=this.options.defaultValue);this.options.selectEmptyValue||this.options.defaultValue!==""||(this.options.value=n[0].value);raiseEvent(this.element.attr("id"),"Control","OnSetItemsCompleted")}if(this.setTabIndex(),SourceCode.Forms.Controls.Web.SFCChoiceBase.prototype.bindEventOwnValue.call(this),this.bindEventRadio(),this.options.allowOwnValue===!0&&navigator.userAgent.contains("Firefox")){var r=$('<div class="overlay"> <\/div>');r.appendTo(this.element.find(".ownvalue"))}},initialize:function(){const n=$(".style-aware-radio-svg > svg, .input-control.radio > svg");this.radioSvgTemplate=n.length>0?n[0].outerHTML:"<!-- Missing Template -->";this.options.designtime?this.designerInit():this.runtimeInit();this.element.addClass("displayTypeRadio");this.options.hasEverSetItems=this.options.dataSourceType==="Static";(this.options.isReadOnly||this.options.isParentReadOnly)&&this.setReadOnly();this.options.tooltip.length>0&&this.element.attr("title",this.options.tooltip);this.options.dataSourceType==="Static"&&this.options.blockInitStackSave===!1?this._saveStackingItems():this.options.blockInitStackSave===!0&&(this.options.blockInitStackSave=!1);this.setStyles();this.setEnabled();this.options.dataSourceType==="Static"&&this.changeDisplayType()},configureOwnValueBehavior:function(){var n=this,t=this.element.find(".text-input.ownvalue");this.element.find(".ownoption .input-control.radio").on("click",function(t){if(n.options.disabled===!0)return!1;var r=$(t.delegateTarget);if(!r.hasClass("checked")){r.radiobutton().radiobutton("check");var u=n.element.find(".text-input.ownvalue");u.textbox().textbox("enable");u.find("input:text").trigger("focus");for(var f=n.element.find(".choice-control-item-row:not(.ownoption)").find(".input-control.radio"),q=0,e=f.length;q<e;q++)$(f[q]).radiobutton().radiobutton("uncheck")}return n.options.value=n.getSelectedValue(),SourceCode.Forms.Controls.Web.SFCChoiceBase.prototype.raiseOnChangeEvent.call(n),!1});this.element.find(".choice-control-item-row:not(.ownoption) .input-control.radio").on("click",function(t){if(n.options.disabled===!0)return!1;var q=$(t.target);if(q.hasClass("input-control")&&q.is("input:radio")){var r=n.element.find(".ownvalue");r.textbox().textbox("disable");var u=n.element.find(".choice-control-item-row.ownoption").find(".input-control.radio");u.radiobutton().radiobutton("uncheck")}});this.element.find(".input-control .input-control-text").on("mouseenter",function(){var n=$(this);this.offsetWidth<this.scrollWidth&&!n.attr("title")&&n.attr("title",n.text())});this.element.find(".text-input.ownvalue").on("click",function(t){if(n.options.disabled!==!0){var q=$(this),r=q.siblings("label.input-control.radio").last();r.closest(".stylewrapper").find("input:radio").radiobutton().radiobutton("uncheck");r.radiobutton().radiobutton("check");n.options.value=n.getSelectedValue();SourceCode.Forms.Controls.Web.SFCChoiceBase.prototype.raiseOnChangeEvent.call(n);q.hasClass("disabled")&&(q.textbox("enable"),q.find('input[type="text"]').trigger("focus"));navigator.userAgent.contains("Firefox")&&$(t.target.parentNode).closest(".ownvalue").prev().find("input")[0].setAttribute("tabindex",n.options.tabIndex)}});this.element.find(".text-input.ownvalue").on("focus",function(){$(this).find("input")[0].setAttribute("tabindex",n.options.tabIndex)});t.find("input").on("blur",function(){SourceCode.Forms.Controls.Web.SFCChoiceBase.prototype.raiseOnChangeEvent.call(n)})},executeOnSetItemsCompleted:function(){this.options.designtime===!1&&this.options.preview===!1&&this.options.onSetItemsCompleted===!0&&(this.options.value="",this.options.onSetItemsCompleted=!1,raiseEvent(this.element.attr("id"),"Control","OnSetItemsCompleted"))},getSelectedValue:function(){var t=[],n=this.element.find(".checked").find("input");if(n.length>0){var q;q=n.parent().parent().hasClass("ownoption")?this.element.find(".ownvalue").find("input").val():n[0].value;t.push(q)}return t.join(this.options.delimiter)},clearSelection:function(){var n=this.element.find(".ownvalue"),t=this.element.find(".input-control").filter(".radio");this.element.find(".input-control").filter(".radio").radiobutton().radiobutton("uncheck");this.options.allowOwnValue&&(n.find(":text").val(""),n.textbox().textbox("disable"))},clear:function(){this.element.find(".controlWrapper").children().remove()},databind:function(){this.clear();this.options.designtime===!0&&this.options.dataSourceType!=="Static"?this.setDummyData():(this.bindDataToRadio(),this.setAllowOwnValue(),this.applyValue(),this.options.hasEverSetItems=!0,this.options.settingItems=!1,this.options.previous.settingItems=!1,this.toggleModal(),this.setHeight(),this._saveStackingItems())},_getDisplayValue:function(n){var t="",q=parseXML(this.options.displayTemplate).selectSingleNode("Template").childNodes;if(q)for(var r=0;r<q.length;r++){var u=q[r];switch(u.getAttribute("SourceType")){case"Value":t+=u.selectSingleNode("SourceValue").text;break;default:t+=n.selectSingleNode("fields/field[@name='{0}']/value".format(u.getAttribute("SourceID"))).text}}return t},createStaticElements:function(n){var q="";if(n.substring(0,1)==="[")try{items=JSON.parse(n)}catch(f){q=parseXML(n);items=q.selectNodes("Items/Item")}else q=parseXML(n),items=q.selectNodes("Items/Item");for(var u="",t=0;t<items.length;t++){var r="";r=typeof items[t].display!="undefined"&&items[t].display!=null?items[t].display:items[t].text;r=SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(r);u+=this.addCustomOption(r,items[t].value)}this.finshesAddingOptions(u,this.options.allowOwnValue)},widgetnizeElement:function(){if(this.options.designtime===!1){var n=this.element.find("input"),t=this.element.find(".input-control").filter(".radio");n.filter(":radio").attr("name",this.element.attr("id")+"_choiceName");t.radiobutton();this.element.find(".input-control").filter(".checkbox").checkbox();n.filter(":text").textbox()}},bindDataToRadio:function(n){if(this.options.designtime)typeof n!="undefined"?this.options.dataSourceType==="Static"?this.createStaticElements(n.selectSingleNode("Property[Name='FixedListItems']/Value").text):this.setDummyData():typeof n=="undefined"&&(this.options.dataSourceType==="Static"?this.createStaticElements(this.options.fixedListItems):this.setDummyData());else if(this.options.dataSourceType==="SmartObject"){var e="",o=!1,q="",r="",s=!1,h=this.options.displaySO?this.options.displaySO:this.options.associationSO,u=this.options.jsonData;if(checkExists(u)&&(h?displayNodes=u.collection:(displayNodes=u,o=!0)),!checkExists(displayNodes))return;for(var t=0;t<displayNodes.length;t++){if(o?(q=displayNodes[t].Name,r=q):this.options.associationSO==h?(q=UtilitiesHelper.setDisplayTemplateValueFromJson(this.options.displayTemplate,displayNodes[t].fields),r=displayNodes[t].fields[this.options.valueProperty].value):(r=null,checkExists(displayNodes[t].joins)&&displayNodes[t].joins.length>0&&(q=UtilitiesHelper.setDisplayTemplateValueFromJson(this.options.displayTemplate,displayNodes[t].joins[0].fields),r=displayNodes[t].fields[this.options.valueProperty].value)),!s){var c=displayNodes[t].fields[this.options.defaultSOProperty];if(checkExists(c)){var f=c.value;checkExists(f)&&typeof f=="string"&&f.toUpperCase()==="TRUE"&&(s=!0,this.options.value=r)}}q=SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(q);r!=null&&(e+=this.addCustomOption(q,r))}this.finshesAddingOptions(e)}else this.createStaticElements(this.options.fixedListItems);this.widgetnizeElement()},addCustomOption:function(n,t){checkExistsNotEmpty(n)===!1&&(n="");(checkExistsNotEmpty(t)===!1||t===!1)&&(t=n);var q='<div class="choice-control-item-row">';return q+='<label class="input-control radio style-aware" title="{2}">',q+='<input type="radio" class="input-control" value="{0}" name="{1}_choiceName" />',q+='<span class="input-control-img"><\/span>',!this.radioSvgTemplate||(q+=this.radioSvgTemplate),q+='<span class="input-control-text">{2}<\/span>',q+="<\/label>",q+="<\/div>",q.format(t,this.element.attr("id"),n)},finshesAddingOptions:function(n,t){var q=this.element.find(".controlWrapper");q.find(".input-control.select-box.dropdown-box").remove();t===!0?q[0].innerHTML=n+q[0].innerHTML:(q[0].innerHTML+=n,SourceCode.Forms.Browser.msie&&(this.options.items=this.options.allowOwnValue?this.element.find(".choice-control-item-row:not(:last-child)"):this.element.find(".choice-control-item-row")))},applyValue:function(){this.clearSelection();this.options.runTime&&(checkExistsNotEmpty(this.options.value)?this.setRadioSelected():this.options.value="",SourceCode.Forms.Controls.Web.SFCChoiceBase.prototype.raiseOnChangeEvent.call(this));this.setReadOnly();this.setEnabled();this.setTabIndex()},initStyleBuilderPreview:function(n,t,q){this.options.displayType=t;this.options.style=q;this.setDummyData()},selectRadio:function(){for(var t=this.element.find(".radio:not(.stackContainer)"),r,u=!1,n=0,f=t.length;n<f;n++)if(r=$(t[n]).find("input").val(),r===this.options.value){$(t[n]).radiobutton().radiobutton("check");u=!0;break}if(this.options.allowOwnValue&&!u){var e=this.element.find(".ownoption").find(".radio"),q=this.element.find(".ownvalue").find("input");q.val(this.options.value);q.textbox().textbox("hideWatermark");e.radiobutton().radiobutton("check");this.options.disabled!==!0&&q.textbox().textbox("enable")}},setRadioSelected:function(){switch(this.options.dataSourceType.toUpperCase()){case"UNDEFINED":return;case"SMARTOBJECT":case"STATIC":if(this.options.designtime||this.options.value.length==0)return;this.selectRadio()}},applyDisplayValue:function(){(this.options.hasEverSetItems===!1||this.options.settingItems===!0)&&this.setRadioDisplayValue()},setRadioDisplayValue:function(){this.clear();this.finshesAddingOptions(this.addCustomOption(this.options.initialDisplayValue));this.element.find(".input-control").filter(".radio").radiobutton().radiobutton("check")},toggleModal:function(){this.toggleRadioModal();this.options.settingItems===!1&&this.widget.executeOnSetItemsCompleted()},toggleRadioModal:function(){if(this.element.showControlBusyModal(this.options.settingItems,{innerPositions:[{"background-position":"center"}]}),this.options.allowOwnValue===!0){var n=this.element.find(".input-control").filter(".radio").last();this.options.settingItems===!0?n.radiobutton().radiobutton("readonly"):this.setReadOnly()}},setStyles:function(){var n=this.element.find(".stylewrapper"),t={},r=this;if(t={border:n,background:n,margin:n,padding:n,font:n,horizontalAlign:n},StyleHelper.setStyles(t,this.options.style),this.options.allowOwnValue===!0){var q=this.element.find("input").filter(":text");t={font:q,horizontalAlign:q};StyleHelper.setStyles(t,this.options.style)}n.css("width","auto");this.options.runTime?this.element.css("width",this.options.width):this.element.css("width","100%");setTimeout(function(){r.setHeight()},0)},setValueWithOnSet:function(n){checkExistsNotEmpty(n.Value)||this.clearSelection();try{parseXML(n.Value)}catch(t){this.setNonXmlValues(n.Value)}if(n.returnResult)return this.options.settingItems?!1:n.Value},setNonXmlValues:function(n){for(var o=n.split(this.options.delimiter),s=this.element.find(".choice-control-item-row"),t=!1,q=0,r;r=s[q];++q){if(t)break;for(var u=$(r).find("input[type=radio]"),h=u.val().toLowerCase(),f=0,e;e=o[f];++f)if(e.toLowerCase()===h){u.radiobutton().radiobutton("check");t=!0;break}}},setHeight:function(){var n=this.options.height;n===""&&(n="auto");n!=="auto"&&n.indexOf("px")===-1&&(n=n+"px");var q=this.element.find(".stylewrapper");if(q[0]!==undefined){var r=[q.css("marginTop"),q.css("marginBottom")],t=n;if(r.length>0&&t!=="auto")for(var u=0;u<r.length;u++){var e=parseInt(r[u]);r[u]!=="auto"&&e>0&&(t=parseInt(t)-e,t=t+"px")}q[0].style.height=t;q.height()>0&&(this.element[0].style.height=this.options.height)}var o=this.element.closest(".form-control");if(o.length>0){var f=o.data("panel");checkExists(f)===!0&&(f.equalizeWidths(),f.equalizeHeights())}this.options.height=n},changeDisplayType:function(){var n=this.element.find(".controlWrapper");this.options.displaychange==!0&&n.empty();this.databind();this.options.displaychange==!0&&(this.options.blockInitStackSave=!0);this.applyValue();this.setReadOnly();this.bindEventRadio();this.configureOwnValueBehavior()},bindEventRadio:function(){var n=this;this.element.find(".radio").on("click",function(t){var q=$(t.target);q.hasClass("input-control-img")||q.hasClass("input-control-text")||(n.options.value=n.getSelectedValue(),SourceCode.Forms.Controls.Web.SFCChoiceBase.prototype.raiseOnChangeEvent.call(n))})},setTooltip:function(){this.element.attr("title",this.options.tooltip)},setAllowOwnValue:function(){var n=this.element.find(".controlWrapper");if(arguments[0]&&(this.options.allowOwnValue=arguments[0]),this.options.allowOwnValue===!0){var f=this.element.find(".ownvalue").length>0;if(!f){var r="";r+=this.addCustomOption(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Properties.Choice.SpecifyOwnValueMessage," ");this.finshesAddingOptions(r);var u=$(SCTextbox.html());u.addClass("ownvalue");n.find("label").last().after(u);n.children("div").last().addClass("ownoption");var t='<div class="input-control-watermark" style="display: block;">{0}<\/div>';if(t=t.format(this.options.watermarkText),this.element.find(".ownvalue").find("input:text").after(t),navigator.userAgent.contains("Firefox")){var q=this.element.find(".overlay");q.length===0&&(q=$('<div class="overlay"> <\/div>'),q.appendTo(this.element.find(".ownvalue")))}}}else n.find(".ownvalue").length>0&&n.children("div").last().remove();this.element.find(".choice-default-value-picker-mini").length>0&&this.element.find(".own-value-bullet-for-dropdown").removeClass("own-value-bullet-for-dropdown");(this.options.designtime||this.options.dataSourceType==="SmartObject")&&n.find(".withownvalue").find("input").filter(":text").val("");this.setStyles()},setReadOnly:function(){var t=this.element,r,q;if(this.options.isReadOnly===!0||this.options.isParentReadOnly===!0){if(t.addClass("read-only"),r=t.find(".input-control").filter(".radio").radiobutton(),r.radiobutton("readonly"),this.options.allowOwnValue){q=t.find(".ownvalue");var n=q.textbox();q.hasClass("disabled")?(n.textbox("enable"),n.textbox("readonly"),n.textbox("disable")):n.textbox("readonly")}}else if(t.removeClass("read-only"),r=t.find(".input-control").filter(".radio"),r.radiobutton().radiobutton("editable"),this.options.allowOwnValue){q=t.find(".ownvalue");var n=q.textbox();q.hasClass("disabled")?(n.textbox("enable"),n.textbox("editable"),n.textbox("disable")):n.textbox("editable")}},setEnabled:function(){var q=this.element.find(".input-control"),n=q.filter(".radio"),r=n.radiobutton(),u=this.element.find(".ownoption"),t=this.element.find(".ownvalue ");this.options.disabled===!0?(r.radiobutton("disable"),n.addClass("disabled"),u.addClass("default"),t.addClass("default"),t.addClass("disabled"),this.options.allowOwnValue===!0&&t.find("input:text")[0].setAttribute("disabled","disabled"),this.element.addClass("disabled")):(r.radiobutton("enable"),n.removeClass("disabled"),u.removeClass("default"),t.removeClass("default"),this.options.allowOwnValue===!0&&n.last().hasClass("checked")===!0&&q.filter(":text").textbox().textbox("enable"),this.element.removeClass("disabled"))},setTabIndex:function(){var n=this.options.tabIndex;if(this.options.disabled===!0&&(n=-1),navigator.userAgent.contains("Firefox")){var q=this.element.find("input:radio");$.each(q,function(n,t){t.tabIndex=-1});this.options.allowOwnValue===!0&&(q[0].tabIndex=n)}else if(this.options.data.length===0)this.options.allowOwnValue===!0&&(this.element.find(".ownvalue")[0].getElementsByTagName("input")[0].tabIndex=n);else{for(var r=this.element[0].getElementsByTagName("Input"),t=0;t<r.length;t++)r[t].tabIndex=n;this.options.allowOwnValue===!0&&(this.element.find(".ownvalue")[0].getElementsByTagName("input")[0].tabIndex=-1)}},_saveStackingItems:function(){this.options.items=this.element.find(".choice-control-item-row:not(.ownoption)");this.options.stackCapacity>=1&&this.options.items.length>0&&(this.options.stackCapacity!==1||this.options.stackedBy!=="rows")&&this.setStackedByAndStackCapacity()},setStackedByAndStackCapacity:function(){if(this.options.stackCapacity==Infinity||this.options.stackCapacity===0||this.options.stackCapacity===undefined||this.options.stackedBy===undefined||this.options.items===null)return!1;var q=this.options.items,u=1;if(this.options.stackedBy==="rows"){u=Math.min(this.options.stackCapacity,q.length);for(var r=[],n=0;n<u;n++)r.push($('<div class="stack"><\/div>'));for(var f=0,t=0;t<q.length;t++)r[f].append(q[t]),f++,f==u&&(f=0)}else{u=Math.ceil(q.length/this.options.stackCapacity);for(var r=[],n=0;n<u;n++){r.push($('<div class="stack"><\/div>'));for(var t=0;t<this.options.stackCapacity;t++)if(r[n].append(q[n*this.options.stackCapacity+t]),n*this.options.stackCapacity+t+1==q.length)break}}for(var o=$('<div class="stackContainer {0}"><\/div>'.format(this.options.displayType)),e=0;e<r.length;e++)o.append($(r[e])[0]);var s=this.element.find(".controlWrapper");s.find(".stackContainer").remove();s.find(".choice-control-item-row:not(.ownoption)").remove();this.element.find(".controlWrapper").prepend(o)},setDummyData:function(){this.options.fixedListItems='[{ "display": "option 1", "value": "option 1" }, { "display": "option 2", "value": "option 2" }, { "display": "option 3", "value": "option 3" }]';this.options.dataSourceType="Static";this.widget.applyChanges()},applyWatermark:function(){},destroy:function(){this.element.off();var n=this.element.find(".ownvalue"),t=n.siblings("label");n.off();t.off();$(document).off("click","#"+this.element.attr("id"));this.element.children().remove();$.Widget.prototype.destroy.call(this)}};
/*!
 SourceCode.Forms.Controls.Web.ControlPack.Resources.JS.SFCChoiceCheckbox.js (Embedded resource)
*/
(typeof SourceCode=="undefined"||SourceCode===null)&&(SourceCode={});(typeof SourceCode.Forms=="undefined"||SourceCode.Forms===null)&&(SourceCode.Forms={});(typeof SourceCode.Forms.Controls=="undefined"||SourceCode.Forms.Controls===null)&&(SourceCode.Forms.Controls={});(typeof SourceCode.Forms.Controls.Web=="undefined"||SourceCode.Forms.Controls.Web===null)&&(SourceCode.Forms.Controls.Web={});SourceCode.Forms.Controls.Web.SFCChoiceCheckbox=function(n){SourceCode.Forms.Controls.Web.SFCChoiceBase.call(this,n)};SourceCode.Forms.Controls.Web.SFCChoiceCheckbox.prototype={designerInit:function(){},runtimeInit:function(){if(raiseEvent(this.element.prop("id"),"Control","Init"),this.options.dataSourceType==="Static"&&this.options.fixedListItems.substring(0,1)==="["){for(var n=this,t=JSON.parse(this.options.fixedListItems),r=0,q=0;q<t.length;q++)t[q].isDefault&&(r!=0?n.options.defaultValue+=n.options.delimiter+t[q].value:n.options.defaultValue=t[q].value,r++);n.options.value===""&&n.options.defaultValue!==""&&(n.options.value=n.options.defaultValue);n.options.selectEmptyValue||n.options.defaultValue!==""||(n.options.value=t[0].value);raiseEvent(this.element.attr("id"),"Control","OnSetItemsCompleted")}if(this.setTabIndex(),this.bindEventCheckbox(),SourceCode.Forms.Controls.Web.SFCChoiceBase.prototype.bindEventOwnValue.call(this),this.options.allowOwnValue===!0&&navigator.userAgent.contains("Firefox")){var u=$('<div class="overlay"><\/div>');u.appendTo(this.element.find(".ownvalue"))}},initialize:function(){const n=$(".style-aware-checkbox-svg > svg, .input-control.checkbox > svg");this.checkboxSvgTemplate=n.length>0?n[0].outerHTML:"<!-- Missing Template -->";this.options.designtime?this.designerInit():this.runtimeInit();this.element.addClass("displayTypeCheckbox");(this.options.isReadOnly||this.options.isParentReadOnly)&&this.setReadOnly();this.options.tooltip.length>0&&this.element.attr("title",this.options.tooltip);this.options.dataSourceType==="Static"&&this.options.blockInitStackSave===!1?this._saveStackingItems():this.options.blockInitStackSave===!0&&(this.options.blockInitStackSave=!1);this.options.dataSourceType==="Static"&&this.changeDisplayType()},configureOwnValueBehavior:function(){var n=this,t=this.element.find("div.input-control.text-input.ownvalue"),q=t.siblings("label.input-control.checkbox").last();this.element.find(".ownoption .input-control.checkbox").on("click",function(t){if(n.options.disabled===!0)return!1;var q=$(t.currentTarget),r=n.element.find(".text-input.ownvalue");return q.hasClass("checked")?(q.checkbox().checkbox("uncheck"),r.textbox().textbox("disable")):(q.checkbox().checkbox("check"),r.textbox().textbox("enable"),r.find("input:text").trigger("focus")),n.options.value=n.getSelectedValue(),SourceCode.Forms.Controls.Web.SFCChoiceBase.prototype.raiseOnChangeEvent.call(n),!1});this.element.find("input:checkbox").on("keydown",function(t){switch(t.keyCode){case $.ui.keyCode.RIGHT:case $.ui.keyCode.DOWN:n.goToNextItem(t);break;case $.ui.keyCode.LEFT:case $.ui.keyCode.UP:n.goToPreviousItem(t);break;case $.ui.keyCode.SPACE:if($(this).closest(".choice-control-item-row").hasClass("ownoption"))return n.clickOwnValueCheckbox(t),!1}});this.element.find(".input-control .input-control-text").on("mouseenter",function(){var n=$(this);this.offsetWidth<this.scrollWidth&&!n.attr("title")&&n.attr("title",n.text())});q.on("change",function(){q.hasClass("checked")===!1?(t.find("input:text").textbox().textbox("enable"),t.find("input:text").trigger("focus")):t.find("input:text").textbox().textbox("disable")});t.on("click",function(){if(n.options.disabled!==!0){var q=$(this);n.element.find(".input-control").filter(".checkbox").last().checkbox().checkbox("check");n.options.value=n.getSelectedValue();SourceCode.Forms.Controls.Web.SFCChoiceBase.prototype.raiseOnChangeEvent.call(n);q.hasClass("disabled")&&(q.textbox("enable"),t.find('input[type="text"]').trigger("focus"))}});t.on("focus",function(){$(this).find("input")[0].setAttribute("tabindex",n.options.tabIndex)});t.find("input").on("blur",function(){SourceCode.Forms.Controls.Web.SFCChoiceBase.prototype.raiseOnChangeEvent.call(n)})},clickOwnValueCheckbox:function(){var n=this.element.find(".text-input.ownvalue"),t=this.element.find(".ownoption > .checkbox");t.hasClass("checked")?(t.checkbox().checkbox("uncheck"),n.textbox().textbox("disable")):(t.checkbox().checkbox("check"),n.textbox().textbox("enable"),n.find("input:text").trigger("focus"))},goToNextItem:function(n){var t=this.element.find("input:checkbox"),q=$(n.target),r=0;if(q.length===1){var u=t.index(q);u+1<t.length&&(r=u+1)}t.eq(r).trigger("focus");n.preventDefault()},goToPreviousItem:function(n){var t=this.element.find("input:checkbox"),q=$(n.target),r=t.length-1;if(q.length===1){var u=t.index(q);u>0&&(r=u-1)}t.eq(r).trigger("focus");n.preventDefault()},getSelectedValue:function(){for(var n=[],q=this.element.find(".checked").find("input"),t=0,r=q.length;t<r;t++){var u=q[t].value;n.push(u)}return this.options.allowOwnValue&&this.element.find(".input-control.checkbox").last().hasClass("checked")&&(n.pop(),n.push(this.element.find(".ownvalue").find("input").val())),n.join(this.options.delimiter)},clearSelection:function(){var n=this.element,t=n.find(".ownvalue");n.find(".input-control").filter(".checkbox").checkbox().checkbox("uncheck");this.options.allowOwnValue&&(t.find(":text").val(""),t.textbox().textbox("disable"))},clear:function(){this.element.find(".controlWrapper").children().remove()},databind:function(){this.clear();this.options.designtime===!0&&this.options.dataSourceType!=="Static"?this.setDummyData():(this.bindDataToCheckBox(),this.setAllowOwnValue(),this.options.hasEverSetItems=!0,this.options.settingItems=!1,this.options.previous.settingItems=!1,this.toggleModal(),this.setHeight(),this._saveStackingItems())},_getDisplayValue:function(n){var t="",q=parseXML(this.options.displayTemplate).selectSingleNode("Template").childNodes;if(q)for(var r=0;r<q.length;r++){var u=q[r];switch(u.getAttribute("SourceType")){case"Value":t+=u.selectSingleNode("SourceValue").text;break;default:t+=n.selectSingleNode("fields/field[@name='{0}']/value".format(u.getAttribute("SourceID"))).text}}return t},createStaticElements:function(n){var q="";if(n.substring(0,1)==="[")try{items=JSON.parse(n)}catch(f){q=parseXML(n);items=q.selectNodes("Items/Item")}else q=parseXML(n),items=q.selectNodes("Items/Item");for(var u="",t=0;t<items.length;t++){var r="";r=typeof items[t].display!="undefined"&&items[t].display!=null?items[t].display:items[t].text;r=SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(r);u+=this.addCustomOption(r,items[t].value)}this.finshesAddingOptions(u,this.options.allowOwnValue)},widgetnizeElement:function(){if(this.options.designtime===!1){var n=this.element.find("input");n.filter(":radio").attr("name",this.element.attr("name"));this.element.find(".input-control").filter(".checkbox").checkbox();n.filter(":text").textbox()}},bindDataToCheckBox:function(n){if(this.options.designtime)typeof n!="undefined"?this.options.dataSourceType==="Static"?this.createStaticElements(n.selectSingleNode("Property[Name='FixedListItems']/Value").text):this.setDummyData():typeof n=="undefined"&&(this.options.dataSourceType==="Static"?this.createStaticElements(this.options.fixedListItems):this.setDummyData());else if(this.options.dataSourceType==="SmartObject"){var e="",o=!1,q="",r="";this.options.defaultValueArray=[];var s=this.options.displaySO?this.options.displaySO:this.options.associationSO,u=this.options.jsonData;if(checkExists(u)&&(s?displayNodes=u.collection:(displayNodes=u,o=!0)),!checkExists(displayNodes))return;for(var t=0;t<displayNodes.length;t++){o?(q=displayNodes[t].Name,r=q):this.options.associationSO==s?(q=UtilitiesHelper.setDisplayTemplateValueFromJson(this.options.displayTemplate,displayNodes[t].fields),r=displayNodes[t].fields[this.options.valueProperty].value):(r=null,checkExists(displayNodes[t].joins)&&displayNodes[t].joins.length>0&&(q=UtilitiesHelper.setDisplayTemplateValueFromJson(this.options.displayTemplate,displayNodes[t].joins[0].fields),r=displayNodes[t].fields[this.options.valueProperty].value));var h=displayNodes[t].fields[this.options.defaultSOProperty];if(checkExists(h)){var f=h.value;checkExists(f)&&typeof f=="string"&&f.toUpperCase()==="TRUE"&&this.options.defaultValueArray.push(r)}q=SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(q);r!=null&&(e+=this.addCustomOption(q,r))}this.options.defaultValue=this.options.defaultValueArray.join(this.options.delimiter);this.finshesAddingOptions(e)}else this.createStaticElements(this.options.fixedListItems);this.widgetnizeElement()},addCustomOption:function(n,t){checkExistsNotEmpty(n)===!1&&(n="");(checkExistsNotEmpty(t)===!1||t===!1)&&(t=n);var q='<div class="choice-control-item-row">';return q+='<label class="input-control checkbox style-aware" title="{2}">',q+='<input type="checkbox" class="input-control" value="{0}" name="{1}" />',q+='<span class="input-control-img"><\/span>',!this.checkboxSvgTemplate||(q+=this.checkboxSvgTemplate),q+='<span class="input-control-text">{2}<\/span>',q+="<\/label>",q+="<\/div>",q.format(t,this.element.attr("name"),n)},finshesAddingOptions:function(n,t){var q=this.element.find(".controlWrapper");q.find(".input-control.select-box.dropdown-box").remove();t===!0?q[0].innerHTML=n+q[0].innerHTML:(q[0].innerHTML+=n,SourceCode.Forms.Browser.msie&&(this.options.items=this.options.allowOwnValue?this.element.find(".choice-control-item-row:not(:last-child)"):this.element.find(".choice-control-item-row")))},applyValue:function(){if(this.clearSelection(),this.options.runTime){if(checkExistsNotEmpty(this.options.value))this.setCheckboxSelected();else if(this.options.value="",this.options.defaultValue!=="")for(var n=0;n<this.options.defaultValueArray.length;n++)this.element.find('input[value="'+this.options.defaultValueArray[n]+'"]').checkbox().checkbox("check");SourceCode.Forms.Controls.Web.SFCChoiceBase.prototype.raiseOnChangeEvent.call(this)}this.setReadOnly();this.setEnabled();this.setTabIndex()},initStyleBuilderPreview:function(n,t,q){this.options.displayType=t;this.options.style=q;this.setDummyData()},selectCheckbox:function(){for(var r=this.options.value.split(this.options.delimiter),f=this.element.find(".checkbox"),n,t=[];r.length>0;){n=r.pop();var u=f.find("input").filter('[value="{0}"]'.format(n.replace("\\","\\\\")));u.length>0?u.parent().checkbox().checkbox("check"):t.push(n)}if(this.options.allowOwnValue&&t.length>0){var e=this.element.find(".ownoption").find(".checkbox"),q=this.element.find(".ownvalue").find("input"),o=t.pop();q.val(o);q.textbox().textbox("hideWatermark");e.checkbox().checkbox("check");this.options.disabled!==!0&&q.textbox().textbox("enable")}},setCheckboxSelected:function(){var t=this.element.find("input"),q=t.filter(":text"),n=this.element.find(".input-control").filter(".checkbox");switch(this.options.dataSourceType.toUpperCase()){case"UNDEFINED":return;case"SMARTOBJECT":if(this.options.designtime)return;this.options.value.length==0?this.options.allowOwnValue&&n.checkbox().checkbox("uncheck"):this.selectCheckbox();break;case"STATIC":this.options.value.length==0?this.options.allowOwnValue&&n.checkbox().checkbox("uncheck"):this.selectCheckbox()}},applyDisplayValue:function(){(this.options.hasEverSetItems===!1||this.options.settingItems===!0)&&this.setCheckboxDisplayValue()},setCheckboxDisplayValue:function(){var q="",n=[];this.clear();n=this.options.initialDisplayValue.split(this.options.delimiter);for(var t=0;t<n.length;t++){var u=n[t];q+=this.addCustomOption(u)}this.finshesAddingOptions(q);var f=this.element.find("input"),r=this.element.find(".input-control").filter(".checkbox");r.checkbox().checkbox("check");this.options.allowOwnValue===!0&&r.last().checkbox().checkbox("uncheck")},toggleModal:function(){this.toggleCheckboxModal();this.options.settingItems===!1&&this.widget.executeOnSetItemsCompleted()},toggleCheckboxModal:function(){if(this.element.showControlBusyModal(this.options.settingItems,{innerPositions:[{"background-position":"center"}]}),this.options.allowOwnValue===!0){var n=this.element.find(".input-control").filter(".checkbox").last();this.options.settingItems===!0?n.checkbox().checkbox("readonly"):this.setReadOnly()}},setStyles:function(){var n=this.element.find(".stylewrapper"),t={},r=this;if(t={border:n,background:n,margin:n,padding:n,font:n,horizontalAlign:n},StyleHelper.setStyles(t,this.options.style),this.options.allowOwnValue===!0){var q=this.element.find("input").filter(":text");t={font:q,horizontalAlign:q};StyleHelper.setStyles(t,this.options.style)}n.css("width","auto");this.options.runTime?this.element.css("width",this.options.width):this.element.css("width","100%");setTimeout(function(){r.setHeight()},0)},setValueWithOnSet:function(n){checkExistsNotEmpty(n.Value)||this.clearSelection();try{parseXML(n.Value)}catch(t){this.setNonXmlValues(n.Value)}if(n.returnResult)return this.options.settingItems?!1:n.Value},setNonXmlValues:function(n){for(var e=n.split(this.options.delimiter),o=this.element.find(".choice-control-item-row"),t=0,q;q=o[t];++t)for(var r=$(q).find("input[type=checkbox]"),s=r.val().toLowerCase(),u=0,f;f=e[u];++u)if(f.toLowerCase()===s){r.checkbox().checkbox("check");break}},setHeight:function(){var n=this.options.height;n===""&&(n="auto");n!=="auto"&&n.indexOf("px")===-1&&(n=n+"px");var q=this.element.find(".stylewrapper");if(q[0]!==undefined){var r=[q.css("marginTop"),q.css("marginBottom")],t=n;if(r.length>0&&t!=="auto")for(var u=0;u<r.length;u++){var e=parseInt(r[u]);r[u]!=="auto"&&e>0&&(t=parseInt(t)-e,t=t+"px")}q[0].style.height=t;q.height()>0&&(this.element[0].style.height=this.options.height)}var o=this.element.closest(".form-control");if(o.length>0){var f=o.data("panel");checkExists(f)===!0&&(f.equalizeWidths(),f.equalizeHeights())}this.options.height=n},changeDisplayType:function(){var n=this.element.find(".controlWrapper");this.options.displaychange==!0&&n.empty();this.databind();this.options.displaychange==!0&&(this.options.blockInitStackSave=!0);this.applyValue();this.setReadOnly();this.bindEventCheckbox();this.configureOwnValueBehavior()},bindEventCheckbox:function(){var n=this,t=this.element.find("div.input-control.text-input.ownvalue");this.element.find(".checkbox").on("click",function(t){var q=$(t.target);q.hasClass("input-control-img")||q.hasClass("input-control-text")||(n.options.value=n.getSelectedValue(),SourceCode.Forms.Controls.Web.SFCChoiceBase.prototype.raiseOnChangeEvent.call(n))})},setTooltip:function(){this.element.attr("title",this.options.tooltip)},setAllowOwnValue:function(){var n=this.element.find(".controlWrapper");if(arguments[0]&&(this.options.allowOwnValue=arguments[0]),this.options.allowOwnValue===!0){var f=this.element.find(".ownvalue").length>0;if(!f){var u="";u+=this.addCustomOption(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Properties.Choice.SpecifyOwnValueMessage," ");this.finshesAddingOptions(u);var t=$(SCTextbox.html());t.addClass("ownvalue");n.find("label").last().after(t);n.children("div").last().addClass("ownoption");var q='<div class="input-control-watermark" style="display: block;">{0}<\/div>';if(q=q.format(this.options.watermarkText),this.element.find(".ownvalue").find("input:text").after(q),t.textbox().textbox("disable"),navigator.userAgent.contains("Firefox")){var r=this.element.find(".overlay");r.length===0&&(r=$('<div class="overlay"> <\/div>'),r.appendTo(this.element.find(".ownvalue")))}}}else n.find(".ownvalue").length>0&&n.children("div").last().remove();this.element.find(".choice-default-value-picker-mini").length>0&&this.element.find(".own-value-bullet-for-dropdown").removeClass("own-value-bullet-for-dropdown");(this.options.designtime||this.options.dataSourceType==="SmartObject")&&n.find(".withownvalue").find("input").filter(":text").val("");this.setStyles()},setReadOnly:function(){var t=this.element,r,q;if(this.options.isReadOnly===!0||this.options.isParentReadOnly===!0){if(t.addClass("read-only"),r=t.find(".input-control").filter(".checkbox").checkbox(),r.checkbox("readonly"),this.options.allowOwnValue){q=t.find(".ownvalue");var n=q.textbox();q.hasClass("disabled")?(n.textbox("enable"),n.textbox("readonly"),n.textbox("disable")):n.textbox("readonly")}}else if(t.removeClass("read-only"),r=t.find(".input-control").filter(".checkbox").checkbox(),r.checkbox("editable"),this.options.allowOwnValue){q=t.find(".ownvalue");var n=q.textbox();q.hasClass("disabled")?(n.textbox("enable"),n.textbox("editable"),n.textbox("disable")):n.textbox("editable")}},setEnabled:function(){var q=this.element.find(".input-control"),n=q.filter(".checkbox"),r=n.checkbox(),u=this.element.find(".ownoption"),t=this.element.find(".ownvalue ");this.options.disabled===!0?(r.checkbox("disable"),n.addClass("disabled"),u.addClass("default"),t.addClass("default"),t.addClass("disabled"),this.options.allowOwnValue===!0&&t.find("input:text")[0].setAttribute("disabled","disabled"),this.element.addClass("disabled")):(r.checkbox("enable"),n.removeClass("disabled"),u.removeClass("default"),t.removeClass("default"),this.options.allowOwnValue===!0&&n.last().hasClass("checked")===!0&&q.filter(":text").textbox().textbox("enable"),this.element.removeClass("disabled"))},setTabIndex:function(){var n=this.options.tabIndex;if(this.options.disabled===!0&&(n=-1),this.options.data.length===0)this.options.allowOwnValue===!0&&(this.element.find(".ownvalue")[0].getElementsByTagName("input")[0].tabIndex=n);else{for(var q=this.element[0].getElementsByTagName("Input"),t=0;t<q.length;t++)q[t].tabIndex=n;this.options.allowOwnValue===!0&&(this.element.find(".ownvalue")[0].getElementsByTagName("input")[0].tabIndex=-1)}},_saveStackingItems:function(){this.options.items=this.element.find(".choice-control-item-row:not(.ownoption)");this.options.stackCapacity>=1&&this.options.items.length>0&&(this.options.stackCapacity!==1||this.options.stackedBy!=="rows")&&this.setStackedByAndStackCapacity()},setStackedByAndStackCapacity:function(){if(this.options.stackCapacity==Infinity||this.options.stackCapacity===0||this.options.stackCapacity===undefined||this.options.stackedBy===undefined||this.options.items===null)return!1;var q=this.options.items,u=1;if(this.options.stackedBy==="rows"){u=Math.min(this.options.stackCapacity,q.length);for(var r=[],n=0;n<u;n++)r.push($('<div class="stack"><\/div>'));for(var f=0,t=0;t<q.length;t++)r[f].append(q[t]),f++,f==u&&(f=0)}else{u=Math.ceil(q.length/this.options.stackCapacity);for(var r=[],n=0;n<u;n++){r.push($('<div class="stack"><\/div>'));for(var t=0;t<this.options.stackCapacity;t++)if(r[n].append(q[n*this.options.stackCapacity+t]),n*this.options.stackCapacity+t+1==q.length)break}}for(var o=$('<div class="stackContainer {0}"><\/div>'.format(this.options.displayType)),e=0;e<r.length;e++)o.append($(r[e])[0]);var s=this.element.find(".controlWrapper");s.find(".stackContainer").remove();s.find(".choice-control-item-row:not(.ownoption)").remove();this.element.find(".controlWrapper").prepend(o)},setDummyData:function(){this.options.fixedListItems='[{ "display": "option 1", "value": "option 1" }, { "display": "option 2", "value": "option 2" }, { "display": "option 3", "value": "option 3" }]';this.options.dataSourceType="Static";this.widget.applyChanges()},applyWatermark:function(){},destroy:function(){this.element.off();var n=this.element.find(".ownvalue"),t=n.siblings("label");n.off();t.off();$(document).off("click","#"+this.element.attr("id"));this.element.children().remove();$.Widget.prototype.destroy.call(this)}};
/*!
 SourceCode.Forms.Controls.Web.ControlPack.Resources.JS.SFCChoiceDropdown.js (Embedded resource)
*/
(typeof SourceCode=="undefined"||SourceCode===null)&&(SourceCode={});(typeof SourceCode.Forms=="undefined"||SourceCode.Forms===null)&&(SourceCode.Forms={});(typeof SourceCode.Forms.Controls=="undefined"||SourceCode.Forms.Controls===null)&&(SourceCode.Forms.Controls={});(typeof SourceCode.Forms.Controls.Web=="undefined"||SourceCode.Forms.Controls.Web===null)&&(SourceCode.Forms.Controls.Web={});SourceCode.Forms.Controls.Web.SFCChoiceDropdown=function(n){SourceCode.Forms.Controls.Web.SFCChoiceBase.call(this,n)};SourceCode.Forms.Controls.Web.SFCChoiceDropdown.prototype={_svgTemplate:'<svg viewBox="0 0 18 18" fill="none" xmlns="http://www.w3.org/2000/svg">    <circle cx="9" cy="9" r="8" stroke-width="1" class="svg-radio-btn-circle"/>    <circle cx="9" cy="9" r="4" class="svg-radio-btn-checked" /><\/svg> ',get radioSvgTemplate(){const n=$(".style-aware-radio-svg > svg, .input-control.radio > svg");return n.length>0?n[0].outerHTML:this._svgTemplate},designerInit:function(){},runtimeInit:function(){if(raiseEvent(this.element.prop("id"),"Control","Init"),this.options.dataSourceType==="Static"&&this.options.fixedListItems.substring(0,1)==="["){for(var n=this,t=JSON.parse(this.options.fixedListItems),r=0,q=0;q<t.length;q++)t[q].isDefault&&(r!=0?n.options.defaultValue+=n.options.delimiter+t[q].value:n.options.defaultValue=t[q].value,r++);n.options.value===""&&n.options.defaultValue!==""&&(n.options.value=n.options.defaultValue);n.options.selectEmptyValue||n.options.defaultValue!==""||(n.options.value=t[0].value);raiseEvent(this.element.attr("id"),"Control","OnSetItemsCompleted")}if(this.options.allowOwnValue===!0&&(this.element.find(".controlWrapper").children().eq(0).wrap('<div class="choice-control-item-row"><\/div>'),navigator.userAgent.contains("Firefox"))){var u=$('<div class="overlay"> <\/div>');u.appendTo(this.element.find(".ownvalue"))}this._initializeDropDown();this.setTabIndex();this.bindEventDropdown();this.configureOwnValueBehavior();this.setDropDownSelected();SourceCode.Forms.Controls.Web.SFCChoiceBase.prototype.bindEventOwnValue.call(this)},initialize:function(){if(this.options.designtime?this.designerInit():this.runtimeInit(),this.options.allowOwnValue===!0&&navigator.userAgent.contains("Firefox")){var n=$('<div class="overlay"> <\/div>');n.appendTo(this.element.find(".ownvalue"))}(this.options.isReadOnly||this.options.isParentReadOnly)&&this.setReadOnly();this.options.tooltip.length>0&&this.element.attr("title",this.options.tooltip);this.options.dataSourceType==="Static"&&this.options.blockInitStackSave===!1?this._saveStackingItems():this.options.blockInitStackSave===!0&&(this.options.blockInitStackSave=!1);this.element.addClass("displayTypeDropdown");this.applyWatermark();this.options.hasEverSetItems=this.options.dataSourceType==="Static";this.setStyles();this.setEnabled()},_initializeDropDown:function(){var t=this.element.find("select");if(t.prop("disabled",!1),this.element.find(".dropdown").length===0&&(t.attr("id","{0}_drop-down-choice".format(this.element.attr("id"))),t.dropdown(),this.options.runTime&&this.bindDataToDropDown()),this.element.find("div.input-control.select-box.dropdown-box").addClass("choiceddl"),this.options.allowOwnValue){var n=this.element.find(".input-control").filter(".radio");$(n.find("input")[0]).attr("name",this.element.attr("name"));$(n.find("input")[1]).attr("name","");this.element.find("div.input-control.select-box.dropdown-box").addClass("withownvalue");n.radiobutton();n.removeClass("checkbox");this.element.find(".controlWrapper").find(".input-control.radio").last().hasClass("checked")===!0&&this.options.disabled!==!0&&this.element.find("div.input-control.ownvalue").textbox("enable")}},configureOwnValueBehavior:function(){var n=this,r=n.element,q=r.find("div.input-control.text-input.ownvalue"),e=q.siblings("label.input-control.checkbox").last(),u=q.siblings("label.input-control.radio").last(),t=r.find("select"),f=!1;r.find(".radio").on("click",function(u){if(n.options.disabled!==!0){var f=r.find(".radio"),e=f.eq(0),o=f.eq(1),s=$(u.delegateTarget),h=s.closest(".choice-control-item-row").hasClass("ownoption");h?(t.dropdown().dropdown("disable"),e.radiobutton().radiobutton("uncheck"),o.radiobutton().radiobutton("check"),q.textbox().textbox("enable"),q.find("input:text").trigger("focus")):(t.dropdown().dropdown("enable"),e.radiobutton().radiobutton("check"),o.radiobutton().radiobutton("uncheck"),q.textbox().textbox("disable"));n.options.value=n.getSelectedValue();SourceCode.Forms.Controls.Web.SFCChoiceBase.prototype.raiseOnChangeEvent.call(n)}});r.find(".input-control .input-control-text").on("mouseenter",function(){var n=$(this);this.offsetWidth<this.scrollWidth&&!n.attr("title")&&n.attr("title",n.text())});q.on("click",function(){if(n.options.disabled!==!0){var r=$(this),u=n.element.find(".radio"),f=u.eq(0),e=u.eq(1);f.radiobutton().radiobutton("uncheck");e.radiobutton().radiobutton("check");n.options.value=n.getSelectedValue();r.hasClass("disabled")&&(r.textbox("enable"),q.find('input[type="text"]').trigger("focus"));t.dropdown("disable");SourceCode.Forms.Controls.Web.SFCChoiceBase.prototype.raiseOnChangeEvent.call(n)}});q.on("focus",function(){$(this).find("input")[0].setAttribute("tabindex",n.options.tabIndex)});q.find("input").on("blur",function(){SourceCode.Forms.Controls.Web.SFCChoiceBase.prototype.raiseOnChangeEvent.call(n)});this.element.find(".input-control.select-box.dropdown-box.withownvalue").on("focusin",function(){if(n.options.disabled!==!0){var q=u.closest(".stylewrapper").find("input:radio");t.dropdown().dropdown("enable");q.radiobutton().radiobutton("uncheck");$(q[0]).radiobutton().radiobutton("check");r.find("div.ownvalue").addClass("disabled");$(this.nextSibling.lastChild).find("input").prop("disabled",!1)}});this.element.find("input.input-control:radio").on("focus",function(){if(f)f=!1;else if(n.options.disabled!==!0){var q=u.closest(".stylewrapper").find("input:radio");$(this.nextSibling.lastChild).removeClass("disabled");!t.hasClass("disabled")&&$(q[0]).is(":checked")&&setTimeout(function(){$(q[0]).parent().hasClass("focus")&&(t.dropdown("enable"),t.dropdown("focus"))},1)}});this.element.find("input.input-control:radio").on("keydown",function(q){if(q.shiftKey&&q.keyCode==9){if(n.options.disabled!==!0){var r=u.closest(".stylewrapper").find("input:radio");$(this.nextSibling.lastChild).removeClass("disabled");!t.hasClass("disabled")&&$(r[0]).is(":checked")&&setTimeout(function(){$(r[0]).parent().hasClass("focus")&&(t.dropdown("enable"),t.dropdown("focus"))},1)}}else if(q.keyCode==9&&n.options.disabled!==!0){var r=u.closest(".stylewrapper").find("input:radio");if($(this.nextSibling.lastChild).removeClass("disabled"),!t.hasClass("disabled")&&$(r[0]).is(":checked")&&$(r[0]).parent().hasClass("focus"))return t.dropdown("enable"),t.dropdown("focus"),!1}});this.element.find(".input-control.select-box.dropdown-box.choiceddl.withownvalue").on("keydown",function(n){n.shiftKey&&n.keyCode==9&&(f=!0)})},getSelectedValue:function(){var n=this.element.find(".ownoption").find(".radio");return n.hasClass("checked")?this.element.find(".ownvalue").find("input").val():this.element.find("select").dropdown("SelectedValue")},clearSelection:function(){var n=this.element.find(".ownvalue"),t=this.element.find(".input-control").filter(".radio"),q=this.element.find("select");this.options.runTime&&(this.options.value===""&&(q.dropdown("SelectedValue",""),this.applyWatermark()),t.eq(0).radiobutton("check"));this.options.allowOwnValue&&(n.find(":text").val(""),n.textbox().textbox("disable"))},clear:function(){this.element.find("select").dropdown().dropdown("clearOptions").dropdown("refresh")},databind:function(){this.clear();this.options.designtime===!0&&this.options.dataSourceType!=="Static"?this.setDummyData():(this.bindDataToDropDown(),this.options.hasEverSetItems=!0,this.options.settingItems=!1,this.options.previous.settingItems=!1,this.toggleModal(),this.setHeight(),this._saveStackingItems())},_getDisplayValue:function(n){var t="",q=parseXML(this.options.displayTemplate).selectSingleNode("Template").childNodes;if(q)for(var r=0;r<q.length;r++){var u=q[r];switch(u.getAttribute("SourceType")){case"Value":t+=u.selectSingleNode("SourceValue").text;break;default:t+=n.selectSingleNode("fields/field[@name='{0}']/value".format(u.getAttribute("SourceID"))).text}}return t},createStaticElements:function(n){var q="";if(n.substring(0,1)==="[")try{items=JSON.parse(n)}catch(f){q=parseXML(n);items=q.selectNodes("Items/Item")}else q=parseXML(n),items=q.selectNodes("Items/Item");for(var u="",t=0;t<items.length;t++){var r="";r=typeof items[t].display!="undefined"&&items[t].display!=null?items[t].display:items[t].text;r=SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(r);u+=this.addCustomOption(r,items[t].value)}this.finshesAddingOptions(u,this.options.allowOwnValue)},widgetnizeElement:function(){if(this.options.designtime===!1){var n=this.element.find("input"),t=this.element.find(".input-control").filter(".radio");n.filter(":radio").attr("name",this.element.attr("name"));t.radiobutton();n.filter(":text").textbox()}},bindDataToDropDown:function(n){var u=this.element.find("select"),h=!1;if(u.length===0&&(this.options.allowOwnValue===!0?this.setAllowOwnValue():this.element.find(".controlWrapper")[0].innerHTML="<select><\/select>",u=this.element.find("select").dropdown()),this.element.find(".select-box.dropdown-box").addClass("choiceddl"),this.options.dataSourceType==="Static"){var o,r=0,f=[],s="",e="",c,l;if(c=typeof n!="undefined"?parseXML(n.selectSingleNode("Property[Name='FixedListItems']/Value").text):this.options.fixedListItems.substring(0,1)==="["?JSON.parse(this.options.fixedListItems):parseXML(this.options.fixedListItems),this.options.selectEmptyValue===!0){var o={index:r,text:"",value:"",className:"",selected:!0,disabled:""};f[r++]=o}if(this.options.fixedListItems.substring(0,1)==="[")var l=c;else var l=c.selectSingleNode("Items").childNodes;for(var t=0;t<l.length;t++){var p=!1;t===0&&this.options.selectEmptyValue===!1&&(p=!0);o={index:r,text:l[t].display,value:l[t].value,className:"",selected:p,disabled:""};f[r++]=o}}else if(this.options.dataSourceType==="SmartObject"&&this.options.designtime===!1){var w=!1,r=0,f=[],s="",e="",q,b=this.options.displaySO?this.options.displaySO:this.options.associationSO,a=this.options.jsonData;if(checkExists(a)&&(b?q=a.collection:(q=a,w=!0)),!checkExists(q))return;if(this.options.selectEmptyValue){var o={index:r,text:"",value:"",className:"",selected:!0,disabled:""};f[r++]=o}for(var t=0;t<q.length;t++){var v=!1;if(w?(s=q[t].Name,e=s):this.options.associationSO==b?(s=UtilitiesHelper.setDisplayTemplateValueFromJson(this.options.displayTemplate,q[t].fields),e=q[t].fields[this.options.valueProperty].value):(e=null,checkExists(q[t].joins)&&q[t].joins.length>0&&(s=UtilitiesHelper.setDisplayTemplateValueFromJson(this.options.displayTemplate,q[t].joins[0].fields),e=q[t].fields[this.options.valueProperty].value)),!h){var k=q[t].fields[this.options.defaultSOProperty];if(checkExists(k)){var y=k.value;checkExists(y)&&typeof y=="string"&&y.toUpperCase()==="TRUE"&&(h=!0,this.options.defaultValue=e,v=!0)}}if(e!==null){this.options.selectEmptyValue!==!1||r!==0||h||(v=!0);var o={index:r,text:s,value:e,className:"choice-control-smartobject-bind-dropdown",selected:v,disabled:""};f[r++]=o}}}if(this.widgetnizeElement(),this.options.data=f,this.options.selectEmptyValue||this.options.defaultValue!==""||this.options.value!==""?this.options.value===""&&this.options.defaultValue!==""&&(this.options.value=this.options.defaultValue):checkExists(f)&&f.length>0&&(this.options.value=f[0].value),u.prop("disabled")&&u.prop("disabled",!1),this.options.designtime===!1&&this.options.preview===!1&&(u.dropdown("option","items",this.options.data),u.dropdown("refresh")),this.options.runTime&&this.options.dataSourceType===""&&this.options.selectEmptyValue){var o={index:0,text:"",value:"",className:"",selected:!0,disabled:""};u.dropdown("option","items",[o]);u.dropdown("refresh")}this.setStyles()},addCustomOption:function(n,t){checkExistsNotEmpty(n)===!1&&(n="");(checkExistsNotEmpty(t)===!1||t===!1)&&(t=n);var q='<div class="choice-control-item-row">';return q+='<label class="input-control style-aware ',q+=this.options.displayType!="dropdown"?this.options.displayType:"radio",q+='">',q+='<input type="',q+=this.options.displayType!="dropdown"?this.options.displayType:"radio",q+='" class="input-control" value="',q+=t,q+='" name="',q+=this.element.attr("name"),q+='"><span class="input-control-img"><\/span>',q+=this.radioSvgTemplate,q+='<span class="input-control-text">',q+=n,q+"<\/span><\/label><\/div>"},finshesAddingOptions:function(n,t){var q=this.element.find(".controlWrapper");q.find(".input-control.select-box.dropdown-box").remove();t===!0?q[0].innerHTML=n+q[0].innerHTML:q[0].innerHTML+=n},applyValue:function(){if(this.clearSelection(),this.options.runTime){if(checkExistsNotEmpty(this.options.value)===!0)this.setDropDownSelected();else{this.clearSelection();var n=this.element.find(".input-control").filter(".radio");this.options.value.length===0&&this.options.selectEmptyValue&&n.radiobutton("uncheck")}SourceCode.Forms.Controls.Web.SFCChoiceBase.prototype.raiseOnChangeEvent.call(this)}this.setReadOnly();this.setEnabled();this.setTabIndex()},initStyleBuilderPreview:function(n,t,q){this.options.displayType=t;this.options.style=q;this.setDummyData()},selectDropdown:function(){var n=this.element.find("select"),f=this.element.find(".radio");if(f.radiobutton().radiobutton("uncheck"),this.options.value.length!=0){for(var r=n.dropdown("option","items"),u=!1,t=0,e=r.length;t<e;t++)if(r[t].value===this.options.value){n.dropdown("select",this.options.value);u=!0;this.options.allowOwnValue&&this.element.find(".radio").eq(0).radiobutton().radiobutton("check");break}if(!u&&this.options.allowOwnValue){var q=this.element.find("input[type=text]");q.val(this.options.value);this.options.disabled!==!0&&q.textbox().textbox("enable");q.textbox("hideWatermark");this.element.find(".ownoption").find(".radio").radiobutton("check");n.dropdown("disable")}}},setDropDownSelected:function(){if(this.options.designtime!==!0)switch(this.options.dataSourceType.toUpperCase()){case"UNDEFINED":return;case"SMARTOBJECT":case"STATIC":this.selectDropdown()}},applyDisplayValue:function(){(this.options.hasEverSetItems===!1||this.options.settingItems===!0)&&this.setDropDownDisplayValue()},setDropDownDisplayValue:function(){var n=this.element.find("select");n.dropdown("option","initialDisplayValue",this.options.initialDisplayValue);n.dropdown("toggleModal",!0);this.element.find("a").find("span").eq(0).text(this.options.initialDisplayValue);this.options.allowOwnValue===!0&&this.element.find(".input-control").filter(".radio").radiobutton().eq(0).radiobutton("check")},toggleModal:function(){this.toggleDropDownModal();this.options.settingItems===!1&&this.widget.executeOnSetItemsCompleted()},toggleDropDownModal:function(){var n=this.element.find("select");if(this.options.settingItems===!0?(n.dropdown("prepareForRefresh"),n.dropdown("toggleModal",!0)):(this.options.initialDisplayValue!==""&&n.dropdown("option","initialDisplayValue",this.options.initialDisplayValue),n.dropdown("toggleModal",!1)),this.options.allowOwnValue===!0){var t=this.element.find(".input-control").filter(".radio").last();this.options.settingItems===!0?t.radiobutton().radiobutton("readonly"):this.setReadOnly()}},setStyles:function(){var t=this.element.find(".stylewrapper"),n={},u=this,q=this.element.find(".styling-font");if(n={border:t,background:t,margin:t,padding:t,font:t},this.options.allowOwnValue===!0){var f=this.element.find(".input-control-text",".ownoption");n.horizontalAlign=f}if(StyleHelper.setStyles(n,this.options.style),n={font:q,horizontalAlign:q},StyleHelper.setStyles(n,this.options.style),this.options.allowOwnValue===!0){var r=this.element.find("input").filter(":text");n={font:r,horizontalAlign:r};StyleHelper.setStyles(n,this.options.style)}t.css("width","auto");this.options.runTime&&this.element.css("width",this.options.width);setTimeout(function(){u.setHeight()},0)},setValueWithOnSet:function(n){return checkExistsNotEmpty(n.Value)||this.clearSelection(),n.Value===""&&raiseEvent(n.CurrentControlId,"Control","OnChange"),n.returnResult?SFCChoice._getProperty(control,"settingItems")===!1?n.Value:!1:void 0},setHeight:function(){var n=this.options.height;if(this.options.displayType!=="dropdown"){n===""&&(n="auto");n!=="auto"&&n.indexOf("px")===-1&&(n=n+"px");var t=this.element.find(".stylewrapper");if(t[0]!==undefined){var r=[t.css("marginTop"),t.css("marginBottom")],q=n;if(r.length>0&&q!=="auto")for(var u=0;u<r.length;u++){var e=parseInt(r[u]);r[u]!=="auto"&&e>0&&(q=parseInt(q)-e,q=q+"px")}t[0].style.height=q;t.height()>0&&(this.element[0].style.height=this.options.height)}}else{var t=this.element.find(".stylewrapper");t.length>0&&(t[0].style.height="auto");this.element[0].style.height="auto"}var o=this.element.closest(".form-control");if(o.length>0){var f=o.data("panel");checkExists(f)===!0&&(f.equalizeWidths(),f.equalizeHeights())}this.options.height=n},changeDisplayType:function(){var n=this.element.find(".controlWrapper");this.options.displaychange==!0&&n.empty();this.databind();this.options.displaychange==!0&&(this.options.blockInitStackSave=!0);this.applyValue();this.setReadOnly();this.bindEventDropdown();this.configureOwnValueBehavior()},bindEventDropdown:function(){var n=this;this.element.find("select").on("change",function(){n.options.value=n.getSelectedValue();SourceCode.Forms.Controls.Web.SFCChoiceBase.prototype.raiseOnChangeEvent.call(n)})},setTooltip:function(){this.element.attr("title",this.options.tooltip)},setAllowOwnValue:function(){var n=this.element.find(".controlWrapper");if(arguments[0]&&(this.options.allowOwnValue=arguments[0]),this.options.allowOwnValue===!0){var f=this.element.find(".ownvalue").length>0;if(!f){var t="";n.find("label").eq(0).removeClass("hidden");this.element.find("select").length===0&&(t+="<select><\/select>");t+=this.addCustomOption(ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Properties.Choice.SpecifyOwnValueMessage," ");this.finshesAddingOptions(t);var e='<div class="choice-control-item-row">                         <label class="input-control radio style-aware">                             <input type="radio" class="input-control" value=" " name="Choice" aria-disabled="false" tabindex="0">                             <span class="input-control-img"><\/span>                             '+this.radioSvgTemplate+'                             <span class="input-control-text"> <\/span>                         <\/label>                     <\/div>';this.element.find(".controlWrapper").prepend(e);this._initializeDropDown();var u=$(SCTextbox.html());if(u.addClass("ownvalue"),n.find("label").last().after(u),n.children("div").last().addClass("ownoption"),navigator.userAgent.contains("Firefox")){var q=this.element.find(".overlay");q.length===0&&(q=$('<div class="overlay"> <\/div>'),q.appendTo(this.element.find(".ownvalue")))}var r='<div class="input-control-watermark" style="display: block;">{0}<\/div>';r=r.format(this.options.watermarkText);this.element.find(".ownvalue").find("input:text").after(r)}}else n.find(".ownvalue").length>0&&(n.children("div").last().remove(),n.find("label").eq(0).addClass("hidden"),n.find(".withownvalue").removeClass("withownvalue"),this.element.find("div").filter(".own-value-bullet-for-dropdown").filter(":not(:has(*))").remove(),this.element.find(".choice-control-item-row").remove());this.element.find(".choice-default-value-picker-mini").length>0&&this.element.find(".own-value-bullet-for-dropdown").removeClass("own-value-bullet-for-dropdown");(this.options.designtime||this.options.dataSourceType==="SmartObject")&&n.find(".withownvalue").find("input").filter(":text").val("");this.setStyles()},setReadOnly:function(){var n=this.element,r,u,q;if(this.options.isReadOnly===!0||this.options.isParentReadOnly===!0){if(n.addClass("read-only"),this.options.allowOwnValue&&(r=n.find(".input-control").filter(".radio").radiobutton(),r.radiobutton("readonly")),u=n.find("select"),u.dropdown("readonly"),this.options.allowOwnValue){q=n.find(".ownvalue");var t=q.textbox();q.hasClass("disabled")?(t.textbox("enable"),t.textbox("readonly"),t.textbox("disable")):t.textbox("readonly")}}else if(n.removeClass("read-only"),this.options.allowOwnValue&&(r=n.find(".input-control").filter(".radio"),r.radiobutton().radiobutton("editable")),u=n.find("select"),u.dropdown("editable"),this.options.allowOwnValue){q=n.find(".ownvalue");var t=q.textbox();q.hasClass("disabled")?(t.textbox("enable"),t.textbox("editable"),t.textbox("disable")):t.textbox("editable")}},setEnabled:function(){var r=this.element.find(".input-control"),n=r.filter(".radio"),u=n.radiobutton(),f=this.element.find("select"),q=f.dropdown(),e=this.element.find(".ownoption"),t=this.element.find(".ownvalue "),o=this.element.find(".select-box");this.options.isEnabled===!1||this.options.disabled===!0?(f.length>0&&jQuery("#{0}_droplist".format(this.element.attr("id"))).hide(),u.radiobutton("disable"),n.addClass("disabled"),q.dropdown("disable"),o.addClass("default"),e.addClass("default"),t.addClass("default"),t.addClass("disabled"),this.options.allowOwnValue===!0&&t.find("input:text")[0].setAttribute("disabled","disabled"),this.element.addClass("disabled")):(u.radiobutton("enable"),n.removeClass("disabled"),q.dropdown("enable"),o.removeClass("default"),e.removeClass("default"),t.removeClass("default"),this.options.allowOwnValue===!0&&n.last().hasClass("checked")===!0&&(r.filter(":text").textbox().textbox("enable"),q.dropdown("disable")),this.element.removeClass("disabled"))},setTabIndex:function(){var t=this.options.tabIndex;this.options.disabled===!0&&(t=-1);var n=this.element[0].getElementsByTagName("a");if(this.options.fixedListItems==="<Items><\/Items>"&&(this.options.dataSourceType==="Static"||typeof this.options.dataSourceType=="undefined")&&this.options.allowOwnValue===!0){var q=this.element.find("label").find("input");q[0].tabIndex=-1;q[1].tabIndex=-1;n[0].tabIndex=-1;$($(this.element).find(".stylewrapper").find("input:radio")[1]).radiobutton().radiobutton("check")}else n.length>0&&(n[0].tabIndex=-1),this.options.allowOwnValue===!0?(this.element.find(".ownvalue")[0].getElementsByTagName("input")[0].tabIndex=-1,this.element.find("label").find("input")[0].setAttribute("tabindex",t)):n.length>0&&(n[0].tabIndex=t)},_saveStackingItems:function(){return!1},setStackedByAndStackCapacity:function(){return!1},setDummyData:function(){this.options.fixedListItems='[{ "display": "option 1", "value": "option 1" }, { "display": "option 2", "value": "option 2" }, { "display": "option 3", "value": "option 3" }]';this.options.dataSourceType="Static";this.widget.applyChanges()},applyWatermark:function(){var t=this.element.find(".watermark"),n=this.element.find("select");n.dropdown();n.dropdown("option","watermark",this.options.watermarkText);n.dropdown("refresh")},destroy:function(){this.element.off();var n=this.element.find(".ownvalue"),t=n.siblings("label");n.off();t.off();$(document).off("click","#"+this.element.attr("id"));this.element.children().remove();$.Widget.prototype.destroy.call(this)}};
/*!
 SourceCode.Forms.Controls.Web.ControlPack.Resources.Script.ListBoxBehavior.js (Embedded resource)
*/
(function(n,t){var q;SourceCode.Forms.Controls.Web.ControlPack.ListBox=q=n.extend({},SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase,{setRulesMethod:function(n){EventUtil.manageControlEvent(n)},_createAction:function(n,t,q,r,u){return actionNode=n.createElement("Action"),actionNode.setAttribute("ID","".generateGuid()),actionNode.setAttribute("DefinitionID","".generateGuid()),actionNode.setAttribute("Type","Execute"),actionNode.setAttribute("ExecutionType","Synchronous"),TreeUtil.updateProperty(n,actionNode,"Location","View"),TreeUtil.updateProperty(n,actionNode,"ControlID",t),TreeUtil.updateProperty(n,actionNode,"Method",u.text),TreeUtil.updateProperty(n,actionNode,"ViewID",q),TreeUtil.updateProperty(n,actionNode,"ObjectID",r),TreeUtil.addResult(n,actionNode,r,"Result",t,"Control"),actionNode},displayProperty:function(){return!1},setTitle:function(n,t){var r=n.find(".SFC");q._setProperty(r,"title",t)},setToolTip:function(n,t){var r=n.find(".SFC");q._setProperty(r,"toolTip",t)},setShowWatermark:function(n,t){var r=n.find(".SFC");q._setProperty(r,"watermark",t)},setMaxSelection:function(n,t){var r=n.find(".SFC");q._setProperty(r,"maxSelection",t)},setSelectionMode:function(n,t){var r=n.find(".SFC");q._setProperty(r,"selectionMode",t)},setStackedBy:function(n,t){var r=n.find(".SFC");q._setProperty(r,"stackedBy",t)},setStackCapacity:function(n,t){var r=n.find(".SFC");q._setProperty(r,"stackCapacity",t)},getStackedByOptions:function(){var n={values:[],displays:[],iconClasses:[],add:function(){if(arguments.length===0)return this;var t=arguments.length===1?arguments[0]:arguments[1],q=arguments[0],r=arguments.length===3?arguments[2]:t;return n.displays.push(q.toString()),n.values.push(t.toString()),n.iconClasses.push(r.toString()),this}};return n.add("Rows","rows","stacked-rows").add("Columns","columns","stacked-columns"),n},setStyles:function(n,t){var f=n.find(".SourceCode-Forms-Controls-Web-ControlPack-ListBox"),r=n.find(".stylewrapper"),s=n.find(".listwrapper"),u=n.find(".optionwrapper"),c=n.find(".listBoxSelect"),o=r.find(".title"),h=n.find(".resizewrapper");if(n.attr("id")==="StyleBuilderPreviewPanelContent"||n.prop("class")==="condtional-format-preview"){var l=SourceCode.Forms.Designers[SourceCode.Forms.Designers.Common.getDefinitionNode().tagName].Styles._getSelectedControl(),e=l.find(".SFC").SFCListBox("option");q._setProperty(f,"isStyleBuilder",!0);q._setProperty(f,"fixedListItems","<Items><Item>AaYy<\/Item><\/Items>");q._setProperty(f,"isEnabled",!1);q._setProperty(f,"title","AaYy")}q._setProperty(f,"style",t);n.attr("id")=="StyleBuilderPreviewPanelContent"&&(f[0].style.width="100%");var y=o.outerHeight(),p=u.outerHeight(),e={border:r,background:r,margin:r,padding:u,font:u,horizontalAlign:u};StyleHelper.setStyles(e,t);parseInt(r[0].style.borderBottomWidth)==0&&(o[0].style.borderBottom=r[0].style.borderBottom);var a=n.find(".SFC");if(n.attr("id")=="StyleBuilderPreviewPanelContent"||n.hasClass("condtional-format-preview")){var o=r.find(".title"),y=o.outerHeight();u[0].style.position="relative";f[0].style.height="auto";var p=u.outerHeight(),w=parseInt(r.find(".optionwrapper").css("top")),o=r.find(".title");n.find(".SFC").addClass("stylebuilderpreview");u[0].style.position="relative";o.hasClass("hidden")||s.height("inherit")}else{var e=a.SFCListBox().SFCListBox("option"),o=r.find(".title");r=n.find(".stylewrapper");c=n.find(".listBoxSelect");var v={border:r,background:r,margin:r,padding:u,font:u,horizontalAlign:u};StyleHelper.setStyles(v,t);(e.height.toLowerCase()==="auto"||e.height==="")&&e.dataSourceType==="Static"?(u[0].style.position="relative",r[0].style.height="auto",s[0].style.height="100%",h[0].style.height="auto"):(e.height.toLowerCase()==="auto"||e.height==="")&&(e[0].style.height=this.options.defaultHeight,h[0].style.height=this.options.defaultHeight)}},loadWidget:function(){for(var q=n(".SourceCode-Forms-Controls-Web-ControlPack-ListBox"),t=0;t<q.length;t++)var r=n(q[t]).SFCListBox()},setReadOnly:function(n,t){var r=n.find(".SFC");q._setProperty(r,"isReadOnly",t)},setEnabled:function(n,t){typeof t=="string"&&(t=t.toLowerCase()==="true");var r=n.hasClass("form-control"),u=r?n.children():n.find(".resizewrapper :not(.controloverlay):not(.ui-resizable-handle)");u.first().toggleClass("disabled",!t);var f=n.find(".SFC");q._setProperty(f,"isEnabled",t)},setHeight:function(n,t){var r=n.find(".SourceCode-Forms-Controls-Web-ControlPack-ListBox");t=SourceCode.Forms.Controls.Web.ControlPack.Utils.UnitHelper(t,"auto",!1);q._setProperty(r,"height",t)},setItems:function(n){var t=q._getInstance(n.CurrentControlId);t.SFCListBox("option","stacked",!0);t.SFCListBox("option","jsonData",n.JsonData);t.SFCListBox("databind")},setValueWithOnSet:function(n){var t=q._getInstance(n.CurrentControlId);if(t.SFCListBox("option","isParentReadOnly")!==!0&&t.SFCListBox("option","disabled")!==!0){var f=tryParseXML(n.Value);if(f.xml!==""){var r=f.selectNodes("/collection/object/fields/field"),e="";if(r.length>0){for(var u=0;u<r.length;++u)e+=r[u].childNodes[0].text+t.SFCListBox("option","delimiter");t.SFCListBox("option","value",e)}else t.SFCListBox("option","value","")}else t.SFCListBox("option","value",n.Value)}raiseEvent(n.CurrentControlId,"Control","OnSet")},getItems:function(n){var t=[];if(checkExistsNotEmpty(n.CurrentControlId)){var r=q._getInstance(n.CurrentControlId);checkExists(r)&&(r.SFCListBox("option").dataSourceType==="SmartObject"?t=SourceCode.Forms.Controls.Web.ControlPack.ListBox._getSmoDataSourceItems(n):r.SFCListBox("option").dataSourceType==="Static"&&(t=SourceCode.Forms.Controls.Web.ControlPack.ListBox._getStaticDataSourceItems(n)))}return t},getValue:function(n){var t=q._getInstance(n.CurrentControlId);return t.SFCListBox("getIdValueArray",t)},getPreloadLevelOptions:function(){return{inputs:[{range:{min:0,max:126,step:1},displays:{0:Resources.ControlProperties.TabIndexDefault},defaultValue:0}],eventsHandler:"SourceCode.Forms.Controls.Web.ControlPack.ListBox.setMaxSelectionIndex"}},setMaxSelectionIndex:function(n,t){var q=n,r=t.closest(".spinner");t.on("change blur keyup keydown",function(u){q=q===Resources.ControlProperties.TabIndexDefault?"0":q;var f=u.target.value.toString();f=parseInt(f===Resources.ControlProperties.TabIndexDefault?"0":f);var e=u.keyCode||u.charCode;if(e===110||e===190)return!1;if(e===8||e===46){if(isNaN(f))return r.spinner("value",[0]),t.val(""),!1;if(f===0)return n!==q&&r.spinner("value",[0]),t.val(""),!1;if(parseInt(f)>0)return!0}if(f===0&&(e>48&&e<=57||e>=96&&e<=105))return t.val(""),!0;q!==f&&(q=f,r.spinner("value",[f]))})},_getSmoDataSourceItems:function(n){var u=[],t=n.JsonData;if(checkExists(t)){var f=q._getInstance(n.CurrentControlId).SFCListBox("option"),h=f.displaySO;checkExistsNotEmpty(h)||(h=f.associationSO);var a=n.Value==="All",v=n.Value==="Selected"||n.Value==="Checked",y=n.Value==="Unselected"||n.Value==="Unchecked";if(a)u=t;else{var p=this.getValue(n),c=f.valueProperty,s=p.split(f.delimiter);if(s.length>0){var r,l=t.length;if(v)for(var e=0;e<l;e++)r=t[e].fields[c].value,checkExists(r)&&s.indexOf(r.toString())>-1&&u.push(t[e]);else if(y)for(var o=0;o<l;o++)r=t[o].fields[c].value,checkExists(r)&&s.indexOf(r.toString())==-1&&u.push(t[o])}}}return u},_getStaticDataSourceItems:function(n){var u=[],r=JSON.parse(q._getInstance(n.CurrentControlId).SFCListBox("option").fixedListItems);switch(n.Value){case"All":u=r;break;case"Selected":case"Checked":var e=this.getValue(n),f=e;if(f.length>0)for(var t=0,o=r.length;t<o;t++)checkExistsNotEmpty(r[t])&&f.indexOf(r[t].value)>-1&&u.push(r[t]);break;case"Unselected":case"Unchecked":var e=this.getValue(n),f=e;if(f.length>0)for(var t=0,o=r.length;t<o;t++)checkExistsNotEmpty(r[t])&&f.indexOf(r[t].value)==-1&&u.push(r[t])}return u},execute:function(t){var u=t.methodName.toUpperCase(),f=n("#"+t.CurrentControlID),r=q._getInstance(t.CurrentControlId);switch(u){case"FOCUS":r.SFCListBox("option").dataSourceType==="SmartObject"&&r.SFCListBox("option").settingItems===!0?r.SFCListBox("option","methodQueue",u):r.SFCListBox("setOnFocus",r,r.SFCListBox("option"));break;case"SELECTALL":(r.SFCListBox("option","isReadOnly")||r.SFCListBox("option","isParentReadOnly"))!==!0&&r.SFCListBox("option","disabled")!==!0&&(f.find(".option").addClass("selected"),r.SFCListBox("updateValue"));break;case"UNSELECTALL":f.find(".selected").removeClass("selected");r.SFCListBox("updateValue")}}});n.widget("sfc.SFCListBox",n.sfc.baseWidget,{_inputBox:null,options:{controlName:"",fixedListItems:"<Items><\/Items>",defaultSOProperty:"",displaySO:"",displayJoinProperty:"",displayMethod:"",title:"",defaultValue:"",delimiter:";",value:"",width:"100%",defaultHeight:"175",height:"auto",previous:{},designtime:!1,preview:!1,isReadOnly:!1,isEnabled:!0,settingItems:!1,initialDisplayValue:"",style:SourceCode.Forms.Controls.Base.emptyStylesNode,data:[],pendingOnchange:!1,isStyleBuilder:!1,hasSetItems:!1,pendingLock:!1,tabIndex:0,reset:!1,disabled:!1,toolTip:"",watermark:"",maxSelection:0,saveXML:!1,stackCapacity:1,stackedBy:"rows",stacked:!0,selectionMode:"multiple",items:null,dblclick:!1,methodQueue:""},_create:function(){this.options.designtime=this.element.hasClass("designtime");this.options.preview=this.element.hasClass("preview");this.options.controlName=this.element[0].getAttribute("name");var t=this.element.find(".stylewrapper"),q=this.element.find(".optionwrapper");this.options.stackedBy==="columns"&&this.element.addClass("stacked-by-columns");this.bindEvents();t.removeClass("hidden");this.options.designtime||(this.element[0].style.height=this.options.height,this.options.preview===!1&&(this.options.dataSourceType!=="SmartObject"&&raiseEvent(this.element.attr("id"),"Control","OnSetItemsCompleted"),raiseEvent(this.element.attr("id"),"Control","Init")),this.initialize());var r=this.element.find(".selectWrapper");this.element.find(".select").addClass("selectPosition");checkExistsNotEmpty(this.options.title)||r.addClass("noHeader");checkExistsNotEmpty(this.options.toolTip)&&q[0].setAttribute("title",this.options.toolTip);parseInt(this.options.maxSelection)===0&&(this.options.maxSelection="unlimit");this.options.items=this.element.find(".option");(this.options.dataSourceType==="Static"||this.options.preview)&&(this.options.stacked=!1,this.setStackedByAndStackCapacity());this.base._create.apply(this,arguments);this.options.previous=n.extend({},this.options);this.options.value!==""?this.setSelected():this.setTabIndex();this.options.dataSourceType!=="SmartObject"&&(this.options.hasSetItems=!0)},_optionNameTransformer:function(n){n=n.toLowerCase();switch(n){case"associationso":n="associationSO";break;case"associationmethod":n="associationMethod";break;case"controlname":n="controlName";break;case"fixedlistitems":n="fixedListItems";break;case"displayso":n="displaySO";break;case"displayjoinproperty":n="displayJoinProperty";break;case"displaymethod":n="displayMethod";break;case"defaultvalue":n="defaultValue";break;case"defaultsoproperty":n="defaultSOProperty";break;case"defaultheight":n="defaultHeight";break;case"delimiter":n="delimiter";break;case"displaytype":n="displayType";break;case"associatedjoinproperty":n="associatedJoinProperty";break;case"displaytemplate":n="displayTemplate";break;case"datasourcetype":n="dataSourceType";break;case"property":n="Property";break;case"valueproperty":n="valueProperty";break;case"staticvalues":n="staticValues";break;case"selectedvalue":n="selectedValue";break;case"title":n="title";break;case"jsondata":n="jsonData";break;case"tooltip":n="toolTip";break;case"methodqueue":n="methodQueue";break;case"maxselection":n="maxSelection";break;case"selectionmode":n="selectionMode";break;case"savexml":n="saveXML";break;case"stackcapacity":n="stackCapacity";break;case"stackedby":n="stackedBy";break;case"iscomposite":n="isComposite";break;case"isreadonly":n="isReadOnly";break;case"isparentreadonly":n="isParentReadOnly";break;case"isenabled":n="isEnabled";break;case"settingitems":n="settingItems";break;case"initialdisplayvalue":n="initialDisplayValue";break;case"isstylebuilder":n="isStyleBuilder";break;case"tabindex":n="tabIndex";break;default:n=this.base._optionNameTransformer(n)}return n},_optionValueConverter:function(n,q){n=n.toLowerCase();switch(n){case"title":(q===t||q==null||q.length<=0)&&(q="");break;case"isReadOnly":case"isParentReadOnly":case"isEnabled":case"isStyleBuilder":q=this.base._booleanConverter(q);break;case"height":q=SourceCode.Forms.Controls.Web.ControlPack.Utils.UnitHelper(q,"auto",!1);break;case"tabIndex":if(q=parseInt(q),q>=-1&&q<=32767)break;else{q=-1;break}default:q=this.base._optionValueConverter(n,q)}return q},applyChanges:function(){var n=this.element,s=this,e=n[0].parentElement.getAttribute("id")==="StyleBuilderPreviewPanelContent"||n[0].parentElement.getAttribute("class")==="condtional-format-preview",o=n.find(".optionwrapper"),t=n.find(".title");if(this.options.settingItems!==this.options.previous.settingItems&&(this.options.previous.settingItems=this.options.settingItems,this.toggleModal()),(this.options.jsonData!==this.options.previous.jsonData||this.options.fixedListItems!==this.options.previous.fixedListItems)&&(this.options.previous.jsonData=this.options.jsonData,this.options.previous.fixedListItems=this.options.fixedListItems,this.options.height.toLowerCase()==="auto"&&(n[0].style.height="auto"),this.setListData(),this.setTabIndex(),this.options.stacked=!1),this.options.width!==this.options.previous.width&&(n[0].style.width=this.options.width.indexOf("%")>-1?this.options.width:parseInt(this.options.width)+"px"),this.options.height!==this.options.previous.height&&(n[0].style.height=this.options.height,n.find(".stylewrapper").height(this.options.height),this.setStyles()),this.options.watermark===this.options.previous.watermark||this.options.designtime||this.setWaterMark(),(this.options.isReadOnly!==this.options.previous.isReadOnly||this.options.isParentReadOnly!==this.options.previous.isParentReadOnly)&&this.setTabIndex(),this.options.isEnabled!==this.options.previous.isEnabled&&this.setTabIndex(),this.options.maxSelection!==this.options.previous.maxSelection&&parseInt(this.options.maxSelection)===0&&(this.options.maxSelection="unlimit"),this.options.toolTip!==this.options.previous.toolTip&&o[0].setAttribute("title",this.options.toolTip),this.options.title!==this.options.previous.title){var q=n.find(".listwrapper"),u=this.element.find(".listbox-watermark");if(checkExistsNotEmpty(this.options.title))if(this.options.previous.title!=="")t[0].innerHTML=SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(this.options.title);else{t[0].innerHTML=SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(this.options.title);t[0].title=SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(this.options.title);var f=parseInt(t.outerHeight()),r=parseInt(n.find(".stylewrapper")[0].style.marginTop);r=isNaN(r)?0:r;t.removeClass("hidden");q.outerHeight(q.outerHeight()-f+"px");u.length>0&&(u[0].style.top=f+r+"px")}else t.addClass("hidden"),q.outerHeight(q.outerHeight()+t.outerHeight()+"px"),this.options.designtime||(u[0].style.top="0px")}(this.options.stackCapacity!==this.options.previous.stackCapacity||this.options.stackedBy!==this.options.previous.stackedBy||this.options.designtime)&&(this.options.stacked=!1);this.options.designtime||(this.options.items=n.find(".option"),this.options.stackCapacity>=1&&this.options.items.length>0&&(this.options.stackCapacity!==1||this.options.stackedBy!=="rows")&&this.setStackedByAndStackCapacity());(this.options.stackCapacity!==this.options.previous.stackCapacity||this.options.stackedBy!==this.options.previous.stackedBy||this.options.items.length>0&&!e&&this.options.designtime)&&this.setStackedByAndStackCapacity();this.options.value!==this.options.previous.value&&(this.options.settingItems===!1&&this.options.hasSetItems===!0?this.setSelected():this.options.pendingOnchange=!0);this.options.methodQueue==="FOCUS"&&this.setOnFocus(this.element,this.options);this.options.isVisible!==this.options.previous.isVisible&&this.element.hasClass("hidden")&&(this.element.removeClass("hidden"),this.setStyles());this.options.style!==this.options.previous.style&&this.setStyles();this.options.initialDisplayValue!==this.options.previous.initialDisplayValue&&this.setDisplay();this.options.tabIndex!==this.options.previous.tabIndex&&this.setTabIndex();this.base.applyChanges.apply(this,arguments)},initialize:function(){var t=this,f=this.options.delimiter;if(this.options.dataSourceType==="Static"){if(this.options.fixedListItems.substring(0,1)==="["){var r=JSON.parse(this.options.fixedListItems),u=parseInt(t.options.maxSelection)||"unlimit";u>=0||(u="unlimit");for(var q=0;q<r.length;q++){var e=t.options.defaultValue.split(f).length;r[q].isDefault&&(t.options.defaultValue!==""&&(e<u||u==="unlimit")?(t.options.defaultValue+=f,t.options.defaultValue+=r[q].value):this.options.defaultValue===""&&(t.options.defaultValue=r[q].value));q===r.length-1&&t.options.defaultValue.substring(0,t.options.defaultValue.length-1)}typeof t.options.defaultValue=="undefined"||t.options.defaultValue===""||t.options.designtime||t.options.preview||(t.options.value=t.options.defaultValue,raiseEvent(this.element.attr("id"),"Control","OnChange"))}t.setStyles()}t.setWaterMark();t.element.closest(".grid").on("gridrowedit",function(){var e=t.element.find(".optionwrapper"),n=t.element.find(".stylewrapper"),u=t.element.find(".listBoxSelect "),o=parseInt(n.css("border-top-width"))+parseInt(n.css("border-bottom-width")),q=parseInt(n[0].style.marginTop),r=parseInt(n[0].style.marginBottom);q=isNaN(q)?0:q;r=isNaN(r)?0:r;u[0].style.border="inherit";u.height(parseInt(t.options.height)-o-q-r+"px");var f=t.element.find(".title");checkExistsNotEmpty(t.options.title)&&f.outerHeight()>0&&e.css("top",f.outerHeight());t.setStyles()});if(!t.options.designtime||t.options.preview){n(document).on("click",".tab-box-tabs .tab",function(){t.handleFormTabClick(n(this))});n(document).on("panelexpand",".panel",function(){for(var q=q=n(this).find(".SourceCode-Forms-Controls-Web-ControlPack-ListBox"),r=0;r<q.length;r++)t.setStyles()})}},handleFormTabClick:function(t){for(var r=this,u=t.closest(".tab-box"),o=u.find(".tab"),f=0,s=r.element.find(".stylewrapper"),h=r.element.find(".title "),c=r.element.find(".listwrapper"),q=0;q<o.length;q++)if(n(o[q]).hasClass("selected")){f=q;break}var e;this.options.designtime||this.options.preview?this.options.preview&&(e=n(u.find(".tab-panel")[f]).find(".SourceCode-Forms-Controls-Web-ControlPack-ListBox")):e=n(u.find(".formpanel")[f]).find(".SourceCode-Forms-Controls-Web-ControlPack-ListBox");for(var q=0;q<e.length;q++)r.setStyles()},getIdValueArray:function(t){for(var q=[],o=t.find(".selected"),u=0,l=o.length;u<l;u++){var s=n(o[u]).data("value").toString();this.options.dataSourceType==="Static"?q.push(SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.formatSpecialChar(s)):q.push(s)}if(this.options.saveXML==="true")if($chk(q)&&q.length>0){var r=parseXML("<collection/>"),f=r.createElement("object"),h=r.createElement("fields");f.setAttribute("parentid",this.options.associationSO);f.setAttribute("parenttype","Object");f.appendChild(h);r.documentElement.appendChild(f);for(var u=0;u<q.length;u++){var e=r.createElement("field"),c=r.createElement("value");e.setAttribute("name",this.options.valueProperty);c.appendChild(r.createTextNode(q[u]));h.appendChild(e);e.appendChild(c)}this.options.value=r.xml}else return'<collection><object parentid="{0}" parenttype="Object"><fields/><\/object><\/collection>'.format(this.options.associationSO);else this.options.value=q.join(this.options.delimiter);return this.options.previous.value=this.options.value,this.options.value},setOnFocus:function(t,q){q.disabled||(t.find(".option").length>0?SourceCode.Forms.Browser.msie?setTimeout(function(){n(t.find(".option")[0]).addClass("focus").trigger("focus")},10):t.find(".option")[0].focus():SourceCode.Forms.Browser.msie?setTimeout(function(){n(t.find(".listwrapper")[0]).addClass("focus").trigger("focus")},10):t.find(".listwrapper")[0].focus())},setStackedByAndStackCapacity:function(){if(this.options.stackCapacity==Infinity||this.options.stackCapacity===0||this.options.stackCapacity===t||this.options.stackedBy===t||this.options.items===null||this.options.stacked===!0)return!1;var u=this.options.items,e=1;if(this.options.stackedBy==="rows"){e=Math.min(this.options.stackCapacity,u.length);for(var f=[],q=0;q<e;q++)f.push(n('<div class="stack"><\/div>'));for(var o=0,r=0;r<u.length;r++)f[o].append(u[r]),o++,o==e&&(o=0)}else{e=Math.ceil(u.length/this.options.stackCapacity);for(var f=[],q=0;q<e;q++){f.push(n('<div class="stack"><\/div>'));for(var r=0;r<this.options.stackCapacity;r++)if(f[q].append(u[q*this.options.stackCapacity+r]),q*this.options.stackCapacity+r+1==u.length)break}}for(var h=n('<div class="stackContainer"><\/div>'),s=0;s<f.length;s++)h.append(n(f[s])[0]);this.element.find(".optionwrapper").html(h);this.options.stacked=!0},getListBoxArray:function(){var n=this.element,t=null;return n.length>0&&(t=n.find(".hoverdiv.option")),t},getCurrentListBoxItemIndex:function(t){var q=n(this.getListBoxArray()).index(t);return checkExists(q)?q:-1},bindEvents:function(){var t=this,q=!1;this.element.on("click dblclick keyup keydown",".hoverdiv",function(r){var e=parseInt(t.options.maxSelection)||1;if(r.type==="dblclick"){if(t.options.isReadOnly||t.options.isParentReadOnly)return!1;if(e===1){t.options.dblclick=!0;var c=t.element.find(".optionwrapper");c.find("div.option").removeClass("selected");t.hoverdivClick(r);raiseEvent(t.element.attr("id"),"Control","Double-Clicked")}}if(r.type==="click"&&r.target.nodeName!=="A")return e===0||t.options.isReadOnly||t.options.isParentReadOnly?!1:(t.hoverdivClick(r),!1);if(r.type==="keydown"){if(r.which===38||r.which===40)return r.preventDefault(r),!1;r.which===17?q=!0:r.which===32&&r.preventDefault()}else if(r.type==="keyup"&&r.which===17)q=!1;else if(r.shiftKey){var s=n(r.target),f=t.getListBoxArray(),o=t.getCurrentListBoxItemIndex(s),h=t.element.find(".selected").length;if(e>=0||(e="unlimit"),o>-1)switch(r.which){case 37:case 38:r.stopPropagation();var u=o-1;return u<0&&(u=f.length-1),h<e||e==="unlimit"?(n(f[o]).addClass("selected"),e!==1&&n(f[u]).addClass("selected").trigger("focus")):n(f[u]).trigger("focus"),t.updateValue(),!1;case 39:case 40:r.stopPropagation();var u=o+1;return u>=f.length&&(u=0),h<e||e==="unlimit"?(r.shiftKey&&n(f[o]).addClass("selected"),e!==1&&n(f[u]).addClass("selected").trigger("focus")):n(f[u]).trigger("focus"),t.updateValue(),!1}}else{var s=n(r.target),f=t.getListBoxArray(),o=t.getCurrentListBoxItemIndex(s);if(o>-1)switch(r.which){case 37:case 38:r.stopPropagation();var u=o-1;return u<0&&(u=f.length-1),n(f[u]).trigger("focus"),!1;case 39:case 40:r.stopPropagation();var u=o+1;return u>=f.length&&(u=0),n(f[u]).trigger("focus"),!1;case 13:return n(this).hasClass("disabled")===!1&&n(this).hasClass("hoverbtn")&&n(this).trigger("click"),r.preventDefault(),!1;case 32:return e===0||t.options.isReadOnly||t.options.isParentReadOnly||(t.toggleSelection(r,q),t.updateValue(),r.preventDefault()),!1}}});this.element.on("focusout",".stylewrapper",function(){return n(this).find(".focus").removeClass("focus"),!1})},toggleSelection:function(t){var r=n(t.target),u=this.element.find(".option.selected"),q=parseInt(this.options.maxSelection)||"unlimit";if(q)if(q==="unlimit"||q>u.length||r.hasClass("selected"))r.toggleClass("selected");else return!1},hoverdivClick:function(t){var r=n(t.target),q=parseInt(this.options.maxSelection);q>=0||(q="unlimit");n(t.target.parentNode).find(".focus").removeClass("focus");t.ctrlKey===!0&&(q>0||q==="unlimit")?this.setOptionSelections(r,!0,!1):t.shiftKey&&(q>0||q==="unlimit")?this.setOptionSelections(r,!1,!0):this.setOptionSelections(r,!1,!1);this.updateValue()},setOptionSelections:function(t,q,r){var v=n(t).parent()[0],s=this.element.find(".select").find(".optionwrapper"),o=this.element.find(".selected").length,u=parseInt(this.options.maxSelection),h=this.options.selectionMode;if(h==="single"&&(u=1,o===1&&(this.element.find(".selected").removeClass("selected"),t.addClass("selected"))),u>=0||(u="unlimit"),q!==!0&&r!==!0){if((o<u||u==="unlimit")&&!t.hasClass("selected"))t.addClass("selected");else if(t.hasClass("selected")&&h==="multiple")return t.removeClass("selected"),!1}else{if(q&&t.hasClass("selected"))return t.removeClass("selected"),!1;if(q&&!t.hasClass("selected")&&(o<u||u==="unlimit"))t.addClass("selected");else if(r===!0){var a=s.find(".option.selected").data("position"),c=t.data("position"),l=0;if(o>=u)return!1;c===0&&(c=t.data("position"));var f=a,e=t.data("position");Math.abs(e-f)+1>u&&(e=e-f>0?f+u-1:f-u+1);f>=e&&(l=f,f=e-1,e=l);s.find("div.option").slice(f,e).removeClass("selected").addClass("selected");t.trigger("focus")}}},setWaterMark:function(){var n=this.element.find(".listbox-watermark"),t=this.element.find(".listwrapper");n.length===0||(n[0].innerHTML=this.options.watermark,this.options.data.length===0&&(t.addClass("watermark"),this.setStyles()))},setStyles:function(){var t=this.element.find(".title"),e=this.element.find(".listwrapper"),q=this.element.find(".optionwrapper"),l=this.element.find(".listBoxSelect"),w=this.options.style,n=this.element.find(".stylewrapper"),o=this.element.find(".listbox-watermark"),r=t.outerHeight();if(w&&n.length>0){var b=this.element,n=b.find(".stylewrapper"),s={margin:n,border:n,background:n};StyleHelper.setStyles(s,this.options.style);s={horizontalAlign:q,font:q,padding:q,background:q};StyleHelper.setStyles(s,this.options.style);parseInt(n[0].style.borderBottomWidth)==0&&(t[0].style.borderBottom=n[0].style.borderBottom);var nt=n.find(".SFC"),tt=parseInt(n.css("border-top-width"))+parseInt(n.css("border-bottom-width")),qt=parseInt(n[0].style.margin),h=parseInt(n[0].style.marginLeft),c=parseInt(n[0].style.marginRight),u=parseInt(n[0].style.marginTop),f=parseInt(n[0].style.marginBottom);h=isNaN(h)?0:h;c=isNaN(c)?0:c;u=isNaN(u)?0:u;f=isNaN(f)?0:f;var k=parseInt(this.options.height),a=Math.round(parseFloat(n.css("border-top-width"))),d=Math.round(parseFloat(n.css("border-bottom-width"))),g=u+f,v=k-a-d-g,y=this.element[0].parentElement.getAttribute("id")==="StyleBuilderPreviewPanelContent"||this.element[0].parentElement.getAttribute("class")==="condtional-format-preview";if(this.options.height.toLowerCase()!=="auto"&&this.options.height!==""||this.options.dataSourceType!=="Static"||y?this.options.height.toLowerCase()!=="auto"&&(this.options.height!==""||y)||(this.options.height=this.options.defaultHeight):(q[0].style.position="relative",n[0].style.height="auto",e[0].style.height="100%"),r=t.outerHeight()>0?t.outerHeight():parseInt(t.css("min-height")),t.hasClass("hidden")||l.height()===l.outerHeight()+r?t.hasClass("hidden")&&(this.options.designtime||this.options.preview||this.options.dataSourceType==="Static"||(e.outerHeight(v+"px"),o.hasClass("hidden")?q.removeClass("hidden"):q.addClass("hidden")),n.outerHeight(parseInt(this.options.height)-u-f)):(e.outerHeight(v-r+"px"),o.length>0&&(r=parseInt(r),o.hasClass("hidden")?q.removeClass("hidden"):q.addClass("hidden"),o[0].style.top=r+u+a+"px"),n[0].style.width="auto",n[0].style.height="auto"),!SourceCode.Forms.Browser.msie||t.hasClass("hidden")||this.options.designtime||e.outerHeight(parseInt(this.options.height)-r-u-f-parseInt(n.css("border-bottom-width"))-parseInt(n.css("border-top-width"))+"px"),SourceCode.Forms.Browser.mozilla&&n[0].style.textDecoration!==""){var p=n[0].style.textDecoration;n[0].style.textDecoration="";t[0].style.textDecoration=p;e[0].style.textDecoration=p}}},setDisplay:function(){if(this.options.hasSetItems===!1||this.options.settingItems===!0){var q=[];if(checkExistsNotEmpty(this.options.initialDisplayValue)){for(var t=this.options.initialDisplayValue.split(this.options.delimiter),n=0,r=t.length;n<r;n++){var u={text:t[n],value:t[n]};q.push(u)}this.options.data=q;this.populateSelect()}}},setSelected:function(){var e=this.options.value,q=[],r=this.element.find(".select"),o=r.find(".option"),u=r.find(".option"),s=SourceCode.Forms.Controls.Web.ControlPack.Utils.Base64.encode(this.options.delimiter);checkExistsNotEmpty(e)&&(q=e.split(this.options.delimiter));o.removeClass("selected");for(var f=0;f<q.length;f++)for(var h=q[f].replace(s,this.options.delimiter),t=0;t<u.length;t++){var c=ControlPackBase.formatSpecialChar(n(u[t]).attr("data-value"));if(h==c){n(u[t]).addClass("selected");break}}var q=r.find(".selected");this.updateValue();this.element.find(".option").trigger("blur");this.setTabIndex()},updateValue:function(){if(this.options.settingItems===!1&&this.options.hasSetItems===!0&&!(this.options.isReadOnly||this.options.isParentReadOnly)){for(var n="",t=this.options.delimiter,f=SourceCode.Forms.Controls.Web.ControlPack.Utils.Base64.encode(t),u=this.element.find(".option.selected"),q=0;q<u.length;q++){var r=u[q].getAttribute("data-value");r=r.replace(t,f);n.length>0&&(n+=t);n+=r}n!==this.options.previous.value||n!==this.options.value?(this.options.value=n,this.options.previous.value=n,this.options.designtime!==!1||this.options.reset||raiseEvent(this.element.attr("id"),"Control","OnChange")):this.options.pendingOnchange===!0&&this.options.designtime===!1&&raiseEvent(this.element.attr("id"),"Control","OnChange")}},setListData:function(){var r=[],t;this.options.initialDisplayValue="";this.options.previous.initialDisplayValue="";var o=!1;if(this.options.dataSourceType!=="SmartObject"||this.options.jsonData)if(this.options.dataSourceType==="SmartObject"||this.options.jsonData){var c=!1,u="",q="",l=this.options.delimiter,b=SourceCode.Forms.Controls.Web.ControlPack.Utils.Base64.encode(l),f=parseInt(this.options.maxSelection)||"unlimit";f>=0||(f="unlimit");(this.options.height.toLowerCase()==="auto"||this.options.height==="")&&(this.options.height=this.options.defaultHeight);var a=this.options.displaySO?this.options.displaySO:this.options.associationSO,s=this.options.jsonData;checkExists(s)&&(a?t=s.collection:(t=s,c=!0));for(var n=0;n<t.length;n++){if(c?(u=t[n].Name,q=u):this.options.associationSO==a?(u=UtilitiesHelper.setDisplayTemplateValueFromJson(this.options.displayTemplate,t[n].fields),q=t[n].fields[this.options.valueProperty].value):(q=null,checkExists(t[n].joins)&&t[n].joins.length>0&&(u=UtilitiesHelper.setDisplayTemplateValueFromJson(this.options.displayTemplate,t[n].joins[0].fields),q=t[n].fields[this.options.valueProperty].value)),!o){var v=t[n].fields[this.options.defaultSOProperty];if(checkExists(v)){var h=v.value,p=this.options.defaultValue.split(this.options.delimiter).length;checkExists(h)&&typeof h=="string"&&h.toUpperCase()==="TRUE"&&(this.options.defaultValue!==""&&(p<f||f==="unlimit")?(this.options.defaultValue+=l,this.options.defaultValue+=q):this.options.defaultValue===""&&(this.options.defaultValue=q))}t.length===n+1&&(o=!0)}if(q!=null){var y={text:SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(u),value:SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(q)};r.push(y)}}}else for(var w=parseXML(this.options.fixedListItems),e=w.selectNodes("Items/Item"),n=0;n<e.length;n++){if(e[n].text==" ")break;var y={text:SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(e[n].text),value:SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase.escapeSpecialChar(e[n].text)};r.push(y)}else r=[],this.options.designtime&&r.push("Value 1","Value 2","Value 3","Value 4","Value 5");checkExists(t)&&t.length===0&&(this.options.data=[],this.options.item=[],this.options.value="",this.clearData(),this.element.find(".listbox-watermark").removeClass("hidden"));this.options.defaultValue!==""&&o&&(this.options.value=this.options.defaultValue);this.options.data=r;r.length>0&&(this.populateSelect(),this.setSelected());this.options.preview===!1&&this.options.designtime===!1&&(this.options.hasSetItems=!0,this.option("settingItems",!1))},populateSelect:function(){this.clearData();for(var q=this.element.find(".select").find(".optionwrapper")[0],t="",n=0;n<this.options.data.length;n++)t+='<div tabindex="-1" title="'+this.options.data[n].text+'" data-value="'+this.options.data[n].value+'" data-position="'+(n+1)+'" class="hoverdiv option">'+this.options.data[n].text+"<\/div>";t.trim()===""?(q.innerHTML='<div class="listbox-watermark">'+this.options.watermark+"<\/div>",this.setWaterMark()):q.innerHTML+=t;this.setStyles()},clearData:function(){this.element.find(".listbox-watermark").addClass("hidden");this.element.find(".optionwrapper").empty()},clearSelection:function(){this.element.find(".select").find(".hoverdiv.selected").removeClass("selected")},setTabIndex:function(){var n=this.element.find(".optionwrapper .option"),q=this.element.find(".listwrapper"),r=this.element.find(".optionwrapper"),u=this.element.find(".listbox-watermark");if(n.length>0&&this.options.isEnabled===!0&&!(this.options.isReadOnly||this.options.isParentReadOnly)){n[0].tabIndex=this.options.tabIndex;for(var t=1;t<n.length;t++)n[t].tabIndex=this.options.tabIndex}else if(n.length!==0||this.options.dataSourceType==="Static"||this.options.disabled||this.options.isReadOnly||this.options.isParentReadOnly)for(var t=0;t<n.length;t++)n[t].tabIndex=-1;else q[0].tabIndex=this.options.tabIndex;(SourceCode.Forms.Browser.mozilla&&n.length>0||n.length>0&&this.options.dataSourceType==="SmartObject")&&(q.removeClass("watermark"),q[0].tabIndex=-1,r[0].tabIndex=-1)},toggleModal:function(){if(this.options.initialDisplayValue===""){var n=this.element.find(".optionwrapper");this.element.find(".listbox-watermark").addClass("hidden");n.removeClass("hidden");n.showControlBusyModal(this.options.settingItems,{innerPositions:[{"background-position":"center"},{"background-position":"center"}]})}else this.element.find(".selectWrapper").find(".optionwrapper").showControlBusyModal(this.options.settingItems,{innerPositions:[{"background-position":"center"}]});this.options.settingItems===!1&&(raiseEvent(this.element.attr("id"),"Control","OnSetItemsCompleted"),this.options.hasSetItems=!0)},validate:function(n){n.DataType&&(n.Error=!1,n.DataType=null);UtilitiesHelper.showValidationMessage(this.element,n)},destroy:function(){this.element.off();n(document).off("click","#"+this.element.attr("id"));this.element.children().remove();n.Widget.prototype.destroy.call(this)}});n.sfc.SFCListBox.prototype.base=n.sfc.baseWidget.prototype;jQuery(document).ready(function(){SourceCode.Forms.Controls.Web.ControlPack.ListBox.loadWidget();typeof ControlResources.SourceCode.Forms.Controls.Web.ControlPack!="undefined"&&typeof Resources.ControlProperties!="undefined"&&(Resources.ControlProperties.InvalidDelimiter=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Common.Properties.Resources.InvalidDelimiter,Resources.ControlProperties.InvalidStackCapacity=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Properties.Choice.InvalidStackCapacity)})})(jQuery);
/*!
 SourceCode.Forms.Controls.Web.ControlPack.Resources.Script.MultiChoiceBehavior.js (Embedded resource)
*/
(function(n,t){var q;SourceCode.Forms.Controls.Web.ControlPack.MultiChoice=q=n.extend({},SourceCode.Forms.Controls.Web.ControlPack.ControlPackBase,{displayProperty:function(){return!1},setSourceTitle:function(n,t){var r=n.find(".SFC");q._setProperty(r,"sourceTitle",t)},setDestinationTitle:function(n,t){var r=n.find(".SFC");q._setProperty(r,"destinationTitle",t)},setStyles:function(n,t){var r=n.find(".SourceCode-Forms-Controls-Web-ControlPack-MultiChoice"),f=n.find(".resizewrapper");if(n.attr("id")==="StyleBuilderPreviewPanelContent"||n.prop("class")==="condtional-format-preview"){var u=SourceCode.Forms.Designers[SourceCode.Forms.Designers.Common.getDefinitionNode().tagName].Styles._getSelectedControl(),e=u.find(".SFC").SFCMultiChoice("option");q._setProperty(r,"isStyleBuilder",!0);q._setProperty(r,"fixedListItems","<Items><Item>AaYy<\/Item><\/Items>");q._setProperty(r,"isEnabled",!1);q._setProperty(r,"sourceTitle","AaYy");q._setProperty(r,"destinationTitle","AaYy")}q._setProperty(r,"style",t);n.attr("id")=="StyleBuilderPreviewPanelContent"&&(r[0].style.width="100%")},loadWidget:function(){n(".SourceCode-Forms-Controls-Web-ControlPack-MultiChoice").SFCMultiChoice()},setReadOnly:function(n,t){var r=n.find(".SFC");q._setProperty(r,"isReadOnly",t)},setEnabled:function(n,t){typeof t=="string"&&(t=t.toLowerCase()==="true");var r=n.hasClass("form-control"),u=r?n.children():n.find(".resizewrapper :not(.controloverlay):not(.ui-resizable-handle)");u.first().toggleClass("disabled",!t);var f=n.find(".SFC");q._setProperty(f,"isEnabled",t)},setHeight:function(n,t){var r=n.find(".SourceCode-Forms-Controls-Web-ControlPack-MultiChoice");return t=SourceCode.Forms.Controls.Web.ControlPack.Utils.UnitHelper(t,"auto",!1),q._setProperty(r,"height",t),r.SFCMultiChoice("setHeight"),t},setWidth:function(n,t){var r=n.find(".SourceCode-Forms-Controls-Web-ControlPack-MultiChoice");return t=SourceCode.Forms.Controls.Web.ControlPack.Utils.UnitHelper(t,"auto",!0),q._setProperty(r,"width",t),t},setItems:function(n){var t=q._getInstance(n.CurrentControlId);t.SFCMultiChoice("option","jsonData",n.JsonData);t.SFCMultiChoice("setListData")},setValueWithOnSet:function(n){var t=q._getInstance(n.CurrentControlId);t.SFCMultiChoice("option","reset","true");t.SFCMultiChoice("removeAll");t.SFCMultiChoice("option","value","");t.SFCMultiChoice("option","reset","false");t.SFCMultiChoice("option","value",n.Value);t.SFCMultiChoice("option","value")===""&&t.SFCMultiChoice("option","value",t.SFCMultiChoice("option","defaultValue"));raiseEvent(n.CurrentControlId,"Control","OnSet");raiseEvent(n.CurrentControlId,"Control","OnChange")},getItems:function(n){var t=[];if(checkExistsNotEmpty(n.CurrentControlId)){var r=q._getInstance(n.CurrentControlId);checkExists(r)&&(r.SFCMultiChoice("option").dataSourceType==="SmartObject"?t=SourceCode.Forms.Controls.Web.ControlPack.MultiChoice._getSmoDataSourceItems(n):r.SFCMultiChoice("option").dataSourceType==="Static"&&(t=SourceCode.Forms.Controls.Web.ControlPack.MultiChoice._getStaticDataSourceItems(n)))}return t},_getSmoDataSourceItems:function(n){var t=[],e=[],r=n.JsonData;if(checkExists(r)){var u=q._getInstance(n.CurrentControlId).SFCMultiChoice("option"),l=u.displaySO;checkExistsNotEmpty(l)||(l=u.associationSO);var v=n.Value==="All";if(v)e=r;else{switch(n.Value){case"Selected":case"Checked":t=q._getInstance(n.CurrentControlId).find(".selectDestinationWrapper div.option:not(.hidden)");break;case"Unselected":case"Unchecked":t=q._getInstance(n.CurrentControlId).find(".selectSource div.option:not(.hidden)")}if(t.length>0){for(var o=[],s=0;s<t.length;s++){var y=t[s],a=y.getAttribute("data-value");a&&o.push(a.toString())}if(o.length>0){var h=u.valueProperty;checkExistsNotEmpty(h)||(h=u.displayJoinProperty);for(var c,p=r.length,f=0;f<p;f++)c=r[f].fields[h].value,checkExists(c)&&o.indexOf(c.toString())>-1&&e.push(r[f])}}}}return e},_getStaticDataSourceItems:function(n){var f=[],r=JSON.parse(q._getInstance(n.CurrentControlId).SFCMultiChoice("option").fixedListItems),t=[];switch(n.Value){case"All":f=r;break;case"Selected":case"Checked":t=q._getInstance(n.CurrentControlId).find(".selectDestinationWrapper div.option:not(.hidden)");break;case"Unselected":case"Unchecked":t=q._getInstance(n.CurrentControlId).find(".selectSource div.option:not(.hidden)")}if(t.length>0)for(var e=0;e<t.length;e++){var s=t[e],o=s.getAttribute("data-value");if(o)for(var u=0;u<r.length;u++)if(r[u].value===o){f.push(r[u]);break}}return f}});n.widget("sfc.SFCMultiChoice",n.sfc.baseWidget,{_inputBox:null,options:{fixedListItems:"<Items><\/Items>",displaySO:"",displayJoinProperty:"",displayMethod:"",sourceTitle:"",destinationTitle:"",defaultHeight:"175px",defaultSOProperty:"",defaultValue:"",delimiter:";",value:"",width:"100%",height:"175px",previous:{},designtime:!1,preview:!1,isReadOnly:!1,isParentReadOnly:!1,isEnabled:!0,settingItems:!1,initialDisplayValue:"",style:SourceCode.Forms.Controls.Base.emptyStylesNode,data:[],pendingOnchange:!1,isStyleBuilder:!1,hasSetItems:!1,pendingLock:!1,tabIndex:0,reset:!1,prevSelection:null,widthChanged:!1},_create:function(){var t=this.element.parent().attr("id")==="StyleBuilderPreviewPanelContent"||this.element.parent().prop("class")==="condtional-format-preview"?!0:!1;var r=this.element.find(".selectSourceWrapper");this.element.find(".selectSource").addClass("selectPosition");checkExistsNotEmpty(this.options.sourceTitle)||t||r.addClass("noHeader");var u=this.element.find(".selectDestinationWrapper");if(this.element.find(".selectDestination").addClass("selectPosition"),this.element.find(".dontloadonleftside").removeClass("dontloadonleftside"),checkExistsNotEmpty(this.options.destinationTitle)||t||u.addClass("noHeader"),!this.options.designtime&&n("html").hasClass("mobile")){var q=parseInt(this.element.height());this.element.find(".selectDestinationWrapper")[0].style.height=this.element.find(".selectDestinationWrapper").hasClass("noHeader")?this.options.height:q+"px";this.element.find(".selectSourceWrapper")[0].style.height=this.element.find(".selectSourceWrapper").hasClass("noHeader")?this.options.height:q+"px"}this.options.designtime=this.element.hasClass("designtime");this.options.preview=this.element.hasClass("preview");this.bindEvents();this.options.designtime||(this.element[0].style.height=this.options.height,this.options.preview===!1&&(this.options.dataSourceType!=="SmartObject"&&raiseEvent(this.element.attr("id"),"Control","OnSetItemsCompleted"),raiseEvent(this.element.attr("id"),"Control","Init")),this.initialize());var f=this.element.find(".destinationtitle"),e=this.element.find(".sourcetitle");e.attr("title",this.options.sourceTitle);f.attr("title",this.options.destinationTitle);this.base._create.apply(this,arguments);this.options.previous=n.extend({},this.options);this.options.value!==""?this.setSelected():this.manageButtonState();this.options.dataSourceType!=="SmartObject"&&(this.options.hasSetItems=!0)},_optionNameTransformer:function(n){n=n.toLowerCase();switch(n){case"associationso":n="associationSO";break;case"associationmethod":n="associationMethod";break;case"fixedlistitems":n="fixedListItems";break;case"displayso":n="displaySO";break;case"displayjoinproperty":n="displayJoinProperty";break;case"displaymethod":n="displayMethod";break;case"defaultValue":n="defaultValue";break;case"defaultsoproperty":n="defaultSOProperty";break;case"delimiter":n="delimiter";break;case"displaytype":n="displayType";break;case"associatedjoinproperty":n="associatedJoinProperty";break;case"displaytemplate":n="displayTemplate";break;case"datasourcetype":n="dataSourceType";break;case"property":n="Property";break;case"valueproperty":n="valueProperty";break;case"staticvalues":n="staticValues";break;case"selectedvalue":n="selectedValue";break;case"sourcetitle":n="sourceTitle";break;case"destinationtitle":n="destinationTitle";break;case"jsondata":n="jsonData";break;case"isreadonly":n="isReadOnly";break;case"isparentreadonly":n="isParentReadOnly";break;case"isenabled":n="isEnabled";break;case"settingitems":n="settingItems";break;case"initialdisplayvalue":n="initialDisplayValue";break;case"isstylebuilder":n="isStyleBuilder";break;case"tabindex":n="tabIndex";break;default:n=this.base._optionNameTransformer(n)}return n},_optionValueConverter:function(n,q){n=n.toLowerCase();switch(n){case"sourcetitle":case"destinationtitle":(q===t||q==null||q.length<=0)&&(q="");break;case"isReadOnly":case"isParentReadOnly":case"isEnabled":case"isStyleBuilder":q=this.base._booleanConverter(q);break;case"height":q=SourceCode.Forms.Controls.Web.ControlPack.Utils.UnitHelper(q,"auto",!1);break;case"tabIndex":if(q=parseInt(q),q>=-1&&q<=32767)break;else{q=-1;break}default:q=this.base._optionValueConverter(n,q)}return q},setHeight:function(){var n=this.element.find(".selectSource"),r=this.element.find(".selectDestination"),u=parseInt(this.options.height),t=window.getComputedStyle(n[0],null),f=parseInt(t.borderTop),e=parseInt(t.borderBottom),q=u-(f+e);n.height(q);r.height(q);this.setStyles()},applyChanges:function(){var r=this.element,u=this;if(this.options.settingItems!==this.options.previous.settingItems&&(this.options.previous.settingItems=this.options.settingItems,this.toggleModal()),(this.options.jsonData!==this.options.previous.jsonData||this.options.fixedListItems!==this.options.previous.fixedListItems)&&(this.options.previous.jsonData=this.options.jsonData,this.options.previous.fixedListItems=this.options.fixedListItems,this.options.height.toLowerCase()==="auto"&&(this.element[0].style.height="auto"),this.setListData()),this.options.width!==this.options.previous.width&&(this.options.designtime?(this.element[0].style.width="auto",this.options.width.indexOf("%")>-1?(this.element.closest(".controlwrapper")[0].style.width=this.options.width,this.options.widthChanged=!0):(this.element.closest(".controlwrapper")[0].style.width=parseInt(this.options.width)+"px",this.options.widthChanged=!0)):this.element[0].style.width=this.options.width.indexOf("%")>-1?this.options.width:parseInt(this.options.width)+"px"),this.options.height!==this.options.previous.height&&(this.element[0].style.height=isNaN(parseInt(this.options.height))?this.options.defaultHeight:this.options.height),this.options.sourceTitle!==this.options.previous.sourceTitle){var n=this.element.find(".sourcetitle"),t=this.element.find(".selectSourceWrapper");n.attr("title",this.options.sourceTitle);checkExistsNotEmpty(this.options.sourceTitle)?(n[0].innerHTML=this.options.sourceTitle,n.removeClass("hidden"),t.removeClass("noHeader")):(n[0].innerHTML="",n.addClass("hidden"),t.addClass("noHeader"))}if(this.options.destinationTitle!==this.options.previous.destinationTitle){var n=this.element.find(".destinationtitle"),q=this.element.find(".selectDestinationWrapper");n.attr("title",this.options.destinationTitle);checkExistsNotEmpty(this.options.destinationTitle)?(n[0].innerHTML=this.options.destinationTitle,n.removeClass("hidden"),q.removeClass("noHeader")):(n[0].innerHTML="",n.addClass("hidden"),q.addClass("noHeader"))}this.options.value!==this.options.previous.value&&(this.options.settingItems===!1&&this.options.hasSetItems===!0?this.setSelected():this.options.pendingOnchange=!0);this.options.style!==this.options.previous.style&&this.setStyles();(this.options.isReadOnly!==this.options.previous.isReadOnly||this.options.isParentReadOnly!==this.options.previous.isParentReadOnly||this.options.isEnabled!==this.options.previous.isEnabled)&&this.manageButtonState();this.options.initialDisplayValue!==this.options.previous.initialDisplayValue&&this.setDisplay();this.options.tabIndex!==this.options.previous.tabIndex&&this.setTabIndex();this.options.delimiter!==this.options.previous.delimiter&&this.updateValue();this.base.applyChanges.apply(this,arguments)},initialize:function(){if(this.options.dataSourceType==="Static"&&this.options.fixedListItems.substring(0,1)==="["){for(var t=JSON.parse(this.options.fixedListItems),n=0;n<t.length;n++)t[n].isDefault&&(this.options.defaultValue+=t[n].value+this.options.delimiter);this.options.defaultValue=this.options.defaultValue.slice(0,-1);typeof this.options.defaultValue!="undefined"&&this.options.defaultValue!==""&&(this.options.preview||this.addDefault())}},onDoubleClick:function(n){var t=jQuery(n.target);if(this.options.isReadOnly===!0||this.options.isParentReadOnly===!0||t.hasClass("disabled"))return!1;this.options.reset=!1;t.closest(".multiSelectSelect.selectSource.selectPosition").length>0?this.addOne():this.removeOne();n.stopPropagation()},bindEvents:function(){var t=this,q=!1,r=!1;t.element.on("dblclick",t.onDoubleClick.bind(t));this.element.on("click keyup keydown",".hoverdiv, .hoverbtn",function(u){if(u.type==="click"&&u.target.nodeName!=="A")return t.hoverdivClick(u),!1;if(u.type==="keydown"){if(u.which===38||u.which===40)return u.preventDefault(u),!1;u.which===17?q=!0:u.which===16?r=!0:u.which===32&&u.preventDefault()}else if(u.type==="keyup"&&u.which===17)q=!1;else if(u.type==="keyup"&&u.which===16)r=!1;else if(u.shiftKey)switch(u.which){case 38:return t.toggleFocusUp(u),u.preventDefault(),!1;case 40:return t.toggleFocusDown(u),u.preventDefault(),!1}else switch(u.which){case 38:return t.toggleFocusUp(u),u.preventDefault(),!1;case 40:return t.toggleFocusDown(u),u.preventDefault(),!1;case 37:return t.element.find(".buttonOneBack").hasClass("disabled")===!1&&(t.options.reset=!1,t.removeOne()),u.preventDefault(),!1;case 39:return t.element.find(".buttonOne").hasClass("disabled")===!1&&(t.options.reset=!1,t.addOne()),u.preventDefault(),!1;case 13:return n(this).hasClass("disabled")===!1&&n(this).hasClass("hoverbtn")&&n(this).trigger("click"),u.preventDefault(),!1;case 32:var f=q?"ctrl":r?"shift":"none";return t.toggleSelection(u,f),!1}});this.element.on("focusout",".stylewrapper",function(){return n(this).find(".focus").removeClass("focus"),!1});this.element.on("click",".buttonOne",function(){return n(this).hasClass("disabled")==!1&&(t.options.reset=!1,t.addOne()),!1});this.element.on("click",".buttonAll",function(){return n(this).hasClass("disabled")==!1&&(t.options.reset=!1,t.addAll()),!1});this.element.on("focus",".buttonAll",function(){n(this).hasClass("disabled")&&n(this.parentNode).find("a:not(.disabled)").first().addClass("focus").trigger("focus")});this.element.on("click",".buttonOneBack",function(){return n(this).hasClass("disabled")==!1&&(t.options.reset=!1,t.removeOne()),!1});this.element.on("click",".buttonAllBack",function(){return n(this).hasClass("disabled")==!1&&(t.options.reset=!1,t.removeAll(!0)),!1});n(document).on("click","#"+this.element.attr("id"),function(q){var r=n(q.target);if(n(this).hasClass("disabled")===!1&&r.hasClass("option")===!1&&r.prop("type")!=="button")return t.element.find(".option").removeClass("selected"),t.manageButtonState(),!1})},toggleSelection:function(t,q){var u=n(t.target);if(q==="ctrl")u.hasClass("selected")?u.removeClass("selected"):u.addClass("selected");else if(q==="shift"){for(var f=n(u).siblings().addBack(),e=[],o=!1,r=0;r<f.length;r++){if(f[r]===this.options.prevSelection||f[r]===u[0]){if(o){f[r]===u[0]&&e.push(f[r]);break}o=!0}o&&f[r]!=this.options.prevSelection&&e.push(f[r])}for(var r=0;r<e.length;r++)n(e[r]).hasClass("selected")?n(e[r]).removeClass("selected"):n(e[r]).addClass("selected")}else this.clearSelection(),u.addClass("selected");this.manageButtonState()},toggleFocusDown:function(t){var r=n(t.target);r.removeClass("focus");var q=r.next();if(q.length===0){var u=r.siblings().not(".hidden").eq(0);u.addClass("focus").trigger("focus")}while(q.length!==0){if(!q.hasClass("hidden")){q.addClass("focus").trigger("focus");break}q=q.next()}t.shiftKey&&(r.addClass("selected"),q.addClass("selected").trigger("focus"));this.manageButtonState()},toggleFocusUp:function(t){var r=n(t.target);r.removeClass("focus");var q=r.prev();if(q.length===0){var u=r.siblings().not(".hidden").last();u.addClass("focus").trigger("focus")}while(q.length!==0){if(!q.hasClass("hidden")){q.addClass("focus").trigger("focus");break}q=q.prev()}t.shiftKey&&(r.addClass("selected"),q.addClass("selected").trigger("focus"));this.manageButtonState()},hoverdivClick:function(t){var q=n(t.target);n(t.target.parentNode).find(".focus").removeClass("focus");t.ctrlKey==!0?(this.setOptionSelections(q,!0),this.toggleSelection(t,"ctrl")):t.shiftKey==!0?(this.setOptionSelections(q,!0),this.toggleSelection(t,"shift")):(this.setOptionSelections(q,!1),this.toggleSelection(t,"none"));this.options.prevSelection=q[0];this.manageButtonState()},manageTabState:function(){},removeAll:function(n){var t=this.element.find(".selectSource").find(".option"),q=this.element.find(".selectDestination").find(".option");q.addClass("hidden").removeClass("selected, focus");t.removeClass("hidden");t.removeClass("selected");n&&this.updateValue()},removeOne:function(){var o=this.element.find(".selectDestination").find(".optioninnerwrapper"),s=this.element.find(".selectSource").find(".optioninnerwrapper"),f=s.find(".option"),t,q=o.find(".selected");q.addClass("hidden");for(var r=0,h=q.length;r<h;r++)for(var c=q[r],u=0,l=f.length;u<l;u++){var e=f[u];if(c.getAttribute("data-mapping-id")===e.getAttribute("data-mapping-id")){t=n(e);t.removeClass("hidden");t.addClass("selected");break}}q.length===1&&(t.addClass("selected"),t.addClass("focus").trigger("focus"));this.updateValue()},addOne:function(){var o=this.element.find(".selectDestination").find(".optioninnerwrapper"),s=this.element.find(".selectSource").find(".optioninnerwrapper"),q=o.find(".option");q.removeClass("selected");q.removeClass("focus");var t,r=s.find(".selected");r.addClass("hidden");for(var u=0,h=r.length;u<h;u++)for(var c=r[u],f=0,l=q.length;f<l;f++){var e=q[f];if(c.getAttribute("data-mapping-id")===e.getAttribute("data-mapping-id")){t=n(e);t.removeClass("hidden");t.addClass("selected");break}}r.length===1&&(t.addClass("selected"),t.addClass("focus").trigger("focus"));this.updateValue()},addDefaultStaticData:function(){var q=this.element.find(".selectDestination"),r=this.element.find(".selectSource"),u=r.find("[data-default=True]");u.addClass("hidden");for(var t=this.options.defaultValue.split(this.options.delimiter),n=0,f=t.length;n<f;n++){var e=q.find("[data-value={0}]".format(t[n]));e.removeClass("hidden")}},addDefaultSmartObject:function(){var n=this.element.find(".selectDestination"),t=this.element.find(".selectSource"),u=n.find(".option"),q=t.find("[data-value='{0}']".format(this.options.defaultValue));q.addClass("hidden");var r=n.find("[data-value={0}]".format(this.options.defaultValue));r.removeClass("hidden")},addDefault:function(){this.options.dataSourceType==="SmartObject"?this.addDefaultSmartObject():this.addDefaultStaticData();for(var t="",e=SourceCode.Forms.Controls.Web.ControlPack.Utils.Base64.encode(this.options.delimiter),o=new RegExp(this.options.delimiter,"g"),u=this.element.find(".selectDestination").find(".option"),q=0;q<u.length;q++){var f=u[q];if(n(f).hasClass("hidden")===!1){var r=f.getAttribute("data-value");r=r.replace(o,e);t.length>0&&(t+=this.options.delimiter);t+=r}}(t!==this.options.previous.value||t!==this.options.value)&&(this.options.value=t,this.options.previous.value=t)},addAll:function(){var n=this.element.find(".selectDestination").find(".option"),t=this.element.find(".selectSource").find(".option");n.removeClass("hidden");t.addClass("hidden");n.removeClass("selected");this.updateValue()},setOptionSelections:function(t,q){var r=n(t).parent()[0],u=this.element.find(".selectSource").find(".optioninnerwrapper"),f=this.element.find(".selectDestination").find(".optioninnerwrapper");q===!0?(r===u[0]&&f.children().removeClass("selected"),r===f[0]&&u.children().removeClass("selected")):this.element.find(".option").removeClass("selected")},setStyles:function(){var t=this.element.find(".selectSource"),o=this.element.find(".selectDestination"),q=this.element.find(".optionwrapper"),a=this.element.find(".optioninnerwrapper");if(n={border:t,background:t},StyleHelper.setStyles(n,this.options.style),n={border:o,background:o},StyleHelper.setStyles(n,this.options.style),t[0].style.borderWidth==="0px"){var s=this.element.find(".sourcetitle"),h=this.element.find(".destinationtitle");n={border:s,background:s};StyleHelper.setStyles(n,this.options.style);n={border:h,background:h};StyleHelper.setStyles(n,this.options.style)}n={horizontalAlign:q,font:q};StyleHelper.setStyles(n,this.options.style);n={padding:a};StyleHelper.setStyles(n,this.options.style);q[0].style.background=t[0].style.background;q[1].style.background=t[0].style.background;var e=this.element.find(".stylewrapper"),n={margin:e};StyleHelper.setStyles(n,this.options.style);var e=this.element.find(".stylewrapper"),r=parseInt(e[0].style.marginTop,10);isNaN(r)&&(r=0);var u=parseInt(e[0].style.marginBottom,10);isNaN(u)&&(u=0);var f=parseInt(this.options.height),v=this.element.find(".selectSource"),y=this.element.find(".selectDestination"),p=f-(r+u),w=f-(r+u);v[0].style.height=p+"px";y[0].style.height=w+"px";var c=this.element.find(".sourcetitle"),l=this.element.find(".destinationtitle"),nt=this.element.find(".optionwrapper"),b=parseInt(c[0].style.height),k=parseInt(l[0].style.height),d=f-b,g=f-k;c[0].style.height=d+"px";l[0].style.height=g+"px";this.options.widthChanged&&(this.element.closest(".resizewrapper")[0].style.width="auto")},setDisplay:function(){if(this.options.hasSetItems===!1||this.options.settingItems===!0){var q=[];if(checkExistsNotEmpty(this.options.initialDisplayValue)){for(var t=this.options.initialDisplayValue.split(this.options.delimiter),n=0,r=t.length;n<r;n++){var u={text:t[n],value:t[n]};q.push(u)}this.options.data=q;this.populateSelect();this.addAll(!0);this.element.find(".selectDestinationWrapper").find(".optioninnerwrapper").showControlBusyModal(!1)}}},setSelected:function(){this.removeAll(!1);var n=[],t=this.element.find(".selectSource").find(".option");t.removeClass("selected");var f=SourceCode.Forms.Controls.Web.ControlPack.Utils.Base64.encode(this.options.delimiter);checkExistsNotEmpty(this.options.value)&&(n=this.options.value.split(this.options.delimiter));for(var q=0,e=n.length;q<e;q++)for(var o=n[q].replace(f,this.options.delimiter),r=0,s=t.length;r<s;r++){var u=t[r];if(u.getAttribute("data-value").toUpperCase()===o.toUpperCase()){u.className+=" selected";break}}this.addOne();this.updateValue();this.element.find(".option").removeClass("selected").trigger("blur");this.manageButtonState()},updateValue:function(){if(this.options.settingItems===!1&&this.options.hasSetItems===!0){for(var n="",t=this.options.delimiter,f=SourceCode.Forms.Controls.Web.ControlPack.Utils.Base64.encode(t),u=this.element.find(".selectDestination").find(".option:not('.hidden')"),q=0;q<u.length;q++){var r=u[q].getAttribute("data-value");r=r.replace(t,f);n.length>0&&(n+=t);n+=r}n!==this.options.previous.value||n!==this.options.value?(this.options.value=n,this.options.previous.value=n,this.options.designtime!==!1||this.options.reset||raiseEvent(this.element.attr("id"),"Control","OnChange")):this.options.pendingOnchange===!0&&this.options.designtime===!1&&raiseEvent(this.element.attr("id"),"Control","OnChange")}this.manageButtonState()},setListData:function(){var q=[];if(this.options.initialDisplayValue="",this.options.previous.initialDisplayValue="",this.options.dataSourceType!=="SmartObject"||this.options.jsonData)if(this.options.dataSourceType==="SmartObject"||typeof this.options.jsonData!="undefined"){var o=!1,r="",t="",s=this.options.displaySO?this.options.displaySO:this.options.associationSO,f=this.options.jsonData;checkExists(f)&&(s?displayNodes=f.collection:(displayNodes=f,o=!0));for(var n=0;n<displayNodes.length;n++){o?(r=displayNodes[n].Name,t=r):this.options.associationSO==s?(r=UtilitiesHelper.setDisplayTemplateValueFromJson(this.options.displayTemplate,displayNodes[n].fields),t=displayNodes[n].fields[this.options.valueProperty].value):(t=null,checkExists(displayNodes[n].joins)&&displayNodes[n].joins.length>0&&(r=UtilitiesHelper.setDisplayTemplateValueFromJson(this.options.displayTemplate,displayNodes[n].joins[0].fields),t=displayNodes[n].fields[this.options.valueProperty].value));var h=displayNodes[n].fields[this.options.defaultSOProperty];if(checkExists(h)){var e=h.value;checkExists(e)&&typeof e=="string"&&e.toUpperCase()==="TRUE"&&(this.options.defaultValue=t,this.addDefault())}if(t!=null){var c={text:r,value:t};q.push(c)}}}else for(var l=parseXML(this.options.fixedListItems),u=l.selectNodes("Items/Item"),n=0;n<u.length;n++){if(u[n].text==" ")break;var c={text:u[n].text,value:u[n].text};q.push(c)}else q=[],this.options.designtime&&q.push("Value 1","Value 2","Value 3","Value 4","Value 5");this.options.data=q;this.populateSelect();this.setSelected();this.manageButtonState();this.options.preview===!1&&this.options.designtime===!1&&(this.options.hasSetItems=!0,this.option("settingItems",!1))},populateSelect:function(){this.clearData();for(var r=this.element.find(".selectSource").find(".optioninnerwrapper")[0],u=this.element.find(".selectDestination").find(".optioninnerwrapper")[0],t=0;t<this.options.data.length;t++){var q=this.options.data[t],n=document.createElement("div");n.setAttribute("tabindex","0");n.setAttribute("data-value",q.value);n.setAttribute("data-display",q.text);n.setAttribute("data-mapping-id",t);n.setAttribute("class","hoverdiv option");n.innerText=q.text;r.appendChild(n);u.appendChild(n.cloneNode(!0))}},clearData:function(){this.element.find(".hoverdiv").remove()},clearSelection:function(){this.element.find(".selectDestination").find(".hoverdiv.selected").removeClass("selected");this.element.find(".selectSource").find(".hoverdiv.selected").removeClass("selected")},manageButtonState:function(){var u=this.element.find(".selectDestination"),f=this.element.find(".selectSource"),n=this.element.find(".buttonOne"),q=this.element.find(".buttonAll"),t=this.element.find(".buttonOneBack"),r=this.element.find(".buttonAllBack"),e=f.find(".hoverdiv"),o=f.find(".hoverdiv.selected"),s=u.find(".hoverdiv"),h=u.find(".hoverdiv.selected");this.setTabIndex();!this.options.isEnabled||this.options.isReadOnly||this.options.isParentReadOnly||this.options.settingItems?(n.addClass("disabled"),q.addClass("disabled"),t.addClass("disabled"),r.addClass("disabled"),this.element.find(".selected").removeClass("selected")):(e.not(".hidden").length>0?(q.removeClass("disabled"),o.not(".hidden").length>0?n.removeClass("disabled"):n.addClass("disabled")):(q.addClass("disabled"),n.addClass("disabled")),s.not(".hidden").length>0?(r.removeClass("disabled"),h.not(".hidden").length>0?t.removeClass("disabled"):t.addClass("disabled")):(r.addClass("disabled"),t.addClass("disabled")))},setTabIndex:function(){var q=this.element.find(".selectSource"),r=this.element.find(".selectDestination"),t=q.find(".option"),u=r.find(".option"),f=q.find(".optioninnerwrapper"),e=r.find(".optioninnerwrapper");if(f.attr("tabindex",-1),e.attr("tabindex",-1),t.attr("tabindex",-1),u.attr("tabindex",-1),this.options.isEnabled){var o=t.not(".hidden");o.length===0?f[0].tabIndex=this.options.tabIndex:o[0].tabIndex=this.options.tabIndex;var s=u.not(".hidden");s.length===0?e[0].tabIndex=this.options.tabIndex:s[0].tabIndex=this.options.tabIndex;var n=this.element.find(".buttonWrapper").find(".hoverbtn");n.attr("tabindex",-1);n.eq(0).attr("tabindex",this.options.tabIndex);t.not(".hidden").length===0&&(n.eq(0).attr("tabindex",-1),n.last().attr("tabindex",this.options.tabIndex))}},toggleModal:function(){this.options.initialDisplayValue===""?this.element.find(".optioninnerwrapper").showControlBusyModal(this.options.settingItems,{innerPositions:[{"background-position":"center"},{"background-position":"center"}]}):this.element.find(".selectSourceWrapper").find(".optioninnerwrapper").showControlBusyModal(this.options.settingItems,{innerPositions:[{"background-position":"center"}]});this.options.settingItems===!1&&(raiseEvent(this.element.attr("id"),"Control","OnSetItemsCompleted"),this.options.hasSetItems=!0);this.manageButtonState()},validate:function(n){n.DataType&&(n.Error=!1,n.DataType=null);UtilitiesHelper.showValidationMessage(this.element,n)},destroy:function(){this.element.off();n(document).off("click","#"+this.element.attr("id"));this.element.children().remove();n.Widget.prototype.destroy.call(this)}});n.sfc.SFCMultiChoice.prototype.base=n.sfc.baseWidget.prototype;jQuery(document).ready(function(){SourceCode.Forms.Controls.Web.ControlPack.MultiChoice.loadWidget();typeof ControlResources.SourceCode.Forms.Controls.Web.ControlPack!="undefined"&&typeof Resources.ControlProperties!="undefined"&&(Resources.ControlProperties.InvalidDelimiter=ControlResources.SourceCode.Forms.Controls.Web.ControlPack.Common.Properties.Resources.InvalidDelimiter)})})(jQuery);
