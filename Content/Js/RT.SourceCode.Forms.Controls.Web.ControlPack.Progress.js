/*!
 SourceCode.Forms.Controls.Web.ControlPack.Resources.Scripts.ProgressWidget_Metro.js (Embedded resource)
*/
(typeof SourceCode=="undefined"||SourceCode===null)&&(SourceCode={});(typeof SourceCode.Forms=="undefined"||SourceCode.Forms===null)&&(SourceCode.Forms={});(typeof SourceCode.Forms.Controls=="undefined"||SourceCode.Forms.Controls===null)&&(SourceCode.Forms.Controls={});(typeof SourceCode.Forms.Controls.Web=="undefined"||SourceCode.Forms.Controls.Web===null)&&(SourceCode.Forms.Controls.Web={});(typeof SourceCode.Forms.Controls.Web.ControlPack=="undefined"||SourceCode.Forms.Controls.Web.ControlPack===null)&&(SourceCode.Forms.Controls.Web.ControlPack={});var ProgressStepState={empty:null,inprogress:"inprogress",completed:"completed",paused:"paused",error:"error"};SourceCode.Forms.Controls.Web.ControlPack.ProgressWidget_Metro=function(){};var ProgressMetro;SourceCode.Forms.Controls.Web.ControlPack.ProgressWidget_Metro.prototype=ProgressMetro={metro_items:null,initialize_Metro:function(){if(this.metro_items=[],this.options.dataSourceType===this.DataSourceType.Static&&checkExistsNotEmpty(this.options.FixedListItems)){let n=JSON.parse(this.options.FixedListItems),t=n.length;for(let q=0;q<t;q++){let t=n[q],r={id:t.value,title:t.display,state:ProgressStepState.empty};this.metro_items.push(r)}}},_bindListeners:function(){let n=this,t=this.element[0].querySelectorAll(".container.metro .step-container .step"),q=t.length;for(let r=0;r<q;r++)t[r].addEventListener("click",function(t){n._onStepClicked(n,t)})},_onStepClicked:function(n,t){let u=t.target,f=$(t.target).closest(".container.metro"),r=f.find(".step"),q;for(let n=0;n<r.length;n++)if(r[n]===u){q=n;break}q>=0&&this.base._booleanConverter(this.options.userSelectable)&&(this.metro_items[q].id!==this.options.selectedId||!this.base._booleanConverter(this.options.selectedId))&&(this.setSelectedStep(this.metro_items[q].id,this.options.selectedId),this.options.selectedId=this.metro_items[q].id,this.options.previous.selectedId=this.metro_items[q].id,raiseEvent(this.element.attr("id"),"Control","OnChange"))},setStepState:function(n,t,q){let r=this.element[0].querySelectorAll(".step-container"),u;u=this.getElementLocation(r,n);t===ProgressStepState.inprogress&&(this.options.inProgressId=n,this.options.previous.inProgressId=n);q===!0&&t===ProgressStepState.inprogress?(this.updatePreceedingSteps(r,u),this.updateStep(t,r,u)):(this.updateStep(t,r,u),this.updateConnectors(r,u))},updateStep:function(n,t,q){let r=Object.keys(ProgressStepState);for(n!=null&&n!=""&&r.splice(r.indexOf(n),1),i=0;i<r.length;i++)t[q].classList.remove(r[i]);t[q].classList.add(n);this.metro_items[q].state=n},updateConnectors:function(n,t){t>0&&(this.metro_items[t-1].state!==ProgressStepState.empty&&this.metro_items[t].state!==ProgressStepState.empty?(n[t-1].classList.add("next-completed"),n[t].classList.add("last-completed")):(n[t-1].classList.remove("next-completed"),n[t].classList.remove("last-completed")));t<n.length-1&&(this.metro_items[t+1].state!==ProgressStepState.empty&&this.metro_items[t].state!==ProgressStepState.empty?(n[t].classList.add("next-completed"),n[t+1].classList.add("last-completed")):(n[t].classList.remove("next-completed"),n[t+1].classList.remove("last-completed")))},updatePreceedingSteps:function(n,t){this.clearAllSteps(n,t);for(let q=0;q<t;q++)this.updateStep(ProgressStepState.completed,n,q),n[q].classList.add("last-completed"),n[q].classList.add("next-completed");n[t].classList.add("last-completed")},clearAllSteps:function(n,t){for(let q=t;q<n.length;q++)this.updateStep(ProgressStepState.empty,n,q),n[q].classList.remove("last-completed"),n[q].classList.remove("next-completed")},setSelectable:function(n){let t=this.element[0].querySelectorAll(".container.metro");$(t).toggleClass("clickable",n)},setSelectedStep:function(n,t){if(this.base._booleanConverter(this.options.userSelectable)){let q=this.element[0].querySelectorAll(".step-container"),r,u;r=this.getElementLocation(q,t);u=this.getElementLocation(q,n);for(let n=0;n<q.length;n++)n===u&&q[n].classList.add("selected"),n===r&&q[n].classList.remove("selected")}},getElementLocation:function(n,t){let q=null;if(t){let r=n.length;for(let n=0;n<r;n++)if(this.metro_items[n].id==t){q=n;break}}return q},render_Metro:function(){let n=this.element.hasClass("designtime");if(!this.base._booleanConverter(n)){let n=this.element[0].querySelector(".stylewrapper");if(n===null)throw Error("Control must have an element with class stylewrapper");if(this.metro_items.length>0){$(n).empty();let t=document.createElement("div");t.classList.add("container");t.classList.add("metro");let r=null,q=this.metro_items.length;for(let n=0;n<q;n++){let f=this.metro_items[n],u=SFCTemplateManager.getTemplate("MetroStep",SFCTemplateBehaviour.Default,this);u.setToken("title",this.escapeSpecialChar(f.title));u.setToken("stepNumber","Step "+(n+1));n==0?u.setToken("position","first"):n==q-1?u.setToken("position","last"):u.setToken("position","");let e=jQuery(u.content)[0];t.appendChild(e);f.state===ProgressStepState.inprogress&&(r=f)}n.appendChild(t);this.setSelectable(this.options.userSelectable);this._bindListeners()}else{let t=document.createElement("div");t.classList.add("watermark");n.appendChild(t)}}},setItems_Metro:function(n){let t=n.JsonData.collection.length;this.metro_items.length>0&&(this.metro_items=[]);for(let q=0;q<t;q++){let t=n.JsonData.collection[q],r=UtilitiesHelper.setDisplayTemplateValueFromJson(this.options.displayTemplate,t.fields),u={id:t.fields[this.options.valueProperty].value,title:r,state:ProgressStepState.empty};this.metro_items.push(u)}this.render_Metro()},escapeSpecialChar:function(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}};
/*!
 SourceCode.Forms.Controls.Web.ControlPack.Resources.Scripts.ProgressWidget.js (Embedded resource)
*/
(function(n){(typeof SourceCode=="undefined"||SourceCode===null)&&(SourceCode={});(typeof SourceCode.Forms=="undefined"||SourceCode.Forms===null)&&(SourceCode.Forms={});(typeof SourceCode.Forms.Controls=="undefined"||SourceCode.Forms.Controls===null)&&(SourceCode.Forms.Controls={});(typeof SourceCode.Forms.Controls.Web=="undefined"||SourceCode.Forms.Controls.Web===null)&&(SourceCode.Forms.Controls.Web={});(typeof SourceCode.Forms.Controls.Web.ControlPack=="undefined"||SourceCode.Forms.Controls.Web.ControlPack===null)&&(SourceCode.Forms.Controls.Web.ControlPack={});var t={Metro:1,Breadcrumb:2};n.widget("sfc.SFCProgress",n.sfc.baseWidget,{DataSourceType:{Static:"Static",SmartObject:"SmartObject"},control:null,options:{controlWrapper:!1,controlWrapperClassName:"progress-dimensions-wrapper",render:!1,mode:t.Metro,style:SourceCode.Forms.Controls.Base.emptyStylesNode,dataSourceType:null,FixedListItems:null,DefaultSOProperty:"",displaySO:"",displayJoinProperty:"",displayMethod:"",displayTemplate:"",defaultValue:"",valueProperty:"",width:"100%",isEnabled:!0,isVisible:!0,userSelectable:!1,selectedId:null,inProgressId:null,previous:{}},_create:function(){return this.options.previous=n.extend({},this.options),this._applyControlWrapper(),this.initialize(),this.option("render",!0),this.base._create.apply(this,arguments),this},initialize:function(){let n=this.element.hasClass("designtime");this.base._booleanConverter(n)||this.options.mode===t.Metro&&this.initialize_Metro()},render:function(){switch(this.options.mode){case t.Metro:this.render_Metro()}},applyChanges:function(){this.options.render!==this.options.previous.render&&this.options.render===!0&&(this.render(),this.options.previous.render=this.options.render);this.options.userSelectable!==this.options.previous.userSelectable&&(this.setSelectable.call(this,this.options.userSelectable),this.options.previous.userSelectable=this.options.userSelectable);this.options.inProgressId!==this.options.previous.inProgressId&&(this.setStepState.call(this,this.options.inProgressId,ProgressStepState.inprogress,!0),this.options.previous.inProgressId=this.options.inProgressId);this.options.selectedId!==this.options.previous.selectedId&&(this.setSelectedStep.call(this,this.options.selectedId,this.options.previous.selectedId),this.options.previous.selectedId=this.options.selectedId);this.options.width!==this.options.previous.width&&(this.element[0].style.width=this.options.width.indexOf("%")>-1?this.options.width:parseInt(this.options.width)+"px",this.options.previous.width=this.options.width);this.base.applyChanges.apply(this,arguments)},onSetItems:function(n){this.options.mode===t.Metro&&this.setItems_Metro(n)},onExecuteMethod:function(q){var r=q.methodName.toUpperCase(),u=n("#{0}".format(q.CurrentControlId));switch(r){case"SETSTEPINPROGRESS":this.options.mode===t.Metro&&this.setStepState.call(this,q.methodParameters.stepid,ProgressStepState.inprogress,!1);break;case"SETSTEPCOMPLETE":this.options.mode===t.Metro&&this.setStepState.call(this,q.methodParameters.stepid,ProgressStepState.completed,!1);break;case"SETSTEPPAUSED":this.options.mode===t.Metro&&this.setStepState.call(this,q.methodParameters.stepid,ProgressStepState.paused,!1);break;case"SETSTEPERROR":this.options.mode===t.Metro&&this.setStepState.call(this,q.methodParameters.stepid,ProgressStepState.error,!1);break;case"SETSTEPNOTSTARTED":this.options.mode===t.Metro&&this.setStepState.call(this,q.methodParameters.stepid,ProgressStepState.empty,!1)}},_optionNameTransformer:function(n){n=n.toLowerCase();switch(n){case"controlwrapper":n="controlWrapper";break;case"controlerapperclassName":n="controlWrapperClassName";break;case"datasourcetype":n="dataSourceType";break;case"fixedlistitems":n="FixedListItems";break;case"defaultsoproperty":n="DefaultSOProperty";break;case"displayso":n="displaySO";break;case"displayjoinproperty":n="displayJoinProperty";break;case"displaymethod":n="displayMethod";break;case"displaytemplate":n="displayTemplate";break;case"valueproperty":n="valueProperty";break;case"userselectable":n="userSelectable";break;case"selectedid":n="selectedId";break;case"inprogressid":n="inProgressId";break;case"servercontroltype":n="serverControlType";break;case"associationso":n="associationSO";break;case"associationmethod":n="associationMethod";break;default:n=this.base._optionNameTransformer(n)}return n}});n.sfc.SFCProgress.prototype.base=n.sfc.baseWidget.prototype;n(document).ready(function(){var n=jQuery(".SFC.SourceCode-Forms-Controls-Web-ControlPack-ProgressControl").SFCProgress()});n.extend(n.sfc.SFCProgress.prototype,SourceCode.Forms.Controls.Web.ControlPack.ProgressWidget_Metro.prototype)})(jQuery);
/*!
 SourceCode.Forms.Controls.Web.ControlPack.Resources.Scripts.ProgressType.js (Embedded resource)
*/
(function(n){(typeof SourceCode=="undefined"||SourceCode===null)&&(SourceCode={});(typeof SourceCode.Forms=="undefined"||SourceCode.Forms===null)&&(SourceCode.Forms={});(typeof SourceCode.Forms.Controls=="undefined"||SourceCode.Forms.Controls===null)&&(SourceCode.Forms.Controls={});(typeof SourceCode.Forms.Controls.Web=="undefined"||SourceCode.Forms.Controls.Web===null)&&(SourceCode.Forms.Controls.Web={});(typeof SourceCode.Forms.Controls.Web.ControlPack=="undefined"||SourceCode.Forms.Controls.Web.ControlPack===null)&&(SourceCode.Forms.Controls.Web.ControlPack={});var t;SourceCode.Forms.Controls.Web.ControlPack.Progress=t=n.extend({},SourceCode.Forms.Controls.Base.ControlType,{_getInstance:function(n){let q=jQuery("#{0}".format(n));if(q.length===0)throw t.Properties.ControlResources.ControlNotFound.format(n);return q},setItems:function(n){t._getInstance(n.CurrentControlId).SFCProgress("onSetItems",n)},executeMethod:function(n){let q=t._getInstance(n.CurrentControlId);q.SFCProgress("onExecuteMethod",n)},getValue:function(n){var q=t._getInstance(n.CurrentControlId);return q.SFCProgress("getValue",n)},setValue:function(){throw t.Properties.ControlResources.NotImplemented;},getDefaultValue:function(n){var q=t._getInstance(n.CurrentControlId),r=q.SFCProgress("option","defaultvalue");if(r!==q)return r},getProperty:function(n){var q=t._getInstance(n.CurrentControlId),r=q.SFCProgress("option",n.property);if(r!==q)return r},setProperty:function(n){t._getInstance(n.CurrentControlId).SFCProgress("option",n.property,n.Value)},setControlName:function(n,t){n.find(".SFC").text(t)},designtimeEvent:function(n){EventUtil.manageControlEvent(n)},shouldDisplayProperty:function(n){return n.subDesignerType==="propertygrid"&&["ID"].indexOf(n.propertyId)>-1?!1:!0},setWidth:function(t,q){var r=n(t).find(".SFC");return SourceCode.Forms.Controls.Base.ControlType.setWidth(t,r,q,0),r.outerWidth(!0)}})})(jQuery);
